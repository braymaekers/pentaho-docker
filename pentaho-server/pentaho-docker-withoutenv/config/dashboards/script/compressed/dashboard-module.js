/*!
 * HITACHI VANTARA PROPRIETARY AND CONFIDENTIAL
 *
 * Copyright 2002 - 2017 Hitachi Vantara. All rights reserved.
 *
 * NOTICE: All information including source code contained herein is, and
 * remains the sole property of Hitachi Vantara and its licensors. The intellectual
 * and technical concepts contained herein are proprietary and confidential
 * to, and are trade secrets of Hitachi Vantara and may be covered by U.S. and foreign
 * patents, or patents in process, and are protected by trade secret and
 * copyright laws. The receipt or possession of this source code and/or related
 * information does not convey or imply any rights to reproduce, disclose or
 * distribute its contents, or to manufacture, use, or sell anything that it
 * may describe, in whole or in part. Any reproduction, modification, distribution,
 * or public display of this information without the express written authorization
 * from Hitachi Vantara is strictly prohibited and in violation of applicable laws and
 * international treaties. Access to the source code contained herein is strictly
 * prohibited to anyone except those individuals and entities who have executed
 * confidentiality and non-disclosure agreements or other agreements with Hitachi Vantara,
 * explicitly covering such access.
 */

/*!
 * jQuery JavaScript Library v1.12.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:17Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */

/*!
 * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*
  Based on Base.js 1.1a (c) 2006-2010, Dean Edwards
  Updated to pass JSHint and converted into a module by Kenneth Powers
  License: http://www.opensource.org/licenses/mit-license.php
*/

//! moment.js
//! version : 2.24.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*!
 * Copyright 2002 - 2018 Webdetails, a Hitachi Vantara company.  All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2017 Webdetails, a Hitachi Vantara company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*! Copyright 2010 Stanford Visualization Group, Mike Bostock, BSD license. */

/*! 793deacae920bf6616ca6389496fafdee68741ec */

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/* Copyright Google Inc.
 * Licensed under the Apache Licence Version 2.0
 * Autogenerated at Fri Aug 13 11:26:55 PDT 2010
 * @provides html4
 */

// Copyright (C) 2010 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/*!
 * Copyright 2002 - 2018 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2018 Webdetails, a Hitachi Vantara company. All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.1.1
 */

/*!
 * Copyright 2010 - 2017 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * Copyright 2010 - 2019 Hitachi Vantara.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * Copyright 2017-2018 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*!
 * Copyright 2010 - 2018 Hitachi Vantara. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/*
 * This program is free software; you can redistribute it and/or modify it under the
 * terms of the GNU Lesser General Public License, version 2.1 as published by the Free Software
 * Foundation.
 *
 * You should have received a copy of the GNU Lesser General Public License along with this
 * program; if not, you can obtain a copy at http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html
 * or from the Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * Copyright 2014 - 2019 Hitachi Vantara. All rights reserved.
 */

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*!
 * Copyright 2002 - 2019 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*! *
*
*  Base64 encode / decode
*  http://www.webtoolkit.info
*  http://www.webtoolkit.info/license
*
**/

/*!
 * Copyright 2018 Webdetails, a Hitachi Vantara company. All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//	|		console.log(c); // rgb('255','255','255')

/*!
 * Copyright 2010 - 2017 Hitachi Vantara.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

function pentahoAction(t,e,n,r,i){var o=getViewActionUrlAndQuery(t,e,n,r);return pentahoPost(o.url,o.query,i)}function getViewActionUrl(t,e,n,r){var i=getViewActionUrlAndQuery(t,e,n,r);return i.url+"?"+i.query}function getViewActionUrlAndQuery(t,e,n,r){var i=CONTEXT_PATH+"ViewAction",o="wrapper=false&solution="+t+"&path="+e+"&action="+n;if(r){var a;for(a=0;a<r.length;a++)o+="&"+encodeURIComponent(r[a][0])+"="+encodeURIComponent(r[a][1])}var s={};return s.url=i,s.query=o,s}function pentahoService(t,e,n,r){var i=CONTEXT_PATH+"ServiceAction",o="ajax=true&";if(t&&(o+="component="+t+"&"),e){var a;for(a=0;a<e.length;a++)o+="&"+encodeURIComponent(e[a][0])+"="+encodeURIComponent(e[a][1])}return pentahoPost(i,o,n,r)}function pentahoGet(t,e,n,r){var i=void 0!=n&&null!=n,o=null,a="text/xml";if(r&&(a=r),window.XMLHttpRequest)o=new XMLHttpRequest,o.overrideMimeType&&o.overrideMimeType(a);else if(window.ActiveXObject)try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){o=null}}if(!o)throw new Error("Cannot create an XMLHTTP instance");return i&&(o.onreadystatechange=function(){pentahoResponse(o,n)}),o.open("GET",t+"?"+e,i),o.send(null),i?null:getResponse(o)}function getUnauthorizedMsg(){return"<web-service><unauthorized/></web-service>"}function getNotFoundMsg(){return"<web-service><not-found/></web-service>"}function pentahoPost(t,e,n,r){var i=void 0!=n&&null!=n,o=null,a="text/xml";if(r&&(a=r),window.XMLHttpRequest)o=new XMLHttpRequest,o.overrideMimeType&&o.overrideMimeType(a);else if(window.ActiveXObject)try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){o=null}}if(!o)throw new Error("Cannot create XMLHTTP instance");return i&&(o.onreadystatechange=function(){pentahoResponse(o,n)}),o.open("POST",t,i),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(e),i?null:getResponse(o)}function pentahoResponse(http_request,func){if(http_request.readyState==COMPLETE)try{var content=getResponse(http_request),debugPath="";if("function"==typeof func)debugPath="function",func(content);else if("object"==typeof func&&void 0!=func.obj)debugPath="object",func.method.call(func.obj,content);else{if("string"!=typeof func)throw new Error("Invalid state in pentahoResponse, unrecognized callback function.");debugPath="string",eval(func+"( content );")}}catch(t){throw"undefined"!=typeof console&&console.log("callback function type was "+debugPath),alert("pentaho-ajax.js.pentahoResponse(): "+t),t}}function getResponse(t){switch(t.status){case STATUS_OK:return t.responseText;case STATUS_UNAUTHORIZED:return getUnauthorizedMsg();case STATUS_NOT_FOUND:return getNotFoundMsg();default:return null}}function callSetter(object,name,value){if(trace){var objectName=object?object.type?object.type:""+object:"null",valueName=value?value.type?value.type:""+value:"null";trace.push("callSetter "+name+" in "+objectName+" to "+valueName+"\n")}var method=name.charAt(0).toUpperCase()+name.substring(1),worked=!1,js1="object.add"+method+"(value)",js2="object.set"+method+"(value)";try{eval(js1),worked=!0}catch(t){}if(!worked){try{eval(js2),worked=!0}catch(t){}worked||(trace&&trace.push("Statement failed: "+name+"\nObject: "+object.type+"\nValue: "+value+"\n"),object.type?alert("Statement failed: "+name+"\nObject: "+object.type+"\nValue: "+value):alert("Statement failed: "+name+"\nObject: "+object+"\nValue: "+value))}}function setObjectProperties(t,e,n){var r=n;if(trace){var i=t?t.type?t.type:""+t:"null";trace.push("setObjectProperties on object "+i+"\n")}r=n.properties;for(propName in r){var o=r[propName];o&&o.type?callSetter(t,propName,createObject(propName,o)):callSetter(t,propName,o)}}function setArrayProperties(t,e,n){if(trace){var r=t?t.type?t.type:""+t:"null";trace.push("setObjectProperties array on object "+r+"\n")}var i;for(items=n.items,i=0;i<items.length;i++){var o=items[i];if("object"==getJsonObjectType(o)){var a=getJsonObjectName(o);callSetter(t,a,createObject(a,o[a]))}}}function getJsonObjectType(t){if(!t)return trace&&trace.push("getJsonObjectType: null object type\n"),"null";var e=getJsonObjectName(t);return t[e]&&t[e].type?(trace&&trace.push("getJsonObjectType: "+t[e].type+"\n"),t[e].type):(trace&&trace.push("getJsonObjectType: unknown\n"),"unknown")}function getObject(t){var e=getJsonObjectName(t);return null==e?(trace&&trace.push("getObject: null object name\n"),null):(trace&&trace.push("getObject: "+e+"\n"),createObject(e,t))}function createObject(name,json){jsonDebug&&alert("creating object for node: "+name),trace&&trace.push("createObject for "+name+"\n");try{var char=name.charAt(0),objectName=char.toUpperCase()+name.substring(1),object=eval("new "+objectName+"()");return"object"==json.type?setObjectProperties(object,name,json):"array"==json.type&&setArrayProperties(object,name,json),object}catch(t){alert("Could not create object of type: "+objectName+"\nMessage: "+t)}return null}function getJsonObjectName(t){if("object"!=typeof t)return trace&&trace.push("getJsonObjectName: non-object\n"),null;var e=0;for(x in t)e++;if(1!=e)return trace&&trace.push("getJsonObjectName: too many properties\n"),null;for(name in t)return trace&&trace.push("getJsonObjectName: returning "+name+"\n"),name;return trace&&trace.push("getJsonObjectName: no properties\n"),null}function Dashboard(){this.type="Dashboard",this.title="",this.heading="",this.templateRef="",this.themeRef="",this.documentation=null,this.widgets=new Widgets,this.dashboardParameters=null,this.globalRefreshPeriod=null,this.enableWidgetPrinting=!1,this.setTitle=function(t){this.title=t},this.getTitle=function(){return this.title},this.setHeading=function(t){this.heading=t},this.getHeading=function(){return this.heading},this.setGlobalRefresh=function(t){this.globalRefreshPeriod=t},this.getGlobalRefresh=function(){return this.globalRefreshPeriod},this.setEnableWidgetPrinting=function(t){this.enableWidgetPrinting=t},this.getEnableWidgetPrinting=function(){return this.enableWidgetPrinting},this.setTemplateRef=function(t){this.templateRef=t},this.getTemplateRef=function(){return this.templateRef},this.setThemeRef=function(t){this.themeRef=t},this.getThemeRef=function(){return this.themeRef},this.setDocumentation=function(t){this.documentation=t},this.getDocumentation=function(){return this.documentation},this.addWidget=function(t){this.widgets.addWidget(t)},this.setWidgets=function(t){this.widgets=null==t?new Widgets:t},this.setDashboardParameters=function(t){this.dashboardParameters=t};var t=function(e,n){var r;for(var i in n){r=i;break}for(var o in n[r].properties)if(o&&""!==o&&"parentId"!=o&&"id"!=o){var a=n[r].properties[o];if(null==a||"flex"==o&&!a)continue;"string"==typeof a&&(a=PentahoDashboardController.xmlEncode(a));var s=e.indexOf("<"+r+' id="'+n[r].properties.id+'"');if(s>=0){var l=e.indexOf(">",s);"/"==e.charAt(l-1)&&l--;var u=e.indexOf(o+'="',s);if(u<l&&u>-1){var c=e.indexOf('"',u+(o.length+2)),h=e.substring(c);e=e.substring(0,u+(o.length+2))+a+h}else{var h=e.substring(l);e=e.substring(0,l)+" "+o+'="'+a+'" '+h}}else e=e.substring(0,e.indexOf("</overlay>"))+'<box id="'+n[r].properties.id+'" '+o+'="'+a+'"/></overlay>'}for(var d=0;d<n[r].items.length;d++){var f=n[r].items[d];for(var i in f){i;break}e=t(e,f)}return e};this.createOverlay=function(){for(var e=overlayXml,n=0;n<xulDomJson.window.items.length;n++)e=t(e,xulDomJson.window.items[n]);return e},this.asXml=function(t){var e="<dashboard>\n<title>"+PentahoDashboardController.xmlEncode(this.title)+"</title>\n<heading>"+PentahoDashboardController.xmlEncode(this.heading)+"</heading>\n<enableWidgetPrinting>"+this.getEnableWidgetPrinting()+"</enableWidgetPrinting>\n";this.globalRefreshPeriod&&(e+="<globalRefresh>"+this.globalRefreshPeriod+"</globalRefresh>\n"),this.documentation&&(e+=this.documentation.asXml()),e+="<template-ref>"+this.templateRef+"</template-ref>\n<theme-ref>"+this.themeRef+"</theme-ref>\n<layout>\n"+this.createOverlay()+"\n</layout>\n",this.dashboardParameters&&(e+=this.dashboardParameters.asXml(t));var n,r,i,o,a,s,l,u,c,h,d,f,p,m,g=dashboardWidgets.length,y=[];for(n=0;n<g;n++){if(r=dashboardWidgets[n],o=r.ignoreFields||[],o=o.concat(["dashboard","_callbacks","_events"]))for(a=o.length,i=0;i<a;i++)s=o[i],(l=r[s])&&(y.push({obj:r,field:s,value:l}),delete r[s]);if(u=r.parameters){for(c=u.length,p={},i=0;i<c;i++)h=u[i],d=h[1],f=""===d||"NIL"===d?h[2]||"":t.getParameterValue(d)||"",$.isArray(f)&&(f=f.join("|")),p["parameter"+i]={name:h[0],var:d,const:f};r.parameters=p}if(m=r.outputParameters){for(c=m.length,p={},i=0;i<c;i++)h=m[i],p["parameter"+i]={name:h[0],enabled:h[1],id:h.length>2?h[2]:h[0]};r.outputParameters=p}e+="<widget><![CDATA[",0===r.name.indexOf("widget")?e+=encodeURIComponent(JSON.stringify([r])):e+=encodeURIComponent("["+serializeToJson(r)+"]"),e+="]]></widget>\n",r.parameters=u,r.outputParameters=m}for(e+="<widgetJavascript><![CDATA[",e+=encodeURIComponent(serializeToJson(dashboardWidgets)),e+="]]></widgetJavascript>\n",e+="</dashboard>\n",n=0;n<y.length;n++)s=y[n],s.obj[s.field]=s.value;return e}}function serializeToJson(t){return JSON.stringify(t)}function DashboardParameters(){this.dashboardParameters=new Array,this.addDashboardParameter=function(t){this.dashboardParameters.push(t)},this.getDashboardParameters=function(){return this.dashboardParameters},this.asXml=function(t){for(var e="<parameters>\n",n=0;n<this.dashboardParameters.length;n++)e+=this.dashboardParameters[n].asXml(t);return e+="</parameters>\n"}}function DashboardParameter(){this.type="DashboardParameter",this.name="",this.defaultValue="",this.setName=function(t){this.name=t},this.setDefaultValue=function(t){this.defaultValue=t},this.asXml=function(t){for(var e="",n=null,r=0;r<t.components.length;r++)if(t.components[r].parameter==this.name){n=t.components[r];break}if(null!=n&&n.useFirstValue);else if(n&&n.defaultValue)e=n.defaultValue;else{var i=t.getParameterValue(this.name);if("object"==typeof i&&i.length)for(var r=0;r<i.length;r++)r>0&&(e+="|"),e+=i[r];else e=""+i}return"<parameter>\n  <name>"+this.name+"</name>\n  <defaultValue>"+PentahoDashboardController.xmlEncode(e)+"</defaultValue>\n</parameter>\n"}}function Documentation(){this.type="Documentation",this.author="",this.description="",this.icon="",this.setAuthor=function(t){this.author=t},this.setDescription=function(t){this.description=t},this.setIcon=function(t){this.icon=t},this.asXml=function(){return"<documentation>\n<author>"+this.author+"</author>\n<description>"+this.description+"</description>\n<icon>"+this.icon+"</icon>\n</documentation>\n"}}function Widgets(){this.widgets=new Array,this.addWidget=function(t){this.widgets.push(t)}}function Templates(){this.templates=new Array,this.addTemplate=function(t){this.templates.push(t)},this.getTemplateCount=function(){return this.templates.length},this.getTemplate=function(t){return t<this.getTemplateCount()?this.templates[t]:null}}function Template(){this.name="",this.path="",this.thumbnail="",this.themeType="",this.setName=function(t){this.name=t},this.getName=function(){return this.name},this.setPath=function(t){this.path=t},this.getPath=function(){return this.path},this.setThumbnail=function(t){this.thumbnail=t},this.getThumbnail=function(){return this.thumbnail},this.setThemes=function(t){this.themeType=t},this.getThemes=function(){return this.themeType}}function Themes(){this.themes=new Array,this.addTheme=function(t){this.themes.push(t)},this.setTheme=function(t){this.themes.push(t)},this.getThemeCount=function(){return this.themes.length},this.getTheme=function(t){return t<this.getThemeCount()?this.themes[t]:null}}function Theme(){this.name="",this.path="",this.thumbnail="",this.setName=function(t){this.name=t},this.getName=function(){return this.name},this.setPath=function(t){this.path=t},this.getPath=function(){return this.path},this.setThumbnail=function(t){this.thumbnail=t},this.getThumbnail=function(){return this.thumbnail}}function Grid(){this.type="Grid",this.columns=new Columns,this.rows=new Rows,this.coords=new Coords,this.setColumns=function(t){this.columns=t,alert(t.type)},this.setRows=function(t){this.rows=t},this.getColumns=function(){return this.columns.getColumns()},this.getRows=function(){return this.rows.getRows()}}function Columns(){this.type="Columns",this.columns=new Array,this.setColumn=function(t){this.addColumn(t)},this.addColumn=function(t){this.columns.push(t)},this.getColumns=function(){return this.columns}}function Rows(){this.type="Rows",this.rows=new Array,this.setRow=function(t){this.addRow(t)},this.addRow=function(t){this.rows.push(t)},this.getRows=function(){return this.rows},this.getRow=function(t){return this.rows[t]}}function Row(){this.type="Row",this.height=-1,this.flex=-1,this.children=new Array,this.pixelHeight=-1,this.top=-1,this.getHeight=function(){return this.height},this.getFlex=function(){return this.flex},this.setHeight=function(t){this.height=t},this.setFlex=function(t){this.flex=t},this.getFixedHeight=function(){return-1!=this.height?this.height:0},this.getPixelHeight=function(t,e){return-1!=this.flex?t*this.flex/e:this.height},this.setBox=function(t){this.addBox(t)},this.addBox=function(t){this.children.push(t)},this.setGrid=function(t){this.addGrid(t)},this.addGrid=function(t){this.children.push(t)},this.getChildren=function(){return this.children}}function Column(){this.type="Column",this.width=-1,this.flex=-1,this.pixelWidth=-1,this.top=-1,this.getWidth=function(){return this.width},this.getFlex=function(){return this.flex},this.setWidth=function(t){this.width=t},this.setFlex=function(t){this.flex=t},this.getFixedWidth=function(){return-1!=this.width?this.width:0},this.getPixelWidth=function(t,e){return-1!=this.flex?t*this.flex/e:this.width},this.setBogus=function(t){}}function Box(){this.type="Box",this.id="",this.coords=new Coords,this.offsetTop=0,this.offsetLeft=0,this.offsetBottom=0,this.offsetRight=0,this.boxId="",this.titleId="",this.containerId="",this.setId=function(t){this.id=t},this.setTitleId=function(t){this.titleId=t},this.setContainerId=function(t){this.containerId=t},this.setBoxId=function(t){this.boxId=t},this.setOffsetTop=function(t){this.offsetTop=t},this.setOffsetLeft=function(t){this.offsetLeft=t},this.setOffsetBottom=function(t){this.offsetBottom=t},this.setOffsetRight=function(t){this.offsetRight=t}}function Coords(){this.type="Coords",this.top=-1,this.left=-1,this.width=-1,this.height=-1,this.right=-1,this.bottom=-1}var COMPLETE=4,STATUS_OK=200,STATUS_UNAUTHORIZED=401,STATUS_NOT_FOUND=404;define("dashboards/pentaho-ajax",function(){}),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=dt.type(t);return"function"!==n&&!dt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,n){if(dt.isFunction(e))return dt.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return dt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(xt.test(e))return dt.filter(e,t,n);e=dt.filter(e,t)}return dt.grep(t,function(t){return dt.inArray(t,e)>-1!==n})}function i(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function o(t){var e={};return dt.each(t.match(Mt)||[],function(t,n){e[n]=!0}),e}function a(){rt.addEventListener?(rt.removeEventListener("DOMContentLoaded",s),t.removeEventListener("load",s)):(rt.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(rt.addEventListener||"load"===t.event.type||"complete"===rt.readyState)&&(a(),dt.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var r="data-"+e.replace(jt,"-$1").toLowerCase();if("string"==typeof(n=t.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Pt.test(n)?dt.parseJSON(n):n)}catch(t){}dt.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!dt.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,n,r){if(At(t)){var i,o,a=dt.expando,s=t.nodeType,l=s?dt.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=nt.pop()||dt.guid++:a),l[u]||(l[u]=s?{}:{toJSON:dt.noop}),"object"!=typeof e&&"function"!=typeof e||(r?l[u]=dt.extend(l[u],e):l[u].data=dt.extend(l[u].data,e)),o=l[u],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[dt.camelCase(e)]=n),"string"==typeof e?null==(i=o[e])&&(i=o[dt.camelCase(e)]):i=o,i}}function h(t,e,n){if(At(t)){var r,i,o=t.nodeType,a=o?dt.cache:t,s=o?t[dt.expando]:dt.expando;if(a[s]){if(e&&(r=n?a[s]:a[s].data)){dt.isArray(e)?e=e.concat(dt.map(e,dt.camelCase)):e in r?e=[e]:(e=dt.camelCase(e),e=e in r?[e]:e.split(" ")),i=e.length;for(;i--;)delete r[e[i]];if(n?!u(r):!dt.isEmptyObject(r))return}(n||(delete a[s].data,u(a[s])))&&(o?dt.cleanData([t],!0):ht.deleteExpando||a!=a.window?delete a[s]:a[s]=void 0)}}}function d(t,e,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return dt.css(t,e,"")},l=s(),u=n&&n[3]||(dt.cssNumber[e]?"":"px"),c=(dt.cssNumber[e]||"px"!==u&&+l)&&It.exec(dt.css(t,e));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{o=o||".5",c/=o,dt.style(t,e,c+u)}while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function f(t){var e=Ut.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function p(t,e){var n,r,i=0,o=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(r=n[i]);i++)!e||dt.nodeName(r,e)?o.push(r):dt.merge(o,p(r,e));return void 0===e||e&&dt.nodeName(t,e)?dt.merge([t],o):o}function m(t,e){for(var n,r=0;null!=(n=t[r]);r++)dt._data(n,"globalEval",!e||dt._data(e[r],"globalEval"))}function g(t){Ft.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e,n,r,i){for(var o,a,s,l,u,c,h,d=t.length,y=f(e),v=[],b=0;b<d;b++)if((a=t[b])||0===a)if("object"===dt.type(a))dt.merge(v,a.nodeType?[a]:a);else if(qt.test(a)){for(l=l||y.appendChild(e.createElement("div")),u=(Bt.exec(a)||["",""])[1].toLowerCase(),h=Vt[u]||Vt._default,l.innerHTML=h[1]+dt.htmlPrefilter(a)+h[2],o=h[0];o--;)l=l.lastChild;if(!ht.leadingWhitespace&&Wt.test(a)&&v.push(e.createTextNode(Wt.exec(a)[0])),!ht.tbody)for(a="table"!==u||zt.test(a)?"<table>"!==h[1]||zt.test(a)?0:l:l.firstChild,o=a&&a.childNodes.length;o--;)dt.nodeName(c=a.childNodes[o],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(dt.merge(v,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=y.lastChild}else v.push(e.createTextNode(a));for(l&&y.removeChild(l),ht.appendChecked||dt.grep(p(v,"input"),g),b=0;a=v[b++];)if(r&&dt.inArray(a,r)>-1)i&&i.push(a);else if(s=dt.contains(a.ownerDocument,a),l=p(y.appendChild(a),"script"),s&&m(l),n)for(o=0;a=l[o++];)Ht.test(a.type||"")&&n.push(a);return l=null,y}function v(){return!0}function b(){return!1}function _(){try{return rt.activeElement}catch(t){}}function w(t,e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=void 0);for(s in e)w(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=b;else if(!i)return t;return 1===o&&(a=i,i=function(t){return dt().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=dt.guid++)),t.each(function(){dt.event.add(this,e,i,r,n)})}function x(t,e){return dt.nodeName(t,"table")&&dt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function C(t){return t.type=(null!==dt.find.attr(t,"type"))+"/"+t.type,t}function S(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function k(t,e){if(1===e.nodeType&&dt.hasData(t)){var n,r,i,o=dt._data(t),a=dt._data(e,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;r<i;r++)dt.event.add(e,n,s[n][r])}a.data&&(a.data=dt.extend({},a.data))}}function D(t,e){var n,r,i;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ht.noCloneEvent&&e[dt.expando]){i=dt._data(e);for(r in i.events)dt.removeEvent(e,r,i.handle);e.removeAttribute(dt.expando)}"script"===n&&e.text!==t.text?(C(e).text=t.text,S(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ht.html5Clone&&t.innerHTML&&!dt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Ft.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}}function M(t,e,n,r){e=ot.apply([],e);var i,o,a,s,l,u,c=0,h=t.length,d=h-1,f=e[0],m=dt.isFunction(f);if(m||h>1&&"string"==typeof f&&!ht.checkClone&&ee.test(f))return t.each(function(i){var o=t.eq(i);m&&(e[0]=f.call(this,i,o.html())),M(o,e,n,r)});if(h&&(u=y(e,t[0].ownerDocument,!1,t,r),i=u.firstChild,1===u.childNodes.length&&(u=i),i||r)){for(s=dt.map(p(u,"script"),C),a=s.length;c<h;c++)o=u,c!==d&&(o=dt.clone(o,!0,!0),a&&dt.merge(s,p(o,"script"))),n.call(t[c],o,c);if(a)for(l=s[s.length-1].ownerDocument,dt.map(s,S),c=0;c<a;c++)o=s[c],Ht.test(o.type||"")&&!dt._data(o,"globalEval")&&dt.contains(l,o)&&(o.src?dt._evalUrl&&dt._evalUrl(o.src):dt.globalEval((o.text||o.textContent||o.innerHTML||"").replace(re,"")));u=i=null}return t}function N(t,e,n){for(var r,i=e?dt.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||dt.cleanData(p(r)),r.parentNode&&(n&&dt.contains(r.ownerDocument,r)&&m(p(r,"script")),r.parentNode.removeChild(r));return t}function T(t,e){var n=dt(e.createElement(t)).appendTo(e.body),r=dt.css(n[0],"display");return n.detach(),r}function A(t){var e=rt,n=se[t];return n||(n=T(t,e),"none"!==n&&n||(ae=(ae||dt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(ae[0].contentWindow||ae[0].contentDocument).document,e.write(),e.close(),n=T(t,e),ae.detach()),se[t]=n),n}function P(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function j(t){if(t in xe)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=we.length;n--;)if((t=we[n]+e)in xe)return t}function O(t,e){for(var n,r,i,o=[],a=0,s=t.length;a<s;a++)r=t[a],r.style&&(o[a]=dt._data(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Lt(r)&&(o[a]=dt._data(r,"olddisplay",A(r.nodeName)))):(i=Lt(r),(n&&"none"!==n||!i)&&dt._data(r,"olddisplay",i?n:dt.css(r,"display"))));for(a=0;a<s;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function I(t,e,n){var r=ve.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function E(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=dt.css(t,n+Et[o],!0,i)),r?("content"===n&&(a-=dt.css(t,"padding"+Et[o],!0,i)),"margin"!==n&&(a-=dt.css(t,"border"+Et[o]+"Width",!0,i))):(a+=dt.css(t,"padding"+Et[o],!0,i),"padding"!==n&&(a+=dt.css(t,"border"+Et[o]+"Width",!0,i)));return a}function L(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=de(t),a=ht.boxSizing&&"border-box"===dt.css(t,"boxSizing",!1,o);if(i<=0||null==i){if(i=fe(t,e,o),(i<0||null==i)&&(i=t.style[e]),ue.test(i))return i;r=a&&(ht.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+E(t,e,n||(a?"border":"content"),r,o)+"px"}function R(t,e,n,r,i){return new R.prototype.init(t,e,n,r,i)}function F(){return t.setTimeout(function(){Ce=void 0}),Ce=dt.now()}function B(t,e){var n,r={height:t},i=0;for(e=e?1:0;i<4;i+=2-e)n=Et[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function H(t,e,n){for(var r,i=(V.tweeners[e]||[]).concat(V.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function W(t,e,n){var r,i,o,a,s,l,u,c=this,h={},d=t.style,f=t.nodeType&&Lt(t),p=dt._data(t,"fxshow");n.queue||(s=dt._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,dt.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=dt.css(t,"display"),"inline"===("none"===u?dt._data(t,"olddisplay")||A(t.nodeName):u)&&"none"===dt.css(t,"float")&&(ht.inlineBlockNeedsLayout&&"inline"!==A(t.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ht.shrinkWrapBlocks()||c.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],ke.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!p||void 0===p[r])continue;f=!0}h[r]=p&&p[r]||dt.style(t,r)}else u=void 0;if(dt.isEmptyObject(h))"inline"===("none"===u?A(t.nodeName):u)&&(d.display=u);else{p?"hidden"in p&&(f=p.hidden):p=dt._data(t,"fxshow",{}),o&&(p.hidden=!f),f?dt(t).show():c.done(function(){dt(t).hide()}),c.done(function(){var e;dt._removeData(t,"fxshow");for(e in h)dt.style(t,e,h[e])});for(r in h)a=H(f?p[r]:0,r,c),r in p||(p[r]=a.start,f&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function U(t,e){var n,r,i,o,a;for(n in t)if(r=dt.camelCase(n),i=e[r],o=t[n],dt.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=dt.cssHooks[r])&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function V(t,e,n){var r,i,o=0,a=V.prefilters.length,s=dt.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=Ce||F(),n=Math.max(0,u.startTime+u.duration-e),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;a<l;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),o<1&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:dt.extend({},e),opts:dt.extend(!0,{specialEasing:{},easing:dt.easing._default},n),originalProperties:e,originalOptions:n,startTime:Ce||F(),duration:n.duration,tweens:[],createTween:function(e,n){var r=dt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(U(c,u.opts.specialEasing);o<a;o++)if(r=V.prefilters[o].call(u,t,c,u.opts))return dt.isFunction(r.stop)&&(dt._queueHooks(u.elem,u.opts.queue).stop=dt.proxy(r.stop,r)),r;return dt.map(c,H,u),dt.isFunction(u.opts.start)&&u.opts.start.call(t,u),dt.fx.timer(dt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function q(t){return dt.attr(t,"class")||""}function z(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(Mt)||[];if(dt.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function $(t,e,n,r){function i(s){var l;return o[s]=!0,dt.each(t[s]||[],function(t,s){var u=s(e,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=t===Xe;return i(e.dataTypes[0])||!o["*"]&&i("*")}function G(t,e){var n,r,i=dt.ajaxSettings.flatOptions||{};for(r in e)void 0!==e[r]&&((i[r]?t:n||(n={}))[r]=e[r]);return n&&dt.extend(!0,t,n),t}function Y(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}function Q(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function X(t){return t.style&&t.style.display||dt.css(t,"display")}function K(t){if(!dt.contains(t.ownerDocument||rt,t))return!0;for(;t&&1===t.nodeType;){if("none"===X(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function J(t,e,n,r){var i;if(dt.isArray(e))dt.each(e,function(e,i){n||en.test(t)?r(t,i):J(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==dt.type(e))r(t,e);else for(i in e)J(t+"["+i+"]",e[i],n,r)}function Z(){try{return new t.XMLHttpRequest}catch(t){}}function tt(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function et(t){return dt.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var nt=[],rt=t.document,it=nt.slice,ot=nt.concat,at=nt.push,st=nt.indexOf,lt={},ut=lt.toString,ct=lt.hasOwnProperty,ht={},dt=function(t,e){return new dt.fn.init(t,e)},ft=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pt=/^-ms-/,mt=/-([\da-z])/gi,gt=function(t,e){return e.toUpperCase()};dt.fn=dt.prototype={jquery:"1.12.4",constructor:dt,selector:"",length:0,toArray:function(){return it.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:it.call(this)},pushStack:function(t){var e=dt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return dt.each(this,t)},map:function(t){return this.pushStack(dt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:at,sort:nt.sort,splice:nt.splice},dt.extend=dt.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||dt.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(i=arguments[s]))for(r in i)t=a[r],n=i[r],a!==n&&(u&&n&&(dt.isPlainObject(n)||(e=dt.isArray(n)))?(e?(e=!1,o=t&&dt.isArray(t)?t:[]):o=t&&dt.isPlainObject(t)?t:{},a[r]=dt.extend(u,o,n)):void 0!==n&&(a[r]=n));return a},dt.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===dt.type(t)},isArray:Array.isArray||function(t){return"array"===dt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){var e=t&&t.toString();return!dt.isArray(t)&&e-parseFloat(e)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==dt.type(t)||t.nodeType||dt.isWindow(t))return!1;try{if(t.constructor&&!ct.call(t,"constructor")&&!ct.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(!ht.ownFirst)for(e in t)return ct.call(t,e);for(e in t);return void 0===e||ct.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?lt[ut.call(t)]||"object":typeof t},globalEval:function(e){e&&dt.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(pt,"ms-").replace(mt,gt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var r,i=0;if(n(t))for(r=t.length;i<r&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(ft,"")},makeArray:function(t,e){var r=e||[]
;return null!=t&&(n(Object(t))?dt.merge(r,"string"==typeof t?[t]:t):at.call(r,t)),r},inArray:function(t,e,n){var r;if(e){if(st)return st.call(e,t,n);for(r=e.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;)t[i++]=e[r++];if(n!==n)for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,r){var i,o,a=0,s=[];if(n(t))for(i=t.length;a<i;a++)null!=(o=e(t[a],a,r))&&s.push(o);else for(a in t)null!=(o=e(t[a],a,r))&&s.push(o);return ot.apply([],s)},guid:1,proxy:function(t,e){var n,r,i;if("string"==typeof e&&(i=t[e],e=t,t=i),dt.isFunction(t))return n=it.call(arguments,2),r=function(){return t.apply(e||this,n.concat(it.call(arguments)))},r.guid=t.guid=t.guid||dt.guid++,r},now:function(){return+new Date},support:ht}),"function"==typeof Symbol&&(dt.fn[Symbol.iterator]=nt[Symbol.iterator]),dt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){lt["[object "+e+"]"]=e.toLowerCase()});var yt=function(t){function e(t,e,n,r){var i,o,a,s,u,h,d,f,p=e&&e.ownerDocument,m=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==m&&9!==m&&11!==m)return n;if(!r&&((e?e.ownerDocument||e:F)!==A&&T(e),e=e||A,j)){if(11!==m&&(h=mt.exec(t)))if(i=h[1]){if(9===m){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&L(e,a)&&a.id===i)return n.push(a),n}else{if(h[2])return X.apply(n,e.getElementsByTagName(t)),n;if((i=h[3])&&b.getElementsByClassName&&e.getElementsByClassName)return X.apply(n,e.getElementsByClassName(i)),n}if(b.qsa&&!V[t+" "]&&(!O||!O.test(t))){if(1!==m)p=e,f=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(yt,"\\$&"):e.setAttribute("id",s=R),d=C(t),o=d.length,u=ct.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=u+" "+c(d[o]);f=d.join(","),p=gt.test(t)&&l(e.parentNode)||e}if(f)try{return X.apply(n,p.querySelectorAll(f)),n}catch(t){}finally{s===R&&e.removeAttribute("id")}}}return k(t.replace(ot,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[R]=!0,t}function i(t){var e=A.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=n.length;r--;)_.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||z)-(~t.sourceIndex||z);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function c(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function h(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=H++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,u,c=[B,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[R]||(e[R]={}),l=u[e.uniqueID]||(u[e.uniqueID]={}),(s=l[r])&&s[0]===B&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=t(e,n,a))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function f(t,n,r){for(var i=0,o=n.length;i<o;i++)e(t,n[i],r);return r}function p(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function m(t,e,n,i,o,a){return i&&!i[R]&&(i=m(i)),o&&!o[R]&&(o=m(o,a)),r(function(r,a,s,l){var u,c,h,d=[],m=[],g=a.length,y=r||f(e||"*",s.nodeType?[s]:s,[]),v=!t||!r&&e?y:p(y,d,t,s,l),b=n?o||(r?t:g||i)?[]:a:v;if(n&&n(v,b,s,l),i)for(u=p(b,m),i(u,[],s,l),c=u.length;c--;)(h=u[c])&&(b[m[c]]=!(v[m[c]]=h));if(r){if(o||t){if(o){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(v[c]=h);o(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=o?J(r,h):d[c])>-1&&(r[u]=!(a[u]=h))}}else b=p(b===a?b.splice(g,b.length):b),o?o(null,a,b,l):X.apply(a,b)})}function g(t){for(var e,n,r,i=t.length,o=_.relative[t[0].type],a=o||_.relative[" "],s=o?1:0,l=h(function(t){return t===e},a,!0),u=h(function(t){return J(e,t)>-1},a,!0),f=[function(t,n,r){var i=!o&&(r||n!==D)||((e=n).nodeType?l(t,n,r):u(t,n,r));return e=null,i}];s<i;s++)if(n=_.relative[t[s].type])f=[h(d(f),n)];else{if(n=_.filter[t[s].type].apply(null,t[s].matches),n[R]){for(r=++s;r<i&&!_.relative[t[r].type];r++);return m(s>1&&d(f),s>1&&c(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(ot,"$1"),n,s<r&&g(t.slice(s,r)),r<i&&g(t=t.slice(r)),r<i&&c(t))}f.push(n)}return d(f)}function y(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,l,u){var c,h,d,f=0,m="0",g=r&&[],y=[],v=D,b=r||o&&_.find.TAG("*",u),w=B+=null==v?1:Math.random()||.1,x=b.length;for(u&&(D=a===A||a||u);m!==x&&null!=(c=b[m]);m++){if(o&&c){for(h=0,a||c.ownerDocument===A||(T(c),s=!j);d=t[h++];)if(d(c,a||A,s)){l.push(c);break}u&&(B=w)}i&&((c=!d&&c)&&f--,r&&g.push(c))}if(f+=m,i&&m!==f){for(h=0;d=n[h++];)d(g,y,a,s);if(r){if(f>0)for(;m--;)g[m]||y[m]||(y[m]=Y.call(l));y=p(y)}X.apply(l,y),u&&!r&&y.length>0&&f+n.length>1&&e.uniqueSort(l)}return u&&(B=w,D=v),g};return i?r(a):a}var v,b,_,w,x,C,S,k,D,M,N,T,A,P,j,O,I,E,L,R="sizzle"+1*new Date,F=t.document,B=0,H=0,W=n(),U=n(),V=n(),q=function(t,e){return t===e&&(N=!0),0},z=1<<31,$={}.hasOwnProperty,G=[],Y=G.pop,Q=G.push,X=G.push,K=G.slice,J=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",rt=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",it=new RegExp(tt+"+","g"),ot=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),at=new RegExp("^"+tt+"*,"+tt+"*"),st=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),lt=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),ut=new RegExp(rt),ct=new RegExp("^"+et+"$"),ht={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,yt=/'|\\/g,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),bt=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},_t=function(){T()};try{X.apply(G=K.call(F.childNodes),F.childNodes),G[F.childNodes.length].nodeType}catch(t){X={apply:G.length?function(t,e){Q.apply(t,K.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}b=e.support={},x=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},T=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:F;return r!==A&&9===r.nodeType&&r.documentElement?(A=r,P=A.documentElement,j=!x(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",_t,!1):n.attachEvent&&n.attachEvent("onunload",_t)),b.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=i(function(t){return t.appendChild(A.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=pt.test(A.getElementsByClassName),b.getById=i(function(t){return P.appendChild(t).id=R,!A.getElementsByName||!A.getElementsByName(R).length}),b.getById?(_.find.ID=function(t,e){if(void 0!==e.getElementById&&j){var n=e.getElementById(t);return n?[n]:[]}},_.filter.ID=function(t){var e=t.replace(vt,bt);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(vt,bt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=b.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},_.find.CLASS=b.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&j)return e.getElementsByClassName(t)},I=[],O=[],(b.qsa=pt.test(A.querySelectorAll))&&(i(function(t){P.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||O.push("\\["+tt+"*(?:value|"+Z+")"),t.querySelectorAll("[id~="+R+"-]").length||O.push("~="),t.querySelectorAll(":checked").length||O.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||O.push(".#.+[+~]")}),i(function(t){var e=A.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&O.push("name"+tt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(b.matchesSelector=pt.test(E=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&i(function(t){b.disconnectedMatch=E.call(t,"div"),E.call(t,"[s!='']:x"),I.push("!=",rt)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),e=pt.test(P.compareDocumentPosition),L=e||pt.test(P.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return N=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!b.sortDetached&&e.compareDocumentPosition(t)===n?t===A||t.ownerDocument===F&&L(F,t)?-1:e===A||e.ownerDocument===F&&L(F,e)?1:M?J(M,t)-J(M,e):0:4&n?-1:1)}:function(t,e){if(t===e)return N=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!i||!o)return t===A?-1:e===A?1:i?-1:o?1:M?J(M,t)-J(M,e):0;if(i===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===F?-1:l[r]===F?1:0},A):A},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==A&&T(t),n=n.replace(lt,"='$1']"),b.matchesSelector&&j&&!V[n+" "]&&(!I||!I.test(n))&&(!O||!O.test(n)))try{var r=E.call(t,n);if(r||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return e(n,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&T(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&T(t);var n=_.attrHandle[e.toLowerCase()],r=n&&$.call(_.attrHandle,e.toLowerCase())?n(t,e,!j):void 0;return void 0!==r?r:b.attributes||!j?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(N=!b.detectDuplicates,M=!b.sortStable&&t.slice(0),t.sort(q),N){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return M=null,t},w=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=w(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=w(e);return n},_=e.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ut.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(it," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,f,p,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,y=s&&e.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(g){if(o){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&v){for(d=g,h=d[R]||(d[R]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),u=c[t]||[],f=u[0]===B&&u[1],b=f&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){c[t]=[B,f,b];break}}else if(v&&(d=e,h=d[R]||(d[R]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),u=c[t]||[],f=u[0]===B&&u[1],b=f),!1===b)for(;(d=++f&&d&&d[m]||(b=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&(h=d[R]||(d[R]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),c[t]=[B,b]),d!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,n){var i,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[R]?o(n):o.length>1?(i=[t,t,"",n],_.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=J(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=S(t.replace(ot,"$1"));return i[R]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(vt,bt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:r(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,bt).toLowerCase(),function(e){var n;do{if(n=j?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,n){return[n<0?n+e:n]}),even:s(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:s(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:s(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:s(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}},_.pseudos.nth=_.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[v]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(v);for(v in{submit:!0,reset:!0})_.pseudos[v]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(v);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,C=e.tokenize=function(t,n){var r,i,o,a,s,l,u,c=U[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=_.preFilter;s;){r&&!(i=at.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=st.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ot," ")}),s=s.slice(r.length));for(a in _.filter)!(i=ht[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):U(t,l).slice(0)},S=e.compile=function(t,e){var n,r=[],i=[],o=V[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)o=g(e[n]),o[R]?r.push(o):i.push(o);o=V(t,y(i,r)),o.selector=t}return o},k=e.select=function(t,e,n,r){var i,o,a,s,u,h="function"==typeof t&&t,d=!r&&C(t=h.selector||t);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&b.getById&&9===e.nodeType&&j&&_.relative[o[1].type]){if(!(e=(_.find.ID(a.matches[0].replace(vt,bt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=ht.needsContext.test(t)?0:o.length;i--&&(a=o[i],!_.relative[s=a.type]);)if((u=_.find[s])&&(r=u(a.matches[0].replace(vt,bt),gt.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&c(o)))return X.apply(n,r),n;break}}return(h||S(t,d))(r,e,!j,n,!e||gt.test(t)&&l(e.parentNode)||e),n},b.sortStable=R.split("").sort(q).join("")===R,b.detectDuplicates=!!N,T(),b.sortDetached=i(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(Z,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);dt.find=yt,dt.expr=yt.selectors,dt.expr[":"]=dt.expr.pseudos,dt.uniqueSort=dt.unique=yt.uniqueSort,dt.text=yt.getText,dt.isXMLDoc=yt.isXML,dt.contains=yt.contains;var vt=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&dt(t).is(n))break;r.push(t)}return r},bt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},_t=dt.expr.match.needsContext,wt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,xt=/^.[^:#\[\.,]*$/;dt.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?dt.find.matchesSelector(r,t)?[r]:[]:dt.find.matches(t,dt.grep(e,function(t){return 1===t.nodeType}))},dt.fn.extend({find:function(t){var e,n=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(dt(t).filter(function(){for(e=0;e<i;e++)if(dt.contains(r[e],this))return!0}));for(e=0;e<i;e++)dt.find(t,r[e],n);return n=this.pushStack(i>1?dt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&_t.test(t)?dt(t):t||[],!1).length}});var Ct,St=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(dt.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||Ct,"string"==typeof t){if(!(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:St.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof dt?e[0]:e,dt.merge(this,dt.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:rt,!0)),wt.test(r[1])&&dt.isPlainObject(e))for(r in e)dt.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}if((i=rt.getElementById(r[2]))&&i.parentNode){if(i.id!==r[2])return Ct.find(t);this.length=1,this[0]=i}return this.context=rt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):dt.isFunction(t)?void 0!==n.ready?n.ready(t):t(dt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),dt.makeArray(t,this))}).prototype=dt.fn,Ct=dt(rt);var kt=/^(?:parents|prev(?:Until|All))/,Dt={children:!0,contents:!0,next:!0,prev:!0};dt.fn.extend({has:function(t){var e,n=dt(t,this),r=n.length;return this.filter(function(){for(e=0;e<r;e++)if(dt.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=_t.test(t)||"string"!=typeof t?dt(t,e||this.context):0;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&dt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?dt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?dt.inArray(this[0],dt(t)):dt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(dt.uniqueSort(dt.merge(this.get(),dt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),dt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return vt(t,"parentNode")},parentsUntil:function(t,e,n){return vt(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return vt(t,"nextSibling")},prevAll:function(t){return vt(t,"previousSibling")},nextUntil:function(t,e,n){return vt(t,"nextSibling",n)},prevUntil:function(t,e,n){return vt(t,"previousSibling",n)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return dt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:dt.merge([],t.childNodes)}},function(t,e){dt.fn[t]=function(n,r){var i=dt.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=dt.filter(r,i)),this.length>1&&(Dt[t]||(i=dt.uniqueSort(i)),kt.test(t)&&(i=i.reverse())),this.pushStack(i)}});var Mt=/\S+/g;dt.Callbacks=function(t){t="string"==typeof t?o(t):dt.extend({},t);var e,n,r,i,a=[],s=[],l=-1,u=function(){for(i=t.once,r=e=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&t.stopOnFalse&&(l=a.length,n=!1);t.memory||(n=!1),e=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!e&&(l=a.length-1,s.push(n)),function e(n){dt.each(n,function(n,r){dt.isFunction(r)?t.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==dt.type(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return dt.each(arguments,function(t,e){for(var n;(n=dt.inArray(e,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(t){return t?dt.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=!0,n||c.disable(),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},dt.extend({Deferred:function(t){var e=[["resolve","done",dt.Callbacks("once memory"),"resolved"],["reject","fail",dt.Callbacks("once memory"),"rejected"],["notify","progress",dt.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return dt.Deferred(function(n){dt.each(e,function(e,o){var a=dt.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&dt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?dt.extend(t,r):r}},i={};return r.pipe=r.then,dt.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=it.call(arguments),a=o.length,s=1!==a||t&&dt.isFunction(t.promise)?a:0,l=1===s?t:dt.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?it.call(arguments):i,r===e?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&dt.isFunction(o[i].promise)?o[i].promise().progress(u(i,n,e)).done(u(i,r,o)).fail(l.reject):--s;return s||l.resolveWith(r,o),l.promise()}});var Nt;dt.fn.ready=function(t){return dt.ready.promise().done(t),this},dt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?dt.readyWait++:dt.ready(!0)},ready:function(t){(!0===t?--dt.readyWait:dt.isReady)||(dt.isReady=!0,!0!==t&&--dt.readyWait>0||(Nt.resolveWith(rt,[dt]),dt.fn.triggerHandler&&(dt(rt).triggerHandler("ready"),dt(rt).off("ready"))))}}),dt.ready.promise=function(e){if(!Nt)if(Nt=dt.Deferred(),"complete"===rt.readyState||"loading"!==rt.readyState&&!rt.documentElement.doScroll)t.setTimeout(dt.ready);else if(rt.addEventListener)rt.addEventListener("DOMContentLoaded",s),t.addEventListener("load",s);else{rt.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&rt.documentElement}catch(t){}n&&n.doScroll&&function e(){if(!dt.isReady){try{n.doScroll("left")}catch(n){return t.setTimeout(e,50)}a(),dt.ready()}}()}return Nt.promise(e)},dt.ready.promise();var Tt;for(Tt in dt(ht))break;ht.ownFirst="0"===Tt,ht.inlineBlockNeedsLayout=!1,dt(function(){var t,e,n,r;(n=rt.getElementsByTagName("body")[0])&&n.style&&(e=rt.createElement("div"),r=rt.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(e),void 0!==e.style.zoom&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ht.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(n.style.zoom=1)),n.removeChild(r))}),function(){var t=rt.createElement("div");ht.deleteExpando=!0;try{delete t.test}catch(t){ht.deleteExpando=!1}t=null}();var At=function(t){var e=dt.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return(1===n||9===n)&&(!e||!0!==e&&t.getAttribute("classid")===e)},Pt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,jt=/([A-Z])/g;dt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return!!(t=t.nodeType?dt.cache[t[dt.expando]]:t[dt.expando])&&!u(t)},data:function(t,e,n){return c(t,e,n)},removeData:function(t,e){return h(t,e)},_data:function(t,e,n){return c(t,e,n,!0)},_removeData:function(t,e){return h(t,e,!0)}}),dt.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=dt.data(o),1===o.nodeType&&!dt._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=dt.camelCase(r.slice(5)),l(o,r,i[r])));dt._data(o,"parsedAttrs",!0)}return i}return"object"==typeof t?this.each(function(){dt.data(this,t)}):arguments.length>1?this.each(function(){dt.data(this,t,e)}):o?l(o,t,dt.data(o,t)):void 0},removeData:function(t){return this.each(function(){dt.removeData(this,t)})}}),dt.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=dt._data(t,e),n&&(!r||dt.isArray(n)?r=dt._data(t,e,dt.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=dt.queue(t,e),r=n.length,i=n.shift(),o=dt._queueHooks(t,e),a=function(){dt.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return dt._data(t,n)||dt._data(t,n,{empty:dt.Callbacks("once memory").add(function(){dt._removeData(t,e+"queue"),dt._removeData(t,n)})})}}),dt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?dt.queue(this[0],t):void 0===e?this:this.each(function(){var n=dt.queue(this,t,e);dt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&dt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){dt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=dt.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=dt._data(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}}),function(){var t;ht.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,n,r;return(n=rt.getElementsByTagName("body")[0])&&n.style?(e=rt.createElement("div"),r=rt.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(e),void 0!==e.style.zoom&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(rt.createElement("div")).style.width="5px",t=3!==e.offsetWidth),n.removeChild(r),t):void 0}}();var Ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,It=new RegExp("^(?:([+-])=|)("+Ot+")([a-z%]*)$","i"),Et=["Top","Right","Bottom","Left"],Lt=function(t,e){return t=e||t,"none"===dt.css(t,"display")||!dt.contains(t.ownerDocument,t)},Rt=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===dt.type(n)){i=!0;for(s in n)Rt(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,dt.isFunction(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(dt(t),n)})),e))for(;s<l;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},Ft=/^(?:checkbox|radio)$/i,Bt=/<([\w:-]+)/,Ht=/^$|\/(?:java|ecma)script/i,Wt=/^\s+/,Ut="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var t=rt.createElement("div"),e=rt.createDocumentFragment(),n=rt.createElement("input");t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ht.leadingWhitespace=3===t.firstChild.nodeType,ht.tbody=!t.getElementsByTagName("tbody").length,ht.htmlSerialize=!!t.getElementsByTagName("link").length,ht.html5Clone="<:nav></:nav>"!==rt.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),ht.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",ht.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),
n=rt.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ht.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ht.noCloneEvent=!!t.addEventListener,t[dt.expando]=1,ht.attributes=!t.getAttribute(dt.expando)}();var Vt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ht.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Vt.optgroup=Vt.option,Vt.tbody=Vt.tfoot=Vt.colgroup=Vt.caption=Vt.thead,Vt.th=Vt.td;var qt=/<|&#?\w+;/,zt=/<tbody/i;!function(){var e,n,r=rt.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ht[e]=n in t)||(r.setAttribute(n,"t"),ht[e]=!1===r.attributes[n].expando);r=null}();var $t=/^(?:input|select|textarea)$/i,Gt=/^key/,Yt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Qt=/^(?:focusinfocus|focusoutblur)$/,Xt=/^([^.]*)(?:\.(.+)|)/;dt.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,h,d,f,p,m,g=dt._data(t);if(g){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=dt.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(t){return void 0===dt||t&&dt.event.triggered===t.type?void 0:dt.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(Mt)||[""],s=e.length;s--;)o=Xt.exec(e[s])||[],f=m=o[1],p=(o[2]||"").split(".").sort(),f&&(u=dt.event.special[f]||{},f=(i?u.delegateType:u.bindType)||f,u=dt.event.special[f]||{},h=dt.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&dt.expr.match.needsContext.test(i),namespace:p.join(".")},l),(d=a[f])||(d=a[f]=[],d.delegateCount=0,u.setup&&!1!==u.setup.call(t,r,p,c)||(t.addEventListener?t.addEventListener(f,c,!1):t.attachEvent&&t.attachEvent("on"+f,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,h):d.push(h),dt.event.global[f]=!0);t=null}},remove:function(t,e,n,r,i){var o,a,s,l,u,c,h,d,f,p,m,g=dt.hasData(t)&&dt._data(t);if(g&&(c=g.events)){for(e=(e||"").match(Mt)||[""],u=e.length;u--;)if(s=Xt.exec(e[u])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f){for(h=dt.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,d=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,h.remove&&h.remove.call(t,a));l&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,g.handle)||dt.removeEvent(t,f,g.handle),delete c[f])}else for(f in c)dt.event.remove(t,f+e[u],n,r,!0);dt.isEmptyObject(c)&&(delete g.handle,dt._removeData(t,"events"))}},trigger:function(e,n,r,i){var o,a,s,l,u,c,h,d=[r||rt],f=ct.call(e,"type")?e.type:e,p=ct.call(e,"namespace")?e.namespace.split("."):[];if(s=c=r=r||rt,3!==r.nodeType&&8!==r.nodeType&&!Qt.test(f+dt.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),a=f.indexOf(":")<0&&"on"+f,e=e[dt.expando]?e:new dt.Event(f,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:dt.makeArray(n,[e]),u=dt.event.special[f]||{},i||!u.trigger||!1!==u.trigger.apply(r,n))){if(!i&&!u.noBubble&&!dt.isWindow(r)){for(l=u.delegateType||f,Qt.test(l+f)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(r.ownerDocument||rt)&&d.push(c.defaultView||c.parentWindow||t)}for(h=0;(s=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:u.bindType||f,o=(dt._data(s,"events")||{})[e.type]&&dt._data(s,"handle"),o&&o.apply(s,n),(o=a&&s[a])&&o.apply&&At(s)&&(e.result=o.apply(s,n),!1===e.result&&e.preventDefault());if(e.type=f,!i&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(d.pop(),n))&&At(r)&&a&&r[f]&&!dt.isWindow(r)){c=r[a],c&&(r[a]=null),dt.event.triggered=f;try{r[f]()}catch(t){}dt.event.triggered=void 0,c&&(r[a]=c)}return e.result}},dispatch:function(t){t=dt.event.fix(t);var e,n,r,i,o,a=[],s=it.call(arguments),l=(dt._data(this,"events")||{})[t.type]||[],u=dt.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=dt.event.handlers.call(this,t,l),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(r=((dt.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(t.result=r)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==t.type)){for(r=[],n=0;n<s;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?dt(i,this).index(l)>-1:dt.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[dt.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Yt.test(i)?this.mouseHooks:Gt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new dt.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=o.srcElement||rt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(r=t.target.ownerDocument||rt,i=r.documentElement,n=r.body,t.pageX=e.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){if(this===_()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(dt.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(t){return dt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n){var r=dt.extend(new dt.Event,n,{type:t,isSimulated:!0});dt.event.trigger(r,null,e),r.isDefaultPrevented()&&n.preventDefault()}},dt.removeEvent=rt.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)}:function(t,e,n){var r="on"+e;t.detachEvent&&(void 0===t[r]&&(t[r]=null),t.detachEvent(r,n))},dt.Event=function(t,e){if(!(this instanceof dt.Event))return new dt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?v:b):this.type=t,e&&dt.extend(this,e),this.timeStamp=t&&t.timeStamp||dt.now(),this[dt.expando]=!0},dt.Event.prototype={constructor:dt.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=v,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=v,t&&!this.isSimulated&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=v,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},dt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){dt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||dt.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),ht.submit||(dt.event.special.submit={setup:function(){if(dt.nodeName(this,"form"))return!1;dt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=dt.nodeName(e,"input")||dt.nodeName(e,"button")?dt.prop(e,"form"):void 0;n&&!dt._data(n,"submit")&&(dt.event.add(n,"submit._submit",function(t){t._submitBubble=!0}),dt._data(n,"submit",!0))})},postDispatch:function(t){t._submitBubble&&(delete t._submitBubble,this.parentNode&&!t.isTrigger&&dt.event.simulate("submit",this.parentNode,t))},teardown:function(){if(dt.nodeName(this,"form"))return!1;dt.event.remove(this,"._submit")}}),ht.change||(dt.event.special.change={setup:function(){if($t.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(dt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._justChanged=!0)}),dt.event.add(this,"click._change",function(t){this._justChanged&&!t.isTrigger&&(this._justChanged=!1),dt.event.simulate("change",this,t)})),!1;dt.event.add(this,"beforeactivate._change",function(t){var e=t.target;$t.test(e.nodeName)&&!dt._data(e,"change")&&(dt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||dt.event.simulate("change",this.parentNode,t)}),dt._data(e,"change",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return dt.event.remove(this,"._change"),!$t.test(this.nodeName)}}),ht.focusin||dt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){dt.event.simulate(e,t.target,dt.event.fix(t))};dt.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=dt._data(r,e);i||r.addEventListener(t,n,!0),dt._data(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=dt._data(r,e)-1;i?dt._data(r,e,i):(r.removeEventListener(t,n,!0),dt._removeData(r,e))}}}),dt.fn.extend({on:function(t,e,n,r){return w(this,t,e,n,r)},one:function(t,e,n,r){return w(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,dt(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=b),this.each(function(){dt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){dt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return dt.event.trigger(t,e,n,!0)}});var Kt=/ jQuery\d+="(?:null|\d+)"/g,Jt=new RegExp("<(?:"+Ut+")[\\s/>]","i"),Zt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,te=/<script|<style|<link/i,ee=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ie=f(rt),oe=ie.appendChild(rt.createElement("div"));dt.extend({htmlPrefilter:function(t){return t.replace(Zt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,l=dt.contains(t.ownerDocument,t);if(ht.html5Clone||dt.isXMLDoc(t)||!Jt.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(oe.innerHTML=t.outerHTML,oe.removeChild(o=oe.firstChild)),!(ht.noCloneEvent&&ht.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||dt.isXMLDoc(t)))for(r=p(o),s=p(t),a=0;null!=(i=s[a]);++a)r[a]&&D(i,r[a]);if(e)if(n)for(s=s||p(t),r=r||p(o),a=0;null!=(i=s[a]);a++)k(i,r[a]);else k(t,o);return r=p(o,"script"),r.length>0&&m(r,!l&&p(t,"script")),r=s=i=null,o},cleanData:function(t,e){for(var n,r,i,o,a=0,s=dt.expando,l=dt.cache,u=ht.attributes,c=dt.event.special;null!=(n=t[a]);a++)if((e||At(n))&&(i=n[s],o=i&&l[i])){if(o.events)for(r in o.events)c[r]?dt.event.remove(n,r):dt.removeEvent(n,r,o.handle);l[i]&&(delete l[i],u||void 0===n.removeAttribute?n[s]=void 0:n.removeAttribute(s),nt.push(i))}}}),dt.fn.extend({domManip:M,detach:function(t){return N(this,t,!0)},remove:function(t){return N(this,t)},text:function(t){return Rt(this,function(t){return void 0===t?dt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||rt).createTextNode(t))},null,t,arguments.length)},append:function(){return M(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){x(this,t).appendChild(t)}})},prepend:function(){return M(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=x(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return M(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return M(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&dt.cleanData(p(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&dt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return dt.clone(this,t,e)})},html:function(t){return Rt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Kt,""):void 0;if("string"==typeof t&&!te.test(t)&&(ht.htmlSerialize||!Jt.test(t))&&(ht.leadingWhitespace||!Wt.test(t))&&!Vt[(Bt.exec(t)||["",""])[1].toLowerCase()]){t=dt.htmlPrefilter(t);try{for(;n<r;n++)e=this[n]||{},1===e.nodeType&&(dt.cleanData(p(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return M(this,arguments,function(e){var n=this.parentNode;dt.inArray(this,t)<0&&(dt.cleanData(p(this)),n&&n.replaceChild(e,this))},t)}}),dt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){dt.fn[t]=function(t){for(var n,r=0,i=[],o=dt(t),a=o.length-1;r<=a;r++)n=r===a?this:this.clone(!0),dt(o[r])[e](n),at.apply(i,n.get());return this.pushStack(i)}});var ae,se={HTML:"block",BODY:"block"},le=/^margin/,ue=new RegExp("^("+Ot+")(?!px)[a-z%]+$","i"),ce=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i},he=rt.documentElement;!function(){function e(){var e,c,h=rt.documentElement;h.appendChild(l),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=i=s=!1,r=a=!0,t.getComputedStyle&&(c=t.getComputedStyle(u),n="1%"!==(c||{}).top,s="2px"===(c||{}).marginLeft,i="4px"===(c||{width:"4px"}).width,u.style.marginRight="50%",r="4px"===(c||{marginRight:"4px"}).marginRight,e=u.appendChild(rt.createElement("div")),e.style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",u.style.width="1px",a=!parseFloat((t.getComputedStyle(e)||{}).marginRight),u.removeChild(e)),u.style.display="none",o=0===u.getClientRects().length,o&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",u.childNodes[0].style.borderCollapse="separate",e=u.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",o=0===e[0].offsetHeight)),h.removeChild(l)}var n,r,i,o,a,s,l=rt.createElement("div"),u=rt.createElement("div");u.style&&(u.style.cssText="float:left;opacity:.5",ht.opacity="0.5"===u.style.opacity,ht.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ht.clearCloneStyle="content-box"===u.style.backgroundClip,l=rt.createElement("div"),l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",l.appendChild(u),ht.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,dt.extend(ht,{reliableHiddenOffsets:function(){return null==n&&e(),o},boxSizingReliable:function(){return null==n&&e(),i},pixelMarginRight:function(){return null==n&&e(),r},pixelPosition:function(){return null==n&&e(),n},reliableMarginRight:function(){return null==n&&e(),a},reliableMarginLeft:function(){return null==n&&e(),s}}))}();var de,fe,pe=/^(top|right|bottom|left)$/;t.getComputedStyle?(de=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},fe=function(t,e,n){var r,i,o,a,s=t.style;return n=n||de(t),a=n?n.getPropertyValue(e)||n[e]:void 0,""!==a&&void 0!==a||dt.contains(t.ownerDocument,t)||(a=dt.style(t,e)),n&&!ht.pixelMarginRight()&&ue.test(a)&&le.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0===a?a:a+""}):he.currentStyle&&(de=function(t){return t.currentStyle},fe=function(t,e,n){var r,i,o,a,s=t.style;return n=n||de(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),ue.test(a)&&!pe.test(e)&&(r=s.left,i=t.runtimeStyle,o=i&&i.left,o&&(i.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"});var me=/alpha\([^)]*\)/i,ge=/opacity\s*=\s*([^)]*)/i,ye=/^(none|table(?!-c[ea]).+)/,ve=new RegExp("^("+Ot+")(.*)$","i"),be={position:"absolute",visibility:"hidden",display:"block"},_e={letterSpacing:"0",fontWeight:"400"},we=["Webkit","O","Moz","ms"],xe=rt.createElement("div").style;dt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=fe(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ht.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=dt.camelCase(e),l=t.style;if(e=dt.cssProps[s]||(dt.cssProps[s]=j(s)||s),a=dt.cssHooks[e]||dt.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];if(o=typeof n,"string"===o&&(i=It.exec(n))&&i[1]&&(n=d(t,e,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(dt.cssNumber[s]?"":"px")),ht.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,r)))))try{l[e]=n}catch(t){}}},css:function(t,e,n,r){var i,o,a,s=dt.camelCase(e);return e=dt.cssProps[s]||(dt.cssProps[s]=j(s)||s),a=dt.cssHooks[e]||dt.cssHooks[s],a&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=fe(t,e,r)),"normal"===o&&e in _e&&(o=_e[e]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),dt.each(["height","width"],function(t,e){dt.cssHooks[e]={get:function(t,n,r){if(n)return ye.test(dt.css(t,"display"))&&0===t.offsetWidth?ce(t,be,function(){return L(t,e,r)}):L(t,e,r)},set:function(t,n,r){var i=r&&de(t);return I(t,n,r?E(t,e,r,ht.boxSizing&&"border-box"===dt.css(t,"boxSizing",!1,i),i):0)}}}),ht.opacity||(dt.cssHooks.opacity={get:function(t,e){return ge.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,r=t.currentStyle,i=dt.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===dt.trim(o.replace(me,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||r&&!r.filter)||(n.filter=me.test(o)?o.replace(me,i):o+" "+i)}}),dt.cssHooks.marginRight=P(ht.reliableMarginRight,function(t,e){if(e)return ce(t,{display:"inline-block"},fe,[t,"marginRight"])}),dt.cssHooks.marginLeft=P(ht.reliableMarginLeft,function(t,e){if(e)return(parseFloat(fe(t,"marginLeft"))||(dt.contains(t.ownerDocument,t)?t.getBoundingClientRect().left-ce(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}):0))+"px"}),dt.each({margin:"",padding:"",border:"Width"},function(t,e){dt.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+Et[r]+e]=o[r]||o[r-2]||o[0];return i}},le.test(t)||(dt.cssHooks[t+e].set=I)}),dt.fn.extend({css:function(t,e){return Rt(this,function(t,e,n){var r,i,o={},a=0;if(dt.isArray(e)){for(r=de(t),i=e.length;a<i;a++)o[e[a]]=dt.css(t,e[a],!1,r);return o}return void 0!==n?dt.style(t,e,n):dt.css(t,e)},t,e,arguments.length>1)},show:function(){return O(this,!0)},hide:function(){return O(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Lt(this)?dt(this).show():dt(this).hide()})}}),dt.Tween=R,R.prototype={constructor:R,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||dt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(dt.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.options.duration?this.pos=e=dt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=dt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){dt.fx.step[t.prop]?dt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[dt.cssProps[t.prop]]&&!dt.cssHooks[t.prop]?t.elem[t.prop]=t.now:dt.style(t.elem,t.prop,t.now+t.unit)}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},dt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},dt.fx=R.prototype.init,dt.fx.step={};var Ce,Se,ke=/^(?:toggle|show|hide)$/,De=/queueHooks$/;dt.Animation=dt.extend(V,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return d(n.elem,t,It.exec(e),n),n}]},tweener:function(t,e){dt.isFunction(t)?(e=t,t=["*"]):t=t.match(Mt);for(var n,r=0,i=t.length;r<i;r++)n=t[r],V.tweeners[n]=V.tweeners[n]||[],V.tweeners[n].unshift(e)},prefilters:[W],prefilter:function(t,e){e?V.prefilters.unshift(t):V.prefilters.push(t)}}),dt.speed=function(t,e,n){var r=t&&"object"==typeof t?dt.extend({},t):{complete:n||!n&&e||dt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!dt.isFunction(e)&&e};return r.duration=dt.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in dt.fx.speeds?dt.fx.speeds[r.duration]:dt.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){dt.isFunction(r.old)&&r.old.call(this),r.queue&&dt.dequeue(this,r.queue)},r},dt.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=dt.isEmptyObject(t),o=dt.speed(e,n,r),a=function(){var e=V(this,dt.extend({},t),o);(i||dt._data(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=dt.timers,a=dt._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&De.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||dt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=dt._data(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=dt.timers,a=r?r.length:0;for(n.finish=!0,dt.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),dt.each(["toggle","show","hide"],function(t,e){var n=dt.fn[e];dt.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(B(e,!0),t,r,i)}}),dt.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){dt.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),dt.timers=[],dt.fx.tick=function(){var t,e=dt.timers,n=0;for(Ce=dt.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||dt.fx.stop(),Ce=void 0},dt.fx.timer=function(t){dt.timers.push(t),t()?dt.fx.start():dt.timers.pop()},dt.fx.interval=13,dt.fx.start=function(){Se||(Se=t.setInterval(dt.fx.tick,dt.fx.interval))},dt.fx.stop=function(){t.clearInterval(Se),Se=null},dt.fx.speeds={slow:600,fast:200,_default:400},dt.fn.delay=function(e,n){return e=dt.fx?dt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},function(){var t,e=rt.createElement("input"),n=rt.createElement("div"),r=rt.createElement("select"),i=r.appendChild(rt.createElement("option"));n=rt.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=n.getElementsByTagName("a")[0],e.setAttribute("type","checkbox"),n.appendChild(e),t=n.getElementsByTagName("a")[0],t.style.cssText="top:1px",ht.getSetAttribute="t"!==n.className,ht.style=/top/.test(t.getAttribute("style")),ht.hrefNormalized="/a"===t.getAttribute("href"),ht.checkOn=!!e.value,ht.optSelected=i.selected,ht.enctype=!!rt.createElement("form").enctype,r.disabled=!0,ht.optDisabled=!i.disabled,e=rt.createElement("input"),e.setAttribute("value",""),ht.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ht.radioValue="t"===e.value}();var Me=/\r/g,Ne=/[\x20\t\r\n\f]+/g;dt.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=dt.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,dt(this).val()):t,null==i?i="":"number"==typeof i?i+="":dt.isArray(i)&&(i=dt.map(i,function(t){return null==t?"":t+""})),(e=dt.valHooks[this.type]||dt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return(e=dt.valHooks[i.type]||dt.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(Me,""):null==n?"":n)}}}),dt.extend({valHooks:{option:{get:function(t){var e=dt.find.attr(t,"value");return null!=e?e:dt.trim(dt.text(t)).replace(Ne," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(n=r[l],(n.selected||l===i)&&(ht.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!dt.nodeName(n.parentNode,"optgroup"))){if(e=dt(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=dt.makeArray(e),a=i.length;a--;)if(r=i[a],dt.inArray(dt.valHooks.option.get(r),o)>-1)try{r.selected=n=!0}catch(t){r.scrollHeight}else r.selected=!1;return n||(t.selectedIndex=-1),i}}}}),dt.each(["radio","checkbox"],function(){dt.valHooks[this]={set:function(t,e){if(dt.isArray(e))return t.checked=dt.inArray(dt(t).val(),e)>-1}},ht.checkOn||(dt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Te,Ae,Pe=dt.expr.attrHandle,je=/^(?:checked|selected)$/i,Oe=ht.getSetAttribute,Ie=ht.input;dt.fn.extend({attr:function(t,e){return Rt(this,dt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){dt.removeAttr(this,t)})}}),dt.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?dt.prop(t,e,n):(1===o&&dt.isXMLDoc(t)||(e=e.toLowerCase(),i=dt.attrHooks[e]||(dt.expr.match.bool.test(e)?Ae:Te)),void 0!==n?null===n?void dt.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=dt.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!ht.radioValue&&"radio"===e&&dt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(Mt);if(o&&1===t.nodeType)for(;n=o[i++];)r=dt.propFix[n]||n,dt.expr.match.bool.test(n)?Ie&&Oe||!je.test(n)?t[r]=!1:t[dt.camelCase("default-"+n)]=t[r]=!1:dt.attr(t,n,""),t.removeAttribute(Oe?n:r)}}),Ae={set:function(t,e,n){return!1===e?dt.removeAttr(t,n):Ie&&Oe||!je.test(n)?t.setAttribute(!Oe&&dt.propFix[n]||n,n):t[dt.camelCase("default-"+n)]=t[n]=!0,n}},dt.each(dt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Pe[e]||dt.find.attr;Ie&&Oe||!je.test(e)?Pe[e]=function(t,e,r){var i,o;return r||(o=Pe[e],Pe[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,Pe[e]=o),i}:Pe[e]=function(t,e,n){if(!n)return t[dt.camelCase("default-"+e)]?e.toLowerCase():null}}),Ie&&Oe||(dt.attrHooks.value={set:function(t,e,n){if(!dt.nodeName(t,"input"))return Te&&Te.set(t,e,n);t.defaultValue=e}}),Oe||(Te={set:function(t,e,n){var r=t.getAttributeNode(n);if(r||t.setAttributeNode(r=t.ownerDocument.createAttribute(n)),r.value=e+="","value"===n||e===t.getAttribute(n))return e}},Pe.id=Pe.name=Pe.coords=function(t,e,n){var r;if(!n)return(r=t.getAttributeNode(e))&&""!==r.value?r.value:null},dt.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);if(n&&n.specified)return n.value},set:Te.set},dt.attrHooks.contenteditable={set:function(t,e,n){Te.set(t,""!==e&&e,n)}},dt.each(["width","height"],function(t,e){dt.attrHooks[e]={set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}}})),ht.style||(dt.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ee=/^(?:input|select|textarea|button|object)$/i,Le=/^(?:a|area)$/i;dt.fn.extend({prop:function(t,e){return Rt(this,dt.prop,t,e,arguments.length>1)},removeProp:function(t){return t=dt.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(t){}})}}),dt.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&dt.isXMLDoc(t)||(e=dt.propFix[e]||e,i=dt.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=dt.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Le.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ht.hrefNormalized||dt.each(["href","src"],function(t,e){dt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ht.optSelected||(dt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),dt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){dt.propFix[this.toLowerCase()]=this}),ht.enctype||(dt.propFix.enctype="encoding");var Re=/[\t\r\n\f]/g;dt.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(dt.isFunction(t))return this.each(function(e){dt(this).addClass(t.call(this,e,q(this)))})
;if("string"==typeof t&&t)for(e=t.match(Mt)||[];n=this[l++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(Re," ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=dt.trim(r),i!==s&&dt.attr(n,"class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(dt.isFunction(t))return this.each(function(e){dt(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Mt)||[];n=this[l++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(Re," ")){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=dt.trim(r),i!==s&&dt.attr(n,"class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):dt.isFunction(t)?this.each(function(n){dt(this).toggleClass(t.call(this,n,q(this),e),e)}):this.each(function(){var e,r,i,o;if("string"===n)for(r=0,i=dt(this),o=t.match(Mt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||(e=q(this),e&&dt._data(this,"__className__",e),dt.attr(this,"class",e||!1===t?"":dt._data(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(Re," ").indexOf(e)>-1)return!0;return!1}}),dt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){dt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),dt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});var Fe=t.location,Be=dt.now(),He=/\?/,We=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;dt.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,r=null,i=dt.trim(e+"");return i&&!dt.trim(i.replace(We,function(t,e,i,o){return n&&e&&(r=0),0===r?t:(n=i||e,r+=!o-!i,"")}))?Function("return "+i)():dt.error("Invalid JSON: "+e)},dt.parseXML=function(e){var n,r;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(r=new t.DOMParser,n=r.parseFromString(e,"text/xml")):(n=new t.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(t){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||dt.error("Invalid XML: "+e),n};var Ue=/#.*$/,Ve=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,ze=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,$e=/^(?:GET|HEAD)$/,Ge=/^\/\//,Ye=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qe={},Xe={},Ke="*/".concat("*"),Je=Fe.href,Ze=Ye.exec(Je.toLowerCase())||[];dt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Je,type:"GET",isLocal:ze.test(Ze[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":dt.parseJSON,"text xml":dt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?G(G(t,dt.ajaxSettings),e):G(dt.ajaxSettings,t)},ajaxPrefilter:z(Qe),ajaxTransport:z(Xe),ajax:function(e,n){function r(e,n,r,i){var o,h,v,b,w,C=n;2!==_&&(_=2,l&&t.clearTimeout(l),c=void 0,s=i||"",x.readyState=e>0?4:0,o=e>=200&&e<300||304===e,r&&(b=Y(d,x,r)),b=Q(d,b,x,o),o?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(dt.lastModified[a]=w),(w=x.getResponseHeader("etag"))&&(dt.etag[a]=w)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=b.state,h=b.data,v=b.error,o=!v)):(v=C,!e&&C||(C="error",e<0&&(e=0))),x.status=e,x.statusText=(n||C)+"",o?m.resolveWith(f,[h,C,x]):m.rejectWith(f,[x,C,v]),x.statusCode(y),y=void 0,u&&p.trigger(o?"ajaxSuccess":"ajaxError",[x,d,o?h:v]),g.fireWith(f,[x,C]),u&&(p.trigger("ajaxComplete",[x,d]),--dt.active||dt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,o,a,s,l,u,c,h,d=dt.ajaxSetup({},n),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?dt(f):dt.event,m=dt.Deferred(),g=dt.Callbacks("once memory"),y=d.statusCode||{},v={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!h)for(h={};e=qe.exec(s);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=b[n]=b[n]||t,v[t]=e),this},overrideMimeType:function(t){return _||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(_<2)for(e in t)y[e]=[y[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),r(0,e),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||Je)+"").replace(Ue,"").replace(Ge,Ze[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=dt.trim(d.dataType||"*").toLowerCase().match(Mt)||[""],null==d.crossDomain&&(i=Ye.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Ze[1]&&i[2]===Ze[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Ze[3]||("http:"===Ze[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=dt.param(d.data,d.traditional)),$(Qe,d,n,x),2===_)return x;u=dt.event&&d.global,u&&0==dt.active++&&dt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!$e.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(He.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Ve.test(a)?a.replace(Ve,"$1_="+Be++):a+(He.test(a)?"&":"?")+"_="+Be++)),d.ifModified&&(dt.lastModified[a]&&x.setRequestHeader("If-Modified-Since",dt.lastModified[a]),dt.etag[a]&&x.setRequestHeader("If-None-Match",dt.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ke+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)x.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(!1===d.beforeSend.call(f,x,d)||2===_))return x.abort();w="abort";for(o in{success:1,error:1,complete:1})x[o](d[o]);if(c=$(Xe,d,n,x)){if(x.readyState=1,u&&p.trigger("ajaxSend",[x,d]),2===_)return x;d.async&&d.timeout>0&&(l=t.setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,c.send(v,r)}catch(t){if(!(_<2))throw t;r(-1,t)}}else r(-1,"No Transport");return x},getJSON:function(t,e,n){return dt.get(t,e,n,"json")},getScript:function(t,e){return dt.get(t,void 0,e,"script")}}),dt.each(["get","post"],function(t,e){dt[e]=function(t,n,r,i){return dt.isFunction(n)&&(i=i||r,r=n,n=void 0),dt.ajax(dt.extend({url:t,type:e,dataType:i,data:n,success:r},dt.isPlainObject(t)&&t))}}),dt._evalUrl=function(t){return dt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},dt.fn.extend({wrapAll:function(t){if(dt.isFunction(t))return this.each(function(e){dt(this).wrapAll(t.call(this,e))});if(this[0]){var e=dt(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return dt.isFunction(t)?this.each(function(e){dt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=dt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=dt.isFunction(t);return this.each(function(n){dt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){dt.nodeName(this,"body")||dt(this).replaceWith(this.childNodes)}).end()}}),dt.expr.filters.hidden=function(t){return ht.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:K(t)},dt.expr.filters.visible=function(t){return!dt.expr.filters.hidden(t)};var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,on=/^(?:input|select|textarea|keygen)/i;dt.param=function(t,e){var n,r=[],i=function(t,e){e=dt.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=dt.ajaxSettings&&dt.ajaxSettings.traditional),dt.isArray(t)||t.jquery&&!dt.isPlainObject(t))dt.each(t,function(){i(this.name,this.value)});else for(n in t)J(n,t[n],e,i);return r.join("&").replace(tn,"+")},dt.fn.extend({serialize:function(){return dt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=dt.prop(this,"elements");return t?dt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!dt(this).is(":disabled")&&on.test(this.nodeName)&&!rn.test(t)&&(this.checked||!Ft.test(t))}).map(function(t,e){var n=dt(this).val();return null==n?null:dt.isArray(n)?dt.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),dt.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return this.isLocal?tt():rt.documentMode>8?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||tt()}:Z;var an=0,sn={},ln=dt.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in sn)sn[t](void 0,!0)}),ht.cors=!!ln&&"withCredentials"in ln,ln=ht.ajax=!!ln,ln&&dt.ajaxTransport(function(e){if(!e.crossDomain||ht.cors){var n;return{send:function(r,i){var o,a=e.xhr(),s=++an;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)void 0!==r[o]&&a.setRequestHeader(o,r[o]+"");a.send(e.hasContent&&e.data||null),n=function(t,r){var o,l,u;if(n&&(r||4===a.readyState))if(delete sn[s],n=void 0,a.onreadystatechange=dt.noop,r)4!==a.readyState&&a.abort();else{u={},o=a.status,"string"==typeof a.responseText&&(u.text=a.responseText);try{l=a.statusText}catch(t){l=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=u.text?200:404}u&&i(o,l,u,a.getAllResponseHeaders())},e.async?4===a.readyState?t.setTimeout(n):a.onreadystatechange=sn[s]=n:n()},abort:function(){n&&n(void 0,!0)}}}}),dt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return dt.globalEval(t),t}}}),dt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),dt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=rt.head||dt("head")[0]||rt.documentElement;return{send:function(r,i){e=rt.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||i(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var un=[],cn=/(=)\?(?=&|$)|\?\?/;dt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=un.pop()||dt.expando+"_"+Be++;return this[t]=!0,t}}),dt.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=!1!==e.jsonp&&(cn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&cn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=dt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(cn,"$1"+i):!1!==e.jsonp&&(e.url+=(He.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||dt.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?dt(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,un.push(i)),a&&dt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),dt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||rt;var r=wt.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=y([t],e,i),i&&i.length&&dt(i).remove(),dt.merge([],r.childNodes))};var hn=dt.fn.load;dt.fn.load=function(t,e,n){if("string"!=typeof t&&hn)return hn.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=dt.trim(t.slice(s,t.length)),t=t.slice(0,s)),dt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&dt.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?dt("<div>").append(dt.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},dt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){dt.fn[e]=function(t){return this.on(e,t)}}),dt.expr.filters.animated=function(t){return dt.grep(dt.timers,function(e){return t===e.elem}).length},dt.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u,c=dt.css(t,"position"),h=dt(t),d={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=dt.css(t,"top"),l=dt.css(t,"left"),u=("absolute"===c||"fixed"===c)&&dt.inArray("auto",[o,l])>-1,u?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),dt.isFunction(e)&&(e=e.call(t,n,dt.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):h.css(d)}},dt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){dt.offset.setOffset(this,t,e)});var e,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return e=o.documentElement,dt.contains(e,i)?(void 0!==i.getBoundingClientRect&&(r=i.getBoundingClientRect()),n=et(o),{top:r.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):r},position:function(){if(this[0]){var t,e,n={top:0,left:0},r=this[0];return"fixed"===dt.css(r,"position")?e=r.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),dt.nodeName(t[0],"html")||(n=t.offset()),n.top+=dt.css(t[0],"borderTopWidth",!0),n.left+=dt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-dt.css(r,"marginTop",!0),left:e.left-n.left-dt.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&!dt.nodeName(t,"html")&&"static"===dt.css(t,"position");)t=t.offsetParent;return t||he})}}),dt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);dt.fn[t]=function(r){return Rt(this,function(t,r,i){var o=et(t);if(void 0===i)return o?e in o?o[e]:o.document.documentElement[r]:t[r];o?o.scrollTo(n?dt(o).scrollLeft():i,n?i:dt(o).scrollTop()):t[r]=i},t,r,arguments.length,null)}}),dt.each(["top","left"],function(t,e){dt.cssHooks[e]=P(ht.pixelPosition,function(t,n){if(n)return n=fe(t,e),ue.test(n)?dt(t).position()[e]+"px":n})}),dt.each({Height:"height",Width:"width"},function(t,e){dt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){dt.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return Rt(this,function(e,n,r){var i;return dt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?dt.css(e,n,a):dt.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),dt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),dt.fn.size=function(){return this.length},dt.fn.andSelf=dt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return dt});var dn=t.jQuery,fn=t.$;return dt.noConflict=function(e){return t.$===dt&&(t.$=fn),e&&t.jQuery===dt&&(t.jQuery=dn),dt},e||(t.jQuery=t.$=dt),dt}),define("cdf/lib/jquery",function(t){return function(){return t.$}}(this)),define("cdf/dashboard/Utf8Encoder",["../lib/jquery"],function(t){var e={encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},decode:function(t){for(var e="",n=0,r=0,i=0,o=0;n<t.length;)r=t.charCodeAt(n),r<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(i=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3);return e}};return{encode_prepare:function(t){return null!=t&&(t=t.replace(/\+/g," "),-1!=navigator.userAgent.toLowerCase().indexOf("msie")||-1!=navigator.userAgent.toLowerCase().indexOf("opera"))?e.decode(t):t},encode_prepare_arr:function(e){var n=this;if("number"==typeof e)return e;if(t.isArray(e)){var r=new Array(e.length);return t.each(e,function(t,e){r[t]=n.encode_prepare(e)}),r}return n.encode_prepare(e)}}}),function(t,e,n){"undefined"!=typeof module?module.exports=n():"undefined"!=typeof define&&"object"==typeof define.amd?define("cdf/lib/Base",n):e.Base=n()}(0,this,function(){var t=function(){};return t.extend=function(e,n){var r=t.prototype.extend;t._prototyping=!0;var i=new this;r.call(i,e),i.base=function(){},delete t._prototyping;var o=i.constructor,a=i.constructor=function(){if(!t._prototyping)if(this._constructing||this.constructor===a)this._constructing=!0,o.apply(this,arguments),delete this._constructing;else if(null!==arguments[0])return(arguments[0].extend||r).call(arguments[0],i)};return a.ancestor=this,a.extend=this.extend,a.forEach=this.forEach,a.implement=this.implement,a.prototype=i,a.toString=this.toString,a.valueOf=function(t){return"object"===t?a:o.valueOf()},r.call(a,n),"function"==typeof a.init&&a.init(),a},t.prototype={extend:function(e,n){if(arguments.length>1){var r=this[e];if(r&&"function"==typeof n&&(!r.valueOf||r.valueOf()!==n.valueOf())&&/\bbase\b/.test(n)){var i=n.valueOf();n=function(){var e=this.base||t.prototype.base;this.base=r;var n=i.apply(this,arguments);return this.base=e,n},n.valueOf=function(t){return"object"===t?n:i},n.toString=t.toString}this[e]=n}else if(e){var o=t.prototype.extend;t._prototyping||"function"==typeof this||(o=this.extend||o);for(var a={toSource:null},s=["constructor","toString","valueOf"],l=t._prototyping?0:1;l<s.length;l++){var u=s[l];e[u]!==a[u]&&o.call(this,u,e[u])}for(var c in e)a[c]||o.call(this,c,e[c])}return this}},t=t.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(t,e,n){for(var r in t)void 0===this.prototype[r]&&e.call(n,t[r],r,t)},implement:function(){for(var t=0;t<arguments.length;t++)"function"==typeof arguments[t]?arguments[t](this.prototype):this.prototype.extend(arguments[t]);return this},toString:function(){return String(this.valueOf())}})}),define("cdf/Logger",[],function(){return{loglevels:["debug","log","info","warn","error","exception"],loglevel:"debug",log:function(t,e,n){if(e=e||"info",!(this.loglevels.indexOf(e)<this.loglevels.indexOf(this.loglevel))&&"undefined"!=typeof console){if(console[e]||("exception"===e?(e="error",t=t.stack||t):e="log"),n)try{return void console[e]("%c["+e+"] WD: "+t,n)}catch(t){}console[e]("["+e+"] WD: "+t)}},debug:function(t){return this.log(t,"debug")},info:function(t){return this.log(t,"info")},warn:function(t){return this.log(t,"warn")},error:function(t){return this.log(t,"error")},exception:function(t){return this.log(t,"exception")}}}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("cdf/lib/moment",e):t.moment=e()}(this,function(){"use strict";function t(){return Ar.apply(null,arguments)}function e(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t){return void 0===t}function o(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function s(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,n,r){return Se(t,e,n,r,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function d(t){return null==t._pf&&(t._pf=h()),t._pf}function f(t){if(null==t._isValid){var e=d(t),n=Pr.call(e.parsedDateParts,function(t){return null!=t}),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function p(t){var e=c(NaN);return null!=t?u(d(e),t):d(e).userInvalidated=!0,e}function m(t,e){var n,r,o;if(i(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),i(e._i)||(t._i=e._i),i(e._f)||(t._f=e._f),i(e._l)||(t._l=e._l),i(e._strict)||(t._strict=e._strict),i(e._tzm)||(t._tzm=e._tzm),i(e._isUTC)||(t._isUTC=e._isUTC),i(e._offset)||(t._offset=e._offset),i(e._pf)||(t._pf=d(e)),i(e._locale)||(t._locale=e._locale),jr.length>0)for(n=0;n<jr.length;n++)r=jr[n],o=e[r],i(o)||(t[r]=o);return t}function g(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Or&&(Or=!0,t.updateOffset(this),Or=!1)}function y(t){return t instanceof g||null!=t&&null!=t._isAMomentObject}function v(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=v(e)),n}function _(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&b(t[r])!==b(e[r]))&&a++;return a+o}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,n){var r=!0;return u(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function C(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Ir[e]||(w(n),Ir[e]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t){var e,n;for(n in t)e=t[n],S(e)?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(t,e){var r,i=u({},t);for(r in e)l(e,r)&&(n(t[r])&&n(e[r])?(i[r]={},u(i[r],t[r]),u(i[r],e[r])):null!=e[r]?i[r]=e[r]:delete i[r]);for(r in t)l(t,r)&&!l(e,r)&&n(t[r])&&(i[r]=u({},i[r]));return i}function M(t){null!=t&&this.set(t)}function N(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return S(r)?r.call(e,n):r}function T(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function A(){return this._invalidDate}function P(t){return this._ordinal.replace("%d",t)}function j(t,e,n,r){var i=this._relativeTime[n];return S(i)?i(t,e,n,r):i.replace(/%d/i,t)}function O(t,e){var n=this._relativeTime[t>0?"future":"past"];return S(n)?n(e):n.replace(/%s/i,e)}function I(t,e){var n=t.toLowerCase();Hr[n]=Hr[n+"s"]=Hr[e]=t}function E(t){return"string"==typeof t?Hr[t]||Hr[t.toLowerCase()]:void 0}function L(t){var e,n,r={};for(n in t)l(t,n)&&(e=E(n))&&(r[e]=t[n]);return r}function R(t,e){Wr[t]=e}function F(t){var e=[];for(var n in t)e.push({unit:n,priority:Wr[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}function B(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function H(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(zr[t]=i),e&&(zr[e[0]]=function(){return B(i.apply(this,arguments),e[1],e[2])}),n&&(zr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function U(t){var e,n,r=t.match(Ur);for(e=0,n=r.length;e<n;e++)zr[r[e]]?r[e]=zr[r[e]]:r[e]=W(r[e]);return function(e){var i,o="";for(i=0;i<n;i++)o+=S(r[i])?r[i].call(e,t):r[i];return o}}function V(t,e){return t.isValid()?(e=q(e,t.localeData()),qr[e]=qr[e]||U(e),qr[e](t)):t.localeData().invalidDate()}function q(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(Vr.lastIndex=0;r>=0&&Vr.test(t);)t=t.replace(Vr,n),Vr.lastIndex=0,r-=1;return t}function z(t,e,n){ui[t]=S(e)?e:function(t,r){return t&&n?n:e}}function $(t,e){return l(ui,t)?ui[t](e._strict,e._locale):new RegExp(G(t))}function G(t){return Y(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i}))}function Y(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),o(e)&&(r=function(t,n){n[e]=b(t)}),n=0;n<t.length;n++)ci[t[n]]=r}function X(t,e){Q(t,function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)})}function K(t,e,n){null!=e&&l(ci,t)&&ci[t](e,n._a,n,t)}function J(t){return Z(t)?366:365}function Z(t){return t%4==0&&t%100!=0||t%400==0}function tt(){return Z(this.year())}function et(e,n){return function(r){return null!=r?(rt(this,e,r),t.updateOffset(this,n),this):nt(this,e)}}function nt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function rt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&Z(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),st(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function it(t){return t=E(t),S(this[t])?this[t]():this}function ot(t,e){if("object"==typeof t){t=L(t);for(var n=F(t),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit])}else if(t=E(t),S(this[t]))return this[t](e);return this}function at(t,e){return(t%e+e)%e}function st(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=at(e,12);return t+=(e-n)/12,1===n?Z(t)?29:28:31-n%7%2}function lt(t,n){return t?e(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xi).test(n)?"format":"standalone"][t.month()]:e(this._months)?this._months:this._months.standalone}function ut(t,n){return t?e(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xi.test(n)?"format":"standalone"][t.month()]:e(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=c([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?(i=_i.call(this._shortMonthsParse,a),-1!==i?i:null):(i=_i.call(this._longMonthsParse,a),-1!==i?i:null):"MMM"===e?-1!==(i=_i.call(this._shortMonthsParse,a))?i:(i=_i.call(this._longMonthsParse,a),-1!==i?i:null):-1!==(i=_i.call(this._longMonthsParse,a))?i:(i=_i.call(this._shortMonthsParse,a),-1!==i?i:null)}function ht(t,e,n){var r,i,o;if(this._monthsParseExact)return ct.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=c([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function dt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(e=t.localeData().monthsParse(e),!o(e))return t;return n=Math.min(t.date(),st(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ft(e){return null!=e?(dt(this,e),t.updateOffset(this,!0),this):nt(this,"Month")}function pt(){return st(this.year(),this.month())}function mt(t){return this._monthsParseExact?(l(this,"_monthsRegex")||yt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=ki),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(t){return this._monthsParseExact?(l(this,"_monthsRegex")||yt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Di),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function yt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=c([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=Y(r[e]),i[e]=Y(i[e]);for(e=0;e<24;e++)o[e]=Y(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function vt(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function bt(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function _t(t,e,n){var r=7+e-n;return-(7+bt(t,0,r).getUTCDay()-e)%7+r-1}function wt(t,e,n,r,i){var o,a,s=(7+n-r)%7,l=_t(t,r,i),u=1+7*(e-1)+s+l;return u<=0?(o=t-1,a=J(o)+u):u>J(t)?(o=t+1,a=u-J(t)):(o=t,a=u),{year:o,dayOfYear:a}}function xt(t,e,n){var r,i,o=_t(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?(i=t.year()-1,r=a+Ct(i,e,n)):a>Ct(t.year(),e,n)?(r=a-Ct(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Ct(t,e,n){var r=_t(t,e,n),i=_t(t+1,e,n);return(J(t)-r+i)/7}function St(t){return xt(t,this._week.dow,this._week.doy).week}function kt(){return this._week.dow}function Dt(){return this._week.doy}function Mt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Nt(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Tt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function At(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Pt(t,e){return t.slice(e,7).concat(t.slice(0,e))}function jt(t,n){
var r=e(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(n)?"format":"standalone"];return!0===t?Pt(r,this._week.dow):t?r[t.day()]:r}function Ot(t){return!0===t?Pt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function It(t){return!0===t?Pt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Et(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=c([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?(i=_i.call(this._weekdaysParse,a),-1!==i?i:null):"ddd"===e?(i=_i.call(this._shortWeekdaysParse,a),-1!==i?i:null):(i=_i.call(this._minWeekdaysParse,a),-1!==i?i:null):"dddd"===e?-1!==(i=_i.call(this._weekdaysParse,a))?i:-1!==(i=_i.call(this._shortWeekdaysParse,a))?i:(i=_i.call(this._minWeekdaysParse,a),-1!==i?i:null):"ddd"===e?-1!==(i=_i.call(this._shortWeekdaysParse,a))?i:-1!==(i=_i.call(this._weekdaysParse,a))?i:(i=_i.call(this._minWeekdaysParse,a),-1!==i?i:null):-1!==(i=_i.call(this._minWeekdaysParse,a))?i:-1!==(i=_i.call(this._weekdaysParse,a))?i:(i=_i.call(this._shortWeekdaysParse,a),-1!==i?i:null)}function Lt(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Et.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=c([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function Rt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Tt(t,this.localeData()),this.add(t-e,"d")):e}function Ft(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Bt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=At(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ht(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Pi),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Wt(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ji),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ut(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Vt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Oi),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Vt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=c([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),l.push(o),u.push(r),u.push(i),u.push(o);for(a.sort(t),s.sort(t),l.sort(t),u.sort(t),e=0;e<7;e++)s[e]=Y(s[e]),l[e]=Y(l[e]),u[e]=Y(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function qt(){return this.hours()%12||12}function zt(){return this.hours()||24}function $t(t,e){H(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Gt(t,e){return e._meridiemParse}function Yt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Qt(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function Xt(t){return t?t.toLowerCase().replace("_","-"):t}function Kt(t){for(var e,n,r,i,o=0;o<t.length;){for(i=Xt(t[o]).split("-"),e=i.length,n=Xt(t[o+1]),n=n?n.split("-"):null;e>0;){if(r=Jt(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&_(i,n,!0)>=e-1)break;e--}o++}return Ii}function Jt(t){var e=null;if(!Fi[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=Ii._abbr;require("./locale/"+t),Zt(e)}catch(t){}return Fi[t]}function Zt(t,e){var n;return t&&(n=i(e)?ne(t):te(t,e),n?Ii=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ii._abbr}function te(t,e){if(null!==e){var n,r=Ri;if(e.abbr=t,null!=Fi[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Fi[t]._config;else if(null!=e.parentLocale)if(null!=Fi[e.parentLocale])r=Fi[e.parentLocale]._config;else{if(null==(n=Jt(e.parentLocale)))return Bi[e.parentLocale]||(Bi[e.parentLocale]=[]),Bi[e.parentLocale].push({name:t,config:e}),null;r=n._config}return Fi[t]=new M(D(r,e)),Bi[t]&&Bi[t].forEach(function(t){te(t.name,t.config)}),Zt(t),Fi[t]}return delete Fi[t],null}function ee(t,e){if(null!=e){var n,r,i=Ri;r=Jt(t),null!=r&&(i=r._config),e=D(i,e),n=new M(e),n.parentLocale=Fi[t],Fi[t]=n,Zt(t)}else null!=Fi[t]&&(null!=Fi[t].parentLocale?Fi[t]=Fi[t].parentLocale:null!=Fi[t]&&delete Fi[t]);return Fi[t]}function ne(t){var n;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ii;if(!e(t)){if(n=Jt(t))return n;t=[t]}return Kt(t)}function re(){return Er(Fi)}function ie(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[di]<0||n[di]>11?di:n[fi]<1||n[fi]>st(n[hi],n[di])?fi:n[pi]<0||n[pi]>24||24===n[pi]&&(0!==n[mi]||0!==n[gi]||0!==n[yi])?pi:n[mi]<0||n[mi]>59?mi:n[gi]<0||n[gi]>59?gi:n[yi]<0||n[yi]>999?yi:-1,d(t)._overflowDayOfYear&&(e<hi||e>fi)&&(e=fi),d(t)._overflowWeeks&&-1===e&&(e=vi),d(t)._overflowWeekday&&-1===e&&(e=bi),d(t).overflow=e),t}function oe(t,e,n){return null!=t?t:null!=e?e:n}function ae(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function se(t){var e,n,r,i,o,a=[];if(!t._d){for(r=ae(t),t._w&&null==t._a[fi]&&null==t._a[di]&&le(t),null!=t._dayOfYear&&(o=oe(t._a[hi],r[hi]),(t._dayOfYear>J(o)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),n=bt(o,0,t._dayOfYear),t._a[di]=n.getUTCMonth(),t._a[fi]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=r[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[pi]&&0===t._a[mi]&&0===t._a[gi]&&0===t._a[yi]&&(t._nextDay=!0,t._a[pi]=0),t._d=(t._useUTC?bt:vt).apply(null,a),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[pi]=24),t._w&&void 0!==t._w.d&&t._w.d!==i&&(d(t).weekdayMismatch=!0)}}function le(t){var e,n,r,i,o,a,s,l;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)o=1,a=4,n=oe(e.GG,t._a[hi],xt(ke(),1,4).year),r=oe(e.W,1),((i=oe(e.E,1))<1||i>7)&&(l=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var u=xt(ke(),o,a);n=oe(e.gg,t._a[hi],u.year),r=oe(e.w,u.week),null!=e.d?((i=e.d)<0||i>6)&&(l=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(l=!0)):i=o}r<1||r>Ct(n,o,a)?d(t)._overflowWeeks=!0:null!=l?d(t)._overflowWeekday=!0:(s=wt(n,r,i,o,a),t._a[hi]=s.year,t._dayOfYear=s.dayOfYear)}function ue(t){var e,n,r,i,o,a,s=t._i,l=Hi.exec(s)||Wi.exec(s);if(l){for(d(t).iso=!0,e=0,n=Vi.length;e<n;e++)if(Vi[e][1].exec(l[1])){i=Vi[e][0],r=!1!==Vi[e][2];break}if(null==i)return void(t._isValid=!1);if(l[3]){for(e=0,n=qi.length;e<n;e++)if(qi[e][1].exec(l[3])){o=(l[2]||" ")+qi[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(l[4]){if(!Ui.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),ye(t)}else t._isValid=!1}function ce(t,e,n,r,i,o){var a=[he(t),Si.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function he(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function de(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function fe(t,e,n){if(t){if(Ti.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return d(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function pe(t,e,n){if(t)return Gi[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function me(t){var e=$i.exec(de(t._i));if(e){var n=ce(e[4],e[3],e[2],e[5],e[6],e[7]);if(!fe(e[1],n,t))return;t._a=n,t._tzm=pe(e[8],e[9],e[10]),t._d=bt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function ge(e){var n=zi.exec(e._i);if(null!==n)return void(e._d=new Date(+n[1]));ue(e),!1===e._isValid&&(delete e._isValid,me(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))}function ye(e){if(e._f===t.ISO_8601)return void ue(e);if(e._f===t.RFC_2822)return void me(e);e._a=[],d(e).empty=!0;var n,r,i,o,a,s=""+e._i,l=s.length,u=0;for(i=q(e._f,e._locale).match(Ur)||[],n=0;n<i.length;n++)o=i[n],r=(s.match($(o,e))||[])[0],r&&(a=s.substr(0,s.indexOf(r)),a.length>0&&d(e).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),zr[o]?(r?d(e).empty=!1:d(e).unusedTokens.push(o),K(o,r,e)):e._strict&&!r&&d(e).unusedTokens.push(o);d(e).charsLeftOver=l-u,s.length>0&&d(e).unusedInput.push(s),e._a[pi]<=12&&!0===d(e).bigHour&&e._a[pi]>0&&(d(e).bigHour=void 0),d(e).parsedDateParts=e._a.slice(0),d(e).meridiem=e._meridiem,e._a[pi]=ve(e._locale,e._a[pi],e._meridiem),se(e),ie(e)}function ve(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(r=t.isPM(n),r&&e<12&&(e+=12),r||12!==e||(e=0),e):e}function be(t){var e,n,r,i,o;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],ye(e),f(e)&&(o+=d(e).charsLeftOver,o+=10*d(e).unusedTokens.length,d(e).score=o,(null==r||o<r)&&(r=o,n=e));u(t,n||e)}function _e(t){if(!t._d){var e=L(t._i);t._a=s([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),se(t)}}function we(t){var e=new g(ie(xe(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function xe(t){var n=t._i,r=t._f;return t._locale=t._locale||ne(t._l),null===n||void 0===r&&""===n?p({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),y(n)?new g(ie(n)):(a(n)?t._d=n:e(r)?be(t):r?ye(t):Ce(t),f(t)||(t._d=null),t))}function Ce(r){var l=r._i;i(l)?r._d=new Date(t.now()):a(l)?r._d=new Date(l.valueOf()):"string"==typeof l?ge(r):e(l)?(r._a=s(l.slice(0),function(t){return parseInt(t,10)}),se(r)):n(l)?_e(r):o(l)?r._d=new Date(l):t.createFromInputFallback(r)}function Se(t,i,o,a,s){var l={};return!0!==o&&!1!==o||(a=o,o=void 0),(n(t)&&r(t)||e(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=o,l._i=t,l._f=i,l._strict=a,we(l)}function ke(t,e,n,r){return Se(t,e,n,r,!1)}function De(t,n){var r,i;if(1===n.length&&e(n[0])&&(n=n[0]),!n.length)return ke();for(r=n[0],i=1;i<n.length;++i)n[i].isValid()&&!n[i][t](r)||(r=n[i]);return r}function Me(){return De("isBefore",[].slice.call(arguments,0))}function Ne(){return De("isAfter",[].slice.call(arguments,0))}function Te(t){for(var e in t)if(-1===_i.call(Ki,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Ki.length;++r)if(t[Ki[r]]){if(n)return!1;parseFloat(t[Ki[r]])!==b(t[Ki[r]])&&(n=!0)}return!0}function Ae(){return this._isValid}function Pe(){return Xe(NaN)}function je(t){var e=L(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=Te(e),this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ne(),this._bubble()}function Oe(t){return t instanceof je}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ee(t,e){H(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+B(~~(t/60),2)+e+B(~~t%60,2)})}function Le(t,e){var n=(e||"").match(t);if(null===n)return null;var r=n[n.length-1]||[],i=(r+"").match(Ji)||["-",0,0],o=60*i[1]+b(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Re(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(y(e)||a(e)?e.valueOf():ke(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):ke(e).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Be(e,n,r){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Le(ai,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(i=Fe(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!n||this._changeInProgress?en(this,Xe(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Fe(this)}function He(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function We(t){return this.utcOffset(0,t)}function Ue(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this}function Ve(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Le(oi,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function qe(t){return!!this.isValid()&&(t=t?ke(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function ze(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function $e(){if(!i(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),t=xe(t),t._a){var e=t._isUTC?c(t._a):ke(t._a);this._isDSTShifted=this.isValid()&&_(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ge(){return!!this.isValid()&&!this._isUTC}function Ye(){return!!this.isValid()&&this._isUTC}function Qe(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xe(t,e){var n,r,i,a=t,s=null;return Oe(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:o(t)?(a={},e?a[e]=t:a.milliseconds=t):(s=Zi.exec(t))?(n="-"===s[1]?-1:1,a={y:0,d:b(s[fi])*n,h:b(s[pi])*n,m:b(s[mi])*n,s:b(s[gi])*n,ms:b(Ie(1e3*s[yi]))*n}):(s=to.exec(t))?(n="-"===s[1]?-1:1,a={y:Ke(s[2],n),M:Ke(s[3],n),w:Ke(s[4],n),d:Ke(s[5],n),h:Ke(s[6],n),m:Ke(s[7],n),s:Ke(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=Ze(ke(a.from),ke(a.to)),a={},a.ms=i.milliseconds,a.M=i.months),r=new je(a),Oe(t)&&l(t,"_locale")&&(r._locale=t._locale),r}function Ke(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Je(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ze(t,e){var n;return t.isValid()&&e.isValid()?(e=Re(e,t),t.isBefore(e)?n=Je(t,e):(n=Je(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tn(t,e){return function(n,r){var i,o;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Xe(n,r),en(this,i,t),this}}function en(e,n,r,i){var o=n._milliseconds,a=Ie(n._days),s=Ie(n._months);e.isValid()&&(i=null==i||i,s&&dt(e,nt(e,"Month")+s*r),a&&rt(e,"Date",nt(e,"Date")+a*r),o&&e._d.setTime(e._d.valueOf()+o*r),i&&t.updateOffset(e,a||s))}function nn(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function rn(e,n){var r=e||ke(),i=Re(r,this).startOf("day"),o=t.calendarFormat(this,i)||"sameElse",a=n&&(S(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,ke(r)))}function on(){return new g(this)}function an(t,e){var n=y(t)?t:ke(t);return!(!this.isValid()||!n.isValid())&&(e=E(e)||"millisecond","millisecond"===e?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())}function sn(t,e){var n=y(t)?t:ke(t);return!(!this.isValid()||!n.isValid())&&(e=E(e)||"millisecond","millisecond"===e?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())}function ln(t,e,n,r){var i=y(t)?t:ke(t),o=y(e)?e:ke(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&(r=r||"()",("("===r[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n)))}function un(t,e){var n,r=y(t)?t:ke(t);return!(!this.isValid()||!r.isValid())&&(e=E(e)||"millisecond","millisecond"===e?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))}function cn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function hn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function dn(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(r=Re(t,this),!r.isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=E(e)){case"year":o=fn(this,r)/12;break;case"month":o=fn(this,r);break;case"quarter":o=fn(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:v(o)}function fn(t,e){var n,r,i=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(i,"months");return e-o<0?(n=t.clone().add(i-1,"months"),r=(e-o)/(o-n)):(n=t.clone().add(i+1,"months"),r=(e-o)/(n-o)),-(i+r)||0}function pn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function mn(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?V(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(n,"Z")):V(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)}function yn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=V(this,e);return this.localeData().postformat(n)}function vn(t,e){return this.isValid()&&(y(t)&&t.isValid()||ke(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function bn(t){return this.from(ke(),t)}function _n(t,e){return this.isValid()&&(y(t)&&t.isValid()||ke(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function wn(t){return this.to(ke(),t)}function xn(t){var e;return void 0===t?this._locale._abbr:(e=ne(t),null!=e&&(this._locale=e),this)}function Cn(){return this._locale}function Sn(t,e){return(t%e+e)%e}function kn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-so:new Date(t,e,n).valueOf()}function Dn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-so:Date.UTC(t,e,n)}function Mn(e){var n;if(void 0===(e=E(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Dn:kn;switch(e){case"year":n=r(this.year(),0,1);break;case"quarter":n=r(this.year(),this.month()-this.month()%3,1);break;case"month":n=r(this.year(),this.month(),1);break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=r(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=Sn(n+(this._isUTC?0:this.utcOffset()*oo),ao);break;case"minute":n=this._d.valueOf(),n-=Sn(n,oo);break;case"second":n=this._d.valueOf(),n-=Sn(n,io)}return this._d.setTime(n),t.updateOffset(this,!0),this}function Nn(e){var n;if(void 0===(e=E(e))||"millisecond"===e||!this.isValid())return this;var r=this._isUTC?Dn:kn;switch(e){case"year":n=r(this.year()+1,0,1)-1;break;case"quarter":n=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=r(this.year(),this.month()+1,1)-1;break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=ao-Sn(n+(this._isUTC?0:this.utcOffset()*oo),ao)-1;break;case"minute":n=this._d.valueOf(),n+=oo-Sn(n,oo)-1;break;case"second":n=this._d.valueOf(),n+=io-Sn(n,io)-1}return this._d.setTime(n),t.updateOffset(this,!0),this}function Tn(){return this._d.valueOf()-6e4*(this._offset||0)}function An(){return Math.floor(this.valueOf()/1e3)}function Pn(){return new Date(this.valueOf())}function jn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function On(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function In(){return this.isValid()?this.toISOString():null}function En(){return f(this)}function Ln(){return u({},d(this))}function Rn(){return d(this).overflow}function Fn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Bn(t,e){H(0,[t,t.length],0,e)}function Hn(t){return qn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Wn(t){return qn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Un(){return Ct(this.year(),1,4)}function Vn(){var t=this.localeData()._week;return Ct(this.year(),t.dow,t.doy)}function qn(t,e,n,r,i){var o;return null==t?xt(this,r,i).year:(o=Ct(t,r,i),e>o&&(e=o),zn.call(this,t,e,n,r,i))}function zn(t,e,n,r,i){var o=wt(t,e,n,r,i),a=bt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function $n(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Gn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Yn(t,e){e[yi]=b(1e3*("0."+t))}function Qn(){return this._isUTC?"UTC":""}function Xn(){return this._isUTC?"Coordinated Universal Time":""}function Kn(t){return ke(1e3*t)}function Jn(){return ke.apply(null,arguments).parseZone()}function Zn(t){return t}function tr(t,e,n,r){var i=ne(),o=c().set(r,e);return i[n](o,t)}function er(t,e,n){if(o(t)&&(e=t,t=void 0),t=t||"",null!=e)return tr(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=tr(t,r,n,"month");return i}function nr(t,e,n,r){"boolean"==typeof t?(o(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,o(e)&&(n=e,e=void 0),e=e||"");var i=ne(),a=t?i._week.dow:0;if(null!=n)return tr(e,(n+a)%7,r,"day");var s,l=[];for(s=0;s<7;s++)l[s]=tr(e,(s+a)%7,r,"day");return l}function rr(t,e){return er(t,e,"months")}function ir(t,e){return er(t,e,"monthsShort")}function or(t,e,n){return nr(t,e,n,"weekdays")}function ar(t,e,n){return nr(t,e,n,"weekdaysShort")}function sr(t,e,n){return nr(t,e,n,"weekdaysMin")}function lr(){var t=this._data;return this._milliseconds=go(this._milliseconds),this._days=go(this._days),this._months=go(this._months),t.milliseconds=go(t.milliseconds),t.seconds=go(t.seconds),t.minutes=go(t.minutes),t.hours=go(t.hours),t.months=go(t.months),t.years=go(t.years),this}function ur(t,e,n,r){var i=Xe(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function cr(t,e){return ur(this,t,e,1)}function hr(t,e){return ur(this,t,e,-1)}function dr(t){return t<0?Math.floor(t):Math.ceil(t)}function fr(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*dr(mr(s)+a),a=0,s=0),l.milliseconds=o%1e3,t=v(o/1e3),l.seconds=t%60,e=v(t/60),l.minutes=e%60,n=v(e/60),l.hours=n%24,a+=v(n/24),i=v(pr(a)),s+=i,a-=dr(mr(i)),r=v(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function pr(t){return 4800*t/146097}function mr(t){return 146097*t/4800}function gr(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=E(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+pr(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(mr(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}}function yr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN}function vr(t){return function(){return this.as(t)}}function br(){return Xe(this)}function _r(t){return t=E(t),this.isValid()?this[t+"s"]():NaN}function wr(t){return function(){return this.isValid()?this._data[t]:NaN}}function xr(){return v(this.days()/7)}function Cr(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function Sr(t,e,n){var r=Xe(t).abs(),i=Oo(r.as("s")),o=Oo(r.as("m")),a=Oo(r.as("h")),s=Oo(r.as("d")),l=Oo(r.as("M")),u=Oo(r.as("y")),c=i<=Io.ss&&["s",i]||i<Io.s&&["ss",i]||o<=1&&["m"]||o<Io.m&&["mm",o]||a<=1&&["h"]||a<Io.h&&["hh",a]||s<=1&&["d"]||s<Io.d&&["dd",s]||l<=1&&["M"]||l<Io.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,Cr.apply(null,c)}function kr(t){return void 0===t?Oo:"function"==typeof t&&(Oo=t,!0)}function Dr(t,e){return void 0!==Io[t]&&(void 0===e?Io[t]:(Io[t]=e,"s"===t&&(Io.ss=e-1),!0))}function Mr(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=Sr(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Nr(t){return(t>0)-(t<0)||+t}function Tr(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n,r=Eo(this._milliseconds)/1e3,i=Eo(this._days),o=Eo(this._months);t=v(r/60),e=v(t/60),r%=60,t%=60,n=v(o/12),o%=12;var a=n,s=o,l=i,u=e,c=t,h=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var f=d<0?"-":"",p=Nr(this._months)!==Nr(d)?"-":"",m=Nr(this._days)!==Nr(d)?"-":"",g=Nr(this._milliseconds)!==Nr(d)?"-":"";return f+"P"+(a?p+a+"Y":"")+(s?p+s+"M":"")+(l?m+l+"D":"")+(u||c||h?"T":"")+(u?g+u+"H":"")+(c?g+c+"M":"")+(h?g+h+"S":"")}var Ar,Pr;Pr=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var jr=t.momentProperties=[],Or=!1,Ir={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Er;Er=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var Lr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Rr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Fr=/\d{1,2}/,Br={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Hr={},Wr={},Ur=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Vr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qr={},zr={},$r=/\d/,Gr=/\d\d/,Yr=/\d{3}/,Qr=/\d{4}/,Xr=/[+-]?\d{6}/,Kr=/\d\d?/,Jr=/\d\d\d\d?/,Zr=/\d\d\d\d\d\d?/,ti=/\d{1,3}/,ei=/\d{1,4}/,ni=/[+-]?\d{1,6}/,ri=/\d+/,ii=/[+-]?\d+/,oi=/Z|[+-]\d\d:?\d\d/gi,ai=/Z|[+-]\d\d(?::?\d\d)?/gi,si=/[+-]?\d+(\.\d{1,3})?/,li=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ui={},ci={},hi=0,di=1,fi=2,pi=3,mi=4,gi=5,yi=6,vi=7,bi=8;H("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),I("year","y"),R("year",1),z("Y",ii),z("YY",Kr,Gr),z("YYYY",ei,Qr),z("YYYYY",ni,Xr),z("YYYYYY",ni,Xr),Q(["YYYYY","YYYYYY"],hi),Q("YYYY",function(e,n){n[hi]=2===e.length?t.parseTwoDigitYear(e):b(e)}),Q("YY",function(e,n){n[hi]=t.parseTwoDigitYear(e)}),Q("Y",function(t,e){e[hi]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)};var _i,wi=et("FullYear",!0);_i=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),H("MMMM",0,0,function(t){return this.localeData().months(this,t)}),I("month","M"),R("month",8),z("M",Kr),z("MM",Kr,Gr),z("MMM",function(t,e){return e.monthsShortRegex(t)}),z("MMMM",function(t,e){return e.monthsRegex(t)}),Q(["M","MM"],function(t,e){e[di]=b(t)-1}),Q(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[di]=i:d(n).invalidMonth=t});var xi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ci="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Si="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ki=li,Di=li;H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),R("week",5),R("isoWeek",5),z("w",Kr),z("ww",Kr,Gr),z("W",Kr),z("WW",Kr,Gr),X(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=b(t)});var Mi={dow:0,doy:6};H("d",0,"do","day"),H("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),H("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),H("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),z("d",Kr),z("e",Kr),z("E",Kr),z("dd",function(t,e){return e.weekdaysMinRegex(t)}),z("ddd",function(t,e){return e.weekdaysShortRegex(t)}),z("dddd",function(t,e){return e.weekdaysRegex(t)}),X(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:d(n).invalidWeekday=t}),X(["d","e","E"],function(t,e,n,r){e[r]=b(t)});var Ni="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ai="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pi=li,ji=li,Oi=li;H("H",["HH",2],0,"hour"),H("h",["hh",2],0,qt),H("k",["kk",2],0,zt),H("hmm",0,0,function(){return""+qt.apply(this)+B(this.minutes(),2)}),H("hmmss",0,0,function(){return""+qt.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),$t("a",!0),$t("A",!1),I("hour","h"),
R("hour",13),z("a",Gt),z("A",Gt),z("H",Kr),z("h",Kr),z("k",Kr),z("HH",Kr,Gr),z("hh",Kr,Gr),z("kk",Kr,Gr),z("hmm",Jr),z("hmmss",Zr),z("Hmm",Jr),z("Hmmss",Zr),Q(["H","HH"],pi),Q(["k","kk"],function(t,e,n){var r=b(t);e[pi]=24===r?0:r}),Q(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),Q(["h","hh"],function(t,e,n){e[pi]=b(t),d(n).bigHour=!0}),Q("hmm",function(t,e,n){var r=t.length-2;e[pi]=b(t.substr(0,r)),e[mi]=b(t.substr(r)),d(n).bigHour=!0}),Q("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[pi]=b(t.substr(0,r)),e[mi]=b(t.substr(r,2)),e[gi]=b(t.substr(i)),d(n).bigHour=!0}),Q("Hmm",function(t,e,n){var r=t.length-2;e[pi]=b(t.substr(0,r)),e[mi]=b(t.substr(r))}),Q("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[pi]=b(t.substr(0,r)),e[mi]=b(t.substr(r,2)),e[gi]=b(t.substr(i))});var Ii,Ei=/[ap]\.?m?\.?/i,Li=et("Hours",!0),Ri={calendar:Lr,longDateFormat:Rr,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Fr,relativeTime:Br,months:Ci,monthsShort:Si,week:Mi,weekdays:Ni,weekdaysMin:Ai,weekdaysShort:Ti,meridiemParse:Ei},Fi={},Bi={},Hi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Wi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ui=/Z|[+-]\d\d(?::?\d\d)?/,Vi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],qi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],zi=/^\/?Date\((\-?\d+)/i,$i=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Gi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Yi=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()}),Qi=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}),Xi=function(){return Date.now?Date.now():+new Date},Ki=["year","quarter","month","week","day","hour","minute","second","millisecond"];Ee("Z",":"),Ee("ZZ",""),z("Z",ai),z("ZZ",ai),Q(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Le(ai,t)});var Ji=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Zi=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,to=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Xe.fn=je.prototype,Xe.invalid=Pe;var eo=tn(1,"add"),no=tn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ro=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)}),io=1e3,oo=60*io,ao=60*oo,so=3506328*ao;H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Bn("gggg","weekYear"),Bn("ggggg","weekYear"),Bn("GGGG","isoWeekYear"),Bn("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),z("G",ii),z("g",ii),z("GG",Kr,Gr),z("gg",Kr,Gr),z("GGGG",ei,Qr),z("gggg",ei,Qr),z("GGGGG",ni,Xr),z("ggggg",ni,Xr),X(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=b(t)}),X(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),I("quarter","Q"),R("quarter",7),z("Q",$r),Q("Q",function(t,e){e[di]=3*(b(t)-1)}),H("D",["DD",2],"Do","date"),I("date","D"),R("date",9),z("D",Kr),z("DD",Kr,Gr),z("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),Q(["D","DD"],fi),Q("Do",function(t,e){e[fi]=b(t.match(Kr)[0])});var lo=et("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),R("dayOfYear",4),z("DDD",ti),z("DDDD",Yr),Q(["DDD","DDDD"],function(t,e,n){n._dayOfYear=b(t)}),H("m",["mm",2],0,"minute"),I("minute","m"),R("minute",14),z("m",Kr),z("mm",Kr,Gr),Q(["m","mm"],mi);var uo=et("Minutes",!1);H("s",["ss",2],0,"second"),I("second","s"),R("second",15),z("s",Kr),z("ss",Kr,Gr),Q(["s","ss"],gi);var co=et("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),R("millisecond",16),z("S",ti,$r),z("SS",ti,Gr),z("SSS",ti,Yr);var ho;for(ho="SSSS";ho.length<=9;ho+="S")z(ho,ri);for(ho="S";ho.length<=9;ho+="S")Q(ho,Yn);var fo=et("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var po=g.prototype;po.add=eo,po.calendar=rn,po.clone=on,po.diff=dn,po.endOf=Nn,po.format=yn,po.from=vn,po.fromNow=bn,po.to=_n,po.toNow=wn,po.get=it,po.invalidAt=Rn,po.isAfter=an,po.isBefore=sn,po.isBetween=ln,po.isSame=un,po.isSameOrAfter=cn,po.isSameOrBefore=hn,po.isValid=En,po.lang=ro,po.locale=xn,po.localeData=Cn,po.max=Qi,po.min=Yi,po.parsingFlags=Ln,po.set=ot,po.startOf=Mn,po.subtract=no,po.toArray=jn,po.toObject=On,po.toDate=Pn,po.toISOString=mn,po.inspect=gn,po.toJSON=In,po.toString=pn,po.unix=An,po.valueOf=Tn,po.creationData=Fn,po.year=wi,po.isLeapYear=tt,po.weekYear=Hn,po.isoWeekYear=Wn,po.quarter=po.quarters=$n,po.month=ft,po.daysInMonth=pt,po.week=po.weeks=Mt,po.isoWeek=po.isoWeeks=Nt,po.weeksInYear=Vn,po.isoWeeksInYear=Un,po.date=lo,po.day=po.days=Rt,po.weekday=Ft,po.isoWeekday=Bt,po.dayOfYear=Gn,po.hour=po.hours=Li,po.minute=po.minutes=uo,po.second=po.seconds=co,po.millisecond=po.milliseconds=fo,po.utcOffset=Be,po.utc=We,po.local=Ue,po.parseZone=Ve,po.hasAlignedHourOffset=qe,po.isDST=ze,po.isLocal=Ge,po.isUtcOffset=Ye,po.isUtc=Qe,po.isUTC=Qe,po.zoneAbbr=Qn,po.zoneName=Xn,po.dates=x("dates accessor is deprecated. Use date instead.",lo),po.months=x("months accessor is deprecated. Use month instead",ft),po.years=x("years accessor is deprecated. Use year instead",wi),po.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",He),po.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",$e);var mo=M.prototype;mo.calendar=N,mo.longDateFormat=T,mo.invalidDate=A,mo.ordinal=P,mo.preparse=Zn,mo.postformat=Zn,mo.relativeTime=j,mo.pastFuture=O,mo.set=k,mo.months=lt,mo.monthsShort=ut,mo.monthsParse=ht,mo.monthsRegex=gt,mo.monthsShortRegex=mt,mo.week=St,mo.firstDayOfYear=Dt,mo.firstDayOfWeek=kt,mo.weekdays=jt,mo.weekdaysMin=It,mo.weekdaysShort=Ot,mo.weekdaysParse=Lt,mo.weekdaysRegex=Ht,mo.weekdaysShortRegex=Wt,mo.weekdaysMinRegex=Ut,mo.isPM=Yt,mo.meridiem=Qt,Zt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=x("moment.lang is deprecated. Use moment.locale instead.",Zt),t.langData=x("moment.langData is deprecated. Use moment.localeData instead.",ne);var go=Math.abs,yo=vr("ms"),vo=vr("s"),bo=vr("m"),_o=vr("h"),wo=vr("d"),xo=vr("w"),Co=vr("M"),So=vr("Q"),ko=vr("y"),Do=wr("milliseconds"),Mo=wr("seconds"),No=wr("minutes"),To=wr("hours"),Ao=wr("days"),Po=wr("months"),jo=wr("years"),Oo=Math.round,Io={ss:44,s:45,m:45,h:22,d:26,M:11},Eo=Math.abs,Lo=je.prototype;return Lo.isValid=Ae,Lo.abs=lr,Lo.add=cr,Lo.subtract=hr,Lo.as=gr,Lo.asMilliseconds=yo,Lo.asSeconds=vo,Lo.asMinutes=bo,Lo.asHours=_o,Lo.asDays=wo,Lo.asWeeks=xo,Lo.asMonths=Co,Lo.asQuarters=So,Lo.asYears=ko,Lo.valueOf=yr,Lo._bubble=fr,Lo.clone=br,Lo.get=_r,Lo.milliseconds=Do,Lo.seconds=Mo,Lo.minutes=No,Lo.hours=To,Lo.days=Ao,Lo.weeks=xr,Lo.months=Po,Lo.years=jo,Lo.humanize=Mr,Lo.toISOString=Tr,Lo.toString=Tr,Lo.toJSON=Tr,Lo.locale=xn,Lo.localeData=Cn,Lo.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tr),Lo.lang=ro,H("X",0,0,"unix"),H("x",0,0,"valueOf"),z("x",ii),z("X",si),Q("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),Q("x",function(t,e,n){n._d=new Date(b(t))}),t.version="2.24.0",function(t){Ar=t}(ke),t.fn=po,t.min=Me,t.max=Ne,t.now=Xi,t.utc=c,t.unix=Kn,t.months=rr,t.isDate=a,t.locale=Zt,t.invalid=p,t.duration=Xe,t.isMoment=y,t.weekdays=or,t.parseZone=Jn,t.localeData=ne,t.isDuration=Oe,t.monthsShort=ir,t.weekdaysMin=sr,t.defineLocale=te,t.updateLocale=ee,t.locales=re,t.weekdaysShort=ar,t.normalizeUnits=E,t.relativeTimeRounding=kr,t.relativeTimeThreshold=Dr,t.calendarFormat=nn,t.prototype=po,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}),define("cdf/lib/CCC/def",[],function(){function t(n,r,i){if(n&&!(n instanceof t.QualifiedName)){var o=typeof n;if("object"===o){for(var a in n)e(a,n[a],r);return t}if("array"===o){for(var a in n)e(n[a],r);return t}}return e(n,r,i),r}function e(e,n,r){e=t.qualName(e),r=t.space(e.namespace,r),e.name&&(r[e.name]=n,n instanceof Object&&t.qualNameOf(n,e))}function n(e){t.log=t.logger("[DEF]"),ht&&ht.forEach(function(t){t(e)})}function r(){return t.debug}function i(t,e){t=o(t,e);var n=u("log",t);return n.log=n,n.level=r,ft.forEach(function(e){n[e]=u(pt[e]||e,t)}),n}function o(e,n){return e&&(t.fun.is(e)?e.call(n):e)}function a(e,n,a){var s=function(r){if(t.debug>1){var s=e[n||"log"]=i(a,e);s[r||"log"].apply(s,ot.call(arguments,1))}else"error"===r&&l.apply(null,t.array.append([o(a,e)],arguments,1))},u=s.bind("log");return u.log=u,u.level=r,ft.forEach(function(t){u[t]=s.bind(t)}),u}function s(){function t(){}return t.log=t,t.level=r,ft.forEach(function(e){t[e]=t}),t}function l(e,n,r){throw n&&"object"==typeof n&&n.message&&(n=n.message),n=(e?e+": ":"")+t.nullyTo(n,"")+(r?" "+r:""),new Error(n)}function u(e,n){var r,i=console,o=i[e]||i.log;if(o){var a=n?n+": %s":"%s";if(t.fun.is(o))r=o.bind(i,a);else{var s=Function.prototype.apply;r=function(){s.call(o,i,t.array.append([a],arguments))}}}return r}function c(){function t(t){function e(){n=t}return e.toString=h,e}function e(t){if(void 0!==n)throw new Error("Access denied.");var e=(t(),n);return n=void 0,e}var n;return e.safe=t,e.property=d,e}function h(){return"SAFE"}function d(e,n){function r(n,r){return t.setNonEnum(n,e,o.safe(r)),r}function i(t){return o(t[e])}e||(e=mt(n));var o=this;return i.init=r,i.propertyName=e,i}function f(t){var e;t&&(t instanceof Array?(e=t,t=e.join(".")):e=t.split(".")),e&&e.length>1?(this.name=e.pop(),this.namespace=e.join(".")):(this.name=t||null,this.namespace=null)}function p(e,n){var r=n||yt;if(e){var i=e.split("."),o=i.length;if(o){var a,s=0;if(r===t.global){a=i[0];var l=t.getOwn(vt,a);l&&(r=l,s++)}for(;s<o;)a=i[s++],r=r[a]||(r[a]={})}}return r}function m(t){return function(e){return g(e,ot.call(arguments,1),t)}}function g(e,n,r){for(var i,o=0,a=n.length;o<a;)(i=n[o++])&&(i=t.object.as(i.prototype||i))&&y(e,i,r);return e}function y(t,e,n){for(var r in e)v(t,r,e[r],n)}function v(e,n,r,i){if(void 0!==r){var o,a=t.object.asNative(e[n]);a?(o=t.object.as(r),o?(rt.call(e,n)||(e[n]=a=Object.create(a)),y(a,o,i)):e[n]=r):(o=t.object.asNative(r),o&&(r=(i||Object.create)(o)),e[n]=r)}}function b(e){var n,r;for(n in e)(r=t.object.asNative(e[n]))&&b(e[n]=Object.create(r))}function _(e,n){if(n){var r=e.configure;t.fun.is(r)?r.call(e,n):_.generic(e,n)}return e}function w(e,n){function r(e){var r={};i.push(r);for(var o in e)if(o){var a=e[o];if(void 0===a)continue;var s,l,u,c,h=r,d=o.indexOf("."),f=null;if(d>=0)for(n?(f=[o.substr(0,d)],o=o.substr(d+1)):(f=o.split("."),o=f.pop()),s=f.length,l=-1;++l<s;)(u=f[l])&&(c=h[u],void 0===c?h[u]=c={}:null!==c&&t.object.is(c)&&c.constructor===Object||(i.push(r=c={}),l=-1),h=c);var p=h[o];if(p!==a){if(void 0!==p){if(!x(a)||!x(p))continue;if(i.push(r=h={}),f)for(l=-1;++l<s;)(u=f[l])&&(h=h[u]={})}h[o]=a}}}if(!e)return[];var i=[];return t.array.each(e,r),i}function x(e){return e&&t.object.is(e)&&!C(e)}function C(t){return t.constructor!==Object&&!(t instanceof Array)}function S(e,n){if(n){var r=n.prototype,i=e.prototype=Object.create(r);t.setNonEnum(i,"constructor",e),"__proto__"in i||t.setNonEnum(i,"__proto__",r)}return e}function k(e,n,r){function i(){var t=r.base;r.base=n;try{return e.apply(this,arguments)}finally{r.base=t}}function o(){var t=N(this),r=t.base;t.base=n;try{return e.apply(this,arguments)}finally{t.base=r}}return e?n&&n!==e&&D(e)?(M(r),t.fun.wraps(r?i:o,e)):e:n}function D(t){return wt.test(t)}function M(e){if(e===nt)throw t.error.invalidArgument("proto","Cannot change Object.prototype.");return e}function N(e){M(t.protoOf(e))}function T(e,n){var r=t.fun.as(e[n]);return r===nt[n]?null:r}function A(e,n,r){e=ut(e);var i=t.protoOf(e),o=t.rootProtoOf(e),a=t.get(r,"enumerable",!0);return t.array.each(n,function(n){(n=ut(n))&&(lt?t.ownKeys(n).forEach(function(t){E(e,t,lt(n,t),i,o,a)}):t.eachOwn(n,function(t,n){O(e,n,t,i,o,a)}))}),t}function P(e,n,r,i){e=ut(e);var o=t.get(i,"enumerable",!0);return O(e,n,r,t.protoOf(e),t.rootProtoOf(e),o)}function j(t){return"base"!==t&&"constructor"!==t}function O(e,n,r,i,o,a){return void 0!==r&&i[n]!==r&&j(n)&&I(e,n,r,o,a),t}function I(e,n,r,i,o){var a;r&&(a=t.fun.as(r))?(r=t.overrides(a,T(e,n),i),o?e[n]=r:t.setNonEnum(e,n,r)):v(e,n,r,t.identity)}function E(e,n,r,i,o,a){"use strict";var s;if(j(n))if(r.get||r.set){var l=L(i,n);l&&((r.get||l.get)&&(r.get=t.overrides(r.get,l.get,o)),(r.set||l.set)&&(r.set=t.overrides(r.set,l.set,o))),a||(r.enumerable=!1),st(e,n,r)}else void 0!==(s=r.value)&&I(e,n,s,o,a);return t}function L(e,n){var r;if(n in e)for(;e=t.protoOf(e);)if(r=lt(e,n))return r}function R(e,n,r){this.baseType=n||null;var i=this.constructor;if(i.Ctor)throw t.error.operationInvalid("MetaType already has an associated type constructor.");if(e&&e.Meta)throw t.error.argumentInvalid("TypeCtor","Specified type constructor already has an associated MetaType.");this.external=!!e,this.rootType=n?n.rootType:this,this._init=n?n._init:null,this._post=n?n._post:null;var o=n&&n._mixins;this._mixins=o?o.slice():null,this.steps=void 0,e=this._initConstructor(e||this._createConstructor()),this.Ctor=i.Ctor=e}function F(e){return t.fun.is(e)&&e.meta instanceof R}function B(e,n){t.methods(this,e,n);var r=this.Ctor;return r&&H.call(this,r,e),this}function H(e,n){var r=this.prototype;t.array.each(n,function(n){t.each(ut(n),function(n,i){t.isPropPrivate(i)||(n=r[i],t.fun.is(n)?W(e,i,n):e[i]=n)})})}function W(e,n,r){function i(){var t=this.meta,e=r.apply(t,arguments);return e===t?this:e}e[n]=t.fun.wraps(i,r)}function U(e){return t.classOf(this)(e,this)}function V(e,n){function r(n,r){if(void 0!==r){var a=n[e];if(null===r)n.___proto&&rt.call(n,e)&&(delete n[e],r=n[e],l&&r!==a&&l(r,a,this,e));else if(r!==a){if(c&&(o=c(r)))throw new t.error.argumentInvalid(e,t.string.is(o)?o:"");u&&(r=i.call(this,n,r,a)),null!=r&&(n[e]=r,l&&l(r,a,this,e))}}return this}function i(n,r,i){var o=u(r);if(null==o){if(!s)return;if(rt.call(n,e))return void t.configure(i,r);if(!a)return;o=a(r,i)}return o}t.fun.is(n)&&(n={factory:n});var o,a=t.get(n,"factory"),s=t.get(n,"configurable",!!a),l=t.get(n,"change"),u=t.get(n,"cast"),c=t.get(n,"fail");return n=null,r}function q(e,n,r){t.MetaType.apply(this,arguments);var n=this.baseType;n&&(this.fieldsPrivProp=n.constructor===q?t.get(r,"fieldsPrivProp")||St:n.fieldsPrivProp)}function z(e,n,r,i){var o,a=t.lazy(e,"__eventz"),s=a[n]||(a[n]={before:[],after:[],count:0});if(t.fun.is(r))o={handler:r,_handler:null,_filter:null};else{if(!(r instanceof Object))throw t.error.argumentInvalid("handler","Invalid type.");if(o=r,!o.handler)throw t.error.argumentRequired("handler.handler");o._filter=null}o._handler=o.handler,s[i?"before":"after"].push(o),s.count++,e._on&&e._on(n,o,!!i)}function $(e,n,r){var i,o,a;if(null!=r)if(t.fun.is(r))a=r;else{if(!(r instanceof Object))throw t.error.argumentInvalid("handler","Invalid type.");a=r.handler}if((i=e.__eventz)&&(o=i[n])&&o.count){var s,l,u,c;if(a){if(s=o.before,u=J(s,a),(c=u<0)&&(s=o.after,(u=J(s,a))<0))return;l=s[u],0==--o.count?i[n]=null:(s=s.slice(),s.splice(u,1),o[c?"after":"before"]=s),G(e,n,l,!c)}else{var h=o.before,d=o.after;for(i[n]=null,u=h.length;u--;)G(e,n,h[u],!0);for(u=d.length;u--;)G(e,n,d[u],!1)}}}function G(t,e,n,r){t._off&&t._off(e,n,r),n._filter=n._handler=null}function Y(e,n,r){var i,o,a,s,l,u;if((i=e.__eventz)&&(o=i[n])&&(l=(a=o.before).length,u=(s=o.after).length),!u&&!l&&!r)return null;var c=!1,h=!1;return{type:n,phase:null,source:e,result:void 0,cancelable:!1,defaultPrevented:h,preventDefault:function(){c&&(this.defaultPrevented=h=!0)},trigger:function(n,i){if(this.phase)throw t.error.operationInvalid("Event can only be triggered once.");n||(n=e),i||(i=[this]),c=!!this.cancelable;var o;return l&&Q(n,this,i,a,l,!0),c&&this.defaultPrevented||(r&&(this.phase="default",this.result=o=r.apply(n,i)),u&&Q(n,this,i,s,u,!1)),this.phase="done",o}}}function Q(t,e,n,r,i,o){var a,s=-1;for(e.phase=o?"before":"after";++s<i;)a=r[s],a._filter&&!a._filter.apply(t,n)||a._handler.apply(t,n)}function X(e,n,r,i,o,a){if(t.string.is(r))K(e,n,r,i,o,a);else if(t.array.is(r))r.forEach(function(r){if(!t.string.is(r))throw t.error.argumentInvalid("type");K(e,n,r,i,o,a)});else{if(!t.object.is(r))throw t.error.argumentInvalid("type");t.eachOwn(r,function(t,r){K(e,n,r,t,o,a)})}}function K(e,n,r,i,o,a){if(!a&&!i)throw t.error.argumentRequired("handler");t.array.is(i)?i.forEach(function(t){e(n,r,t,o)}):e(n,r,i,o)}function J(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n].handler===e)return n;return-1}function Z(){for(;this._source.next();){var e=this._selectMany?this._selectMany.call(this._ctx,this._source.item,this._source.index):this._source.item;if(null!=e)return this._manySource=t.query(e),!0}}function tt(t,e){return e?(t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+e:e))):t}var et=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),nt=Object.prototype,rt=nt.hasOwnProperty,it=et?["toString","valueOf"]:null;Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on non-object");var e=[];for(var n in t)rt.call(t,n)&&e.push(n);return it&&it.forEach(function(n){rt.call(t,n)&&e.push(n)}),e}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";for(var e=Object(this),n=e.length>>>0,r=arguments.length>=2?arguments[1]:void 0,i=0;i<n;i++)if(i in e&&t.call(r,e[i],i,e))return!0;return!1}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var n=this.length,r=new Array(n),i=0;i<n;i++)i in this&&(r[i]=t.call(e,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n=this.length,r=new Array,i=0;i<n;i++)if(i in this){var o=this[i];t.call(e,o,i,this)&&r.push(o)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=this.length>>>0,r=0;r<n;r++)r in this&&t.call(e,this[r],r,this)}),Object.create||(Object.create=function(){function t(t){e.prototype=t||{};var r=new e;return e.prototype=n,r}var e=function(){},n=e.prototype;return t}()),Function.prototype.bind||(Function.prototype.bind=function(t){return function(e){var n=t.call(arguments,1),r=this;return function(){return r.apply(e,n.concat(t.call(arguments)))}}}(Array.prototype.slice)),this.JSON||(this.JSON={}),this.JSON.stringify||(this.JSON.stringify=function(t){return String(t)});var ot=Array.prototype.slice,at=[],st=function(){var t=Object.defineProperty;if(t)try{t({},"test",{})}catch(t){return null}return t}(),lt=function(){var t=st&&Object.getOwnPropertyDescriptor;if(t&&null===t({value:null},"value").value)return t}(),ut=function(t){return t.prototype||t};t.global=this,t.copyOwn=function(t,e){var n,r;arguments.length>=2?(n=t||{},r=e):(n={},r=t);for(var i in r)rt.call(r,i)&&(n[i]=r[i]);return n},t.copyOwn(t,{get:function(t,e,n){var r;return t&&null!=(r=t[e])?r:n},gets:function(t,e){return e.map(function(e){return t[e]})},getPath:function(e,n,r,i){if(!e)return r;if(null!=n){var o=t.array.is(n)?n:n.split("."),a=o.length;if(a)for(var s=0;s<a;){var l=o[s++],u=e[l];if(null==u){if(!i)return r;u=e[l]=null==r||isNaN(+r)?{}:[]}e=u}}return e},setPath:function(e,n,r){if(e&&null!=n){var i=t.array.is(n)?n:n.split(".");if(i.length){var o=i.pop();e=t.getPath(e,i,o,!0),null!=e&&(e[o]=r)}}return e},propGet:function(t,e){return t=""+t,function(n){return n?n[t]:e}},getOwn:function(t,e,n){var r;return t&&rt.call(t,e)&&null!=(r=t[e])?r:n},hasOwn:function(t,e){return!!t&&rt.call(t,e)},protoOf:Object.getPrototypeOf||function(t){return t.__proto__||t.constructor&&t.constructor.prototype},rootProtoOf:function(e){for(var n=null,r=t.protoOf(e);r&&r!==nt&&r!==n;)r=t.protoOf(n=r);return n},hasOwnProp:rt,set:function(t){for(var e=t||{},n=arguments,r=1,i=n.length-1;r<i;r+=2)e[n[r]]=n[r+1];return e},setDefaults:function(e,n){var r,i=e||{},o=arguments,a=o.length;if(2===a&&t.object.is(n))t.each(n,function(t,e){null==i[e]&&(i[e]=t)});else{a--;for(var s=1;s<a;s+=2)r=o[s],null==i[r]&&(i[r]=o[s+1])}return i},setUDefaults:function(e,n){var r,i=e||{},o=arguments,a=o.length;if(2===a&&t.object.is(n))t.each(n,function(t,e){void 0===i[e]&&(i[e]=t)});else{a--;for(var s=1;s<a;s+=2)r=o[s],void 0===i[r]&&(i[r]=o[s+1])}return i},setNonEnum:function(){if(!st)return function(t,e,n){return t[e]=n,t};var t={enumerable:!1,configurable:!0,writable:!0,value:void 0};return function(e,n,r){return t.value=r,st(e,n,t),t.value=null,e}}(),setConst:function(){if(!st)return function(t,e,n){return t[e]=n,t};var t={enumerable:!1,configurable:!1,writable:!1,value:void 0};return function(e,n,r){return t.value=r,st(e,n,t),t.value=null,e}}(),eachOwn:function(t,e,n){for(var r in t)rt.call(t,r)&&e.call(n,t[r],r,t);t&&it&&it.forEach(function(r){rt.call(t,r)&&e.call(n,t[r],r,t)})},each:function(t,e,n){for(var r in t)e.call(n,t[r],r,t);t&&it&&it.forEach(function(r){rt.call(t,r)&&e.call(n,t[r],r,t)})},copy:function(e,n){var r,i;return arguments.length>=2?(r=e||{},i=n):(r={},i=e),t.each(i,function(t,e){r[e]=t}),r},copyx:function(e,n,r){var i=t.get(r,"where"),o=t.get(r,"set");return t.each(n,function(t,r){i&&!i(n,r,e)||(o?o(e,r,t):e[r]=t)}),e},copyProps:function(t,e,n){var r,i;if(arguments.length>=3?(r=t||{},i=e):(r={},i=t,n=e),n){var o=-1,a=n.length;if(i)for(;++o<a;)r[n[o]]=i[n[o]];else for(;++o<a;)r[n[o]]=void 0}return r},keys:function(t){var e=[];for(var n in t)e.push(n);return t&&it&&it.forEach(function(t){e.push(t)}),e},values:function(e){var n=[];return t.each(e,function(t){n.push(t)}),n},uniqueIndex:function(e,n,r){var i={};return t.each(e,function(t,e){n&&(t=n.call(r,t)),null==t||rt.call(i,t)||(i[t]=e)}),i},ownKeys:Object.keys,own:function(t,e,n){var r=Object.keys(t);return e?r.map(function(r){return e.call(n,t[r],r)}):r.map(function(e){return t[e]})},make:function(t,e){var n=Object.create(t.prototype);return t.apply(n,e||at)||n},isPropPrivate:function(t){return!!t&&"_"===t.charAt(0)},whiteList:function(t,e){var n=null;if(t)for(var r=e.length,i=-1;++i<r;){var o=e[i];o in t&&(null==n&&(n={}),n[o]=t[o])}return n}}),t.object={is:function(t){return!!t&&"object"==typeof t},isNative:function(t){return!!t&&t.constructor===Object},as:function(t){return t&&"object"==typeof t?t:null},asNative:function(t){return t&&t.constructor===Object?t:null},lazy:function(t,e,n,r){return t[e]||(t[e]=n?n.call(r,e):{})}},t.lazy=t.object.lazy,t.info=function(e,n){var r;if(e&&n){if(r=e.__info__,arguments.length<2)return r;r||t.setNonEnum(e,"__info__",r={}),t.copyOwn(r,n)}return e},t.info.get=function(e,n,r){return t.get(e&&e.__info__,n,r)},t.copyOwn(t,{bit:{set:function(t,e,n){return n||null==n?t|e:t&~e}}}),t.copyOwn(t,{compare:function(t,e){return t===e?0:t>e?1:-1},compareReverse:function(t,e){return t===e?0:t>e?-1:1},methodCaller:function(t,e){return e?function(){return e[t].apply(e,arguments)}:function(){return this[t].apply(this,arguments)}},identity:function(t){return t},add:function(t,e){return t+e},addPreservingNull:function(t,e){return null==t?e:null==e?t:t+e},negate:function(t){return function(){return!t.apply(this,arguments)}},sqr:function(t){return t*t},noop:function(){},retTrue:function(){return!0},retFalse:function(){return!1},fun:{is:function(t){return"function"==typeof t},as:function(t){return"function"==typeof t?t:null},to:function(e){return"function"==typeof e?e:t.fun.constant(e)},constant:function(t){return function(){return t}},wraps:function(e,n){return e.valueOf=t.fun.constant(n),e},typeFactory:function(e){function n(){return t.make(e,arguments)}return n.of=e,n}}}),t.ascending=t.compare,t.descending=t.compareReverse,t.number={is:function(t){return"number"==typeof t},as:function(t,e){return"number"==typeof t?t:e},to:function(t,e){if(null==t)return e;var n=+t;return isNaN(n)?e:n},toPositive:function(e,n){return e=t.number.to(e),null==e||e>0?e:n},toNonNegative:function(e,n){return e=t.number.to(e),null!=e&&e<0?n:e},toBetween:function(e,n,r,i){var o=t.number.to(e);return null==o?i:Math.max(n,Math.min(r,o))}},t.array={empty:function(t){return!(t&&t.length)},is:function(t){return t instanceof Array},isLike:function(t){return t&&null!=t.length&&"string"!=typeof t},as:function(t){return t instanceof Array?t:null!=t?[t]:null},to:function(t){return t instanceof Array?t:null!=t?[t]:null},lazy:function(t,e,n,r){return t[e]||(t[e]=n?n.call(r,e):[])},copy:function(t){return ot.apply(t,ot.call(arguments,1))},each:function(e,n,r){null!=e&&(t.array.is(e)?e.forEach(n,r):n.call(r,e,0))},eachReverse:function(e,n,r){if(null!=e)if(t.array.is(e)){for(var i=e.length;i--;)if(!1===n.call(r,e[i],i))return!1}else if(!1===n.call(r,e,0))return!1;return!0},like:t.copyOwn(function(t){return ct.is(t)?t:[t]},{is:function(t){return!!t&&null!=t.length&&"string"!=typeof t},as:function(t){return ct.is(t)?t:null}}),create:function(t,e){var n=t>=0?new Array(t):[];if(void 0!==e)for(var r=0;r<t;r++)n[r]=e;return n},append:function(t,e,n){null==n&&(n=0);for(var r=0,i=e.length,o=t.length;r<i;r++)t[o+r]=e[n+r];return t},appendMany:function(e){var n,r=arguments,i=r.length;if(i>1)for(var o=1;o<i;o++)if(n=t.array.to(r[o]))for(var a=0,s=n.length;a<s;)e.push(n[a++]);return e},prepend:function(t,e,n){null==n&&(n=0);for(var r=0,i=e.length;r<i;r++)t.unshift(e[n+r]);return t},removeAt:function(t,e){return t.splice(e,1)[0]},insertAt:function(t,e,n){return t.splice(e,0,n),t},removeIf:function(t,e,n){for(var r=0,i=t.length;r<i;)e.call(n,t[r],r)?(i--,t.splice(r,1)):r++;return t},binarySearch:function(e,n,r,i){r||(r=t.compare);for(var o=0,a=e.length-1;o<=a;){var s=o+a>>1,l=r(n,i?i(e[s]):e[s]);if(l<0)a=s-1;else{if(!(l>0))return s;o=s+1}}return~o},insert:function(e,n,r){var i=t.array.binarySearch(e,n,r);return i<0?e.splice(~i,0,n):e[i]!==n&&e.splice(i+1,0,n),i},remove:function(e,n,r){var i=t.array.binarySearch(e,n,r);if(i>=0)return e.splice(i,1)[0]}};var ct=t.array.like;ct.to=ct,t.string={is:function(t){return"string"==typeof t},to:function(t,e){return null!=t?String(t):e||""},join:function(t){var e,n,r=arguments,i=r.length;switch(i){case 3:return e=r[1],n=r[2],null!=e&&""!==e?null!=n&&""!==n?""+e+t+n:""+e:null!=n&&""!==n?""+n:"";case 2:return e=r[1],null!=e?""+e:"";case 1:case 0:return""}for(var o=[],a=1;a<i;a++)null!=(e=r[a])&&""!==e&&o.push(""+e);return o.join(t)},padRight:function(t,e,n){t||(t=""),null==n&&(n=" ");var r=~~((e-t.length)/n.length);return r>0?t+new Array(r+1).join(n):t}},t.copyOwn(t,{firstUpperCase:function(t){if(t){var e=t.charAt(0),n=e.toUpperCase();e!==n&&(t=n+t.substr(1))}return t},firstLowerCase:function(t){if(t){var e=t.charAt(0),n=e.toLowerCase();e!==n&&(t=n+t.substr(1))}return t},titleFromName:function(e){return t.firstUpperCase(e).replace(/([a-z\d])([A-Z])/g,"$1 $2")},format:function(e,n,r){if(null==e||""===e)return"";var i=n&&t.fun.is(n);return e.replace(/(^|[^{])\{([^{}]+)\}/g,function(t,e,o){var a=n?i?n.call(r,o):n[o]:null;return e+(null==a?"":String(a))})}}),t.copyOwn(t,{nullyTo:function(t,e){return null!=t?t:e}}),t.copyOwn(t,{between:function(t,e,n){return Math.max(e,Math.min(t,n))},nully:function(t){return null==t},notNully:function(t){return null!=t},notUndef:function(t){return void 0!==t},empty:function(t){return null==t||""===t},notEmpty:function(t){return null!=t&&""!==t},truthy:function(t){return!!t},falsy:function(t){return!t}}),t.copyOwn(t,{error:function(t){return t instanceof Error?t:new Error(t)},fail:function(e){throw t.error(e)},assert:function(e,n){throw t.error.assertionFailed(e,n)}}),t.eachOwn({operationInvalid:function(e,n){return t.error(t.string.join(" ","Invalid operation.",t.format(e,n)))},notImplemented:function(){return t.error("Not implemented.")},argumentRequired:function(e){return t.error(t.format("Required argument '{0}'.",[e]))},argumentInvalid:function(e,n,r){return t.error(t.string.join(" ",t.format("Invalid argument '{0}'.",[e]),t.format(n,r)))},assertionFailed:function(e,n){return t.error(t.string.join(" ","Assertion failed.",t.format(e,n)))}},function(e,n){t.error[n]=e,t.fail[n]=function(){throw e.apply(null,arguments)}}),t.debug=0,function(){if("undefined"!=typeof window&&window.location){var e=function(t){return t&&/\bdebug=true\b/.test(t)?t:null},n=e(window.location.href);if(!n)try{n=e(window.top.location.href)}catch(t){}if(n){var r=/\bdebugLevel=(\d+)/.exec(n);t.debug=r?+r[1]:3}}}(),t.logSeparator="------------------------------------------",t.setDebug=function(e){return e=+e,e=isNaN(e)?0:e,e>1&&"undefined"==typeof console&&(e=1),t.log&&t.debug==e||(t.debug=e,n(e)),t.debug};var ht=null;t.addOnDebugChanged=function(t){ht||(ht=[]).push(t)};var dt,ft=["info","debug","error","warn","group","groupEnd"],pt={group:"groupCollapsed"};t.logger=function(e,n,r){return t.debug>1?i(e,n):n?a(n,r,e):dt||(dt=s())},t.setDebug(t.debug),t.priv={key:c};var mt=function(e){return"_"+t.nullyTo(e,"safe")+(new Date).getTime()+Math.round(1e3*Math.random())},gt=t.priv.key();t.copyOwn(t,{scope:function(t,e){return t.call(e)},firstDefined:function(t,e,n){var r,i=0,o=t.length;for(e||(e=[]);i<o;)if(void 0!==(r=t[i++].apply(n,e)))return r},indexedId:function(t,e){return e>0?t+""+(e+1):t},splitIndexedId:function(t){var e=/^(.*?)(\d*)$/.exec(t),n=null;return e[2]&&(n=Number(e[2]),n<=1?n=1:n--),[e[1],n]},parseDistinctIndexArray:function(e,n,r){if(null==(e=t.array.as(e)))return null;null==n&&(n=0),null==r&&(r=1/0);var i=t.query(e).select(function(t){return+t}).where(function(t){return!isNaN(t)&&t>=n&&t<=r}).distinct().array();return i.length?i:null},argumentsTypeBind:function(t,e){var n,r=t.length,i=new Array(r);if(r&&e&&(n=e.length)){var o=0,a=0;do{var s=e[o]
;null!=s&&typeof s!==t[a]||(i[a]=s,o++),a++}while(a<r&&o<n)}return i},argumentsTypeBound:function(e,n){return function(){var r=t.argumentsTypeBind(e,arguments);return n.apply(this,r)}}}),t.qualName=function(t){return t instanceof f?t:new f(t)},t.QualifiedName=f,f.prototype.toString=function(){return t.string.join(".",this.namespace,this.name)},t.qualNameOf=function(e,n){return arguments.length>1?(e.__qname__=t.qualName(n),e):e.__qname__};var yt=t,vt={},bt=[];t.globalSpace=function(t,e){return vt[t]=e},t.space=function(e,n,r){t.fun.is(n)&&(r=n,n=null),t.string.is(n)&&(n=p(n));var i=p(e,n);if(r){bt.push(yt);try{r(i)}finally{yt=bt.pop()}}return i},t.describe=function(e,n){var r=t.get(n,"maxLevel")||5,i=[];return t.describeRecursive(i,e,r,n),i.join("")},t.describeRecursive=function(e,n,r,i){if(r>0){switch(r--,typeof n){case"undefined":return e.push("undefined");case"object":if(!n)return e.push("null"),!0;if(t.fun.is(n.describe))return n.describe(e,r,i);if(n instanceof Array)e.push("["),n.forEach(function(n,o){o&&e.push(", "),t.describeRecursive(e,n,r,i)||e.pop()}),e.push("]");else if(n instanceof Date)e.push(n.toISOString());else{var o=t.get(i,"ownOnly",!0);if(n===t.global)return e.push("<window>"),!0;if(t.fun.is(n.cloneNode))return e.push("<dom #"+(n.id||n.name||"?")+">"),!0;r>1&&n.constructor!==Object&&(r=1,o=!0),e.push("{");var a=!0;for(var s in n)o&&!t.hasOwnProp.call(n,s)||(a||e.push(", "),e.push(s+": "),t.describeRecursive(e,n[s],r,i)?a&&(a=!1):(e.pop(),a||e.pop()));if(a){var l=""+n;"[object Object]"!==l&&e.push("{"+l+"}")}e.push("}")}return!0;case"number":return e.push(""+Math.round(1e5*n)/1e5),!0;case"boolean":return e.push(""+n),!0;case"string":return e.push(JSON.stringify(n)),!0;case"function":return!!t.get(i,"funs",!1)&&(e.push(JSON.stringify(n.toString().substr(0,13)+"...")),!0)}return e.push("'new ???'"),!0}},t.mixin=m(Object.create),t.copyOwn(t.mixin,{custom:m,inherit:t.mixin,copy:m(t.copy),share:m(t.identity)}),t.create=function(){var e=ot.call(arguments),n=!0,r=e.shift();"boolean"==typeof r&&(n=r,r=e.shift());var i;return r?(i=Object.create(r),n&&b(i)):i={},e.length>0&&(e.unshift(i),t.mixin.apply(t,e)),i},t.attached=function(e,n,r){var i=e.__attached__;return arguments.length>2?(void 0!==r&&(i||t.setNonEnum(e,"__attached__",i={}),i[n]=r),e):i&&i[n]},t.attached.is=function(t){return!(!t||t.indexOf("$")<0)};var _t={tryConfigure:1,configure:1,$type:1};t.configure=t.config=_,t.configurable=function(e,n){return t.info(n,{configurable:!!e})},t.copyOwn(_,{generic:function(e,n){return n&&t.array.each(n,function(n){var r;n.constructor===Object?_.setters(e,n):e!==n&&(r=e.tryConfigure)&&t.fun.is(r)&&r.call(e,n)}),e},isPropConfigurable:function(t){return!!t&&"_"!==t.charAt(0)&&!rt.call(_t,t)},setters:function(e,n){return n&&_.expand1(n).forEach(function(n){t.each(n,function(t,n){_.setter(e,n,t)})}),e},setter:function(e,n,r){var i,o,a,s;return void 0!==r&&_.isPropConfigurable(n)&&t.fun.is(i=e[n])&&(o=i.valueOf())&&t.info.get(o,"configurable",(a=o.length)>=1)&&(t.attached.is(n)?t.attached(e,n,r):a?i.call(e,r):(s=i.call(e),(t.object.is(s)||t.fun.is(s))&&_(s,r))),e},expand1:function(t){return w(t,!0)},expand:w}),t.fun.inherit=S,t.overrides=k,t.fun.callsBase=D;var wt=/\.\s*base\b/;t.methods=A,t.method=P,t.abstractMethod=t.fail.notImplemented,t("MetaType",R);var xt={Ctor:1,BaseType:1,prototype:1};t.copyOwn(R,{methods:B,add:t.configurable(!1,function(){return B.apply(this,arguments)}),inst:t.configurable(!1,function(){return this.Ctor}),subType:t.configurable(!1,function(e,n,r){var i=this,o=i.Ctor,a=o&&o.meta||t.fail.operationInvalid("MetaType is not yet instantiated.");return t.fun.inherit(e,i),t.copyx(e,i,{where:function(t,e){return rt.call(t,e)&&"_"!==e.charAt(0)&&!rt.call(xt,e)}}),e.BaseType=i,new e(null,a,r),n&&t.configure(e,n),e}),extend:t.configurable(!1,function(e,n){function r(){return i.apply(this,arguments)}var i=this;return t.fun.wraps(r,i),i.subType(r,e,n)})}),R.add({closed:function(){return!!this.steps},close:function(){return this.steps||this._closeCore(this.steps=[]),this},_assertOpened:function(){if(this.closed())throw t.error.operationInvalid("MetaType is closed.")},_closeCore:function(t){this._addPostSteps(t),this._addInitSteps(t)},_createConstructor:function(){function t(){for(var t=e;t--;)!0===r[t].apply(this,arguments)&&(t=e)}var e=1,n=this,r=[function(){return r=n.close().steps,e=r.length,!0}];return t},_initConstructor:function(e){var n=this.constructor;return H.call(n,e,n),e.meta=this,this.baseType&&t.fun.inherit(e,this.baseType.close().Ctor),e.MetaType=n,e},_addPostSteps:function(e){t.array.eachReverse(this._mixins,function(t){t._post&&e.push(t._post)}),this._post&&e.push(this._post)},_addInitSteps:function(e){t.array.eachReverse(this._mixins,function(t){t._init&&e.push(t._init)}),this._init&&e.push(this._init)},init:function(e){if(!e)throw t.error.argumentRequired("init");return this._assertOpened(),this._init=t.overrides(e,this._init,this.rootType.Ctor.prototype),this},postInit:function(e){if(!e)throw t.error.argumentRequired("postInit");return this._assertOpened(),this._post=t.overrides(e,this._post,this.rootType.Ctor.prototype),this},type:t.configurable(!0,function(){return this.constructor}),add:t.configurable(!1,function(e,n){return F(e)&&this._mixMetaType(e.meta),t.methods(this.Ctor,e,n),this}),_mixMetaType:function(e){t.array.lazy(this,"_mixins").push(e)},methods:function(e,n){return t.array.each(e,this.add,this),this},method:t.configurable(!1,function(e,n,r){return t.method(this.Ctor,e,n,r),this}),configure:function(e){return t.configure.generic(this,e),this},extend:t.configurable(!1,function(t,e){return this.constructor.extend(null,e).Ctor.configure(t)})});var Ct=(new R).close().Ctor.add({override:function(e,n){return O(this,e,n,t.protoOf(this),Ct.prototype,!0),this},toString:function(){return"[object "+String(t.qualNameOf(t.classOf(this)))+"]"}},{enumerable:!1});t("Object",Ct),t.type=t.argumentsTypeBound(["string","function","object"],function(e,n,r){return t(e,(n?n.MetaType:R).extend().Ctor,r)}),t.makeEnum=function(e,n){var r=1,i=0,o={},a=t.get(n,"all"),s=t.get(n,"zero");return e.forEach(function(t){o[t]=r,a&&(i|=r),r<<=1}),s&&(o[s]=0),a&&(o[a]=i),o},t.copyOwn(t,{classify:function(e,n){return t.setNonEnum(e,"_class",n),e},classOf:function(t){return t&&(t._class||t.constructor)||void 0},is:function(t,e){return!!t&&(t._class&&t._class===e||t instanceof(e.of||e))},as:function(e,n,r){return t.is(e,n)?e:r},createIs:function(e){function n(n){return t.is(n,e)}return n},createAs:function(e){function n(n,r){return t.as(n,e,r)}return n},isSubClassOf:function(e,n){return!(!e||!n)&&(e===n||t.is(ut(e),n))}});var St=gt.property();t.copyOwn(t,{instance:function(e,n,r,i,o){var a=t.fields(e,r,o);return i&&t.instanceAccessors(e,a,i),e.createChild=U,n&&t.configure(e,n),a},fields:function(e,n,r){var i=t.classOf(e);n&&t.is(n,i)||(n=i.defaults),void 0===r&&(r=St);var o=n&&r&&r(n),a=o?Object.create(o):{};return a.___proto=n,r&&r.init(e,a),a},classAccessors:function(e,n,r){var i=ut(e);for(var o in n)i[o]=t.classAccessor(o,n[o],r);return t},classAccessor:function(t,e,n){function r(e){var r=n(this);return arguments.length?i.call(this,r,e):r[t]}var i=V(t,e);return n||(n=St),r},instanceAccessors:function(e,n,r){for(var i in r)e[i]=t.instanceAccessor(e,i,r[i],n);return t},instanceAccessor:function(t,e,n,r){function i(n){return arguments.length?o.call(t,r,n):r[e]}var o=V(e,n);return i}}),t.MetaType.subType(q,{methods:{fields:function(e){var n={};for(var r in e)n[r]=t.classAccessor(r,e[r],this.fieldsPrivProp);return this.methods(n)},_addInitSteps:function(e){function n(e,n){e&&t.configure(this,e)}function r(e,n){t.fields(this,n,i.fieldsPrivProp)}e.push(n),this.base(e);var i=this;e.push(r)}}}),t("FieldsBase",q.Ctor);var kt=1,Dt={};return t.nextId=function(e){if(e){var n=t.getOwn(Dt,e)||1;return Dt[e]=n+1,n}return kt++},t.id=function(e){var n=t.getOwn(e,"__def_id__");return n||t.setConst(e,"__def_id__",n=t.nextId()),n},t.hashKey=function(e){var n=(typeof e).charAt(0);switch(n){case"n":case"b":case"s":return n+":"+e}return n+":"+(e||t.id(e))},t("Set",t.Object.extend({init:function(e,n){this.source=e||{},this.count=e?null!=n?n:t.ownKeys(e).length:0},methods:{has:function(t){return rt.call(this.source,t)},add:function(t){var e=this.source;return rt.call(e,t)||(this.count++,e[t]=!0),this},rem:function(t){return rt.call(this.source,t)&&(delete this.source[t],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},members:function(){return t.ownKeys(this.source)}}})),t("Map",t.Object.extend({init:function(e,n){this.source=e||{},this.count=e?null!=n?n:t.ownKeys(e).length:0},methods:{has:function(t){return rt.call(this.source,t)},get:function(t){return rt.call(this.source,t)?this.source[t]:void 0},set:function(t,e){var n=this.source;return rt.call(n,t)||this.count++,n[t]=e,this},rem:function(t){return rt.call(this.source,t)&&(delete this.source[t],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},copy:function(e){t.eachOwn(e.source,function(t,e){this.set(e,t)},this)},values:function(){return t.own(this.source)},keys:function(){return t.ownKeys(this.source)},clone:function(){return new t.Map(t.copy(this.source),this.count)},symmetricDifference:function(e){if(!this.count)return e.clone();if(!e.count)return this.clone();var n={},r=0,i=this.source,o=e.source;return t.eachOwn(i,function(t,e){rt.call(o,e)||(n[e]=t,r++)}),t.eachOwn(o,function(t,e){rt.call(i,e)||(n[e]=t,r++)}),new t.Map(n,r)},intersect:function(e,n){return n||(n=new t.Map),t.eachOwn(this.source,function(t,r){e.has(r)&&n.set(r,t)}),n}}})),t("OrderedMap",t.Object.extend({init:function(e){e instanceof t.OrderedMap?(this._list=e._list.slice(),this._map=t.copy(e._map)):(this._list=[],this._map={})},methods:{has:function(t){return rt.call(this._map,t)},count:function(){return this._list.length},get:function(t){var e=this._map;return rt.call(e,t)?e[t].value:void 0},at:function(t){var e=this._list[t];return e?e.value:void 0},add:function(e,n,r){var i=this._map,o=rt.call(i,e)&&i[e];return o?o.value!==n&&(o.value=n):(o=i[e]={key:e,value:n},null==r?this._list.push(o):t.array.insertAt(this._list,r,o)),this},rem:function(t){var e=this._map,n=rt.call(e,t)&&e[t];if(n){var r=this._list.indexOf(n);this._list.splice(r,1),delete this._map[t]}return this},clear:function(){return this._list.length&&(this._map={},this._list.length=0),this},keys:function(){return t.ownKeys(this._map)},forEach:function(t,e){return this._list.forEach(function(n){t.call(e,n.value,n.key)})}}})),t("EventSource",t.Object.extend({methods:{on:function(t,e){return X(z,this,t,e,!0),this},before:function(t,e){return X(z,this,t,e,!0),this},after:function(t,e){return X(z,this,t,e,!1),this},off:function(t,e){return X($,this,t,e,null,!0),this},_acting:function(e,n){if(!e)throw t.error.argumentRequired("type");return Y(this,e,n)}}})),t.html={escape:function(e){return t.string.to(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},tag:function(e,n){n=n?t.ownKeys(n).map(function(e){var r=n[e];return t.empty(r)?"":" "+e+'="'+String(r)+'"'}).join(""):"";var r=arguments.length>2?ot.call(arguments,2).map(function(e){return null!=e&&(t.fun.is(e)&&(e=e()),e=t.array.is(e)?e.map(t.string.to).join(""):t.string.to(e)),e||""}).join(""):"";return"<"+e+n+">"+r+"</"+e+">"},classes:function(e){e=e?e+"-":"";var n=[];return ot.call(arguments,1).forEach(function(r,i){t.empty(r)||n.push(e+t.css.escapeClass(r))}),n.join(" ")}},t.css={escapeClass:function(t){return(t||"").replace(/\s/g,"_")}},t.type("Query").add({index:-1,item:void 0,next:function(){var t=this,e=t.index;return-2!==e&&(e++,t._next(e)?(t.index=e,!0):(t._finish(),!1))},_next:t.abstractMethod,_finish:function(){var e=this;e.index>-2&&(e.next=t.retFalse,e.index=-2,delete e.item)},each:function(t,e){for(var n=this;n.next();)if(!1===t.call(e,n.item,n.index))return!0;return!1},array:function(t){for(var e=t||[],n=this;n.next();)e.push(n.item);return e},sort:function(e,n){if(e||(e=t.compare),n){var r=e;e=function(t,e){return r(n(t),n(e))}}var i=this.array().sort(e);return new t.ArrayLikeQuery(i)},object:function(e){for(var n=t.get(e,"target")||{},r=t.get(e,"name"),i=t.get(e,"value"),o=t.get(e,"context");this.next();)n[""+(r?r.call(o,this.item,this.index):this.item)]=i?i.call(o,this.item,this.index):this.item;return n},reduce:function(t){var e,n=0;if(arguments.length<2){if(!this.next())throw new TypeError("Length is 0 and no second argument");e=this.item}else e=arguments[1];for(;this.next();)e=t(e,this.item,this.index),++n;return e},count:function(){for(var t=0;this.next();)t++;return t},first:function(t,e,n){for(;this.next();)if(!t||t.call(e,this.item,this.index)){var r=this.item;return this._finish(),r}return n},last:function(t,e,n){for(var r=n;this.next();)t&&!t.call(e,this.item,this.index)||(r=this.item);return r},any:function(t,e){for(;this.next();)if(!t||t.call(e,this.item,this.index))return this._finish(),!0;return!1},all:function(t,e){for(;this.next();)if(!t.call(e,this.item,this.index))return this._finish(),!1;return!0},min:function(){for(var t=null;this.next();)(null===t||this.item<t)&&(t=this.item);return t},max:function(){for(var t=null;this.next();)(null===t||this.item>t)&&(t=this.item);return t},range:function(){for(var t=null,e=null;this.next();){var n=this.item;null===t?t=e=n:(n<t&&(t=n),n>e&&(e=n))}return null!=t?{min:t,max:e}:null},multipleIndex:function(e,n){var r={};return this.each(function(i){var o=e?e.call(n,i):i;null!=o&&(t.getOwn(r,o)||(r[o]=[])).push(i)}),r},uniqueIndex:function(t,e){var n={};return this.each(function(r){var i=t?t.call(e,r):r;null==i||rt.call(n,i)||(n[i]=r)}),n},select:function(e,n){return new t.SelectQuery(this,e,n)},prop:function(e){return new t.SelectQuery(this,function(t){if(t)return t[e]})},selectMany:function(e,n){return new t.SelectManyQuery(this,e,n)},union:function(){var e=t.array.append([this],arguments);return new t.SelectManyQuery(new t.ArrayLikeQuery(e))},where:function(e,n){return e?new t.WhereQuery(this,e,n):this},distinct:function(e,n){return e?new t.DistinctQuery(this,e,n):this},skip:function(e){return new t.SkipQuery(this,e)},take:function(e){return e<=0?new t.NullQuery:isFinite(e)?new t.TakeQuery(this,e):this},whayl:function(e,n){return new t.WhileQuery(this,e,n)},reverse:function(){return new t.ReverseQuery(this)}}),t.type("NullQuery",t.Query).add({next:t.retFalse}),t.type("AdhocQuery",t.Query).init(function(t){this._next=t}),t.type("ArrayLikeQuery",t.Query).init(function(e){function n(){for(;++i<o;)if(rt.call(e,i))return r.index=i,r.item=e[i],!0;return r._finish(),!1}var r=this;t.array.isLike(e)||(e=[e]),r._list=e,r._count=e.length;var i=-1,o=e.length;r.next=n}).add({count:function(){var t=this._count;return this.index>=0&&(t-=this.index+1),this._finish(),t}}),t.type("RangeQuery",t.Query).init(function(t,e,n){this._index=t,this._count=e,this._step=null==n?1:n}).add({_next:function(t){if(t<this._count)return this.item=this._index,this._index+=this._step,!0},count:function(){var t=this._count;return this.index>=0&&(t-=this.index+1),this._finish(),t}}),t.type("WhereQuery",t.Query).init(function(t,e,n){function r(){for(;t.next();){var r=t.item;if(e.call(n,r,t.index))return i.item=r,i.index=++o,!0}return i._finish(),!1}var i=this,o=-1;i.next=r}),t.type("WhileQuery",t.Query).init(function(t,e,n){function r(){if(t.next()){var r=t.item;if(e.call(n,r,t.index))return i.item=r,i.index=++o,!0}return i._finish(),!1}var i=this,o=-1;i.next=r}),t.type("SelectQuery",t.Query).init(function(t,e,n){function r(){return t.next()?(i.item=e.call(n,t.item,t.index),i.index=++o,!0):(i._finish(),!1)}var i=this,o=-1;i.next=r}),t.type("SelectManyQuery",t.Query).init(function(t,e,n){this._selectMany=e,this._ctx=n,this._source=t,this._manySource=null}).add({_next:function(t){for(;;){if(this._manySource){if(this._manySource.next())return this.item=this._manySource.item,!0;this._manySource=null}if(!Z.call(this))break}}}),t.type("DistinctQuery",t.Query).init(function(t,e,n){function r(){for(;t.next();){var r=t.item,s=e?e.call(n,r,t.index):r;if(null!=s&&!rt.call(a,s))return i.item=r,i.index=++o,a[s]=!0}return i._finish(),!1}var i=this,o=-1,a={};i.next=r}),t.type("SkipQuery",t.Query).init(function(t,e){this._source=t,this._skip=e}).add({_next:function(t){for(;this._source.next();){if(!(this._skip>0))return this.item=this._source.item,!0;this._skip--}}}),t.type("TakeQuery",t.Query).init(function(t,e){this._source=t,this._take=e}).add({_next:function(t){if(this._take>0&&this._source.next())return this._take--,this.item=this._source.item,!0}}),t.type("ReverseQuery",t.Query).init(function(t){this._source=t}).add({_next:function(e){e||(this._source instanceof t.Query&&(this._source=this._source instanceof t.ArrayLikeQuery?this._source._list:this._source.array()),this._count=this._source.length);var n=this._count;if(e<n){for(var r=n-e-1,i=this._source;!rt.call(i,r);){if(--r<0)return!1;this._count--}return this.item=i[r],!0}}}),t.query=function(e){return void 0===e?new t.NullQuery:e instanceof t.Query?e:t.fun.is(e)?new t.AdhocQuery(e):new t.ArrayLikeQuery(e)},t.range=function(e,n,r){return new t.RangeQuery(e,n,r)},t.textTable=function(e){function n(){return o.map(function(t){switch(t){case s:return r(t,"","","","");case l:return i||(i=r(t,"","","",""));case u:return r(t,"","","","")}return r(t,""," ","","")}).join("\n")}function r(e,n,r,i,o){return i+e.map(function(e,n){return t.string.padRight(e||"",a[n],r)}).join(n)+o}var i,o=[],a=new Array(e),s=t.array.create(e,""),l=s.slice(),u=s.slice();return n.row=function(){for(var t,r,i=arguments,s=-1,l=new Array(e);++s<e;)t=i[s],r=l[s]=" "+(void 0===t?"":String(t))+" ",a[s]=Math.max(a[s]||0,r.length);return o.push(l),n},n.rowSep=function(t){return o.push(o.length?t?u:l:s),n},n},t.round10=function(t,e){return e?(t=+t,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=Math.round(tt(t,e)),tt(t,-e))):Math.round(t)},t.mult10=function(t,e){return e?tt(+t,e):t},t.delta=function(t,e){if(t===e)return 0;var n=t-e;return n<0?-n:n},yt=t.global,t}),define("cdf/lib/CCC/protovis-compat",["require"],function(t){return{load:function(e,n,r,i){if(i.isBuild)n(["./protovis"],r);else{var o=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),a=function(t,e,n){return e=t.createElement("div"),e.innerHTML='<pvml:shape adj="1" />',!!(n=e.firstChild)&&(n.style.behavior="url(#default#VML)","object"==typeof n.adj)}(document);!o&&a?t(["./protovis-msie"],r):t(["./protovis"],r)}}}}),define("cdf/lib/CCC/protovis",[],function(){function t(t){return t/=255,t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}Array.prototype.map||(Array.prototype.map=function(t,e){for(var n=this.length,r=new Array(n),i=0;i<n;i++)i in this&&(r[i]=t.call(e,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n=this.length,r=new Array,i=0;i<n;i++)if(i in this){var o=this[i];t.call(e,o,i,this)&&r.push(o)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=this.length>>>0,r=0;r<n;r++)r in this&&t.call(e,this[r],r,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(t,e){var n=this.length;if(!n&&1==arguments.length)throw new Error("reduce: empty array, no initial value");var r=0;if(arguments.length<2)for(;;){if(r in this){e=this[r++];break}if(++r>=n)throw new Error("reduce: no values, no initial value")}for(;r<n;r++)r in this&&(e=t(e,this[r],r,this));return e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var n=this.length>>>0,r=!isFinite(e)||e<0?0:e>this.length?this.length:e;r<n;r++)if(this[r]===t)return r;return-1}),Date.now||(Date.now=function(){return+new Date}),Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e});var e={};return e.version={major:3,minor:3},e.identity=function(t){return t},e.index=function(){return this.index},e.child=function(){return this.childIndex},e.parent=function(){return this.parent.index},function(){e.extend=function(t){return Object.create(t.prototype||t)},e.extendType=function(t,n){return(t.prototype=e.extend(n)).constructor=t,t},e.parse=function(t){for(var n,r,i=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg"),o=0,a="";n=i.exec(t);){var s=n.index+n[0].length;if("{"!=t.charAt(s)){a+=t.substring(o,s)+"{return ",o=s;for(var l=0;l>=0&&s<t.length;s++){var u=t.charAt(s);switch(u){case'"':case"'":for(;++s<t.length&&(r=t.charAt(s))!=u;)"\\"==r&&s++;break;case"[":case"(":l++;break;case"]":case")":l--;break;case";":case",":0==l&&l--}}a+=e.parse(t.substring(o,--s))+";}",o=s}i.lastIndex=s}return a+=t.substring(o)},e.error=function(t){"undefined"!=typeof console&&console.error?console.error(t):alert(t)},e.listen=function(t,n,r){return r=e.listener(r),"load"===n||"onload"===n?e.listenForPageLoad(r):(t.addEventListener?t.addEventListener(n,r,!1):(t===window&&(t=document.documentElement),t.attachEvent("on"+n,r)),r)},e.unlisten=function(t,e,n){n.$listener&&(n=n.$listener),t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.listenForPageLoad=function(t){"complete"!==document.readyState?document.addEventListener?window.addEventListener("load",t,!1):document.attachEvent&&window.attachEvent("onload",t):t(null)},e.listener=function(t){return t.$listener||(t.$listener=function(n){try{return e.event=n=n&&e.fixEvent(n),t.call(this,n)}catch(t){e.error(t)}finally{delete e.event}})},e.fixEvent=function(t){if(null==t.pageX&&null!=t.clientX){var e=t.target&&t.target.ownerDocument||document,n=e.documentElement,r=e.body;t.pageX=1*t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=1*t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}return t},e.ancestor=function(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1},e.removeChildren=function(t){for(;t.lastChild;)t.removeChild(t.lastChild)},e.getWindow=function(t){return null!=t&&t==t.window?t:9===t.nodeType&&(t.defaultView||t.parentWindow)};var t=/\-([a-z])/g;e.hiphen2camel=function(e){return t.test(e)?e.replace(t,function(t,e){return e.toUpperCase()}):e};var n=window.getComputedStyle;e.css=function(t,r){return n?n.call(window,t,null).getPropertyValue(r):t.currentStyle["float"===r?"styleFloat":e.hiphen2camel(r)]},e.cssStyle=function(t){var r;return n?(r=n.call(window,t,null),function(t){return r.getPropertyValue(t)}):(r=t.currentStyle,function(t){return r["float"===t?"styleFloat":e.hiphen2camel(t)]})},e._getElementsByClass=function(t,e){null==e&&(e=document);for(var n=[],r=e.getElementsByTagName("*"),i=r.length,o=new RegExp("(^|\\s)"+t+"(\\s|$)"),a=0,s=0;a<i;a++)o.test(r[a].className)&&(n[s]=r[a],s++);return n},e.getElementsByClassName=function(t,n){return t.getElementsByClassName?t.getElementsByClassName(n):e._getElementsByClass(n,t)},e.elementOffset=function(t){var n=t&&t.ownerDocument;if(n){var r=n.body;if(r!==t){var i;i=void 0!==t.getBoundingClientRect?t.getBoundingClientRect():{top:0,left:0};var o=e.getWindow(n),a=n.documentElement,s=a.clientTop||r.clientTop||0,l=a.clientLeft||r.clientLeft||0,u=o.pageYOffset||a.scrollTop,c=o.pageXOffset||a.scrollLeft;return{top:i.top+u-s-(t.scrollTop||0),left:i.left+c-l-(t.scrollLeft||0)}}}},e.renderer=function(){var t=document.svgImplementation||"nativesvg";return e.renderer=function(){return t},t};var r=1;e.id=function(){return r++},e.functor=function(t){return"function"==typeof t?t:function(){return t}},e.stringLowerCase=function(t){return String(t).toLowerCase()},e.get=function(t,e,n){var r;return t&&null!=(r=t[e])?r:n};var i=Object.prototype.hasOwnProperty;e.lazyArrayOwn=function(t,e){var n;return t&&i.call(t,e)&&(n=t[e])?n:t[e]=[]},e.parseNumNonNeg=function(t,e){return null!=t&&("string"==typeof t?t=+t:"number"!=typeof t&&(t=null)),null==t||isNaN(t)||t<0?null==e?0:e:t};var o=e.epsilon=1e-6;e.floatLess=function(t,n){return!e.floatEqual(t,n)&&t<n},e.floatLessOrEqual=function(t,n){return t<n||e.floatEqual(t,n)},e.floatGreater=function(t,n){return!e.floatEqual(t,n)&&t>n},e.floatEqual=function(t,e){return Math.abs(e-t)<o},e.floatZero=function(t){return Math.abs(t)<o},e.floatBelongsOpen=function(t,n,r){return e.floatLess(t,n)&&e.floatLess(n,r)},e.floatBelongsClosed=function(t,n,r){return e.floatLessOrEqual(t,n)&&e.floatLessOrEqual(n,r)}}(),e.listen(window,"load",function(){for(e.$={i:0,x:document.getElementsByTagName("script")},e.$.xlen=e.$.x.length;e.$.i<e.$.xlen;e.$.i++)if(e.$.s=e.$.x[e.$.i],"text/javascript+protovis"==e.$.s.type)try{window.eval(e.parse(e.$.s.text))}catch(t){e.error(t)}delete e.$}),e.Format={},e.Format.re=function(t){return t.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")},e.Format.pad=function(t,e,n){var r=e-String(n).length;return r<1?n:new Array(r+1).join(t)+n},e.Format.date=function(t){function n(e){return t.replace(/%[a-zA-Z0-9]/g,function(t){switch(t){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];case"%c":return e.toLocaleString();case"%C":return r("0",2,Math.floor(e.getFullYear()/100)%100);case"%d":return r("0",2,e.getDate());case"%x":case"%D":return r("0",2,e.getMonth()+1)+"/"+r("0",2,e.getDate())+"/"+r("0",2,e.getFullYear()%100);case"%e":return r(" ",2,e.getDate());case"%H":return r("0",2,e.getHours());case"%I":var n=e.getHours()%12;return n?r("0",2,n):12;case"%m":return r("0",2,e.getMonth()+1);case"%M":return r("0",2,e.getMinutes());case"%n":return"\n";case"%p":return e.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var n=e.getHours()%12;return(n?r("0",2,n):12)+":"+r("0",2,e.getMinutes())+":"+r("0",2,e.getSeconds())+" "+(e.getHours()<12?"AM":"PM");case"%R":return r("0",2,e.getHours())+":"+r("0",2,e.getMinutes());case"%S":return r("0",2,e.getSeconds());case"%Q":return r("0",3,e.getMilliseconds());case"%t":return"\t";case"%u":return e.getDay()||1;case"%w":return e.getDay();case"%y":return r("0",2,e.getFullYear()%100);case"%Y":return e.getFullYear();case"%%":return"%"}return t})}var r=e.Format.pad;return n.format=n,n.parse=function(n){var r=1970,i=0,o=1,a=0,s=0,l=0,u=[function(){}],c=e.Format.re(t).replace(/%[a-zA-Z0-9]/g,function(t){switch(t){case"%b":return u.push(function(t){i={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[t]}),"([A-Za-z]+)";case"%h":case"%B":return u.push(function(t){i={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[t]}),"([A-Za-z]+)";case"%e":case"%d":return u.push(function(t){o=t}),"([0-9]+)";case"%I":case"%H":return u.push(function(t){a=t}),"([0-9]+)";case"%m":return u.push(function(t){i=t-1}),"([0-9]+)";case"%M":return u.push(function(t){s=t}),"([0-9]+)";case"%p":return u.push(function(t){12==a?"am"==t&&(a=0):"pm"==t&&(a=Number(a)+12)}),"(am|pm)";case"%S":return u.push(function(t){l=t}),"([0-9]+)";case"%y":return u.push(function(t){t=Number(t),r=t+(0<=t&&t<69?2e3:t>=69&&t<100?1900:0)}),"([0-9]+)";case"%Y":return u.push(function(t){r=t}),"([0-9]+)";case"%%":return u.push(function(){}),"%"}return t}),h=n.match(c);return h&&h.forEach(function(t,e){u[e](t)}),new Date(r,i,o,a,s,l)},n},e.Format.time=function(t){function n(e){switch(e=Number(e),t){case"short":return e>=31536e6?(e/31536e6).toFixed(1)+" years":e>=6048e5?(e/6048e5).toFixed(1)+" weeks":e>=864e5?(e/864e5).toFixed(1)+" days":e>=36e5?(e/36e5).toFixed(1)+" hours":e>=6e4?(e/6e4).toFixed(1)+" minutes":(e/1e3).toFixed(1)+" seconds";case"long":var n=[],i=e%6e4/1e3>>0,o=e%36e5/6e4>>0;if(n.push(r("0",2,i)),e>=36e5){var a=e%864e5/36e5>>0;n.push(r("0",2,o)),e>=864e5?(n.push(r("0",2,a)),n.push(Math.floor(e/864e5).toFixed())):n.push(a.toFixed())}else n.push(o.toFixed());return n.reverse().join(":")}}var r=e.Format.pad;return n.format=n,n.parse=function(e){switch(t){case"short":for(var n,r=/([0-9,.]+)\s*([a-z]+)/g,i=0;n=r.exec(e);){var o=parseFloat(n[0].replace(",","")),a=0;switch(n[2].toLowerCase()){case"year":case"years":a=31536e6;break;case"week":case"weeks":a=6048e5;break;case"day":case"days":a=864e5;break;case"hour":case"hours":a=36e5;break;case"minute":case"minutes":a=6e4;break;case"second":case"seconds":a=1e3}i+=o*a}return i;case"long":var n=e.replace(",","").split(":").reverse(),i=0;return n.length&&(i+=1e3*parseFloat(n[0])),n.length>1&&(i+=6e4*parseFloat(n[1])),n.length>2&&(i+=36e5*parseFloat(n[2])),n.length>3&&(i+=864e5*parseFloat(n[3])),i}},n},e.Format.number=function(){function t(t){1/0>a&&(t=Math.round(t*s)/s);var e=String(Math.abs(t)).split("."),m=e[0];m.length>r&&(m=m.substring(m.length-r)),c&&m.length<n&&(m=new Array(n-m.length+1).join(l)+m),m.length>3&&(m=m.replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),!c&&m.length<i&&(m=new Array(i-m.length+1).join(l)+m),e[0]=t<0?f+m+p:m;var g=e[1]||"";return g.length>a&&(g=e[1]=g.substr(0,a)),g.length<o&&(e[1]=g+new Array(o-g.length+1).join(u)),e.join(h)}var n=0,r=1/0,i=0,o=0,a=0,s=1,l="0",u="0",c=!0,h=".",d=",",f="",p="";return t.format=t,t.parse=function(t){var n=e.Format.re,i=String(t).split(h);1==i.length&&(i[1]=""),i[0].replace(new RegExp("^("+n(l)+")*"),""),i[1].replace(new RegExp("("+n(u)+")*$"),"");var o=i[0].replace(new RegExp(n(d),"g"),"");o.length>r&&(o=o.substring(o.length-r));var c=i[1]?Number("0."+i[1]):0;return 1/0>a&&(c=Math.round(c*s)/s),Math.round(o)+c},t.integerDigits=function(t,e){return arguments.length?(n=Number(t),r=arguments.length>1?Number(e):n,i=n+Math.floor(n/3)*d.length,this):[n,r]},t.fractionDigits=function(t,e){return arguments.length?(o=Number(t),a=arguments.length>1?Number(e):o,s=Math.pow(10,a),this):[o,a]},t.integerPad=function(t){return arguments.length?(l=String(t),c=/\d/.test(l),this):l},t.fractionPad=function(t){return arguments.length?(u=String(t),this):u},t.decimal=function(t){return arguments.length?(h=String(t),this):h},t.group=function(t){return arguments.length?(d=t?String(t):"",i=n+Math.floor(n/3)*d.length,this):d},t.negativeAffix=function(t,e){return arguments.length?(f=String(t||""),p=String(e||""),this):[f,p]},t},function(){var t;e.Text={},e.Text.createCache=function(){return new n},e.Text.usingCache=function(e,r,i){if(!(e instanceof n))throw new Error("Not a valid cache.");var o=t;t=e;try{return r.call(i)}finally{t=o}},e.Text.measure=function(e,n){e=null==e?"":String(e);var r=t&&t.get(n,e);return r||(r=e?this.measureCore(e,n):{width:0,height:0},t&&t.put(n,e,r)),r},e.Text.measureWidth=function(t,n){return e.Text.measure(t,n).width},e.Text.fontHeight=function(t){return e.Text.measure("M",t).height},e.Text.measureCore=function(){function t(){return r||(r=n())}function n(){var t=document.createElement("div");t.id="pvSVGText_"+(new Date).getTime();var n=t.style;n.position="absolute",n.visibility="hidden",n.width=0,n.height=0,n.left=0,n.top=0,n.lineHeight=1,n.textTransform="none",n.letterSpacing="normal",n.whiteSpace="nowrap";var r=e.SvgScene.create("svg");r.setAttribute("font-size","10px"),r.setAttribute("font-family","sans-serif"),t.appendChild(r);var i=e.SvgScene.create("text");return r.appendChild(i),i.appendChild(document.createTextNode("")),document.body.appendChild(t),i}var r,i="10px sans-serif";return function(n,r){r||(r=null);var o=t();i!==r&&(i=r,e.SvgScene.setStyle(o,{font:r})),o.firstChild.nodeValue=String(n);var a;try{a=o.getBBox()}catch(t){throw"function"==typeof console.error&&console.error("GetBBox failed: ",t),t}return{width:a.width,height:a.height}}}();var n=function(){this._fontsCache={}},r=Object.prototype.hasOwnProperty;n.prototype._getFont=function(t){return t=t||"",r.call(this._fontsCache,t)?this._fontsCache[t]:this._fontsCache[t]={}},n.prototype.get=function(t,e){e=e||"";var n=this._getFont(t);return r.call(n,e)?n[e]:null},n.prototype.put=function(t,e,n){
return this._getFont(t)[e||""]=n}}(),e.map=function(t,e){var n={};return e?t.map(function(t,r){return n.index=r,e.call(n,t)}):t.slice()},e.repeat=function(t,n){return 1==arguments.length&&(n=2),e.blend(e.range(n).map(function(){return t}))},e.array=function(t,e){var n=t>=0?new Array(t):[];if(void 0!==e)for(var r=0;r<t;r++)n[r]=e;return n},e.cross=function(t,e){for(var n=[],r=0,i=t.length,o=e.length;r<i;r++)for(var a=0,s=t[r];a<o;a++)n.push([s,e[a]]);return n},e.blend=function(t){return Array.prototype.concat.apply([],t)},e.transpose=function(t){var n=t.length,r=e.max(t,function(t){return t.length});if(r>n){t.length=r;for(var i=n;i<r;i++)t[i]=new Array(n);for(var i=0;i<n;i++)for(var o=i+1;o<r;o++){var a=t[i][o];t[i][o]=t[o][i],t[o][i]=a}}else{for(var i=0;i<r;i++)t[i].length=n;for(var i=0;i<n;i++)for(var o=0;o<i;o++){var a=t[i][o];t[i][o]=t[o][i],t[o][i]=a}}t.length=r;for(var i=0;i<r;i++)t[i].length=n;return t},e.normalize=function(t,n){for(var r=e.map(t,n),i=e.sum(r),o=0;o<r.length;o++)r[o]/=i;return r},e.permute=function(t,n,r){r||(r=e.identity);var i=new Array(n.length),o={};return n.forEach(function(e,n){o.index=e,i[n]=r.call(o,t[e])}),i},e.numerate=function(t,n){n||(n=e.identity);var r={},i={};return t.forEach(function(t,e){i.index=e,r[n.call(i,t)]=e}),r},e.uniq=function(t,n){n||(n=e.identity);var r,i={},o=[],a={};return t.forEach(function(t,e){a.index=e,(r=n.call(a,t))in i||(i[r]=o.push(r))}),o},e.naturalOrder=function(t,e){return t<e?-1:t>e?1:0},e.reverseOrder=function(t,e){return e<t?-1:e>t?1:0},e.search=function(t,n,r){r||(r=e.identity);for(var i=0,o=t.length-1;i<=o;){var a=i+o>>1,s=r(t[a]);if(s<n)i=a+1;else{if(!(s>n))return a;o=a-1}}return-i-1},e.search.index=function(t,n,r){var i=e.search(t,n,r);return i<0?-i-1:i},e.range=function(t,e,n){if(1==arguments.length&&(e=t,t=0),void 0==n&&(n=1),(e-t)/n==1/0)throw new Error("range must be finite");var r,i=[],o=0;if(e-=1e-10*(e-t),n<0)for(;(r=t+n*o++)>e;)i.push(r);else for(;(r=t+n*o++)<e;)i.push(r);return i},e.random=function(t,e,n){return 1==arguments.length&&(e=t,t=0),void 0==n&&(n=1),n?Math.floor(Math.random()*(e-t)/n)*n+t:Math.random()*(e-t)+t},e.sum=function(t,e){var n={};return t.reduce(e?function(t,r,i){return n.index=i,t+e.call(n,r)}:function(t,e){return t+e},0)},e.max=function(t,n){return n==e.index?t.length-1:Math.max.apply(null,n?e.map(t,n):t)},e.max.index=function(t,n){if(!t.length)return-1;if(n==e.index)return t.length-1;n||(n=e.identity);for(var r=0,i=-1/0,o={},a=0;a<t.length;a++){o.index=a;var s=n.call(o,t[a]);s>i&&(i=s,r=a)}return r},e.min=function(t,n){return n==e.index?0:Math.min.apply(null,n?e.map(t,n):t)},e.min.index=function(t,n){if(!t.length)return-1;if(n==e.index)return 0;n||(n=e.identity);for(var r=0,i=1/0,o={},a=0;a<t.length;a++){o.index=a;var s=n.call(o,t[a]);s<i&&(i=s,r=a)}return r},e.mean=function(t,n){return e.sum(t,n)/t.length},e.median=function(t,n){if(n==e.index)return(t.length-1)/2;if(t=e.map(t,n).sort(e.naturalOrder),t.length%2)return t[Math.floor(t.length/2)];var r=t.length/2;return(t[r-1]+t[r])/2},e.variance=function(t,n){if(t.length<1)return NaN;if(1==t.length)return 0;var r=e.mean(t,n),i=0,o={};n||(n=e.identity);for(var a=0;a<t.length;a++){o.index=a;var s=n.call(o,t[a])-r;i+=s*s}return i},e.deviation=function(t,n){return Math.sqrt(e.variance(t,n)/(t.length-1))},e.log=function(t,e){return Math.log(t)/Math.log(e)},e.logSymmetric=function(t,n){return 0==t?0:t<0?-e.log(-t,n):e.log(t,n)},e.logAdjusted=function(t,n){if(!isFinite(t))return t;var r=t<0;return t<n&&(t+=(n-t)/n),r?-e.log(t,n):e.log(t,n)},e.logFloor=function(t,n){return t>0?Math.pow(n,Math.floor(e.log(t,n))):-Math.pow(n,-Math.floor(-e.log(-t,n)))},e.logCeil=function(t,n){return t>0?Math.pow(n,Math.ceil(e.log(t,n))):-Math.pow(n,-Math.ceil(-e.log(-t,n)))},function(){var t=Math.PI/180,n=180/Math.PI;e.radians=function(e){return t*e},e.degrees=function(t){return n*t}}(),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e},e.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},e.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},e.dict=function(t,e){for(var n={},r={},i=0;i<t.length;i++)if(i in t){var o=t[i];r.index=i,n[o]=e.call(r,o)}return n},e.hasOwnProp=Object.prototype.hasOwnProperty,e.copyOwn=function(t,n){if(n){var r=e.hasOwnProp;for(var i in n)r.call(n,i)&&(t[i]=n[i])}return t},e.dom=function(t){return new e.Dom(t)},e.Dom=function(t){this.$map=t},e.Dom.prototype.$leaf=function(t){return"object"!=typeof t},e.Dom.prototype.leaf=function(t){return arguments.length?(this.$leaf=t,this):this.$leaf},e.Dom.prototype.root=function(t){function n(t){var i=new e.Dom.Node;for(var o in t){var a=t[o];i.appendChild(r(a)?new e.Dom.Node(a):n(a)).nodeName=o}return i}var r=this.$leaf,i=n(this.$map);return i.nodeName=t,i},e.Dom.prototype.nodes=function(){return this.root().nodes()},e.Dom.Node=function(t){void 0!==t&&(this.nodeValue=t)},e.Dom.Node.prototype.nodeValue=void 0,e.Dom.Node.prototype.childNodes=[],e.Dom.Node.prototype.parentNode=null,e.Dom.Node.prototype.firstChild=null,e.Dom.Node.prototype.lastChild=null,e.Dom.Node.prototype.previousSibling=null,e.Dom.Node.prototype.nextSibling=null,e.Dom.Node.prototype._firstDirtyChildIndex=1/0,e.Dom.Node.prototype._childIndex=-1,e.Dom.Node.prototype.findChildIndex=function(t){if(!t)throw new Error("Argument 'n' required");if(t.parentNode===this){var e=t.childIndex(!0);if(e>-1)return e}throw new Error("child not found")},e.Dom.Node.prototype._childRemoved=function(t,e){},e.Dom.Node.prototype._childAdded=function(t,e){},e.Dom.Node.prototype.removeChild=function(t){var e=this.findChildIndex(t);return this.removeAt(e)},e.Dom.Node.prototype.appendChild=function(t){var n=t.parentNode;n&&n.removeChild(t);var r=this.lastChild;t.parentNode=this,t.previousSibling=r,r?(r.nextSibling=t,t._childIndex=r._childIndex+1):(this.firstChild=t,t._childIndex=0),this.lastChild=t;var i=e.lazyArrayOwn(this,"childNodes").push(t);return this._childAdded(t,i-1),t},e.Dom.Node.prototype.insertBefore=function(t,e){if(!e)return this.appendChild(t);var n=this.findChildIndex(e);return this.insertAt(t,n)},e.Dom.Node.prototype.insertAt=function(t,e){if(null==e)return this.appendChild(t);var n=this.childNodes,r=n.length;if(e===r)return this.appendChild(t);if(e<0||e>r)throw new Error("Index out of range.");var i=t.parentNode;i&&i.removeChild(t);var o=e+1;o<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=o);var a=n[e];t.parentNode=this,t.nextSibling=a,t._childIndex=e;var s=t.previousSibling=a.previousSibling;return a.previousSibling=t,s?s.nextSibling=t:(a===this.lastChild&&(this.lastChild=t),this.firstChild=t),n.splice(e,0,t),this._childAdded(t,e),t},e.Dom.Node.prototype.removeAt=function(t){var e=this.childNodes,n=e.length;if(!(t<0||t>=n)){var r=e[t];e.splice(t,1),t<n-1&&t<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=t);var i=r.previousSibling,o=r.nextSibling;return i?i.nextSibling=o:this.firstChild=o,o?o.previousSibling=i:this.lastChild=i,r.nextSibling=r.previousSibling=r.parentNode=null,this._childRemoved(r,t),r}},e.Dom.Node.prototype.replaceChild=function(t,e){var n=this.findChildIndex(e),r=t.parentNode;r&&r.removeChild(t),t.parentNode=this,t.nextSibling=e.nextSibling,t._childIndex=e._childIndex;var i=t.previousSibling=e.previousSibling;i?i.nextSibling=t:this.firstChild=t;var o=e.nextSibling;return o?o.previousSibling=t:this.lastChild=t,this.childNodes[n]=t,this._childRemoved(e,n),this._childAdded(t,n),e},e.Dom.Node.prototype.childIndex=function(t){var e=this.parentNode;if(e){var n=e._firstDirtyChildIndex;if(n<1/0){var r=e.childNodes;if(!t)return r.indexOf(this);for(var i=r.length;n<i;)r[n]._childIndex=n,n++;e._firstDirtyChildIndex=1/0}return this._childIndex}return-1},e.Dom.Node.prototype.visitBefore=function(t){function e(n,r){t(n,r);for(var i=n.firstChild;i;i=i.nextSibling)e(i,r+1)}e(this,0)},e.Dom.Node.prototype.visitAfter=function(t){function e(n,r){for(var i=n.firstChild;i;i=i.nextSibling)e(i,r+1);t(n,r)}e(this,0)},e.Dom.Node.prototype.sort=function(t){if(this.firstChild){this._firstDirtyChildIndex=1/0;var e=this.childNodes;e.sort(t);var n,r=this.firstChild=e[0];delete r.previousSibling,r._childIndex=0;for(var i=1,o=e.length;i<o;i++)r.sort(t),n=e[i],n._childIndex=i,n.previousSibling=r,r=r.nextSibling=n;this.lastChild=r,delete r.nextSibling,r.sort(t)}return this},e.Dom.Node.prototype.reverse=function(){var t=[];return this.visitAfter(function(e){this._firstDirtyChildIndex=1/0;for(var n;n=e.lastChild;)t.push(e.removeChild(n));if(t.length)for(;n=t.pop();)e.insertBefore(n,e.firstChild)}),this},e.Dom.Node.prototype.nodes=function(){var t=[];return this.visitBefore(function(e){t.push(e)}),t},e.Dom.Node.prototype.toggle=function(t){if(t)return this.toggled?this.visitBefore(function(t){t.toggled&&t.toggle()}):this.visitAfter(function(t){t.toggled||t.toggle()});var e,n=this;if(n.toggled){for(;e=n.toggled.pop();)n.appendChild(e);delete n.toggled}else if(e=n.lastChild){n.toggled=[];do{n.toggled.push(n.removeChild(e))}while(e=n.lastChild)}},e.nodes=function(t){for(var n=new e.Dom.Node,r=0,i=t.length;r<i;r++)n.appendChild(new e.Dom.Node(t[r]));return n.nodes()},e.tree=function(t){return new e.Tree(t)},e.Tree=function(t){this.array=t},e.Tree.prototype.keys=function(t){return this.k=t,this},e.Tree.prototype.value=function(t){return this.v=t,this},e.Tree.prototype.map=function(){for(var t={},e={},n=0;n<this.array.length;n++){e.index=n;for(var r=this.array[n],i=this.k.call(e,r),o=t,a=0;a<i.length-1;a++)o=o[i[a]]||(o[i[a]]={});o[i[a]]=this.v?this.v.call(e,r):r}return t},e.nest=function(t){return new e.Nest(t)},e.Nest=function(t){this.array=t,this.keys=[]},e.Nest.prototype.key=function(t){return this.keys.push(t),this},e.Nest.prototype.sortKeys=function(t){return this.keys[this.keys.length-1].order=t||e.naturalOrder,this},e.Nest.prototype.sortValues=function(t){return this.order=t||e.naturalOrder,this},e.Nest.prototype.map=function(){for(var t,e={},n=[],r=0;r<this.array.length;r++){var i=this.array[r],o=e;for(t=0;t<this.keys.length-1;t++){var a=this.keys[t](i);o[a]||(o[a]={}),o=o[a]}if(a=this.keys[t](i),!o[a]){var s=[];n.push(s),o[a]=s}o[a].push(i)}if(this.order)for(var t=0;t<n.length;t++)n[t].sort(this.order);return e},e.Nest.prototype.entries=function(){function t(e){var n=[];for(var r in e){var i=e[r];n.push({key:r,values:i instanceof Array?i:t(i)})}return n}function e(t,n){var r=this.keys[n].order;if(r&&t.sort(function(t,e){return r(t.key,e.key)}),++n<this.keys.length)for(var i=0;i<t.length;i++)e.call(this,t[i].values,n);return t}return e.call(this,t(this.map()),0)},e.Nest.prototype.rollup=function(t){function e(n){for(var r in n){var i=n[r];i instanceof Array?n[r]=t(i):e(i)}return n}return e(this.map())},e.flatten=function(t){return new e.Flatten(t)},e.Flatten=function(t){this.map=t,this.keys=[]},e.Flatten.prototype.key=function(t,e){return this.keys.push({name:t,value:e}),delete this.$leaf,this},e.Flatten.prototype.leaf=function(t){return this.keys.length=0,this.$leaf=t,this},e.Flatten.prototype.array=function(){function t(e,i){if(o(e))n.push({keys:r.slice(),value:e});else for(var a in e)r.push(a),t(e[a],i+1),r.pop()}function e(t,o){if(o<i.length-1)for(var a in t)r.push(a),e(t[a],o+1),r.pop();else n.push(r.concat(t))}var n=[],r=[],i=this.keys,o=this.$leaf;return o?(t(this.map,0),n):(e(this.map,0),n.map(function(t){for(var e={},n=0;n<i.length;n++){var r=i[n],o=t[n];e[r.name]=r.value?r.value.call(null,o):o}return e}))},e.Transform=function(){},e.Transform.prototype={k:1,x:0,y:0},e.Transform.identity=new e.Transform,e.Transform.prototype.translate=function(t,n){var r=new e.Transform;return r.k=this.k,r.x=this.k*t+this.x,r.y=this.k*n+this.y,r},e.Transform.prototype.scale=function(t){var n=new e.Transform;return n.k=this.k*t,n.x=this.x,n.y=this.y,n},e.Transform.prototype.invert=function(){var t=new e.Transform,n=1/this.k;return t.k=n,t.x=-this.x*n,t.y=-this.y*n,t},e.Transform.prototype.times=function(t){var n=new e.Transform;return n.k=this.k*t.k,n.x=this.k*t.x+this.x,n.y=this.k*t.y+this.y,n},e.Scale=function(){},e.Scale.interpolator=function(t,n){if("number"==typeof t)return function(e){return e*(n-t)+t};var r=t.type&&"solid"!==t.type,i=n.type&&"solid"!==n.type;return r||i?(t=r?t:e.color(t).rgb(),n=i?n:e.color(n).rgb(),function(e){return e<.5?t:n}):(t=e.color(t).rgb(),n=e.color(n).rgb(),function(r){var i=t.a*(1-r)+n.a*r;return i<1e-5&&(i=0),0==t.a?e.rgb(n.r,n.g,n.b,i):0==n.a?e.rgb(t.r,t.g,t.b,i):e.rgb(Math.round(t.r*(1-r)+n.r*r),Math.round(t.g*(1-r)+n.g*r),Math.round(t.b*(1-r)+n.b*r),i)})},e.Scale.common={by:function(t){function e(){return n(t.apply(this,arguments))}var n=this;for(var r in n)e[r]=n[r];return e},by1:function(t){function e(e){return n(t.call(this,e))}var n=this;for(var r in n)e[r]=n[r];return e},transform:function(t){function e(){return t.call(this,n.apply(n,arguments))}var n=this;for(var r in n)e[r]=n[r];return e}},function(){function t(t,o,a,s){var l,u=a-o;if(u&&isFinite(u)){var c=e.parseNumNonNeg(e.get(s,"precision",0)),h=e.parseNumNonNeg(e.get(s,"precisionMin",0)),d=e.parseNumNonNeg(e.get(s,"precisionMax",1/0)),f=e.get(s,"roundInside",!0);isFinite(c)||(c=0),isFinite(h)||(h=0),d||(d=1/0);var p=e.get(s,"numberExponentMin"),m=e.get(s,"numberExponentMax");null!=p&&isFinite(p)&&(h=Math.max(h,Math.pow(10,Math.floor(p)))),null!=m&&isFinite(m)&&(d=Math.min(d,5*Math.pow(10,Math.floor(m)))),f&&(h>u&&(h=u),d>u&&(d=u)),d<h&&(d=h),c?c=Math.max(Math.min(c,d),h):h===d&&(c=h);var g,y,v,b,_=0,w=!!c;if(w)g={base:Math.abs(c),mult:1,value:1},g.value=g.base;else{var x=e.parseNumNonNeg(e.get(s,"tickCountMax",1/0));if(x<1&&(x=1),null==t?t=Math.min(10,x):isFinite(t)?t>x&&(t=x):t=isFinite(x)?x:10,g={base:isFinite(t)?e.logFloor(u/t,10):0,mult:1,value:1},g.value=g.base,h>0&&(y=i(h,!0),g.value<y.value&&(n(g,y),_=-1)),isFinite(d)&&(v=i(d,!1),y&&v.value<=y.value?v=null:v.value<g.value&&(n(g,v),_=1)),1!==_&&isFinite(t)&&g.mult<10&&(b=u/g.base,t<b)){var C=t/b;C<=.15?g.mult=10:g.mult<5&&(C<=.35?g.mult=5:g.mult<2&&C<=.75&&(g.mult=2)),g.mult>1&&(g.value=g.base*g.mult,y&&g.value<y.value?(n(g,y),_=-1):v&&v.value<g.value?(n(g,v),_=1):10===g.mult&&(g.base*=10,g.mult=1))}}for(var S;;){var k=g.value,D=k*Math[f?"ceil":"floor"](o/k),M=k*Math[f?"floor":"ceil"](a/k);if(S&&(M<D||v&&M-D>v.value)){g=S;break}var N=Math.floor(e.log(k,10)+1e-10);if(g.decPlaces=Math.max(0,-N),g.ticks=e.range(D,M+k,k),w||_>0||g.ticks.length<=x)break;if(S&&S.ticks.length<=g.ticks.length){g=S;break}g=r(S=g)}l=g.ticks,l.step=g.value,l.base=g.base,l.mult=g.mult,l.decPlaces=g.decPlaces,l.format=e.Format.number().fractionDigits(g.decPlaces)}else l=[+o],l.step=l.base=l.mult=1,l.decPlaces=0,l.format=e.Format.number().fractionDigits(0);return l}function n(t,e){return t.base=e.base,t.mult=e.mult,t.value=e.value,t}function r(t){var e=n({},t);switch(e.mult){case 5:e.mult=1,e.base*=10;break;case 2:e.mult=5;break;case 1:e.mult=2}return e.value=e.base*e.mult,e}function i(t,n){t<0&&(t=-t);var r=e.logFloor(t,10),i=t/r;return n?i>5?(i=1,r*=10):i=i>2?5:i>1?2:1:i=i>=5?5:i>=2?2:1,{base:r,mult:i,value:r*i,source:t}}function o(t){return new Date(t)}function a(t,n,r,i,a,l,u){var h,f=r-n;if(f&&isFinite(f)){i=d(e.get(u,"precision"),i);var p=d(e.get(u,"precisionMin"),0),m=d(e.get(u,"precisionMax"),1/0);m<p&&(m=p),i?i=Math.max(Math.min(i,m),p):p===m&&(i=p);var g=e.parseNumNonNeg(e.get(u,"tickCountMax",1/0));g<2&&(g=2),t=Math.min(null==t?5:t,g);for(var y,v={weekStart:l,roundInside:e.get(u,"roundInside",1),alignmentValue:e.get(u,"alignmentValue")},b=s(t,f,i,p,m,v),_=b.fixed,w=b.overflow;;){if(b.ticks=h=b.comp.ticks(n,r,b.mult,v),y&&b.precMax&&h[h.length-1]-h[0]>b.precMax.value){b=y;break}if(_||w>0||b.ticks.length<=g)break;if(y&&y.ticks.length<=b.ticks.length){b=y;break}y=b,b=b.comp.resultAbove(b.mult)}h=b.ticks,h.step=b.value,h.base=b.comp.value,h.mult=b.mult,h.format=c(a)||b.comp.format}else h=[o(n)],h.step=h.base=h.mult=1,h.format=e.Format.date("%x");return h}function s(t,e,n,r,i,o){var a,s,u,c,h=0,d=1,f=!!n;return n?(s=l(n,!1),s.value!==n?a=s.comp.withPrecision(n):(a=s.comp,d=s.mult)):(isFinite(t)?(a=y(e,t),d=a.multiple(e/a.value,o)):(a=m(),d=1),n=a.value*d,n<r&&(u=l(r,!0)),i<n&&(c=l(i,!1)),u&&n<u.value?(a=u.comp,d=u.mult,h=-1):c&&r<c.value&&c.value<n&&(a=c.comp,d=c.mult,h=1)),{comp:a,mult:d,value:a.value*d,source:n,overflow:h,fixed:f,precMin:u,precMax:c}}function l(t,e){return null==t||t<=0||!isFinite(t)?null:(e?m:g)().castValue(t,e)}function u(t,n,r){this.value=t,this.mult=r.mult||1,this.base=1===this.mult?this.value:Math.floor(this.value/this.mult),v.forEach(function(t){null!=r[t]&&(this[t]=r[t])},this),r.floor&&(this.floorLocal=r.floor),this.format=c(r.format),this.first=e.functor(r.first||0),this.prev=n,this.next=null,n&&(n.next=this)}function c(t){return null==t?null:"function"==typeof t?t:e.Format.date(t)}function h(t,e){var n=new Date(t.getFullYear(),t.getMonth(),1),r=e-n.getDay();return r&&(r<0&&(r+=7),n.setDate(n.getDate()+r)),n}function d(t,e){if("string"==typeof t){var n=+t;if(isNaN(n)){if(t){var r=/^(\d*)([a-zA-Z]+)$/.exec(t);r&&(t=f(r[2]))&&(t*=+r[1]||1)}}else t=n}return("number"!=typeof t||t<0)&&(t=null!=e?e:0),t}function f(t){switch(t){case"year":case"y":return 31536e6;case"month":case"m":return 2592e6;case"week":case"w":return 6048e5;case"day":case"d":return 864e5;case"hour":case"h":return 36e5;case"minute":case"M":return 6e4;case"second":case"s":return 1e3;case"millisecond":case"ms":return 1}}function p(t,e){var n=g();b.push(new u(t,n,e))}function m(){return b[0]}function g(){return b.length?b[b.length-1]:null}function y(t,e){null==e&&(e=1);var n,r=g();do{n=r}while(t<e*n.value&&(r=n.prev));return n}e.Scale.quantitative=function(){function n(t){var n=e.search(l,t);return n<0&&(n=-n-2),n=Math.max(0,Math.min(h.length-1,n)),h[n]((m(t)-u[n])/(u[n+1]-u[n]))}var r,i,s,l=[0,1],u=[0,1],c=[0,1],h=[e.identity],f=Number,p=!1,m=e.identity,g=e.identity,y=null,v=0;return n.transform=function(t,e){return m=function(e){return p?-t(-e):t(e)},g=function(t){return p?-e(-t):e(t)},u=l.map(m),this},n.domain=function(t,n,r){if(arguments.length){var i;return t instanceof Array?(arguments.length<2&&(n=e.identity),arguments.length<3&&(r=n),i=t.length&&n(t[0]),l=t.length?[e.min(t,n),e.max(t,r)]:[]):(i=t,l=Array.prototype.slice.call(arguments).map(Number)),l.length?1==l.length&&(l=[l[0],l[0]]):l=[-1/0,1/0],p=(l[0]||l[l.length-1])<0,u=l.map(m),f=i instanceof Date?o:Number,this}return l.map(f)},n.range=function(){if(arguments.length){c=Array.prototype.slice.call(arguments),c.length?1==c.length&&(c=[c[0],c[0]]):c=[-1/0,1/0],h=[];for(var t=0;t<c.length-1;t++)h.push(e.Scale.interpolator(c[t],c[t+1]));return this}return c},n.invert=function(t){var n=e.search(c,t);return n<0&&(n=-n-2),n=Math.max(0,Math.min(h.length-1,n)),f(g(u[n]+(t-c[n])/(c[n+1]-c[n])*(u[n+1]-u[n])))},n.ticks=function(e,n){var u=l[0],c=l[l.length-1],h=c<u,d=h?c:u,p=h?u:c;return s=f===o?a(e,d,p,i,r,v,n):t(e,d,p,n),h?s.reverse():s},n.dateTickFormat=function(){return arguments.length?(r=arguments[0],this):r},n.dateTickPrecision=function(){return arguments.length?(i=d(arguments[0],0),this):i},n.dateTickWeekStart=function(t){if(arguments.length){switch((""+t).toLowerCase()){case"0":case"sunday":v=0;break;case"1":case"monday":v=1;break;case"2":case"tuesday":v=2;break;case"3":case"wednesday":v=3;break;case"4":case"thursday":v=4;break;case"5":case"friday":v=5;break;case"6":case"saturday":v=6;break;default:v=0}return this}return v},n.tickFormatter=function(t){return arguments.length?(y=t,this):y},n.tickFormat=function(t,e){var n;if(y){s||(s=[],s.step=s.base=s.mult=1,s.decPlaces=0,s.format=String);var r=f!==Number?s.step:s.decPlaces;n=y.call(s,t,r,null!=e?e:-1)}else n=s?s.format(t):String(t);return n},n.nice=function(){if(2!=l.length)return this;var t=l[0],e=l[l.length-1],n=e<t,r=n?e:t,i=n?t:e,o=i-r;if(!o||!isFinite(o))return this;var a=Math.pow(10,Math.round(Math.log(o)/Math.log(10))-1);return l=[Math.floor(r/a)*a,Math.ceil(i/a)*a],n&&l.reverse(),u=l.map(m),this},e.copyOwn(n,e.Scale.common),n.domain.apply(n,arguments),n};var v=["get","set","multiple","multiples","thresholds","closeds","castValue"];u.prototype.increment=function(t,e){null==e&&(e=1),1!==this.mult&&(e*=this.mult),this.set(t,this.get(t)+e)},u.prototype.get=function(t){return t.getMilliseconds()},u.prototype.set=function(t,e){t.setMilliseconds(e)},u.prototype.floorLocal=function(t,e){},u.prototype.floor=function(t,e){var n=0;1!==this.mult&&(this.floorLocal(t,e),n=this.base);for(var r=this.prev;r;)1===r.mult&&r.value!==n&&r.clear(t,e),r=r.prev},u.prototype.floorMultiple=function(t,n,r){var i=e.get(r,"alignmentValue"),o=null!=i?this.get(i):this.first(t,r),a=this.get(t)-o,s=null;if(a){var l=n*this.mult;if(i){for(s=new Date(i);s<t;)this.set(s,this.get(s)+l);for(;s>t;)this.set(s,this.get(s)-l);o=this.get(s)}else o+=Math.floor(a/l)*l}this.set(t,o,s)},u.prototype.clear=function(t,e){this.set(t,this.first(t,e))},u.prototype.multiple=function(t,e){for(var n=this.multiples,r=this.thresholds,i=this.closeds,o=n.length,a=-1;++a<o;)if(i[a]?t<=r[a]:t<r[a])return n[a];throw new Error("Invalid configuration.")},u.prototype.resultAbove=function(t){return this.castValue(this.value*t+.1,!0)},u.prototype.castValue=function(t,e){var n=this.multiples;if(!n)return this._castValueResult(1,t,1);var r,i=t/this.value,o=n.length;if(e){for(r=-1;++r<o;)if(i<=n[r])return this._castValueResult(n[r],t,0);return this.next?this.next.castValue(t,e):this._castValueResult(n[o-1],t,1)}for(r=o;r--;)if(n[r]<=i)return this._castValueResult(n[r],t,0);return this.prev?this.prev.castValue(t,e):this._castValueResult(n[0],t,-1)},u.prototype._castValueResult=function(t,e,n){return{comp:this,mult:t,value:this.value*t,source:e,overflow:n}},u.prototype.withPrecision=function(t){var e=this;return this.value!==t&&(e=new u(t,null,{mult:t,format:this.format})),e},u.prototype.ticks=function(t,n,r,i){var o=[],a=new Date(t);if(this.floor(a,i),r>1&&this.floorMultiple(a,r,i),e.get(i,"roundInside",1)){t!==+a&&this.increment(a,r);do{o.push(new Date(a)),this.increment(a,r)}while(a<=n)}else{o.push(new Date(a));do{this.increment(a,r),o.push(new Date(a))}while(a<n)}return o},e.parseDatePrecision=d;var b=[];p(1,{format:"%S.%Qs",multiples:[1,5,25,50,100,250],thresholds:[10,50,100,200,1e3,1/0],closeds:[1,1,1,1,1,1]}),p(1e3,{get:function(t){return t.getSeconds()},set:function(t,e){t.setSeconds(e)},format:"%I:%M:%S",multiples:[1,5,10,15],thresholds:[10,60,90,1/0],closeds:[1,1,1,1]}),p(6e4,{get:function(t){return t.getMinutes()},set:function(t,e){t.setMinutes(e)},format:"%I:%M %p",multiples:[1,5,10,15],thresholds:[10,15,30,1/0],closeds:[1,1,1,1]}),p(36e5,{get:function(t){return t.getHours()},set:function(t,e){t.setHours(e)},format:"%I:%M %p",multiples:[1,3,6],thresholds:[10,20,1/0],closeds:[1,1,1]}),p(864e5,{get:function(t){return t.getDate()},set:function(t,e,n){var r=n?n.getMonth():t.getMonth(),i=n?n.getFullYear():t.getFullYear();t.setFullYear(i,r,e)},format:"%m/%d",first:1,multiples:[1,2,3,5],thresholds:[10,15,30,1/0],closeds:[1,0,0,1]}),p(6048e5,{get:function(t){return t.getDate()},set:function(t,e,n){var r=n?n.getMonth():t.getMonth(),i=n?n.getFullYear():t.getFullYear();t.setFullYear(i,r,e)},mult:7,floor:function(t,n){var r=t.getDay()-e.get(n,"weekStart",0);0!==r&&(r<0&&(r+=7),this.set(t,this.get(t)-r))},first:function(t,n){return this.get(h(t,e.get(n,"weekStart",0)))},format:"%m/%d",multiples:[1,2,3],thresholds:[10,15,1/0],closeds:[1,1,1]}),p(2592e6,{get:function(t){return t.getMonth()},set:function(t,e){t.setMonth(e)},format:"%m/%Y",multiples:[1,2,3],thresholds:[12,24,1/0],closeds:[1,1,1]}),p(31536e6,{get:function(t){return t.getFullYear()},set:function(t,e){t.setFullYear(e)},format:"%Y",multiple:function(t){if(t<=10)return 1;var n=e.logCeil(t/15,10);return t/n<2?n/=5:t/n<5&&(n/=2),n},castValue:function(t,n){var r,i,o=t/this.value;if(o<1){if(!n)return this.prev?this.prev.castValue(t,n):this._castValueResult(1,t,-1);r=1}else r=e.logFloor(o,10);if(i=o/r,n)i>5?(r*=10,i=1):i=i>2?5:i>1?2:1;else if(i>5)i=5;else if(i>2)i=2;else if(i>1)i=1;else if(i<1)return this.prev?this.prev.castValue(t,n):this._castValueResult(r,t,-1);return this._castValueResult(r*i,t,0)}})}(),e.Scale.linear=function(){var t=e.Scale.quantitative();return t.domain.apply(t,arguments),t},e.Scale.log=function(){var t,n,r=e.Scale.quantitative(1,10),i=function(t){return Math.log(t)/n},o=function(e){return Math.pow(t,e)};return r.ticks=function(){var e=r.domain(),n=e[0]<0,a=Math.floor(n?-i(-e[0]):i(e[0])),s=Math.ceil(n?-i(-e[1]):i(e[1])),l=[];if(n)for(l.push(-o(-a));a++<s;)for(var u=t-1;u>0;u--)l.push(-o(-a)*u);else{for(;a<s;a++)for(var u=1;u<t;u++)l.push(o(a)*u);l.push(o(a))}for(a=0;l[a]<e[0];a++);for(s=l.length;l[s-1]>e[1];s--);return l.slice(a,s)},r.tickFormat=function(t){return t.toPrecision(1)},r.nice=function(){var n=r.domain();return r.domain(e.logFloor(n[0],t),e.logCeil(n[1],t))},r.base=function(e){return arguments.length?(t=Number(e),n=Math.log(t),r.transform(i,o),this):t},r.domain.apply(r,arguments),r.base(10)},e.Scale.root=function(){var t=e.Scale.quantitative();return t.power=function(e){if(arguments.length){var n=Number(e),r=1/n;return t.transform(function(t){return Math.pow(t,r)},function(t){return Math.pow(t,n)}),this}return n},t.domain.apply(t,arguments),t.power(2)},e.Scale.ordinal=function(){function t(t){return t in r||(r[t]=n.push(t)-1),i[r[t]%i.length]}var n=[],r={},i=[];return t.domain=function(t,i){if(arguments.length){t=t instanceof Array?arguments.length>1?e.map(t,i):t:Array.prototype.slice.call(arguments),n=[];for(var o={},a=0;a<t.length;a++){var s=t[a];s in o||(o[s]=!0,n.push(s))}return r=e.numerate(n),this}return n},t.range=function(t,n){return arguments.length?(i=t instanceof Array?arguments.length>1?e.map(t,n):t:Array.prototype.slice.call(arguments),"string"==typeof i[0]&&(i=i.map(e.fillStyle)),i.min=i[0],i.max=i[i.length-1],this):i},t.split=function(t,n){var r=n-t,o=this.domain().length,a=0;return 0===r?i=e.array(o,t):o&&(a=(n-t)/o,i=e.range(t+a/2,n,a)),i.min=t,i.max=n,i.step=a,this},t.splitBandedCenter=function(t,e,n){return null==n&&(n=1),this._splitBandedCore(t,e,function(t){var e=t.range/t.count;t.step=e,t.band=e*n,t.offset=e/2})},t.splitBandedCenterAbs=function(t,e,n,r){return this._splitBandedCore(t,e,function(t){var e;null==n||null==r?(e=t.range/t.count,null==n?null==r?(n=e,r=0):(r=Math.min(r,e),n=e-r):(n=Math.min(n,e),r=e-n)):e=n+r,t.step=e,t.band=n,t.offset=e/2})},t._splitBandedCore=function(t,n,r){var o,a={min:t,max:n,range:n-t,count:this.domain().length,offset:0,step:0,band:0};return 0===a.range?(i=e.array(a.count,t),o=0):a.count&&(r(a),o=a.step-a.band,i=e.range(t+a.offset,n,a.step)),i.offset=a.offset,i.step=a.step,i.band=a.band,i.margin=o,i.min=t,i.max=n,this},t.splitBandedFlushCenter=function(t,e,n){return null==n&&(n=1),this._splitBandedCore(t,e,function(t){var e=t.range,r=t.count,i=e*n/r,o=r>1?(e-r*i)/(r-1):0;t.band=i,t.step=o+i,t.offset=i/2})},t.splitFlush=function(t,n){var r=this.domain().length,o=(n-t)/(r-1);return i=1==r?[(t+n)/2]:e.range(t,n+o/2,o),i.min=t,i.max=n,this},t.splitBanded=function(t,n,r){if(arguments.length<3&&(r=1),r<0){var o=this.domain().length,a=-r*o,s=n-t-a,l=s/(o+1);i=e.range(t+l,n,l-r),i.band=-r}else{var u=(n-t)/(this.domain().length+(1-r));i=e.range(t+u*(1-r),n,u),i.band=u*r,i.step=u,i.margin=u-i.band}return i.min=t,i.max=n,this},t.invertIndex=function(t,e){var n=this.domain().length;if(0===n)return-1;var r=this.range(),i=r.max-r.min;if(0===i)return 0;var o=i/n;if(t>=r.max)return n;if(t<r.min)return 0;var a=(t-r.min)/o;return e?a:Math.round(a)},e.copyOwn(t,e.Scale.common),t.domain.apply(t,arguments),t},e.Scale.quantile=function(){function t(t){return a(Math.max(0,Math.min(r,e.search.index(i,t)-1))/r)}var n=-1,r=-1,i=[],o=[],a=e.Scale.linear();return t.quantiles=function(t){if(arguments.length){if((n=Number(t))<0)i=[o[0]].concat(o),r=o.length-1;else{i=[],i[0]=o[0];for(var e=1;e<=n;e++)i[e]=o[~~(e*(o.length-1)/n)];r=n-1}return this}return i},t.domain=function(r,i){return arguments.length?(o=r instanceof Array?e.map(r,i):Array.prototype.slice.call(arguments),o.sort(e.naturalOrder),t.quantiles(n),this):o},t.range=function(){return arguments.length?(a.range.apply(a,arguments),this):a.range()},e.copyOwn(t,e.Scale.common),t.domain.apply(t,arguments),t},e.histogram=function(t,n){var r=!0;return{bins:function(i){var o=e.map(t,n),a=[];arguments.length||(i=e.Scale.linear(o).ticks());for(var s=0;s<i.length-1;s++){var l=a[s]=[];l.x=i[s],l.dx=i[s+1]-i[s],l.y=0}for(var s=0;s<o.length;s++){var u=e.search.index(i,o[s])-1,l=a[Math.max(0,Math.min(a.length-1,u))];l.y++,l.push(t[s])}if(!r)for(var s=0;s<a.length;s++)a[s].y/=o.length;return a},frequency:function(t){return arguments.length?(r=Boolean(t),this):r}}},function(){e.Shape=function(){};var t={x:1,y:1};e.Shape.dist2=function(e,n,r){r=r||t;var i=e.x-n.x,o=e.y-n.y,a=i*i,s=o*o;return{cost:a+s,dist2:r.x*a+r.y*s}};var n=Math.PI,r=2*n,i=Math.atan2;e.Shape.normalizeAngle=function(t){return t%=r,e.floatLess(t,0)&&(t+=r),t},e.Shape.atan2Norm=function(t,n){var o=i(t,n);return e.floatLess(o,0)&&(o+=r),o},e.Shape.prototype.hasArea=function(){return!0},e.Shape.prototype.bbox=function(){return this._bbox||(this._bbox=this._calcBBox())},e.Shape.prototype._calcBBox=function(){var t,n,r,i;if(this.points().forEach(function(e){var o=e.x,a=e.y;null==t?(t=r=o,n=i=a):(o<t?t=o:o>r&&(r=o),a<n?n=a:a>i&&(i=a))}),null!=t)return new e.Shape.Rect(t,n,r-t,i-n)},e.Shape.prototype.containsPoint=function(t,n){if(n){var r;if(!n.y)return r=this.bbox(),e.floatBelongsClosed(r.x,t.x,r.x2);if(!n.x)return r=this.bbox(),e.floatBelongsClosed(r.y,t.y,r.y2)}return this._containsPointCore(t)},e.Shape.prototype._containsPointCore=function(){return!1}}(),function(){var t=e.Shape.dist2,n=Math.cos,r=Math.sin,i=Math.sqrt;e.vector=function(t,e){return new o(t,e)},e.Vector=function(t,e){this.x=t,this.y=e};var o=e.Shape.Point=e.Vector;e.Vector.prototype=e.extend(e.Shape),e.Vector.prototype.perp=function(){return new o(-this.y,this.x)},e.Vector.prototype.rotate=function(t){var e=n(t),i=r(t);return new o(e*this.x-i*this.y,i*this.x+e*this.y)},e.Vector.prototype.norm=function(){var t=this.length();return this.times(t?1/t:1)},e.Vector.prototype.length=function(){return i(this.x*this.x+this.y*this.y)},e.Vector.prototype.times=function(t){return new o(this.x*t,this.y*t)},e.Vector.prototype.plus=function(t,e){return 1===arguments.length?new o(this.x+t.x,this.y+t.y):new o(this.x+t,this.y+e)},e.Vector.prototype.minus=function(t,e){return 1===arguments.length?new o(this.x-t.x,this.y-t.y):new o(this.x-t,this.y-e)},e.Vector.prototype.dot=function(t,e){return 1==arguments.length?this.x*t.x+this.y*t.y:this.x*t+this.y*e},e.Vector.prototype.hasArea=function(){return!1},e.Vector.prototype.clone=function(){return new o(this.x,this.y)},e.Vector.prototype.apply=function(t){return new o(t.x+t.k*this.x,t.y+t.k*this.y)},e.Vector.prototype.intersectsRect=function(t){return e.floatBelongsClosed(t.x,this.x,t.x2)&&e.floatBelongsClosed(t.y,this.y,t.y2)},e.Vector.prototype._containsPointCore=function(t){return this.x===t.x&&this.y===t.y},e.Vector.prototype.points=function(){return[this]},e.Vector.prototype.edges=function(){return[]},e.Vector.prototype.center=function(){return this},e.Vector.prototype.distance2=function(e,n){return t(this,e,n)}}(),function(){var t=e.Shape.Point,n=e.Shape.dist2;e.Shape.Line=function(t,e,n,r){this.x=t||0,this.y=e||0,this.x2=n||0,this.y2=r||0};var r=e.Shape.Line;r.prototype=e.extend(e.Shape),r.prototype.hasArea=function(){return!1},r.prototype.clone=function(){return new r(this.x,this.y,this.x2,this.x2)},r.prototype.apply=function(t){var e=t.x+t.k*this.x,n=t.y+t.k*this.y,i=t.x+t.k*this.x2,o=t.y+t.k*this.y2;return new r(e,n,i,o)},r.prototype.points=function(){return[new t(this.x,this.y),new t(this.x2,this.y2)]},r.prototype.edges=function(){return[this]},r.prototype.center=function(){return new t((this.x+this.x2)/2,(this.y+this.y2)/2)},r.prototype.normal=function(t,e){var n=this.points(),r=n[1].minus(n[0]).perp().norm();return e&&n[0].minus(e).dot(r)<0&&(r=r.times(-1)),r},r.prototype.intersectsRect=function(t){
var e,n,r=this.points();for(n=r.length,e=0;e<n;e++)if(r[e].intersectsRect(t))return!0;var i=t.edges();for(n=i.length,e=0;e<n;e++)if(this.intersectsLine(i[e]))return!0;return!1},r.prototype._containsPointCore=function(t){var n=this.x,r=this.x2,i=this.y,o=this.y2;return e.floatBelongsClosed(n,t.x,r)&&(e.floatEqual(n,r)?e.floatBelongsClosed(Math.min(i,o),t.y,Math.max(i,o)):e.floatZero((o-i)/(r-n)*(t.x-n)+i-t.y))},r.prototype.intersectsLine=function(t){var n=this,r=n.x2-n.x,i=n.y2-n.y,o=t.x2-t.x,a=t.y2-t.y,s=a*r-o*i;if(e.floatZero(s))return!1;var l=n.y-t.y,u=n.x-t.x,c=o*l-a*u,h=r*l-i*u;if(e.floatZero(s))return e.floatZero(c)&&e.floatZero(h);var d=c/s;if(!e.floatBelongsClosed(0,d,1))return!1;var f=h/s;return!!e.floatBelongsClosed(0,f,1)},r.prototype.distance2=function(t,r){var i=this,o={x:this.x2,y:this.y2},a=n(i,o).cost;if(e.floatZero(a))return n(t,i,r);var s=o.x-i.x,l=o.y-i.y,u=((t.x-i.x)*s+(t.y-i.y)*l)/a;if(e.floatLess(u,0))return n(t,i,r);if(e.floatGreater(u,1))return n(t,o,r);var c={x:i.x+u*s,y:i.y+u*l};return n(t,c,r)}}(),function(){var t=e.Shape.Point,n=e.Shape.Line;e.Shape.Polygon=function(t){this._points=t||[]};var r=e.Shape.Polygon;r.prototype=e.extend(e.Shape),r.prototype.points=function(){return this._points},r.prototype.clone=function(){return new r(this.points().slice())},r.prototype.apply=function(t){for(var e=this.points(),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=e[o].apply(t);return new r(i)},r.prototype.intersectsRect=function(t){var e,n,r=this.points();for(n=r.length,e=0;e<n;e++)if(r[e].intersectsRect(t))return!0;var i=this.edges();for(n=i.length,e=0;e<n;e++)if(i[e].intersectsRect(t))return!0;return!1},r.prototype.edges=function(){var t=this._edges;if(!t){t=this._edges=[];var e=this.points(),r=e.length;if(r){for(var i,o=e[0],a=o,s=1;s<r;s++)i=e[s],t.push(new n(o.x,o.y,i.x,i.y)),o=i;r>2&&t.push(new n(i.x,i.y,a.x,a.y))}}return t},r.prototype.distance2=function(t,n){var r={cost:1/0,dist2:1/0};return this.edges().forEach(function(i){var o=i.distance2(t,n);e.floatLess(o.cost,r.cost)&&(r=o)},this),r},r.prototype.center=function(){for(var e=this.points(),n=0,r=0,i=0,o=e.length;i<o;i++){var a=e[i];n+=a.x,r+=a.y}return new t(n/o,r/o)},r.prototype._containsPointCore=function(t){var e=this.bbox();if(!e._containsPointCore(t))return!1;var r=.01*e.dx,i=new n(e.x-r,t.y,t.x,t.y),o=0;return this.edges().forEach(function(t){t.intersectsLine(i)&&o++}),1==(1&o)}}(),function(){var t=e.Shape.Point,n=e.Shape.Line;e.Shape.Rect=function(t,e,n,r){this.x=t||0,this.y=e||0,this.dx=n||0,this.dy=r||0,this.dx<0&&(this.dx=Math.max(0,-this.dx),this.x=this.x-this.dx),this.dy<0&&(this.dy=Math.max(0,-this.dy),this.y=this.y-this.dy),this.x2=this.x+this.dx,this.y2=this.y+this.dy};var r=e.Shape.Rect;r.prototype=e.extend(e.Shape.Polygon),r.prototype.clone=function(){var t=Object.create(r.prototype);return t.x=this.x,t.y=this.y,t.dx=this.dx,t.dy=this.dy,t.x2=this.x2,t.y2=this.y2,t},r.prototype.apply=function(t){var e=t.x+t.k*this.x,n=t.y+t.k*this.y,i=t.k*this.dx,o=t.k*this.dy;return new r(e,n,i,o)},r.prototype._containsPointCore=function(t){return e.floatBelongsClosed(this.x,t.x,this.x2)&&e.floatBelongsClosed(this.y,t.y,this.y2)},r.prototype.intersectsRect=function(t){return e.floatGreater(this.x2,t.x)&&e.floatLess(this.x,t.x2)&&e.floatGreater(this.y2,t.y)&&e.floatLess(this.y,t.y2)},r.prototype.edges=function(){if(!this._edges){var t=this.x,e=this.y,r=this.x2,i=this.y2;this._edges=[new n(t,e,r,e),new n(r,e,r,i),new n(r,i,t,i),new n(t,i,t,e)]}return this._edges},r.prototype.center=function(){return new t(this.x+this.dx/2,this.y+this.dy/2)},r.prototype.points=function(){var e=this._points;if(!e){var n=this.x,r=this.y,i=this.x2,o=this.y2;e=this._points=[new t(n,r),new t(i,r),new t(i,o),new t(n,o)]}return e},r.prototype._calcBBox=function(){return this}}(),function(){var t=e.Shape.Point,n=e.Shape.dist2,r=Math.sqrt,i=Math.abs,o=Math.pow;e.Shape.Circle=function(t,e,n){this.x=t||0,this.y=e||0,this.radius=n||0};var a=e.Shape.Circle;a.prototype=e.extend(e.Shape),a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.apply=function(t){var e=t.x+t.k*this.x,n=t.y+t.k*this.y,r=t.k*this.radius;return new a(e,n,r)},a.prototype.intersectsRect=function(t){var e=t.dx/2,n=t.dy/2,r=this.radius,a=i(this.x-t.x-e),s=i(this.y-t.y-n);return!(a>e+r||s>n+r)&&(a<=e||s<=n||o(a-e,2)+o(s-n,2)<=r*r)},a.prototype.intersectLine=function(e,n){var i=e.x2-e.x,o=e.y2-e.y,a=this.x-e.x,s=this.y-e.y,l=i*i+o*o,u=i*a+o*s,c=this.radius,h=a*a+s*s-c*c,d=u/l,f=d*d-h/l;if(!(f<0)){var p=r(f),m=d-p,g=d+p,y=[];return(n||m>=0&&m<=1)&&y.push(new t(e.x+i*m,e.y+o*m)),0!==f&&(n||g>=0&&g<=1)&&y.push(new t(e.x+i*g,e.y+o*g)),y}},a.prototype.points=function(){return[this.center()]},a.prototype.center=function(){return new t(this.x,this.y)},a.prototype.normal=function(t){return t.minus(this.x,this.y).norm()},a.prototype._containsPointCore=function(t){var e=t.x-this.x,n=t.y-this.y,r=this.radius;return e*e+n*n<=r*r},a.prototype.distance2=function(t,e){var r=this.radius,i=t.minus(this).norm().times(r).plus(this);return n(t,i,e)},a.prototype._calcBBox=function(){var t=this.radius,n=2*t;return new e.Shape.Rect(this.x-t,this.y-t,n,n)}}(),function(){var t=e.Shape.Point,n=e.Shape.dist2,r=e.Shape.normalizeAngle,i=e.Shape.atan2Norm,o=Math.cos,a=Math.sin,s=Math.sqrt,l=Math.PI,u=2*l,c=l/2,h=3*l/2;e.Shape.Arc=function(t,n,i,o,a){this.x=t,this.y=n,this.radius=i,e.floatBelongsClosed(0,a,u)||(a=r(a)),this.startAngle=r(o),this.angleSpan=a,this.endAngle=this.startAngle+this.angleSpan};var d=e.Shape.Arc;d.prototype=e.extend(e.Shape),d.prototype.hasArea=function(){return!1},d.prototype.clone=function(){var t=Object.create(d.prototype),e=this;return t.x=e.x,t.y=e.y,t.radius=e.radius,t.startAngle=e.startAngle,t.angleSpan=e.angleSpan,t.endAngle=e.endAngle,t},d.prototype.apply=function(t){var e=t.x+t.k*this.x,n=t.y+t.k*this.y,r=t.k*this.radius;return new d(e,n,r,this.startAngle,this.angleSpan)},d.prototype.containsAngle=function(t,n){e.floatBelongsClosed(0,t,u)||(t=r(t));var i=this.startAngle,o=this.endAngle;return!(n?!e.floatBelongsOpen(i,t,o):!e.floatBelongsClosed(i,t,o))||!e.floatLessOrEqual(o,u)&&(t+=u,n?e.floatBelongsOpen(i,t,o):e.floatBelongsClosed(i,t,o))},d.prototype._containsPointCore=function(t){var n=t.x-this.x,r=t.y-this.y,o=s(n*n+r*r);return e.floatEqual(o,this.radius)&&this.containsAngle(i(r,n))},d.prototype.intersectsRect=function(t){var e,n=this.points(),r=n.length;for(e=0;e<r;e++)if(n[e].intersectsRect(t))return!0;var i=t.edges();for(r=i.length,e=0;e<r;e++)if(this.intersectLine(i[e]))return!0;return!1};var f=e.Shape.Circle.prototype.intersectLine;d.prototype.intersectLine=function(t,e){var n=f.call(this,t,e);if(n&&(n=n.filter(function(t){return this._containsPointCore(t)},this),n.length))return n},d.prototype.points=function(){function e(e){n.containsAngle(e,!0)&&f.push(new t(r+s*o(e),i+s*a(e)))}var n=this,r=n.x,i=n.y,s=n.radius,u=n.startAngle,d=n.endAngle,f=[new t(r+s*o(u),i+s*a(u)),new t(r+s*o(d),i+s*a(d))];return e(0),e(c),e(l),e(h),f},d.prototype.center=function(){var e=this.x,n=this.y,r=this.radius,i=(this.startAngle+this.endAngle)/2;return new t(e+r*o(i),n+r*a(i))},d.prototype.normal=function(t,e){var n=t.minus(this.x,this.y).norm();return e&&this.center().minus(e).dot(n)<0&&(n=n.times(-1)),n},d.prototype.distance2=function(r,s){var l=r.x-this.x,u=r.y-this.y,c=i(u,l);if(this.containsAngle(c)){var h=new t(this.x+this.radius*o(c),this.y+this.radius*a(c));return n(r,h,s)}var d=this.points(),f=n(r,d[0],s),p=n(r,d[1],s);return e.floatLess(f.cost,p.cost)?f:p}}(),function(){var t=e.Shape.Arc,n=e.Shape.Line,r=e.Shape.Point,i=Math.cos,o=Math.sin,a=Math.sqrt,s=Math.PI,l=2*s,u=s/2,c=3*s/2,h=e.Shape.atan2Norm,d=e.Shape.normalizeAngle;e.Shape.Wedge=function(t,n,r,i,o,a){this.x=t,this.y=n,this.innerRadius=r,this.outerRadius=i,e.floatBelongsClosed(0,a,l)||(a=d(a)),this.startAngle=d(o),this.angleSpan=a,this.endAngle=this.startAngle+a};var f=e.Shape.Wedge;f.prototype=e.extend(e.Shape),f.prototype.clone=function(){return new f(this.x,this.y,this.innerRadius,this.outerRadius,this.startAngle,this.angleSpan)},f.prototype.apply=function(t){var e=t.x+t.k*this.x,n=t.y+t.k*this.y,r=t.k*this.innerRadius,i=t.k*this.outerRadius;return new f(e,n,r,i,this.startAngle,this.angleSpan)},f.prototype.containsAngle=t.prototype.containsAngle,f.prototype._containsPointCore=function(t){var n=t.x-this.x,r=t.y-this.y,i=a(n*n+r*r);return e.floatBelongsClosed(this.innerRadius,i,this.outerRadius)&&this.containsAngle(h(r,n))},f.prototype.intersectsRect=function(t){var e,n,r,i;for(r=this.points(),n=r.length,e=0;e<n;e++)if(r[e].intersectsRect(t))return!0;for(r=t.points(),n=r.length,e=0;e<n;e++)if(this._containsPointCore(r[e]))return!0;for(i=this.edges(),n=i.length,e=0;e<n;e++)if(i[e].intersectsRect(t))return!0;return!1},f.prototype.points=function(){return this._points||this.edges(),this._points},f.prototype.edges=function(){function a(t){l.containsAngle(t,!0)&&N.push(new r(p+v*i(t),m+v*o(t)))}var l=this,h=l._edges;if(!h){var d,f,p=l.x,m=l.y,g=l.innerRadius,y=e.floatGreater(g,0),v=l.outerRadius,b=l.startAngle,_=l.endAngle,w=l.angleSpan,x=i(b),C=o(b),S=i(_),k=o(_);y?(d=new r(p+g*x,m+g*C),f=new r(p+g*S,m+g*k)):d=f=new r(p,m);var D=new r(p+v*x,m+v*C),M=new r(p+v*S,m+v*k);h=l._edges=[],y&&h.push(new t(p,m,g,b,w)),h.push(new n(d.x,d.y,D.x,D.y),new t(p,m,v,b,w),new n(f.x,f.y,M.x,M.y));var N=l._points=[d,D,M];y&&N.push(f),a(0),a(u),a(s),a(c)}return h},f.prototype.distance2=function(t,n){var r={cost:1/0,dist2:1/0};return this.edges().forEach(function(i){var o=i.distance2(t,n);e.floatLess(o.cost,r.cost)&&(r=o)}),r},f.prototype.center=function(){var t=(this.startAngle+this.endAngle)/2,e=(this.innerRadius+this.outerRadius)/2;return new r(this.x+e*i(t),this.y+e*o(t))}}(),function(){var t=Math.round,n=function(e){var n=parseFloat(e);return"%"==e[e.length-1]?t(2.55*n):n},r=/([a-z]+)\((.*)\)/i,i=function(t){if("#"===t.charAt(0)){var i,o,a;return 4===t.length?(i=t.charAt(1),i+=i,o=t.charAt(2),o+=o,a=t.charAt(3),a+=a):7===t.length&&(i=t.substring(1,3),o=t.substring(3,5),a=t.substring(5,7)),e.rgb(parseInt(i,16),parseInt(o,16),parseInt(a,16),1)}var s=r.exec(t);if(s){var l=s[2].split(","),u=1;switch(s[1]){case"hsla":case"rgba":if(!(u=parseFloat(l[3])))return e.Color.transparent}switch(s[1]){case"hsla":case"hsl":var c=parseFloat(l[0]),h=parseFloat(l[1])/100,d=parseFloat(l[2])/100;return new e.Color.Hsl(c,h,d,u).rgb();case"rgba":case"rgb":var i=n(l[0]),o=n(l[1]),a=n(l[2]);return e.rgb(i,o,a,u)}}return new e.Color(t,1)},o={};e.color=function(t){if(t.rgb)return t.rgb();var n=e.Color.names[t];return n||(n=o[t]||(o[t]=i(t))),n}}(),e.Color=function(t,e){this.color=t,this.opacity=e,this.key="solid "+t+" alpha("+e+")"},e.Color.prototype.hsl=function(){return this.rgb().hsl()},e.Color.prototype.brighter=function(t){return this.rgb().brighter(t)},e.Color.prototype.darker=function(t){return this.rgb().darker(t)},e.Color.prototype.relativeLuminance=function(e){var n=this.alphaBlend(e);return.2126*t(n.r)+.7152*t(n.g)+.0722*t(n.b)},e.Color.prototype.alphaBlend=function(t){var n=this.rgb(),r=n.a;if(1===r)return this;t=t?e.color(t).alphaBlend():e.Color.names.white,t=t.rgb();var i=1-r;return e.rgb(r*n.r+i*t.r,r*n.g+i*t.g,r*n.b+i*t.b,1)},e.Color.prototype.rgbDecimal=function(t){var e=this.alphaBlend(t);return e.r<<16|e.g<<8|e.b},e.Color.prototype.isDark=function(){return this.rgbDecimal()<8388607.5},e.Color.prototype.contrastRatioTo=function(t){var e=t.alphaBlend(),n=this.alphaBlend(e),r=e.relativeLuminance(),i=n.relativeLuminance();return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)},e.rgb=function(t,n,r,i){return new e.Color.Rgb(t,n,r,4==arguments.length?i:1)},e.Color.Rgb=function(t,n,r,i){e.Color.call(this,i?"rgb("+t+","+n+","+r+")":"none",i),this.r=t,this.g=n,this.b=r,this.a=i},e.Color.Rgb.prototype=e.extend(e.Color),e.Color.Rgb.prototype.red=function(t){return e.rgb(t,this.g,this.b,this.a)},e.Color.Rgb.prototype.green=function(t){return e.rgb(this.r,t,this.b,this.a)},e.Color.Rgb.prototype.blue=function(t){return e.rgb(this.r,this.g,t,this.a)},e.Color.Rgb.prototype.alpha=function(t){return e.rgb(this.r,this.g,this.b,t)},e.Color.Rgb.prototype.rgb=function(){return this},e.Color.Rgb.prototype.brighter=function(t){t=Math.pow(.7,null!=t?t:1);var n=this.r,r=this.g,i=this.b,o=30;return n||r||i?(n&&n<o&&(n=o),r&&r<o&&(r=o),i&&i<o&&(i=o),e.rgb(Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(r/t)),Math.min(255,Math.floor(i/t)),this.a)):e.rgb(o,o,o,this.a)},e.Color.Rgb.prototype.darker=function(t){return t=Math.pow(.7,null!=t?t:1),e.rgb(Math.max(0,Math.floor(t*this.r)),Math.max(0,Math.floor(t*this.g)),Math.max(0,Math.floor(t*this.b)),this.a)},e.Color.Rgb.prototype.hsl=function(){var t,n,r=this.r/255,i=this.g/255,o=this.b/255,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(a+s)/2;if(a===s)t=n=0;else{var u=a-s;switch(n=l>.5?u/(2-a-s):u/(a+s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.hsl(360*t,n,l,this.a)},e.Color.Rgb.prototype.complementary=function(){return this.hsl().complementary().rgb()},e.hsl=function(t,n,r,i){return new e.Color.Hsl(t,n,r,4==arguments.length?i:1)},e.Color.Hsl=function(t,n,r,i){e.Color.call(this,"hsl("+t+","+100*n+"%,"+100*r+"%)",i),this.h=t,this.s=n,this.l=r,this.a=i},e.Color.Hsl.prototype=e.extend(e.Color),e.Color.Hsl.prototype.hsl=function(){return this},e.Color.Hsl.prototype.hue=function(t){return e.hsl(t,this.s,this.l,this.a)},e.Color.Hsl.prototype.saturation=function(t){return e.hsl(this.h,t,this.l,this.a)},e.Color.Hsl.prototype.lightness=function(t){return e.hsl(this.h,this.s,t,this.a)},e.Color.Hsl.prototype.alpha=function(t){return e.hsl(this.h,this.s,this.l,t)},e.Color.Hsl.prototype.complementary=function(){return e.hsl((this.h+180)%360,1-this.s,1-this.l,this.a)},e.Color.Hsl.prototype.rgb=function(){function t(t){return t>360?t-=360:t<0&&(t+=360),t<60?s+(a-s)*t/60:t<180?a:t<240?s+(a-s)*(240-t)/60:s}function n(e){return Math.round(255*t(e))}var r=this.h,i=this.s,o=this.l;r%=360,r<0&&(r+=360),i=Math.max(0,Math.min(i,1)),o=Math.max(0,Math.min(o,1));var a=o<=.5?o*(1+i):o+i-o*i,s=2*o-a;return e.rgb(n(r+120),n(r),n(r-120),this.a)},e.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:e.Color.transparent=e.rgb(0,0,0,0)},function(){var t=e.Color.names;t.none=t.transparent;for(var n in t)t[n]=e.color(t[n])}(),e.colors=function(){var t=e.Scale.ordinal();return t.range.apply(t,arguments),t},e.Colors={},e.Colors.category10=function(){var t=e.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");return t.domain.apply(t,arguments),t},e.Colors.category20=function(){var t=e.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");return t.domain.apply(t,arguments),t},e.Colors.category19=function(){var t=e.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");return t.domain.apply(t,arguments),t},function(){function t(t){var n=r(t);if(!n.length)return null;var o,a,l,u=Math.PI,c=n[0];0===c.indexOf("to ")?(a=/^to\s+(?:((top|bottom)(?:\s+(left|right))?)|((left|right)(?:\\s+(top|bottom))?))$/.exec(c))&&(a[1]?(o=a[2],a[3]&&(o+=" "+a[3])):(o=a[5],a[6]&&(o=a[6]+" "+o)),u=e.radians(s[o]),n.shift()):(l=parseFloat(c),isNaN(l)||(u=l,/^.*?deg$/.test(c)&&(u=e.radians(u)),n.shift()));var h=i(n);switch(h.length){case 0:return null;case 1:return new e.FillStyle.Solid(h[0].color,1)}return new e.FillStyle.LinearGradient(u,h,t)}function n(t){var n=r(t);if(!n.length)return null;var o=i(n);switch(o.length){case 0:return null;case 1:return new e.FillStyle.Solid(o[0].color,1)}return new e.FillStyle.RadialGradient(50,50,o,t)}function r(t){var e={},n=0;t=t.replace(/\b\w+?\(.*?\)/g,function(t){var r="__color"+n++;return e[r]=t,r});var r=t.split(/\s*,\s*/);return r.length?(n&&r.forEach(function(t,n){e.hasOwnProperty(t)&&(r[n]=e[t])}),r):null}function i(t){for(var n=[],r=1/0,i=-1/0,o=[],a=0,s=t.length;a<s;){var l=t[a++],u=/^(.+?)\s*([+\-]?[e\.\d]+%)?$/i.exec(l);if(u){var c={color:e.color(u[1])},h=parseFloat(u[2]);isNaN(h)&&(n.length?a===s&&(h=Math.max(i,100)):h=0),n.push(c),isNaN(h)?o.push(c):(c.offset=h,function(t){var e=o.length;if(e){for(var n=i,r=(t-n)/(e+1),a=0;a<e;a++)n+=r,o[a].offset=n;o.length=0}}(h),h>i?i=h:h<i&&(h=i),h<r&&(r=h))}}if(n.length>=2&&(r<0||i>100)){var d=[],f=[];n.forEach(function(t){d.push(t.offset),f.push(t.color)});var p=e.scale.linear().domain(d).range(f);if(r<0){for(;n.length&&n[0].offset<=0;)n.shift();n.unshift({offset:0,color:p(0)})}if(i>100){for(;n.length&&n[n.length-1].offset>=100;)n.pop();n.push({offset:100,color:p(100)})}}return n}e.fillStyle=function(t){if(t.type)return t;var e=t.key||t,n=o[e];return n=n?n.clone():o[e]=a(t)};var o={},a=function(r){if(r.rgb)return new e.FillStyle.Solid(r.color,r.opacity);var i=/^\s*([a-z\-]+)\(\s*(.*?)\s*\)\s*$/.exec(r);if(i)switch(i[1]){case"linear-gradient":return t(i[2]);case"radial-gradient":return n(i[2])}return new e.FillStyle.Solid(e.color(r))},s={top:0,"top right":45,right:90,"bottom right":135,bottom:180,"bottom left":225,left:270,"top left":315},l=e.FillStyle=function(t){this.type=t,this.key=t};e.extendType(l,new e.Color("none",1)),l.prototype.rgb=function(){var t=e.color(this.color);return this.opacity!==t.opacity&&(t=t.alpha(this.opacity)),t},l.prototype.alphaBlend=function(t){return this.rgb().alphaBlend(t)},l.prototype.rgbDecimal=function(t){return this.rgb().rgbDecimal(t)},l.prototype.isDark=function(){return this.rgb().isDark()};var u=e.FillStyle.Solid=function(t,e){l.call(this,"solid"),t.rgb?(this.color=t.color,this.opacity=t.opacity):(this.color=t,this.opacity=e),this.key+=" "+this.color+" alpha("+this.opacity+")"};e.extendType(u,l),u.prototype.alpha=function(t){return new u(this.color,t)},u.prototype.brighter=function(t){return new u(this.rgb().brighter(t))},u.prototype.darker=function(t){return new u(this.rgb().darker(t))},u.prototype.complementary=function(){return new u(this.rgb().complementary())},u.prototype.clone=function(){var t=e.extend(u);return t.type=this.type,t.key=this.key,t.color=this.color,t.opacity=this.opacity,t},e.FillStyle.transparent=new u(e.Color.transparent);var c=0,h=e.FillStyle.Gradient=function(t,e){l.call(this,t),this.id=++c,this.stops=e,e.length&&(this.color=e[0].color.color),this.key+=" stops("+e.map(function(t){var e=t.color;return e.color+" alpha("+e.opacity+") at("+t.offset+")"}).join(", ")+")"};e.extendType(h,l),h.prototype.rgb=function(){return this.stops.length?this.stops[0].color:void 0},h.prototype.alpha=function(t){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.alpha(t)}}))},h.prototype.darker=function(t){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.darker(t)}}))},h.prototype.brighter=function(t){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.brighter(t)}}))},h.prototype.complementary=function(){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.complementary()}}))},h.prototype.alphaBlend=function(t){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.alphaBlend(t)}}))},h.prototype.clone=function(){var t=this.constructor,n=e.extend(t);n.constructor=t,n.id=++c,n.type=this.type,n.key=this.key;var r=this.stops;return n.stops=r,r.length&&(n.color=r[0].color.color),this._initClone(n),n};var d=e.FillStyle.LinearGradient=function(t,e){h.call(this,"lineargradient",e),this.angle=t,this.key+=" angle("+t+")"};e.extendType(d,h),d.prototype._cloneWithStops=function(t){return new d(this.angle,t)},d.prototype._initClone=function(t){t.angle=this.angle};var f=e.FillStyle.RadialGradient=function(t,e,n){h.call(this,"radialgradient",n),this.cx=t,this.cy=e,this.key+=" center("+t+","+e+")"};e.extendType(f,h),f.prototype._cloneWithStops=function(t){return new f(this.cx,this.cy,t)},f.prototype._initClone=function(t){t.cx=this.cx,t.cy=this.cy}}(),e.ramp=function(t,n){var r=e.Scale.linear();return r.range.apply(r,arguments),r},e.Scene=e.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick","contextmenu"],mousePositionEventSet:{mousedown:1,mouseup:1,mouseover:1,mouseout:1,mousemove:1,click:1,dblclick:1,contextmenu:1},implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":8,"stroke-dasharray":"none"},css:{font:"10px sans-serif"}}},e.SvgScene.updateAll=function(t){if(t.length&&t[0].reverse&&"line"!==t.type&&"area"!==t.type){for(var e=Object.create(t),n=0,r=t.length-1;r>=0;n++,r--)e[n]=t[r];t=e}this.removeSiblings(this[t.type](t))},e.SvgScene.create=function(t){return document.createElementNS(this.svg,t)},e.SvgScene.expect=function(t,e,n,r,i,o){var a;if(t&&(a=t.tagName,"defs"===a?(t=t.nextSibling)&&(a=t.tagName):"a"===a&&(t=t.firstChild)),t){if(a!==e){var s=this.create(e);t.parentNode.replaceChild(s,t),t=s}}else t=this.create(e);return i&&this.setAttributes(t,i),o&&this.setStyle(t,o),t},e.SvgScene.setAttributes=function(t,e){var n=this.implicit.svg,r=t.__attributes__;r===e&&(r=null);for(var i in e){var o=e[i];r&&o===r[i]||(null==o||o==n[i]?t.removeAttribute(i):t.setAttribute(i,o))}t.__attributes__=e},e.SvgScene.setStyle=function(t,e){var n=this.implicit.css,r=t.__style__;r===e&&(r=null);for(var i in e){var o=e[i];r&&o===r[i]||(null==o||o==n[i]?t.style.removeProperty(i):t.style[i]=o)}t.__style__=e},e.SvgScene.append=function(t,e,n){return t.$scene={scenes:e,index:n},t=this.title(t,e[n]),t.parentNode||e.$g.appendChild(t),t.nextSibling},e.SvgScene.title=function(t,e){var n=t.parentNode;if(n&&"a"!=n.tagName&&(n=null),e.title){n||(n=this.create("a"),n.setAttributeNS(this.xlink,"xlink:href",""),t.parentNode&&t.parentNode.replaceChild(n,t),n.appendChild(t)),n.setAttributeNS(this.xlink,"xlink:title",e.title);for(var r=null,i=t.firstChild;null!=i;i=i.nextSibling)if("title"==i.nodeName){r=i;break}return r?r.removeChild(r.firstChild):(r=this.create("title"),t.appendChild(r)),r.appendChild(document.createTextNode(e.title)),n}return n&&n.parentNode.replaceChild(t,n),t},e.SvgScene.dispatch=e.listener(function(t){var n=t.target.$scene;if(n){var r=t.type;switch(r){case"DOMMouseScroll":r="mousewheel",t.wheel=-480*t.detail;break;case"mousewheel":t.wheel=(window.opera?12:1)*t.wheelDelta}e.Mark.dispatch(r,n.scenes,n.index,t)&&(t.preventDefault(),t.stopPropagation())}}),e.SvgScene.removeSiblings=function(t){for(;t;){var e=t.nextSibling;"defs"!==t.nodeName&&t.parentNode.removeChild(t),t=e}},e.SvgScene.undefined=function(){},function(){var t={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},n={shortdash:[3,1],shortdot:[1,1],shortdashdot:[3,1,1,1],shortdashdotdot:[3,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};e.SvgScene.isStandardDashStyle=function(t){return n.hasOwnProperty(t)},e.SvgScene.translateDashStyleAlias=function(e){return t.hasOwnProperty(e)?t[e]:e},e.SvgScene.parseDasharray=function(t){var e=t.strokeDasharray;if(e&&"none"!==e){e=this.translateDashStyleAlias(e);e=n[e]||e.split(/[\s,]+/);var r=t.lineWidth,i=t.lineCap||"butt",o="butt"===i;e=e.map(function(t,e){return t=+t,o||(e%2?t++:t-=1),t<=0&&(t=.001),t*r/this.scale},this).join(" ")}else e=null;return e}}(),function(){var t=/^url\(#/,n=1,r=Math.PI/2,i=r/2,o=Math.SQRT2/2,a=Math.abs,s=Math.sin,l=Math.cos,u=function(t){return a(t)<=1e-12?0:t};e.SvgScene.addFillStyleDefinition=function(e,r){if(r.type&&"solid"!==r.type&&!t.test(r.color)){var i=e.mark.root,o=i.__fillStyleMap__||(i.__fillStyleMap__={}),a=r.key,s=o[a];if(!s){s=o[a]="__pvGradient"+n++;var l=c.call(this,e,r,s);i.scene.$defs.appendChild(l)}r.color="url(#"+s+")"}};var c=function(t,e,n){var c="lineargradient"===e.type,h=this.create(c?"linearGradient":"radialGradient");if(h.setAttribute("id",n),c){var d=e.angle-r,f=a(d%r)-i,p=a(o*l(f)),m=p*l(d),g=p*s(d);h.setAttribute("x1",u(.5-m)),h.setAttribute("y1",u(.5-g)),h.setAttribute("x2",u(.5+m)),h.setAttribute("y2",u(.5+g))}for(var y=e.stops,v=y.length,b=0;b<v;b++){var _=y[b],w=h.appendChild(this.create("stop")),x=_.color;w.setAttribute("offset",_.offset+"%"),w.setAttribute("stop-color",x.color),w.setAttribute("stop-opacity",x.opacity+"")}return h}}(),e.SvgScene.pathBasis=function(){function t(t,e,n,r,i){return{x:t[0]*e.left+t[1]*n.left+t[2]*r.left+t[3]*i.left,y:t[0]*e.top+t[1]*n.top+t[2]*r.top+t[3]*i.top}}var e=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],n=function(n,r,i,o){var a=t(e[1],n,r,i,o),s=t(e[2],n,r,i,o),l=t(e[3],n,r,i,o);return"C"+a.x+","+a.y+","+s.x+","+s.y+","+l.x+","+l.y};return n.segment=function(n,r,i,o){var a=t(e[0],n,r,i,o),s=t(e[1],n,r,i,o),l=t(e[2],n,r,i,o),u=t(e[3],n,r,i,o);return["M"+a.x+","+a.y,"C"+s.x+","+s.y+","+l.x+","+l.y+","+u.x+","+u.y]},n}(),e.SvgScene.curveBasis=function(t,e,n){var r;if(null==e?(r=t.length,e=0,n=r-1):r=n-e+1,r<=2)return"";var i="",o=t[e],a=o,s=o,l=t[e+1];i+=this.pathBasis(o,a,s,l);for(var u=e+2;u<=n;u++)o=a,a=s,s=l,l=t[u],i+=this.pathBasis(o,a,s,l);return i+=this.pathBasis(a,s,l,l),i+=this.pathBasis(s,l,l,l)},e.SvgScene.curveBasisSegments=function(t,e,n){var r;if(null==e?(r=t.length,e=0,n=r-1):r=n-e+1,r<=2)return"";var i=[],o=t[e],a=o,s=o,l=t[e+1],u=this.pathBasis.segment(o,a,s,l);o=a,a=s,s=l,l=t[e+2],u[1]+=this.pathBasis(o,a,s,l),i.push(u);for(var c=e+3;c<=n;c++)o=a,a=s,s=l,l=t[c],i.push(this.pathBasis.segment(o,a,s,l));var h=this.pathBasis.segment(a,s,l,l);return h[1]+=this.pathBasis(s,l,l,l),i.push(h),i},e.SvgScene.curveHermite=function(t,e,n,r){var i;null==n?(i=t.length,n=0,r=i-1):i=r-n+1;var o=e.length;if(o<1||i!==o&&i!==o+2)return"";var a=i!==o,s="",l=t[n],u=t[n+1],c=e[0],h=c,d=n+1;if(a&&(s+="Q"+(u.left-2*c.x/3)+","+(u.top-2*c.y/3)+","+u.left+","+u.top,l=t[n+1],d=n+2),o>1){h=e[1],u=t[d],d++,s+="C"+(l.left+c.x)+","+(l.top+c.y)+","+(u.left-h.x)+","+(u.top-h.y)+","+u.left+","+u.top;for(var f=2;f<o;f++,d++)u=t[d],h=e[f],s+="S"+(u.left-h.x)+","+(u.top-h.y)+","+u.left+","+u.top}if(a){var p=t[d];s+="Q"+(u.left+2*h.x/3)+","+(u.top+2*h.y/3)+","+p.left+","+p.top}return s},e.SvgScene.curveHermiteSegments=function(t,e,n,r){var i;null==n?(i=t.length,n=0,r=i-1):i=r-n+1;var o=e.length;if(o<1||i!==o&&i!==o+2)return[];var a=i!==o,s=[],l=t[n],u=l,c=e[0],h=c,d=n+1;a&&(u=t[n+1],s.push(["M"+l.left+","+l.top,"Q"+(u.left-2*h.x/3)+","+(u.top-2*h.y/3)+","+u.left+","+u.top]),d=n+2);for(var f=1;f<o;f++,d++)l=u,c=h,u=t[d],h=e[f],s.push(["M"+l.left+","+l.top,"C"+(l.left+c.x)+","+(l.top+c.y)+","+(u.left-h.x)+","+(u.top-h.y)+","+u.left+","+u.top]);if(a){var p=t[d];s.push(["M"+u.left+","+u.top,"Q"+(u.left+2*h.x/3)+","+(u.top+2*h.y/3)+","+p.left+","+p.top])}return s},e.SvgScene.cardinalTangents=function(t,e,n,r){var i;null==n?(i=t.length,n=0,r=i-1):i=r-n+1;for(var o=[],a=(1-e)/2,s=t[n],l=t[n+1],u=t[n+2],c=n+3;c<=r;c++)o.push({x:a*(u.left-s.left),y:a*(u.top-s.top)}),s=l,l=u,u=t[c];return o.push({x:a*(u.left-s.left),y:a*(u.top-s.top)}),o},e.SvgScene.curveCardinal=function(t,e,n,r){var i;return null==n?(i=t.length,n=0,r=i-1):i=r-n+1,i<=2?"":this.curveHermite(t,this.cardinalTangents(t,e,n,r),n,r)},e.SvgScene.curveCardinalSegments=function(t,e,n,r){var i;return null==n?(i=t.length,n=0,r=i-1):i=r-n+1,i<=2?"":this.curveHermiteSegments(t,this.cardinalTangents(t,e,n,r),n,r)},e.SvgScene.monotoneTangents=function(t,e,n){var r;null==e?(r=t.length,e=0,n=r-1):r=n-e+1;var i,o=[],a=[],s=[],l=[],u=0;for(u=0;u<r-1;u++){i=e+u;var c=t[i+1].left-t[i].left;a[u]=Math.abs(c)<=1e-12?0:(t[i+1].top-t[i].top)/c}for(s[0]=a[0],l[0]=t[e+1].left-t[e].left,u=1,i=e+u;u<r-1;u++,i++)s[u]=(a[u-1]+a[u])/2,l[u]=(t[i+1].left-t[i-1].left)/2;for(s[u]=a[u-1],l[u]=t[i].left-t[i-1].left,u=0;u<r-1;u++)0==a[u]&&(s[u]=0,s[u+1]=0);for(u=0;u<r-1;u++)if(!(Math.abs(s[u])<1e-5||Math.abs(s[u+1])<1e-5)){var h=s[u]/a[u],d=s[u+1]/a[u],f=h*h+d*d;if(f>9){var p=3/Math.sqrt(f);s[u]=p*h*a[u],s[u+1]=p*d*a[u]}}for(var m,g=0;g<r;g++)m=1+s[g]*s[g],o.push({x:l[g]/3/m,y:s[g]*l[g]/3/m});return o},e.SvgScene.curveMonotone=function(t,e,n){var r;return null==e?(r=t.length,e=0,n=r-1):r=n-e+1,r<=2?"":this.curveHermite(t,this.monotoneTangents(t,e,n),e,n)},e.SvgScene.curveMonotoneSegments=function(t,e,n){var r;return null==e?(r=t.length,e=0,n=r-1):r=n-e+1,r<=2?"":this.curveHermiteSegments(t,this.monotoneTangents(t,e,n),e,n)},e.SvgScene.area=function(t){var e=t.$g.firstChild,n=t.length;if(!n)return e;var r=t[0]
;return"smart"===r.segmented?this.areaSegmentedSmart(e,t):r.segmented?this.areaSegmentedFull(e,t):this.areaFixed(e,t,0,n-1,!0)},e.SvgScene.areaFixed=function(t,e,n,r,i){if(1==r-n+1)return this.lineAreaDotAlone(t,e,n);var o=e[n];if(!o.visible)return t;var a=o.fillStyle,s=o.strokeStyle;if(!a.opacity&&!s.opacity)return t;this.addFillStyleDefinition(e,a),this.addFillStyleDefinition(e,s);var l=!1,u=!1,c=!1,h=!1,d=!1;switch(o.interpolate){case"basis":l=!0;break;case"cardinal":u=!0;break;case"monotone":c=!0;break;case"step-after":h=!0;break;case"step-before":d=!0}for(var f,p,m=l||u||c,g=[],y=n;y<=r;y++)if(f=e[y],f.width||f.height){for(var v=y+1;v<=r&&(p=e[v],p.width||p.height);v++);y>n&&!h&&y--,v<=r&&!d&&v++;var b=m&&v-y>2?this.areaPathCurve:this.areaPathStraight;g.push(b.call(this,e,y,v-1,o)),y=v-1}if(!g.length)return t;var _=s.opacity;return t=this.expect(t,"path",e,n,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":i?o.events:"none",cursor:o.cursor,d:"M"+g.join("ZM")+"Z",fill:a.color,"fill-opacity":a.opacity||null,stroke:s.color,"stroke-opacity":_||null,"stroke-width":_?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-miterlimit":o.strokeMiterLimit,"stroke-dasharray":_?this.parseDasharray(o):null}),o.svg&&this.setAttributes(t,o.svg),o.css&&this.setStyle(t,o.css),this.append(t,e,n)},e.SvgScene.areaSegmentedSmart=function(t,e){return this.eachLineAreaSegment(t,e,function(t,e,n,r){var i=this.areaSegmentPaths(e,n,r),o=i.top,a=i.bottom,s=n,l={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(t,e,l,function(t,e,n,r,i,l){var u=e[n],c=u.fillStyle,h=u.strokeStyle;if(this.addFillStyleDefinition(e,c),this.addFillStyleDefinition(e,h),n===r)return this.lineAreaDotAlone(t,e,n);var d=this.areaJoinPaths(o,a,n-s,r-s-1),f=h.opacity,p={"shape-rendering":u.antialias?null:"crispEdges","pointer-events":l,cursor:u.cursor,d:d,fill:c.color,"fill-opacity":c.opacity||null,stroke:h.color,"stroke-opacity":f||null,"stroke-width":f?u.lineWidth/this.scale:null,"stroke-linecap":u.lineCap,"stroke-linejoin":u.lineJoin,"stroke-miterlimit":u.strokeMiterLimit,"stroke-dasharray":f?this.parseDasharray(u):null};return t=this.expect(t,"path",e,n,p,u.css),this.append(t,e,n)})})},e.SvgScene.areaSegmentPaths=function(t,e,n){return this.areaSegmentCurvePaths(t,e,n)||this.areaSegmentStraightPaths(t,e,n)},e.SvgScene.areaSegmentCurvePaths=function(t,e,n){var r=n-e+1,i=t[e],o="basis"===i.interpolate,a=!o&&"cardinal"===i.interpolate;if(o||a||"monotone"==i.interpolate){for(var s=[],l=[],u=0;u<r;u++){var c=t[e+u],h=t[n-u];s.push(c),l.push({left:h.left+h.width,top:h.top+h.height})}var d,f;if(o?(d=this.curveBasisSegments(s),f=this.curveBasisSegments(l)):a?(d=this.curveCardinalSegments(s,i.tension),f=this.curveCardinalSegments(l,i.tension)):(d=this.curveMonotoneSegments(s),f=this.curveMonotoneSegments(l)),d||d.length)return{from:e,top:d,bottom:f}}},e.SvgScene.areaSegmentStraightPaths=function(t,e,n){for(var r=[],i=[],o=n,a=e;e<o;e++,n--){var s=t[e],l=t[n],u=["M"+s.left+","+s.top],c=["M"+(l.left+l.width)+","+(l.top+l.height)],h=t[e+1],d=t[n-1];switch(s.interpolate){case"step-before":u.push("V"+h.top+"H"+h.left);break;case"step-after":u.push("H"+h.left+"V"+h.top);break;default:u.push("L"+h.left+","+h.top)}c.push("L"+(d.left+d.width)+","+(d.top+d.height)),r.push(u),i.push(c)}return{from:a,top:r,bottom:i}},e.SvgScene.areaJoinPaths=function(t,e,n,r){for(var i="",o="",a=t.length,s=n,l=a-1-r;s<=r;s++,l++){var u,c,h=t[s],d=e[l];s===n?(u=h.join(""),c="L"+d[0].substr(1)+d[1]):(u=h[1],c=d[1]),i+=u,o+=c}return i+o+"Z"},e.SvgScene.areaSegmentedFull=function(t,e){var n,r,i=e.length,o=this.areaSegmentCurvePaths(e,0,i-1);o&&(n=o.top,r=o.bottom);for(var a=(e[0],0);a<i-1;a++){var s=e[a],l=e[a+1];if(s.visible&&l.visible){var u=s.fillStyle,c=s.strokeStyle;if(u.opacity||c.opacity){var h;if(n)h=n[a].join("")+"L"+r[i-a-2].join("").substr(1)+"Z";else{var d=s,f=l;switch(s.interpolate){case"step-before":d=l;break;case"step-after":f=s}h="M"+s.left+","+d.top+"L"+l.left+","+f.top+"L"+(l.left+l.width)+","+(f.top+f.height)+"L"+(s.left+s.width)+","+(d.top+d.height)+"Z"}var p={"shape-rendering":s.antialias?null:"crispEdges","pointer-events":s.events,cursor:s.cursor,d:h,fill:u.color,"fill-opacity":u.opacity||null,stroke:c.color,"stroke-opacity":c.opacity||null,"stroke-width":c.opacity?s.lineWidth/this.scale:null};t=this.expect(t,"path",e,a,p),s.svg&&this.setAttributes(t,s.svg),s.css&&this.setStyle(t,s.css),t=this.append(t,e,a)}}}return t},e.SvgScene.areaPathStraight=function(t,e,n,r){for(var i=[],o=[],a=n;e<=a;e++,n--){var s=t[e],l=t[n],u=s.left+","+s.top,c=l.left+l.width+","+(l.top+l.height);if(e<a){var h=t[e+1],d=t[n-1];switch(r.interpolate){case"step-before":u+="V"+h.top,c+="H"+(d.left+d.width);break;case"step-after":u+="H"+h.left,c+="V"+(d.top+d.height)}}i.push(u),o.push(c)}return i.concat(o).join("L")},e.SvgScene.areaPathCurve=function(t,e,n,r){for(var i,o,a=[],s=[],l=n;e<=l;e++,n--){var u=t[n];a.push(t[e]),s.push({left:u.left+u.width,top:u.top+u.height})}switch(r.interpolate){case"basis":i=this.curveBasis(a),o=this.curveBasis(s);break;case"cardinal":i=this.curveCardinal(a,r.tension),o=this.curveCardinal(s,r.tension);break;default:i=this.curveMonotone(a),o=this.curveMonotone(s)}return a[0].left+","+a[0].top+i+"L"+s[0].left+","+s[0].top+o},e.SvgScene.minBarWidth=1,e.SvgScene.minBarHeight=1,e.SvgScene.minBarLineWidth=.2,e.SvgScene.bar=function(t){for(var e=t.$g.firstChild,n=0;n<t.length;n++){var r=t[n];if(!(!r.visible||Math.abs(r.width)<=1e-10||Math.abs(r.height)<=1e-10)){r.width<this.minBarWidth&&(r.width=this.minBarWidth),r.height<this.minBarHeight&&(r.height=this.minBarHeight);var i=r.fillStyle,o=r.strokeStyle;if(i.opacity||o.opacity){this.addFillStyleDefinition(t,i),this.addFillStyleDefinition(t,o);var a;o.opacity?(a=r.lineWidth,a=a<1e-10?0:Math.max(this.minBarLineWidth,a/this.scale)):a=null,e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:i.color,"fill-opacity":i.opacity||null,stroke:o.color,"stroke-opacity":o.opacity||null,"stroke-width":a,"stroke-linecap":r.lineCap,"stroke-dasharray":o.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(e,r.svg),r.css&&this.setStyle(e,r.css),e=this.append(e,t,n)}}}return e},e.SvgScene.dot=function(t){for(var n=t.$g.firstChild,r=0,i=t.length;r<i;r++){var o=t[r];if(o.visible){var a=o.fillStyle,s=a.opacity,l=o.strokeStyle,u=l.opacity;if(s||u){this.addFillStyleDefinition(t,a),this.addFillStyleDefinition(t,l);var c={"shape-rendering":o.antialias?null:"crispEdges","pointer-events":o.events,cursor:o.cursor,fill:a.color,"fill-opacity":s||null,stroke:l.color,"stroke-opacity":u||null,"stroke-width":u?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-dasharray":u?this.parseDasharray(o):null},h=o.shape||"circle",d=o.aspectRatio,f=o.shapeAngle,p=null;if("circle"!==h&&this.hasSymbol(h)){var m=o.shapeRadius,g=m,y=m;if(d>0&&1!==d){var v=1/Math.sqrt(d);g*=d*v,y*=v}c.d=this.renderSymbol(h,o,g,y),h="path",p="translate("+o.left+","+o.top+") ",f&&(p+="rotate("+e.degrees(f)+") ")}else 1===d?(h="circle",c.cx=o.left,c.cy=o.top,c.r=o.shapeRadius):(h="ellipse",c.cx=c.cy=0,p="translate("+o.left+","+o.top+") ",f&&(p+="rotate("+e.degrees(f)+") "),c.rx=o._width/2,c.ry=o._height/2);p&&(c.transform=p),n=this.expect(n,h,t,r,c),o.svg&&this.setAttributes(n,o.svg),o.css&&this.setStyle(n,o.css),n=this.append(n,t,r)}}}return n},function(t){var n={};t.registerSymbol=function(e,r){return n[e.toLowerCase()]=r,t},t.renderSymbol=function(e,r,i,o){return n[e].call(t,r,e,i,o)},t.hasSymbol=function(t){return n.hasOwnProperty(t)},t.symbols=function(){return e.keys(n)};var r=2/Math.sqrt(3);t.registerSymbol("circle",function(t){throw new Error("Not implemented as a symbol")}).registerSymbol("cross",function(t,e,n,r){var i=(t.shapeRadius,-n),o=-r;return"M"+i+","+o+"L"+n+","+r+"M"+n+","+o+"L"+i+","+r}).registerSymbol("triangle",function(t,e,n,i){var o=i,a=n*r,s=-i;return"M0,"+o+"L"+a+","+s+" "+-a+","+s+"Z"}).registerSymbol("diamond",function(t,e,n,r){var i=n*Math.SQRT2,o=r*Math.SQRT2;return"M0,"+-o+"L"+i+",0 0,"+o+" "+-i+",0Z"}).registerSymbol("square",function(t,e,n,r){var i=-n,o=-r;return"M"+i+","+o+"L"+n+","+o+" "+n+","+r+" "+i+","+r+"Z"}).registerSymbol("tick",function(t,e,n,r){return"M0,0L0,"+-r*r}).registerSymbol("bar",function(t,e,n,r){var i=r*r/2;return"M0,"+i+"L0,"+-i})}(e.SvgScene),e.SvgScene.image=function(t){for(var e=t.$g.firstChild,n=0;n<t.length;n++){var r=t[n];if(r.visible){if(e=this.fill(e,t,n),r.image){e=this.expect(e,"foreignObject",t,n,{cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(e,r.svg),r.css&&this.setStyle(e,r.css);var i=e.firstChild||e.appendChild(document.createElementNS(this.xhtml,"canvas"));i.$scene={scenes:t,index:n},i.style.width=r.width,i.style.height=r.height,i.width=r.imageWidth,i.height=r.imageHeight,i.getContext("2d").putImageData(r.image,0,0)}else e=this.expect(e,"image",t,n,{preserveAspectRatio:"none",cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(e,r.svg),r.css&&this.setStyle(e,r.css),e.setAttributeNS(this.xlink,"xlink:href",r.url);e=this.append(e,t,n),e=this.stroke(e,t,n)}}return e},e.SvgScene.label=function(t){for(var e=t.$g.firstChild,n=0;n<t.length;n++){var r=t[n];if(r.visible){var i=r.textStyle;if(i.opacity&&r.text){var o=0,a=0,s=0,l="start";switch(r.textBaseline){case"middle":s=".35em";break;case"top":s=".71em",a=r.textMargin;break;case"bottom":a="-"+r.textMargin}switch(r.textAlign){case"right":l="end",o="-"+r.textMargin;break;case"center":l="middle";break;case"left":o=r.textMargin}e=this.expect(e,"text",t,n,{"pointer-events":r.events,cursor:r.cursor,x:o,y:a,dy:s,transform:"translate("+r.left+","+r.top+")"+(r.textAngle?" rotate("+180*r.textAngle/Math.PI+")":"")+(1!=this.scale?" scale("+1/this.scale+")":""),fill:i.color,"fill-opacity":i.opacity||null,"text-anchor":l},{font:r.font,"text-shadow":r.textShadow,"text-decoration":r.textDecoration}),r.svg&&this.setAttributes(e,r.svg),r.css&&this.setStyle(e,r.css),e.firstChild?e.firstChild.nodeValue=r.text:e.appendChild(document.createTextNode(r.text)),e=this.append(e,t,n)}}}return e},e.SvgScene.line=function(t){var e=t.$g.firstChild,n=t.length;if(!n)return e;var r=t[0];return"smart"===r.segmented?this.lineSegmentedSmart(e,t):n<2?e:r.segmented?this.lineSegmentedFull(e,t):this.lineFixed(e,t)},e.SvgScene.lineFixed=function(t,e){var n=e.length;if(1===n)return this.lineAreaDotAlone(t,e,0);var r=e[0];if(!r.visible)return t;var i=r.fillStyle,o=r.strokeStyle;if(!i.opacity&&!o.opacity)return t;this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,o);var a="M"+r.left+","+r.top,s=n>2;if(s)switch(r.interpolate){case"basis":a+=this.curveBasis(e);break;case"cardinal":a+=this.curveCardinal(e,r.tension);break;case"monotone":a+=this.curveMonotone(e);break;default:s=!1}if(!s)for(var l=1;l<n;l++)a+=this.lineSegmentPath(e[l-1],e[l]);var u=o.opacity,c={"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,d:a,fill:i.color,"fill-opacity":i.opacity||null,stroke:o.color,"stroke-opacity":u||null,"stroke-width":u?r.lineWidth/this.scale:null,"stroke-linecap":r.lineCap,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-dasharray":u?this.parseDasharray(r):null};return t=this.expect(t,"path",e,0,c,r.css),r.svg&&this.setAttributes(t,r.svg),this.append(t,e,0)},e.SvgScene.lineSegmentedSmart=function(t,e){return this.eachLineAreaSegment(t,e,function(t,e,n,r){var i=this.lineSegmentPaths(e,n,r),o=n,a={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(t,e,a,function(t,e,n,r,a,s){var l=e[n],u=l.fillStyle;this.addFillStyleDefinition(e,u);var c=l.strokeStyle;if(this.addFillStyleDefinition(e,c),n===r)return this.lineAreaDotAlone(t,e,n);var h=this.lineJoinPaths(i,n-o,r-o-1),d=c.opacity,f={"shape-rendering":l.antialias?null:"crispEdges","pointer-events":s,cursor:l.cursor,d:h,fill:u.color,"fill-opacity":u.opacity||null,stroke:c.color,"stroke-opacity":d||null,"stroke-width":d?l.lineWidth/this.scale:null,"stroke-linecap":l.lineCap,"stroke-linejoin":l.lineJoin,"stroke-miterlimit":l.strokeMiterLimit,"stroke-dasharray":d?this.parseDasharray(l):null};return t=this.expect(t,"path",e,n,f,l.css),this.append(t,e,n)})})},e.SvgScene.lineSegmentedFull=function(t,n){var r,i=n[0];switch(i.interpolate){case"basis":r=this.curveBasisSegments(n);break;case"cardinal":r=this.curveCardinalSegments(n,i.tension);break;case"monotone":r=this.curveMonotoneSegments(n)}for(var o=0,a=n.length-1;o<a;o++){var s=n[o],l=n[o+1];if(s.visible&&l.visible){var u=s.strokeStyle,c=e.FillStyle.transparent;if(u.opacity){var h;"linear"==s.interpolate&&"miter"==s.lineJoin?(c=u,u=e.FillStyle.transparent,h=this.pathJoin(n[o-1],s,l,n[o+2])):h=r?r[o].join(""):"M"+s.left+","+s.top+this.lineSegmentPath(s,l),t=this.expect(t,"path",n,o,{"shape-rendering":s.antialias?null:"crispEdges","pointer-events":s.events,cursor:s.cursor,d:h,fill:c.color,"fill-opacity":c.opacity||null,stroke:u.color,"stroke-opacity":u.opacity||null,"stroke-width":u.opacity?s.lineWidth/this.scale:null,"stroke-linejoin":s.lineJoin}),s.svg&&this.setAttributes(t,s.svg),s.css&&this.setStyle(t,s.css),t=this.append(t,n,o)}}}return t},e.SvgScene.lineSegmentPath=function(t,e){var n=1;switch(t.interpolate){case"polar-reverse":n=0;case"polar":var r=e.left-t.left,i=e.top-t.top,o=1-t.eccentricity,a=Math.sqrt(r*r+i*i)/(2*o);if(o<=0||o>1)break;return"A"+a+","+a+" 0 0,"+n+" "+e.left+","+e.top;case"step-before":return"V"+e.top+"H"+e.left;case"step-after":return"H"+e.left+"V"+e.top}return"L"+e.left+","+e.top},e.SvgScene.lineSegmentPaths=function(t,e,n){var r,i=t[e];switch(i.interpolate){case"basis":r=this.curveBasisSegments(t,e,n);break;case"cardinal":r=this.curveCardinalSegments(t,i.tension,e,n);break;case"monotone":r=this.curveMonotoneSegments(t,e,n)}if(!r||!r.length){r=[];for(var o=e+1;o<=n;o++){var a=t[o-1],s=t[o];r.push(["M"+a.left+","+a.top,this.lineSegmentPath(a,s)])}}return r},e.strokeMiterLimit=4,e.SvgScene.pathJoin=function(t,n,r,i){var o,a,s,l=[],u=n.lineWidth/this.scale,c=e.vector(n.left,n.top),h=e.vector(r.left,r.top),d=h.minus(c),f=d.perp().norm(),p=f.times(u/2),m=c.plus(p),g=c.minus(p),y=h.plus(p),v=h.minus(p);if(t&&t.visible){var b=e.vector(t.left,t.top),_=c.minus(b),w=_.perp().norm(),x=w.plus(f).norm(),C=this.lineIntersect(c,x,m,d),S=this.lineIntersect(c,x,g,d);s=C.minus(S).length();var k=t.lineWidth/this.scale,D=(u+k)/2;if(a=s/D,o=n.strokeMiterLimit||e.strokeMiterLimit,a<=o)l.push(S,C);else{var M=d.times(-1),N=_.norm().plus(M.norm()).norm(),T=c.plus(N.times(D/2));N.dot(f)>=0?l.push(S,T,m):l.push(g,T,C)}}else l.push(g,m);if(i&&i.visible){var A=e.vector(i.left,i.top),P=A.minus(h),j=P.perp().norm(),O=j.plus(f).norm(),I=this.lineIntersect(h,O,y,d),E=this.lineIntersect(h,O,v,d);s=I.minus(E).length();var L=i.lineWidth/this.scale,R=(L+u)/2;if(a=s/R,o=r.strokeMiterLimit||e.strokeMiterLimit,a<=o)l.push(I,E);else{var F=P.times(-1),B=d.norm().plus(F.norm()).norm(),H=h.plus(B.times(R/2));B.dot(f)>=0?l.push(y,H,E):l.push(I,H,v)}}else l.push(y,v);var W=l.shift();return"M"+W.x+","+W.y+"L"+l.map(function(t){return t.x+","+t.y}).join(" ")},e.SvgScene.lineIntersect=function(t,e,n,r){return t.plus(e.times(n.minus(t).dot(r.perp())/e.dot(r.perp())))},e.SvgScene.lineJoinPaths=function(t,e,n){for(var r=t[e].join(""),i=e+1;i<=n;i++)r+=t[i][1];return r},e.SvgScene.lineAreaDotAlone=function(t,e,n){return t},e.Scene.eventsToNumber={"":0,none:0,painted:1,all:2},e.Scene.numberToEvents=["none","painted","all"],e.SvgScene.eachLineAreaSegment=function(t,n,r,i){"function"==typeof r&&(i=r,r=null);var o,a,s,l=e.get(r,"breakOnKeyChange",!1),u=e.get(r,"from")||0,c=e.get(r,"to",n.length-1);l&&(a=[],s=[]);for(var h=u;h<=c;){var d=n[h];if(this.isSceneVisible(d)){o=this.eventsToNumber[d.events]||0,l&&this.lineAreaSceneKey(d,a);for(var f,p=h;;){var m=p+1;if(m>c){f=m;break}var g=n[m];if(!this.isSceneVisible(g)){f=m+1;break}if(o=Math.max(o,this.eventsToNumber[g.events]||0),p=m,l&&(this.lineAreaSceneKey(g,s),!this.equalSceneKeys(a,s))){f=p;break}}t=i.call(this,t,n,h,p,r,this.numberToEvents[o]),h=f}else h++}return t},e.SvgScene.lineAreaSceneKey=function(t,e){return e[0]=t.fillStyle.key,e[1]=t.strokeStyle.key,e[2]=t.lineWidth,e[3]=t.strokeDasharray||"none",e[4]=t.interpolate,e},e.SvgScene.isSceneVisible=function(t){return t.visible&&(t.fillStyle.opacity>0||t.strokeStyle.opacity>0)},e.SvgScene.equalSceneKeys=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0},e.SvgScene.panel=function(t){for(var e=t.$g,n=e&&e.firstChild,r=0,i=t.length;r<i;r++){var o=t[r];if(o.visible){if(!t.parent){var a=o.canvas;this.applyCanvasStyle(a),e&&e.parentNode!==a&&(e=a.firstChild,n=e&&e.firstChild),e?n&&"defs"===n.tagName&&(n=n.nextSibling):(e=this.createRootPanelElement(),n=null,this.initRootPanelElement(e,t.mark),a.appendChild(e),t.$defs=e.appendChild(this.create("defs")),t.$g=e),e.setAttribute("width",o.width+o.left+o.right),e.setAttribute("height",o.height+o.top+o.bottom)}var s=null;if("hidden"===o.overflow){var l=this.addPanelClipPath(e,n,t,r,o);s=l.g,t.$g=e=s,n=l.next}n=this.fill(n,t,r);var u=this.scale,c=o.transform,h=o.left+c.x,d=o.top+c.y;if(this.scale*=c.k,o.children.length)for(var f={transform:"translate("+h+","+d+")"+(1!=c.k?" scale("+c.k+")":"")},p=this.getSortedChildScenes(t,r),m=0,g=p.length;m<g;m++){var y=p[m];y.$g=n=this.expect(n,"g",t,r,f),this.updateAll(y),n.parentNode||e.appendChild(n),n=n.nextSibling}this.scale=u,n=this.stroke(n,t,r),s&&(t.$g=e=s.parentNode,n=s.nextSibling)}}return n},e.SvgScene.applyCanvasStyle=function(t){t.style.display="inline-block"},e.SvgScene.createRootPanelElement=function(){return this.create("svg")},e.SvgScene.initRootPanelElement=function(t,e){t.setAttribute("font-size","10px"),t.setAttribute("font-family","sans-serif"),t.setAttribute("fill","none"),t.setAttribute("stroke","none"),t.setAttribute("stroke-width",1.5),this.disableElementSelection(t),this.listenRootPanelElement(t,e)},e.SvgScene.listenRootPanelElement=function(t,e){for(var n=0,r=this.events,i=r.length;n<i;n++)t.addEventListener(r[n],this.dispatch,!1),e._registerBoundEvent(t,r[n],this.dispatch,!1)},e.SvgScene.disableElementSelection=function(t){t.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),void 0!==t.onselectstart&&(t.setAttribute("unselectable","on"),t.onselectstart=function(){return!1})},e.SvgScene.addPanelClipPath=function(t,n,r,i,o){var a=e.id().toString(36),s=this.expect(n,"g",r,i,{"clip-path":"url(#"+a+")"}),l=this.expect(s.firstChild,"clipPath",r,i,{id:a}),u=l.firstChild||l.appendChild(this.create("rect"));return u.setAttribute("x",o.left),u.setAttribute("y",o.top),u.setAttribute("width",o.width),u.setAttribute("height",o.height),l.parentNode||s.appendChild(l),s.parentNode||t.appendChild(s),{g:s,next:l.nextSibling}},e.SvgScene.getSortedChildScenes=function(t,e){var n=t[e].children;return t.mark._zOrderChildCount&&(n=n.slice(0),n.sort(function(t,e){var n=t.mark._zOrder-e.mark._zOrder;return 0===n&&(n=t.childIndex-e.childIndex),n})),n},e.SvgScene.fill=function(t,e,n){var r=e[n],i=r.fillStyle;return(i.opacity||"all"==r.events)&&(this.addFillStyleDefinition(e,i),t=this.expect(t,"rect",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height,fill:i.color,"fill-opacity":i.opacity,stroke:null}),t=this.append(t,e,n)),t},e.SvgScene.stroke=function(t,e,n){var r=e[n],i=r.strokeStyle;return(i.opacity||"all"==r.events)&&(t=this.expect(t,"rect",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":"all"==r.events?"stroke":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:null,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":r.lineWidth/this.scale,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),t=this.append(t,e,n)),t},e.SvgScene.minRuleLineWidth=1,e.SvgScene.rule=function(t){for(var e=t.$g.firstChild,n=0;n<t.length;n++){var r=t[n];if(r.visible){var i=r.strokeStyle;if(i.opacity){var o=r.lineWidth;o=o<1e-10?0:Math.max(this.minRuleLineWidth,o/this.scale),e=this.expect(e,"line",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x1:r.left,y1:r.top,x2:r.left+r.width,y2:r.top+r.height,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":o,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(e,r.svg),r.css&&this.setStyle(e,r.css),e=this.append(e,t,n)}}}return e},e.SvgScene.wedge=function(t){for(var e=t.$g.firstChild,n=0;n<t.length;n++){var r=t[n];if(r.visible){var i=r.fillStyle,o=r.strokeStyle;if(i.opacity||o.opacity){var a,s=r.innerRadius,l=r.outerRadius,u=Math.abs(r.angle);if(u>=2*Math.PI)a=s?"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+" 0 1,1 0,"+l+"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":"M0,"+l+"A"+l+","+l+" 0 1,1 0,"+-l+"A"+l+","+l+" 0 1,1 0,"+l+"Z";else{var c=Math.min(r.startAngle,r.endAngle),h=Math.max(r.startAngle,r.endAngle),d=Math.cos(c),f=Math.cos(h),p=Math.sin(c),m=Math.sin(h);a=s?"M"+l*d+","+l*p+"A"+l+","+l+" 0 "+(u<Math.PI?"0":"1")+",1 "+l*f+","+l*m+"L"+s*f+","+s*m+"A"+s+","+s+" 0 "+(u<Math.PI?"0":"1")+",0 "+s*d+","+s*p+"Z":"M"+l*d+","+l*p+"A"+l+","+l+" 0 "+(u<Math.PI?"0":"1")+",1 "+l*f+","+l*m+"L0,0Z"}this.addFillStyleDefinition(t,i),this.addFillStyleDefinition(t,o),e=this.expect(e,"path",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,transform:"translate("+r.left+","+r.top+")",d:a,fill:i.color,"fill-rule":"evenodd","fill-opacity":i.opacity||null,stroke:o.color,"stroke-opacity":o.opacity||null,"stroke-width":o.opacity?r.lineWidth/this.scale:null,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-linecap":r.lineCap,"stroke-dasharray":o.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(e,r.svg),r.css&&this.setStyle(e,r.css),e=this.append(e,t,n)}}}return e},e.Mark=function(){this.$properties=[],this.$propertiesMap={},this.$handlers={}},e.Mark.prototype.properties={},e.Mark.cast={},e.Mark.prototype.property=function(t,n){return this.hasOwnProperty("properties")||(this.properties=e.extend(this.properties)),this.properties[t]=!0,e.Mark.prototype.propertyMethod(t,!1,e.Mark.cast[t]=n),this},e.Mark.prototype.localProperty=function(t,n){this.hasOwnProperty("properties")||(this.properties=e.extend(this.properties)),this.properties[t]=!0;var r=e.Mark.cast[t];return n&&(e.Mark.cast[t]=r=n),this.propertyMethod(t,!1,r),this},e.Mark.prototype.def=function(t,e){return this.propertyMethod(t,!0),this[t](arguments.length>1?e:null)},e.Mark.prototype.propertyMethod=function(t,n,r){r||(r=e.Mark.cast[t]),this[t]=function(i,o){if(n&&this.scene){var a=this.scene.defs;if(arguments.length)return a[t]={id:null==i?0:e.id(),value:null!=i&&r?r(i):i},this;var s=a[t];return s?s.value:null}if(arguments.length)return this.setPropertyValue(t,i,n,r,!1,o),this;var l=this.instance();return e.propBuildMark===this&&1!==e.propBuilt[t]?(e.propBuilt[t]=1,l[t]=this.evalProperty(this.binds.properties[t])):l[t]}},e.Mark.funPropertyCaller=function(t,n){function r(){var e=t.apply(this,i);return null!=e?n(e):e}var i=e.Mark.stack;return r},e.Mark.prototype.setPropertyValue=function(t,n,r,i,o,a){var s=!r<<1|"function"==typeof n;1&s&&i?n=e.Mark.funPropertyCaller(n,i):null!=n&&i&&(n=i(n));var l=this.$propertiesMap,u=this.$properties,c={name:t,id:e.id(),value:n,type:s,tag:a,proto:null,root:null,_proto:null};c.root=c;var h=l[t];if(l[t]=c,h)for(var d=0,f=u.length;d<f;d++)if(u[d]===h){u.splice(d,1);break}return u.push(c),o&&h&&3===s&&(c.proto=h,c.root=h.root),c},e.Mark.prototype.intercept=function(t,n,r){return this.setPropertyValue(t,n,!1,e.get(r,"noCast")?null:e.Mark.cast[t],!0,e.get(r,"tag")),this},e.Mark.prototype.propertyValue=function(t,e){var n=this.$propertiesMap[t];if(n)return n.value;if(e){if(this.proto){var r=this.proto._propertyValueRecursive(t);if(void 0!==r)return r}return this.defaults._propertyValueRecursive(t)}},e.Mark.prototype._propertyValueRecursive=function(t){var e=this.$propertiesMap[t];return e?e.value:this.proto?this.proto._propertyValueRecursive(t):void 0},e.Mark.stack=[],e.Mark.prototype.property("data").property("visible",Boolean).property("css",Object).property("svg",Object).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",e.stringLowerCase).property("id",String),e.Mark.prototype.childIndex=-1,e.Mark.prototype.index=-1,e.Mark.prototype.scale=1,e.Mark.prototype._zOrder=0,e.Mark.prototype.defaults=(new e.Mark).data(function(t){return[t]}).visible(!0).antialias(!0).events("painted"),e.Mark.prototype.extend=function(t){return this.proto=t,this.target=t.target,this},e.Mark.prototype.add=function(t){return this.parent.add(t).extend(this)},e.Mark.prototype.zOrder=function(t){if(!arguments.length)return this._zOrder;if(t=+t||0,this._zOrder!==t){var e=this.parent;e&&0!==this._zOrder&&e._zOrderChildCount--,this._zOrder=t,e&&0!==this._zOrder&&e._zOrderChildCount++}return this},e.Mark.prototype.anchor=function(t){return new e.Anchor(this).name(t||"center").data(function(){return this.scene.target.map(function(t){return t.data})}).visible(function(){return this.scene.target[this.index].visible}).id(function(){return this.scene.target[this.index].id}).left(function(){var t=this.scene.target[this.index],e=t.width||0;switch(this.name()){case"bottom":case"top":case"center":return t.left+e/2;case"left":return null}return t.left+e}).top(function(){var t=this.scene.target[this.index],e=t.height||0;switch(this.name()){case"left":case"right":case"center":return t.top+e/2;case"top":return null}return t.top+e}).right(function(){var t=this.scene.target[this.index];return"left"==this.name()?t.right+(t.width||0):null}).bottom(function(){var t=this.scene.target[this.index];return"top"==this.name()?t.bottom+(t.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})},e.Mark.prototype.anchorTarget=function(){return this.target},e.Mark.prototype.margin=function(t){return this.left(t).right(t).top(t).bottom(t)},e.Mark.prototype.instance=function(t){var e=this.scene||this.parent.instance(-1).children[this.childIndex],n=null==t||this.hasOwnProperty("index")?this.index:t;return e[n<0?e.length-1:n]},e.Mark.prototype.instances=function(t){for(var n,r=this,i=[];!(n=r.scene);)i.push({index:t.parentIndex,childIndex:r.childIndex}),t=t.parent,r=r.parent;for(var o=i.length;o--;){var a=i[o];n=n[a.index].children[a.childIndex]}if(this.hasOwnProperty("index")){var s=e.extend(n[this.index]);return s.right=s.top=s.left=s.bottom=0,[s]}return n},e.Mark.prototype.first=function(){return this.scene[0]},e.Mark.prototype.last=function(){return this.scene[this.scene.length-1]},e.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]},e.Mark.prototype.cousin=function(){var t=this.parent,e=t&&t.sibling();return e&&e.children?e.children[this.childIndex][this.index]:null},e.Mark.prototype._renderId=0,e.Mark.prototype.renderId=function(){return this.root._renderId},e.Mark.prototype.render=function(){var t=this.root;!this.parent||t.scene?(t._renderId++,this.renderCore()):t.render()},e.Mark.prototype.renderCore=function(){function t(t,r,o){if(t.scale=o,r<l){var a=r>=i.length;if(a&&i.unshift(null),t.hasOwnProperty("index"))n(t,r,o,a);else{for(var s=0,u=t.scene.length;s<u;s++)t.index=s,n(t,r,o,a);delete t.index}a&&i.shift()}else t.build(),e.Scene.scale=o,e.Scene.updateAll(t.scene);delete t.scale}function n(e,n,r,o){var s,l=e.scene[e.index];if(l.visible){var u=e.children,c=l.children,h=a[n],d=u[h];for(d.scene||h++,s=0;s<h;s++)u[s].scene=c[s];for(o&&(i[0]=l.data),t(d,n+1,r*l.transform.k),s=0;s<h;s++)u[s].scene=void 0}}for(var r=this.parent,i=e.Mark.stack,o=i.length,a=[],s=this;s.parent;s=s.parent)a.unshift(s.childIndex);var l=a.length;for(this.bind();r&&!r.hasOwnProperty("index");)r=r.parent;try{this.context(r?r.scene:void 0,r?r.index:-1,function(){t(this.root,0,1)})}catch(t){throw i.length>o&&(i.length=o),t}},e.Mark.prototype.bind=function(){function t(t){do{for(var e=t.$properties,s=e.length;s--;){var l=e[s],u=l.name,c=r[u];if(c){var h=i[u];3===h.type&&(h._proto=l,h=i[u]=l.root,h._proto=null)}else switch(r[u]=l,i[u]=l.root,l.root._proto=null,u){case"data":n=l;break;case"visible":case"id":o.push(l);break;default:a[l.type].push(l)}}}while(t=t.proto)}var n,r={},i={},o=[],a=[[],[],[],[]];t(this),t(this.defaults);var s=a[0],l=a[1].reverse(),u=a[2];a[3].reverse();var c=this;do{for(var h in c.properties)h in r||u.push(r[h]={name:h,type:2,value:null})}while(c=c.proto);var d;if(s.length||l.length){d=s.concat(l);for(var f=0,p=d.length;f<p;f++)this.propertyMethod(d[f].name,!0)}else d=[];this.binds={properties:r,data:n,defs:d,required:o,optional:e.blend(a)}},e.Mark.prototype.build=function(){var t=e.Mark.stack,n=this.scene;if(!n){n=this.scene=[],n.mark=this,n.type=this.type,n.childIndex=this.childIndex;var r=this.parent;r&&(n.parent=r.scene,n.parentIndex=r.index)}this.target&&(n.target=this.target.instances(n));var i=this.binds.defs;if(i.length)for(var o=n.defs||(n.defs={}),a=0,s=i.length;a<s;a++){var l=i[a],u=o[l.name];(!u||l.id>u.id)&&(o[l.name]={id:0,value:1&l.type?l.value.apply(this,t):l.value})}var c=this.evalProperty(this.binds.data),h=c.length;if(n.length=h,h){var d=e.Mark.prototype;t.unshift(null);var f=e.propBuildMark,p=e.propBuilt;e.propBuildMark=this;try{for(var a=0;a<h;a++){d.index=this.index=a,e.propBuilt={};var m=n[a];m?m._state&&delete m._state:m=n[a]={},m.data=t[0]=c[a],this.preBuildInstance(m),this.buildInstance(m)}}finally{d.index=-1,delete this.index,t.shift(),e.propBuildMark=f,e.propBuilt=p}}return this},e.Mark.prototype.instanceState=function(t){return t||(t=this.instance()),t?t._state||(t._state={}):null},e.Mark.prototype.preBuildInstance=function(t){},e.Mark.prototype.buildInstance=function(t){this.buildProperties(t,this.binds.required),t.visible&&(this.buildProperties(t,this.binds.optional),this.buildImplied(t))},function(){var t,n=e.Mark.stack,r=[function(t){return this.scene.defs[t.name].value},null,function(t){return t.value},function(e){return t=e.proto||e._proto,e.value.apply(this,n)}];r[1]=r[0],e.Mark.prototype.buildProperties=function(n,i){var o=e.propBuilt,a=!o;a&&(e.propBuildMark=this,e.propBuilt=o={});for(var s=t,l=0,u=i.length;l<u;l++){var c=i[l],h=c.name;h in o||(o[h]=1,n[h]=r[c.type].call(this,c))}t=s,a&&(e.propBuildMark=e.propBuilt=null)},e.Mark.prototype.evalProperty=function(e){var n=t,i=r[e.type].call(this,e);return t=n,i},e.Mark.prototype.evalInPropertyContext=function(e,r){var i=t;t=r;var o=e.apply(this,n);return t=i,o},e.Mark.prototype.delegate=function(e,n){if(t&&(!n||t.tag===n)){var r=this.evalProperty(t);if(void 0!==r)return r}return e},e.Mark.prototype.delegateExcept=function(e,n){if(t&&(!n||t.tag!==n)){var r=this.evalProperty(t);if(void 0!==r)return r}return e},e.Mark.prototype.hasDelegate=function(e){return!(!t||e&&t.tag!==e)}}(),e.Mark.prototype.buildImplied=function(t){var n,r,i=t.left,o=t.right,a=t.top,s=t.bottom,l=this.properties,u=l.width?t.width:0,c=l.height?t.height:0;if(null==u||null==o||null==i){n=this.parent&&this.parent.instance(),r=!0;var h=n?n.width:u+i+o;null==u?u=h-(o=o||0)-(i=i||0):null==o?null==i?i=o=(h-u)/2:o=h-u-i:i=h-u-o}if(null==c||null==s||null==a){r||(n=this.parent&&this.parent.instance())
;var d=n?n.height:c+a+s;null==c?c=d-(a=a||0)-(s=s||0):null==s?s=null==a?a=(d-c)/2:d-c-a:a=d-c-s}t.left=i,t.right=o,t.top=a,t.bottom=s,l.width&&(t.width=u),l.height&&(t.height=c),l.textStyle&&!t.textStyle&&(t.textStyle=e.FillStyle.transparent),l.fillStyle&&!t.fillStyle&&(t.fillStyle=e.FillStyle.transparent),l.strokeStyle&&!t.strokeStyle&&(t.strokeStyle=e.FillStyle.transparent)},e.Mark.prototype.mouse=function(){var t=this.root.canvas(),n=e.event,r=n&&n.pageX||0,i=n&&n.pageY||0,o=e.elementOffset(t);if(o){var a=e.cssStyle(t);r-=o.left+parseFloat(a("padding-left")||0),i-=o.top+parseFloat(a("padding-top")||0)}var s=e.Transform.identity,l=this.properties.transform?this:this.parent,u=[];do{u.push(l)}while(l=l.parent);for(;l=u.pop();){var c=l.instance();s=s.translate(c.left,c.top).times(c.transform)}return s=s.invert(),e.vector(r*s.k+s.x,i*s.k+s.y)},e.Mark.prototype.event=function(t,n){n=e.functor(n);var r=this.$handlers[t];return r?r instanceof Array?r.push(n):r=[r,n]:r=n,this.$hasHandlers=!0,this.$handlers[t]=r,this},e.Mark.prototype.context=function(t,n,r){function i(t,n){if(e.Mark.scene=t,a.index=n,t){var r,i=t.mark,o=i,l=[];do{l.push(o),s.push(t[n].data),o.index=n,o.scene=t,(o=o.parent)&&(n=t.parentIndex,t=t.parent)}while(o);var u=1;if((r=l.length-1)>0)do{o=l[r--],o.scale=u,u*=o.scene[o.index].transform.k}while(r);i.scale=u;var c,h=i.children;if(h&&(c=h.length)>0){var d=i.scene[i.index];u*=d.transform.k;var f=d.children;for(r=c;r--;)o=h[r],o.scene=f[r],o.scale=u}}}function o(t){if(t){var e,n=t.mark,r=n.children;if(r)for(var i=r.length;i--;)e=r[i],e.scene=void 0,e.scale=1;e=n;var o,a=0;do{a++,delete e.index,(o=e.parent)&&(e.scene=void 0,e.scale=1)}while(e=o);a&&(s.length-=a)}}var a=e.Mark.prototype,s=e.Mark.stack,l=e.Mark.scene,u=a.index;if(t&&t===l&&n===u)try{r.apply(this,s)}catch(t){throw e.error(t),t}finally{e.Mark.scene=l,a.index=u}else{o(l),i(t,n);try{r.apply(this,s)}catch(t){throw e.error(t),t}finally{o(t),i(l,u)}}},e.Mark.prototype.getEventHandler=function(t,e,n,r){var i=this.$handlers[t];return i?[i,e,n,r]:this.getParentEventHandler(t,e,n,r)},e.Mark.prototype.getParentEventHandler=function(t,e,n,r){var i=e.parent;if(i)return i.mark.getEventHandler(t,i,e.parentIndex,r)},e.Mark.dispatch=function(t,e,n,r){var i=e.mark.root;if(i.$transition)return!0;var o,a=i.$interceptors&&i.$interceptors[t];if(a)for(var s=0,l=a.length;s<l&&!(o=a[s](t,r));s++)if(!1===o)return!0;return!(!o&&!(o=e.mark.getEventHandler(t,e,n,r)))&&this.handle.apply(this,o)},e.Mark.handle=function(t,n,r,i){var o=n.mark;return o.context(n,r,function(){var n,r,a,s=e.Mark.stack.concat(i);if(t instanceof Array){var l;for(n=0,r=t.length;n<r;n++)(a=t[n].apply(o,s))&&a.render&&(l||(l=[])).push(a);if(l)for(n=0,r=l.length;n<r;n++)l[n].render()}else(a=t.apply(o,s))&&a.render&&a.render()}),!0},e.Mark.prototype.addEventInterceptor=function(t,e,n){var r=this.root;if(r){var i=r.$interceptors||(r.$interceptors={}),o=i[t]||(i[t]=[]);n?o.unshift(e):o.push(e)}},e.Mark.prototype.eachInstance=function(t,n){function r(e,i,a){var l=e.length;if(l>0){var u;i===s||(u=o[i]);for(var c=0;c<l;c++){var h=e[c];if(h.visible)if(i===s)t.call(n,e,c,a);else{var d=h.children[u];if(d){var f=a.times(h.transform).translate(h.left,h.top);r(d,i+1,f)}}}}}for(var i=this,o=[];i.parent;)o.unshift(i.childIndex),i=i.parent;var a=i.scene;if(a){var s=o.length;r(a,0,e.Transform.identity)}},e.Mark.prototype.toScreenTransform=function(){var t=e.Transform.identity;this instanceof e.Panel&&(t=t.translate(this.left(),this.top()).times(this.transform()));var n=this.parent;if(n)do{t=t.translate(n.left(),n.top()).times(n.transform())}while(n=n.parent);return t},e.Mark.prototype.transition=function(){return new e.Transition(this)},e.Mark.prototype.on=function(t){return this["$"+t]=new e.Transient(this)},e.Mark.prototype.getShape=function(t,e,n){var r=t[e];if(!r.visible)return null;null==n&&(n=0);var i="_shape_inset_"+n;return r[i]||(r[i]=this.getShapeCore(t,e,n))},e.Mark.prototype.getShapeCore=function(t,n,r){var i=t[n],o=i.left,a=i.top,s=i.width,l=i.height;if(r>0&&r<=1){var u=r*s,c=r*l;o+=u,a+=c,s-=2*u,l-=2*c}return new e.Shape.Rect(o,a,s,l)},e.Mark.prototype.pointingRadiusMax=function(t){return arguments.length?(t=+t,this._pointingRadiusMax=isNaN(t)||t<0?0:t,this):this._pointingRadiusMax},e.Mark.prototype._pointingRadiusMax=1/0,e.Anchor=function(t){e.Mark.call(this),this.target=t,this.parent=t.parent},e.Anchor.prototype=e.extend(e.Mark).property("name",String),e.Anchor.prototype.extend=function(t){return this.proto=t,this},e.Area=function(){e.Mark.call(this)},e.Area.castSegmented=function(t){if(!t)return"";switch(t=String(t).toLowerCase()){case"smart":case"full":break;default:t="full"}return t},e.Area.prototype=e.extend(e.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("lineJoin",e.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase).property("strokeStyle",e.fillStyle).property("fillStyle",e.fillStyle).property("segmented",e.Area.castSegmented).property("interpolate",e.stringLowerCase).property("tension",Number),e.Area.prototype.type="area",e.Area.prototype.defaults=(new e.Area).extend(e.Mark.prototype.defaults).lineWidth(1.5).fillStyle(e.Colors.category20().by(e.parent)).interpolate("linear").tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),e.Area.prototype.buildImplied=function(t){null==t.height&&(t.height=0),null==t.width&&(t.width=0),e.Mark.prototype.buildImplied.call(this,t)},e.Area.fixed={lineWidth:1,lineJoin:1,strokeMiterLimit:1,lineCap:1,strokeStyle:1,strokeDasharray:1,fillStyle:1,segmented:1,interpolate:1,tension:1},e.Area.prototype.bind=function(){e.Mark.prototype.bind.call(this);for(var t=this.binds,n=t.required,r=t.optional,i=0,o=r.length;i<o;i++){var a=r[i];a.fixed=a.name in e.Area.fixed,"segmented"==a.name&&(n.push(a),r.splice(i,1),i--,o--)}this.binds.$required=n,this.binds.$optional=r},e.Area.prototype.buildInstance=function(t){function n(t){return!t.fixed||(i.push(t),!1)}var r=this.binds;if(this.index){var i=r.fixed;i||(i=r.fixed=[],r.required=r.required.filter(n),this.scene[0].segmented||(r.optional=r.optional.filter(n)));var o=i.length;if(o)for(var a=this.scene[0],s=0;s<o;s++){var l=i[s].name;t[l]=a[l]}}else r.required=r.$required,r.optional=r.$optional,r.fixed=null;e.Mark.prototype.buildInstance.call(this,t)},e.Area.prototype.anchor=function(t){return e.Mark.prototype.anchor.call(this,t).interpolate(function(){return this.scene.target[this.index].interpolate}).eccentricity(function(){return this.scene.target[this.index].eccentricity}).tension(function(){return this.scene.target[this.index].tension})},e.Area.prototype.getEventHandler=function(t,n,r,i){var o=n[r];if(1!==e.Scene.mousePositionEventSet[t]||o.segmented&&"smart"!==o.segmented)return e.Mark.prototype.getEventHandler.call(this,t,n,r,i);var a,s="mousemove"===t?this.$handlers.mouseover:null,l=this.$handlers[t],u=l||s;return u&&(a=this.getNearestInstanceToMouse(n,r),s&&!this.filterMouseMove(n,a)&&(s=null,u=l)),u?(l&&s&&(u=[].concat(l,s)),[u,n,a,i]):this.getParentEventHandler(t,n,r,i)},e.Area.prototype.filterMouseMove=function(t,e){var n=this._mouseOverScene;if(!n||n!==t||this._mouseOverIndex!==e)return this._mouseOverScene=t,this._mouseOverIndex=e,!0},e.Area.prototype.getNearestInstanceToMouse=function(t,e){for(var n=this.mouse(),r=1/0,i=null,o=e,a=t.length;o<a;o++){var s=this.getShape(t,o);if(s){if(s.containsPoint(n))return o;var l=s.distance2(n).dist2;l<r&&(r=l,i=o)}}return null!=i?i:e},e.Area.prototype.getShapeCore=function(t,n){var r=t[n],i=r.width||0,o=r.height||0,a=r.left,s=r.top,l=n+1<t.length?t[n+1]:null;if(!l||!l.visible)return new e.Shape.Line(a,s,a+i,s+o);var u=l.left,c=l.top,h=l.height||0,d=l.width||0;return new e.Shape.Polygon([new e.Vector(a,s),new e.Vector(u,c),new e.Vector(u+d,c+h),new e.Vector(a+i,s+o)])},e.Bar=function(){e.Mark.call(this)},e.Bar.prototype=e.extend(e.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("fillStyle",e.fillStyle).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase),e.Bar.prototype.type="bar",e.Bar.prototype.defaults=(new e.Bar).extend(e.Mark.prototype.defaults).lineWidth(1.5).fillStyle(e.Colors.category20().by(e.parent)).lineCap("butt").strokeDasharray("none"),e.Dot=function(){e.Mark.call(this)},e.Dot.prototype=e.extend(e.Mark).property("shape",e.stringLowerCase).property("shapeAngle",Number).property("shapeRadius",Number).property("shapeSize",Number).property("aspectRatio",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase).property("fillStyle",e.fillStyle),e.Dot.prototype.type="dot",e.Dot.prototype.defaults=(new e.Dot).extend(e.Mark.prototype.defaults).shape("circle").aspectRatio(1).lineWidth(1.5).strokeStyle(e.Colors.category10().by(e.parent)).lineCap("butt").strokeDasharray("none"),e.Dot.prototype.anchor=function(t){return e.Mark.prototype.anchor.call(this,t).left(function(){var t=this.scene.target[this.index];switch(this.name()){case"bottom":case"top":case"center":return t.left;case"left":return null}return t.left+t._width/2}).right(function(){var t=this.scene.target[this.index];return"left"==this.name()?t.right+t._width/2:null}).top(function(){var t=this.scene.target[this.index];switch(this.name()){case"left":case"right":case"center":return t.top;case"top":return null}return t.top+t._height/2}).bottom(function(){var t=this.scene.target[this.index];return"top"==this.name()?t.bottom+t._height/2:null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})},e.Dot.prototype.buildImplied=function(t){var n=t.shapeRadius,r=t.shapeSize,i=t.aspectRatio||1;null==n?null==r?(r=t.shapeSize=20.25,n=t.shapeRadius=4.5):n=t.shapeRadius=Math.sqrt(r):null==r&&(r=t.shapeSize=n*n);var o,a;1===i||i<0?o=a=2*n:(o=2*n/Math.sqrt(i),a=i*o),t._height=o,t._width=a,e.Mark.prototype.buildImplied.call(this,t)},e.Dot.prototype.width=function(){return this.instance()._width},e.Dot.prototype.height=function(){return this.instance()._height},e.Dot.prototype.getShapeCore=function(t,n){var r=t[n],i=r._width,o=r._height,a=r.left,s=r.top;switch(r.shape){case"diamond":i*=Math.SQRT2,o*=Math.SQRT2;case"square":case"cross":return new e.Shape.Rect(a-o/2,s-i/2,o,i)}return new e.Shape.Circle(a,s,r.shapeRadius)},e.Label=function(){e.Mark.call(this)},e.Label.prototype=e.extend(e.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",e.color).property("textAlign",e.stringLowerCase).property("textBaseline",e.stringLowerCase).property("textMargin",Number).property("textDecoration",String).property("textShadow",String),e.Label.prototype.type="label",e.Label.prototype.defaults=(new e.Label).extend(e.Mark.prototype.defaults).events("none").text(e.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3),e.Label.prototype.getShapeCore=function(t,n,r){var i=t[n],o=e.Text.measure(i.text,i.font),a=i.left,s=i.top,l=o.width,u=o.height;if(r>0&&r<=1){var c=r*l,h=r*u;a+=c,s+=h,l-=2*c,u-=2*h}return e.Label.getPolygon(l,u,i.textAlign,i.textBaseline,i.textAngle,i.textMargin).apply(e.Transform.identity.translate(a,s))},e.Label.getPolygon=function(t,n,r,i,o,a){var s,l;switch(i){case"middle":l=n/2;break;case"top":l=a+n;break;case"bottom":l=-a}switch(r){case"right":s=-a-t;break;case"center":s=-t/2;break;case"left":s=a}var u=new e.Vector(s,l),c=u.plus(t,0),h=c.plus(0,-n),d=u.plus(0,-n);return 0!==o&&(u=u.rotate(o),c=c.rotate(o),d=d.rotate(o),h=h.rotate(o)),new e.Shape.Polygon([u,c,h,d])},e.Line=function(){e.Mark.call(this)},e.Line.prototype=e.extend(e.Mark).property("lineWidth",Number).property("lineJoin",e.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",e.stringLowerCase).property("strokeStyle",e.fillStyle).property("strokeDasharray",e.stringLowerCase).property("fillStyle",e.fillStyle).property("segmented",e.Area.castSegmented).property("interpolate",e.stringLowerCase).property("eccentricity",Number).property("tension",Number),e.Line.prototype.type="line",e.Line.prototype.defaults=(new e.Line).extend(e.Mark.prototype.defaults).lineWidth(1.5).strokeStyle(e.Colors.category10().by(e.parent)).interpolate("linear").eccentricity(0).tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),e.Line.prototype.bind=e.Area.prototype.bind,e.Line.prototype.buildInstance=e.Area.prototype.buildInstance,e.Line.prototype.getEventHandler=e.Area.prototype.getEventHandler,e.Line.prototype.getNearestInstanceToMouse=e.Area.prototype.getNearestInstanceToMouse,e.Line.prototype.filterMouseMove=e.Area.prototype.filterMouseMove,e.Line.prototype.anchor=function(t){return e.Area.prototype.anchor.call(this,t).textAlign(function(t){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(t){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})},e.Line.prototype.getShapeCore=function(t,n){var r=t[n],i=n+1<t.length?t[n+1]:null;return null!=i&&i.visible?new e.Shape.Line(r.left,r.top,i.left,i.top):new e.Shape.Point(r.left,r.top)},e.Rule=function(){e.Mark.call(this)},e.Rule.prototype=e.extend(e.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase),e.Rule.prototype.type="rule",e.Rule.prototype.defaults=(new e.Rule).extend(e.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(!1).lineCap("butt").strokeDasharray("none"),e.Rule.prototype.anchor=e.Line.prototype.anchor,e.Rule.prototype.buildImplied=function(t){var n=t.left,r=t.right;t.top,t.bottom,null!=t.width||null==n&&null==r||null!=r&&null!=n?t.height=0:t.width=0,e.Mark.prototype.buildImplied.call(this,t)},e.Rule.prototype.getShapeCore=function(t,n){var r=t[n];return new e.Shape.Line(r.left,r.top,r.left+r.width,r.top+r.height)},e.Panel=function(){e.Bar.call(this),this.children=[],this.root=this,this.$dom=e.$&&e.$.s},e.Panel.prototype=e.extend(e.Bar).property("transform").property("overflow",e.stringLowerCase).property("canvas",function(t){return"string"==typeof t?document.getElementById(t):t}),e.Panel.prototype.type="panel",e.Panel.prototype.isPointingBarrier=!1,e.Panel.prototype._zOrderChildCount=0,e.Panel.prototype.defaults=(new e.Panel).extend(e.Bar.prototype.defaults).fillStyle(null).overflow("visible"),e.Panel.prototype.anchor=function(t){var n=e.Bar.prototype.anchor.call(this,t);return n.parent=this,n},e.Panel.prototype.add=function(t){var e=new t;return e.parent=this,e.root=this.root,e.childIndex=this.children.length,this.children.push(e),0!==(+e._zOrder||0)&&this._zOrderChildCount++,e},e.Panel.prototype.bind=function(){e.Mark.prototype.bind.call(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].bind()},e.Panel.prototype.buildInstance=function(t){if(e.Bar.prototype.buildInstance.call(this,t),t.visible){var n=this.scale*t.transform.k;e.Mark.prototype.index=-1;for(var r,i=this.children,o=t.children||(t.children=[]),a=0,s=i.length;a<s;a++)r=i[a],r.scene=o[a],r.scale=n,r.build();for(a=s;a--;)r=i[a],o[a]=r.scene,delete r.scene,delete r.scale;o.length=s}},e.Panel.prototype.buildImplied=function(t){this.parent||this._buildRootInstanceImplied(t)?(t.transform||(t.transform=e.Transform.identity),e.Mark.prototype.buildImplied.call(this,t)):t.visible=!1},e.Panel.prototype._buildRootInstanceImplied=function(t){var e=t.canvas;if(e){if(!this._rootInstanceStealCanvas(t,e))return!1;this._rootInstanceInitCanvas(t,e)}else t.canvas=this._rootInstanceGetInlineCanvas(t);return!0},e.Panel.prototype._rootInstanceStealCanvas=function(t,n){var r=n.$panel;if(r!==this){if(r){if(this.$lastCreateId)return!1;r._disposeRootPanel(),this._updateCreateId(n)}n.$panel=this,e.removeChildren(n)}else this._updateCreateId(n);return!0},e.Panel.prototype._registerBoundEvent=function(t,e,n,r){t.removeEventListener&&(this._boundEvents||(this._boundEvents=[])).push([t,e,n,r])},e.Panel.prototype.dispose=function(){var t=this.root,e=t.scene;t._disposeRootPanel();var n=e?t.canvas():null;t.canvas(null),n&&(n.$panel=null),t.binds=null,e&&(e.$defs=null,e.$g=null,t.scene=null)},e.Panel.prototype._disposeRootPanel=function(){var t=this.$transition;t&&t.stop();var e=this._boundEvents;if(e){this._boundEvents=null;for(var n=0,r=e.length;n<r;n++){var i=e[n];i[0].removeEventListener(i[1],i[2],i[3])}}},e.Panel.prototype._rootInstanceInitCanvas=function(t,n){var r,i,o;null==t.width&&(o=e.cssStyle(n),r=parseFloat(o("width")||0),t.width=r-t.left-t.right),null==t.height&&(o||(o=e.cssStyle(n)),i=parseFloat(o("height")||0),t.height=i-t.top-t.bottom),o=null},e.Panel.prototype._rootInstanceGetInlineCanvas=function(t){var e,n=this.$canvas||(this.$canvas=[]);if(!(e=n[this.index]))if(e=n[this.index]=document.createElement("span"),this.$dom)this.$dom.parentNode.insertBefore(e,this.$dom);else{for(var r=document.body;r.lastChild&&r.lastChild.tagName;)r=r.lastChild;r!=document.body&&(r=r.parentNode),r.appendChild(e)}return e},e.Panel.prototype._updateCreateId=function(t){this.$lastCreateId=t.$pvCreateId=(t.$pvCreateId||0)+1},e.Image=function(){e.Bar.call(this)},e.Image.prototype=e.extend(e.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number),e.Image.prototype.type="image",e.Image.prototype.defaults=(new e.Image).extend(e.Bar.prototype.defaults).fillStyle(null),e.Image.prototype.image=function(t){return this.$image=function(){var n=t.apply(this,arguments);return null==n?e.Color.transparent:"string"==typeof n?e.color(n):n},this},e.Image.prototype.bind=function(){e.Bar.prototype.bind.call(this);var t=this.binds,n=this;do{t.image=n.$image}while(!t.image&&(n=n.proto))},e.Image.prototype.buildImplied=function(t){if(e.Bar.prototype.buildImplied.call(this,t),t.visible&&(null==t.imageWidth&&(t.imageWidth=t.width),null==t.imageHeight&&(t.imageHeight=t.height),null==t.url&&this.binds.image)){var n,r=this.$canvas||(this.$canvas=document.createElement("canvas")),i=r.getContext("2d"),o=t.imageWidth,a=t.imageHeight,s=e.Mark.stack;r.width=o,r.height=a,n=(t.image=i.createImageData(o,a)).data,s.unshift(null,null);for(var l=0,u=0;l<a;l++){s[1]=l;for(var c=0;c<o;c++){s[0]=c;var h=this.binds.image.apply(this,s);n[u++]=h.r,n[u++]=h.g,n[u++]=h.b,n[u++]=255*h.a}}s.splice(0,2)}},e.Wedge=function(){e.Mark.call(this)},e.Wedge.prototype=e.extend(e.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",e.fillStyle).property("lineJoin",e.stringLowerCase).property("strokeMiterLimit",Number).property("lineCap",e.stringLowerCase).property("strokeDasharray",e.stringLowerCase).property("fillStyle",e.fillStyle),e.Wedge.prototype.type="wedge",e.Wedge.prototype.defaults=(new e.Wedge).extend(e.Mark.prototype.defaults).startAngle(function(){var t=this.sibling();return t?t.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(e.Colors.category20().by(e.index)).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),e.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2},e.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2},e.Wedge.prototype.anchor=function(t){function n(t){return t.innerRadius||t.angle<2*Math.PI}function r(t){return(t.innerRadius+t.outerRadius)/2}function i(t){return(t.startAngle+t.endAngle)/2}return e.Mark.prototype.anchor.call(this,t).left(function(){var t=this.scene.target[this.index];if(n(t))switch(this.name()){case"outer":return t.left+t.outerRadius*Math.cos(i(t));case"inner":return t.left+t.innerRadius*Math.cos(i(t));case"start":return t.left+r(t)*Math.cos(t.startAngle);case"center":return t.left+r(t)*Math.cos(i(t));case"end":return t.left+r(t)*Math.cos(t.endAngle)}return t.left}).top(function(){var t=this.scene.target[this.index];if(n(t))switch(this.name()){case"outer":return t.top+t.outerRadius*Math.sin(i(t));case"inner":return t.top+t.innerRadius*Math.sin(i(t));case"start":return t.top+r(t)*Math.sin(t.startAngle);case"center":return t.top+r(t)*Math.sin(i(t));case"end":return t.top+r(t)*Math.sin(t.endAngle)}return t.top}).textAlign(function(){var t=this.scene.target[this.index];if(n(t))switch(this.name()){case"outer":return e.Wedge.upright(i(t))?"right":"left";case"inner":return e.Wedge.upright(i(t))?"left":"right"}return"center"}).textBaseline(function(){var t=this.scene.target[this.index];if(n(t))switch(this.name()){case"start":return e.Wedge.upright(t.startAngle)?"top":"bottom";case"end":return e.Wedge.upright(t.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var t=this.scene.target[this.index],r=0;if(n(t))switch(this.name()){case"center":case"inner":case"outer":r=i(t);break;case"start":r=t.startAngle;break;case"end":r=t.endAngle}return e.Wedge.upright(r)?r:r+Math.PI})},e.Wedge.upright=function(t){return t%=2*Math.PI,(t=t<0?2*Math.PI+t:t)<Math.PI/2||t>=3*Math.PI/2},e.Wedge.prototype.buildImplied=function(t){null==t.angle?t.angle=t.endAngle-t.startAngle:null==t.endAngle&&(t.endAngle=t.startAngle+t.angle),e.Mark.prototype.buildImplied.call(this,t)},e.Wedge.prototype.getShapeCore=function(t,n){var r=t[n];return new e.Shape.Wedge(r.left,r.top,r.innerRadius,r.outerRadius,r.startAngle,r.angle)},e.Ease=function(){function t(t){return function(e){return 1-t(1-e)}}function n(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function r(t){return function(e){return e<0?0:e>1?1:Math.pow(e,t)}}function i(t){return 1-Math.cos(t*Math.PI/2)}function o(t){return t?Math.pow(2,10*(t-1))-.001:0}function a(t){return-(Math.sqrt(1-t*t)-1)}function s(t,e){var n;return e||(e=.45),!t||t<1?(t=1,n=e/4):n=e/(2*Math.PI)*Math.asin(1/t),function(r){return r<=0||r>=1?r:-t*Math.pow(2,10*--r)*Math.sin((r-n)*(2*Math.PI)/e)}}function l(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function u(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}var c=r(2),h=r(3),d=s(),f=l(),p={linear:e.identity,"quad-in":c,"quad-out":t(c),"quad-in-out":n(c),"quad-out-in":n(t(c)),"cubic-in":h,"cubic-out":t(h),"cubic-in-out":n(h),"cubic-out-in":n(t(h)),"sin-in":i,"sin-out":t(i),"sin-in-out":n(i),"sin-out-in":n(t(i)),"exp-in":o,"exp-out":t(o),"exp-in-out":n(o),"exp-out-in":n(t(o)),"circle-in":a,"circle-out":t(a),"circle-in-out":n(a),"circle-out-in":n(t(a)),"elastic-in":d,"elastic-out":t(d),"elastic-in-out":n(d),"elastic-out-in":n(t(d)),"back-in":f,"back-out":t(f),"back-in-out":n(f),"back-out-in":n(t(f)),"bounce-in":u,"bounce-out":t(u),"bounce-in-out":n(u),"bounce-out-in":n(t(u))};return e.ease=function(t){return p[t]},{reverse:t,reflect:n,linear:function(){return e.identity},sin:function(){return i},exp:function(){return o},circle:function(){return a},elastic:s,back:l,bounce:u,poly:r}}(),e.Transient=function(t){e.Mark.call(this),this.fillStyle(null).strokeStyle(null).textStyle(null),this.on=function(e){return t.on(e)}},e.Transient.prototype=e.extend(e.Mark),function(){function t(t){for(var e={},n=t.length;n--;){var r=t[n],i=r.id;i&&(e[i]=r)}return e}function n(t,n,r,i){var o;if(n in s){var a=e.Scale.interpolator(r[n],i[n]);o=function(t){r[n]=a(t)}}else o=function(t){t>.5&&(r[n]=i[n])};o.next=t.head,t.head=o}function r(t,e,r){for(var i in e)"children"!==i&&e[i]!=r[i]&&n(t,i,e,r);var a=e.children;if(a)for(var s=r.children,l=0,u=a.length;l<u;l++)o(t,a[l],s[l])}function i(t,e,n,r){var i,o=Object.create(t[e]),a=t.mark,s=a.root.scene;r.target&&(i=r.target[r.length])&&(t=Object.create(t),t.target=Object.create(r.target),t.target[e]=i),n||(n=l);var u=n.$properties,c=n.$propertiesMap;return u=a.binds.optional.filter(function(t){return!(t.name in c)}).concat(u),a.context(t,e,function(){this.buildProperties(o,u),this.buildImplied(o)}),a.root.scene=s,o}function o(e,n,o){for(var a,s,l=n.mark,u=t(n),c=t(o),h=0,d=n.length;h<d;h++)if(a=n[h],s=a.id?c[a.id]:o[h],a.index=h,a.visible){if(!s||!s.visible){var f=i(n,h,l.$exit,o);a.transition=s?2:(o.push(f),1),s=f}r(e,a,s)}for(h=0,d=o.length;h<d;h++)if(s=o[h],(!(a=s.id?u[s.id]:n[h])||!a.visible)&&s.visible){var p=i(o,h,l.$enter,n);a?n[a.index]=p:n.push(p),r(e,p,s)}}function a(t){for(var e=0,n=0;e<t.length;e++){var r=t[e];1!=r.transition&&(t[n++]=r,2==r.transition&&(r.visible=!1),r.children&&r.children.forEach(a))}t.length=n}var s={top:1,left:1,right:1,bottom:1,width:1,height:1,innerRadius:1,outerRadius:1,radius:1,shapeRadius:1,shapeSize:1,startAngle:1,endAngle:1,angle:1,fillStyle:1,strokeStyle:1,lineWidth:1,eccentricity:1,tension:1,textAngle:1,textStyle:1,textMargin:1},l=new e.Transient;e.Transition=function(t){function n(e){var n=t.root.$transition===l;if(n&&(t.root.$transition=null),null!=r&&(clearInterval(r),r=null),n&&h(t.scene),i){var o=i;i=null,o(e)}return e}var r,i,s,l=this,u=e.ease("cubic-in-out"),c=250,h=function(t){s||(s=!0,a(t))};l.ease=function(t){return arguments.length?(u="function"==typeof t?t:e.ease(t),l):u},l.duration=function(t){return arguments.length?(c=Number(t),l):c},l.start=function(a){if(t.parent)throw new Error("Animated partial rendering is not supported.");i=a;var s=t.root;if(s.$transition)try{s.$transition.stop()}catch(t){return n(!1)}var d,f;s.$transition=l,s._renderId++;var p=t.scene;t.scene=null;var m=e.Mark.prototype.index;try{t.bind(),t.build();var g=t.scene;t.scene=p,e.Mark.prototype.index=m,f=Date.now(),d={},o(d,p,g)}catch(t){return e.Mark.prototype.index=m,n(!1)}if(!d.head)return n(!0);var y=function(){var r=Math.max(0,Math.min(1,(Date.now()-f)/c)),i=u(r),o=d.head;do{o(i)}while(o=o.next);1===r?(h(t.scene),e.Scene.updateAll(p),n(!0)):e.Scene.updateAll(p)};r=setInterval(function(){try{y()}catch(t){n(!1)}},24)},l.stop=function(){n(!0)}}}(),e.simulation=function(t){return new e.Simulation(t)},e.Simulation=function(t){for(var e=0;e<t.length;e++)this.particle(t[e])},e.Simulation.prototype.particle=function(t){return t.next=this.particles,isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y),isNaN(t.fx)&&(t.fx=0),isNaN(t.fy)&&(t.fy=0),this.particles=t,this},e.Simulation.prototype.force=function(t){return t.next=this.forces,this.forces=t,this},e.Simulation.prototype.constraint=function(t){return t.next=this.constraints,this.constraints=t,this},e.Simulation.prototype.stabilize=function(t){var n;arguments.length||(t=3);for(var r=0;r<t;r++){var i=new e.Quadtree(this.particles);for(n=this.constraints;n;n=n.next)n.apply(this.particles,i)}for(var o=this.particles;o;o=o.next)o.px=o.x,o.py=o.y;return this},e.Simulation.prototype.step=function(){var t,n,r;for(t=this.particles;t;t=t.next){var i=t.px,o=t.py;t.px=t.x,t.py=t.y,t.x+=t.vx=t.x-i+t.fx,t.y+=t.vy=t.y-o+t.fy}var a=new e.Quadtree(this.particles);for(r=this.constraints;r;r=r.next)r.apply(this.particles,a);for(t=this.particles;t;t=t.next)t.fx=t.fy=0;for(n=this.forces;n;n=n.next)n.apply(this.particles,a)},e.Quadtree=function(t){function n(t,e,n,i,o,a){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf)if(t.p)if(Math.abs(t.p.x-e.x)+Math.abs(t.p.y-e.y)<.01)r(t,e,n,i,o,a);else{var s=t.p;t.p=null,r(t,s,n,i,o,a),r(t,e,n,i,o,a)}else t.p=e;else r(t,e,n,i,o,a)}function r(t,r,i,o,a,s){var l=.5*(i+a),u=.5*(o+s),c=r.x>=l,h=r.y>=u;switch(t.leaf=!1,(h<<1)+c){case 0:t=t.c1||(t.c1=new e.Quadtree.Node);break;case 1:t=t.c2||(t.c2=new e.Quadtree.Node);break;case 2:t=t.c3||(t.c3=new e.Quadtree.Node);break;case 3:t=t.c4||(t.c4=new e.Quadtree.Node)}c?i=l:a=l,h?o=u:s=u,n(t,r,i,o,a,s)}var i,o=Number.POSITIVE_INFINITY,a=o,s=Number.NEGATIVE_INFINITY,l=s;for(i=t;i;i=i.next)i.x<o&&(o=i.x),i.y<a&&(a=i.y),i.x>s&&(s=i.x),i.y>l&&(l=i.y);var u=s-o,c=l-a;for(u>c?l=a+u:s=o+c,this.xMin=o,this.yMin=a,this.xMax=s,this.yMax=l,this.root=new e.Quadtree.Node,i=t;i;i=i.next)n(this.root,i,o,a,s,l)},e.Quadtree.Node=function(){this.leaf=!0,this.c1=null,this.c2=null,this.c3=null,this.c4=null,this.p=null},e.Force={},e.Force.charge=function(t){function e(n){function r(t){e(t),n.cn+=t.cn,i+=t.cn*t.cx,o+=t.cn*t.cy}var i=0,o=0;n.cn=0,n.leaf||(n.c1&&r(n.c1),n.c2&&r(n.c2),n.c3&&r(n.c3),n.c4&&r(n.c4)),n.p&&(n.cn+=t,i+=t*n.p.x,o+=t*n.p.y),n.cx=i/n.cn,n.cy=o/n.cn}function n(e,r,o,l,u,c){var h=e.cx-r.x,d=e.cy-r.y,f=1/Math.sqrt(h*h+d*d);if(e.leaf&&e.p!=r||(u-o)*f<s){if(f<a)return;f>i&&(f=i);var p=e.cn*f*f*f,m=h*p,g=d*p;r.fx+=m,r.fy+=g}else if(!e.leaf){var y=.5*(o+u),v=.5*(l+c);if(e.c1&&n(e.c1,r,o,l,y,v),e.c2&&n(e.c2,r,y,l,u,v),e.c3&&n(e.c3,r,o,v,y,c),e.c4&&n(e.c4,r,y,v,u,c),f<a)return;if(f>i&&(f=i),e.p&&e.p!=r){var p=t*f*f*f,m=h*p,g=d*p;r.fx+=m,r.fy+=g}}}var r=2,i=1/r,o=500,a=1/o,s=.9,l={};return arguments.length||(t=-40),l.constant=function(e){return arguments.length?(t=Number(e),l):t},l.domain=function(t,e){return arguments.length?(r=Number(t),i=1/r,o=Number(e),a=1/o,l):[r,o]},l.theta=function(t){return arguments.length?(s=Number(t),l):s},l.apply=function(t,r){e(r.root);for(var i=t;i;i=i.next)n(r.root,i,r.xMin,r.yMin,r.xMax,r.yMax)},l},e.Force.drag=function(t){var e={};return arguments.length||(t=.1),e.constant=function(n){return arguments.length?(t=n,e):t},e.apply=function(e){if(t)for(var n=e;n;n=n.next)n.fx-=t*n.vx,n.fy-=t*n.vy},e},e.Force.spring=function(t){var e,n,r=.1,i=20,o={};return arguments.length||(t=.1),o.links=function(t){return arguments.length?(e=t,n=t.map(function(t){return 1/Math.sqrt(Math.max(t.sourceNode.linkDegree,t.targetNode.linkDegree))}),o):e},o.constant=function(e){return arguments.length?(t=Number(e),o):t},o.damping=function(t){return arguments.length?(r=Number(t),o):r},o.length=function(t){return arguments.length?(i=Number(t),o):i},o.apply=function(o){for(var a=0;a<e.length;a++){var s=e[a].sourceNode,l=e[a].targetNode,u=s.x-l.x,c=s.y-l.y,h=Math.sqrt(u*u+c*c),d=h?1/h:1,f=t*n[a],p=r*n[a],m=(f*(h-i)+p*(u*(s.vx-l.vx)+c*(s.vy-l.vy))*d)*d,g=-m*(h?u:.01*(.5-Math.random())),y=-m*(h?c:.01*(.5-Math.random()));s.fx+=g,s.fy+=y,l.fx-=g,l.fy-=y}},o},e.Constraint={},e.Constraint.collision=function(t){function e(s,l,u,c,h,d){if(!s.leaf){var f=.5*(u+h),p=.5*(c+d),m=p>i,g=p<a,y=f>r,v=f<o;m&&(s.c1&&y&&e(s.c1,l,u,c,f,p),s.c2&&v&&e(s.c2,l,f,c,h,p)),g&&(s.c3&&y&&e(s.c3,l,u,p,f,d),s.c4&&v&&e(s.c4,l,f,p,h,d))}if(s.p&&s.p!=l){var b=l.x-s.p.x,_=l.y-s.p.y,w=Math.sqrt(b*b+_*_),x=n+t(s.p);if(w<x){var C=(w-x)/w*.5;b*=C,_*=C,l.x-=b,l.y-=_,s.p.x+=b,s.p.y+=_}}}var n,r,i,o,a,s=1,l={};return arguments.length||(n=10),l.repeat=function(t){return arguments.length?(s=Number(t),l):s},l.apply=function(l,u){var c,h,d=-1/0;for(c=l;c;c=c.next)(h=t(c))>d&&(d=h);for(var f=0;f<s;f++)for(c=l;c;c=c.next)h=(n=t(c))+d,r=c.x-h,o=c.x+h,i=c.y-h,a=c.y+h,e(u.root,c,u.xMin,u.yMin,u.xMax,u.yMax)},l},e.Constraint.position=function(t){var e=1,n={};return arguments.length||(t=function(t){return t.fix}),n.alpha=function(t){return arguments.length?(e=Number(t),n):e},n.apply=function(n){for(var r=n;r;r=r.next){var i=t(r);i&&(r.x+=(i.x-r.x)*e,r.y+=(i.y-r.y)*e,r.fx=r.fy=r.vx=r.vy=0)}},n},e.Constraint.bound=function(){var t,e,n={};return n.x=function(e,n){return arguments.length?(t={min:Math.min(e,n),max:Math.max(e,n)},this):t},n.y=function(t,n){return arguments.length?(e={min:Math.min(t,n),max:Math.max(t,n)},this):e},n.apply=function(n){if(t)for(var r=n;r;r=r.next)r.x=r.x<t.min?t.min:r.x>t.max?t.max:r.x;if(e)for(var r=n;r;r=r.next)r.y=r.y<e.min?e.min:r.y>e.max?e.max:r.y},n},e.Layout=function(){e.Panel.call(this)},e.Layout.prototype=e.extend(e.Panel),e.Layout.prototype.property=e.Mark.prototype.localProperty,e.Layout.Network=function(){e.Layout.call(this)
;var t=this;this.$id=e.id(),(this.node=(new e.Mark).data(function(){return t.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(t){return t.x}).top(function(t){return t.y})).parent=this,this.link=(new e.Mark).extend(this.node).data(function(t){return[t.sourceNode,t.targetNode]}).fillStyle(null).lineWidth(function(t,e){return 1.5*e.linkValue}).strokeStyle("rgba(0,0,0,.2)"),this.link.add=function(n){return t.add(e.Panel).data(function(){return t.links()}).add(n).extend(this)},(this.label=(new e.Mark).extend(this.node).textMargin(7).textBaseline("middle").text(function(t){return t.nodeName||t.nodeValue}).textAngle(function(t){var n=t.midAngle;return e.Wedge.upright(n)?n:n+Math.PI}).textAlign(function(t){return e.Wedge.upright(t.midAngle)?"left":"right"})).parent=this},e.Layout.Network.prototype=e.extend(e.Layout).property("nodes",function(t){return t.map(function(t,e){return"object"!=typeof t&&(t={nodeValue:t}),t.index=e,t})}).property("links",function(t){return t.map(function(t){return isNaN(t.linkValue)&&(t.linkValue=isNaN(t.value)?1:t.value),t})}),e.Layout.Network.prototype.reset=function(){return this.$id=e.id(),this},e.Layout.Network.prototype.buildProperties=function(t,n){(t.$id||0)<this.$id&&e.Layout.prototype.buildProperties.call(this,t,n)},e.Layout.Network.prototype.buildImplied=function(t){if(e.Layout.prototype.buildImplied.call(this,t),t.$id>=this.$id)return!0;t.$id=this.$id,t.nodes.forEach(function(t){t.linkDegree=0}),t.links.forEach(function(e){var n=e.linkValue;(e.sourceNode||(e.sourceNode=t.nodes[e.source])).linkDegree+=n,(e.targetNode||(e.targetNode=t.nodes[e.target])).linkDegree+=n})},e.Layout.Hierarchy=function(){e.Layout.Network.call(this),this.link.strokeStyle("#ccc")},e.Layout.Hierarchy.prototype=e.extend(e.Layout.Network),e.Layout.Hierarchy.prototype.buildImplied=function(t){t.links||(t.links=e.Layout.Hierarchy.links.call(this)),e.Layout.Network.prototype.buildImplied.call(this,t)},e.Layout.Hierarchy.links=function(){return this.nodes().filter(function(t){return t.parentNode}).map(function(t){return{sourceNode:t,targetNode:t.parentNode,linkValue:1}})},e.Layout.Hierarchy.NodeLink={buildImplied:function(t){function e(t){return t.parentNode?t.depth*(l-s)+s:0}var n=t.nodes,r=t.orient,i=/^(top|bottom)$/.test(r),o=t.width,a=t.height;if("radial"==r){var s=t.innerRadius,l=t.outerRadius;null==s&&(s=0),null==l&&(l=Math.min(o,a)/2)}for(var u=0;u<n.length;u++){var c=n[u];c.midAngle="radial"==r?function(t){return t.parentNode?2*(t.breadth-.25)*Math.PI:0}(c):i?Math.PI/2:0,c.x=function(t){switch(r){case"left":return t.depth*o;case"right":return o-t.depth*o;case"top":return t.breadth*o;case"bottom":return o-t.breadth*o;case"radial":return o/2+e(t)*Math.cos(t.midAngle)}}(c),c.y=function(t){switch(r){case"left":return t.breadth*a;case"right":return a-t.breadth*a;case"top":return t.depth*a;case"bottom":return a-t.depth*a;case"radial":return a/2+e(t)*Math.sin(t.midAngle)}}(c),c.firstChild&&(c.midAngle+=Math.PI)}}},e.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(t){return t.dx}).height(function(t){return t.dy}).innerRadius(function(t){return t.innerRadius}).outerRadius(function(t){return t.outerRadius}).startAngle(function(t){return t.startAngle}).angle(function(t){return t.angle}),this.label.textAlign("center").left(function(t){return t.x+t.dx/2}).top(function(t){return t.y+t.dy/2}),delete this.link},buildImplied:function(t){function e(t,e){return(t+e)/(1+e)}var n=t.nodes,r=t.orient,i=/^(top|bottom)$/.test(r),o=t.width,a=t.height,s=-n[0].minDepth;if("radial"==r){var l=t.innerRadius,u=t.outerRadius;null==l&&(l=0),l&&(s*=2),null==u&&(u=Math.min(o,a)/2)}for(var c=0;c<n.length;c++){var h=n[c];h.x=function(t){switch(r){case"left":return e(t.minDepth,s)*o;case"right":return(1-e(t.maxDepth,s))*o;case"top":return t.minBreadth*o;case"bottom":return(1-t.maxBreadth)*o;case"radial":return o/2}}(h),h.y=function(t){switch(r){case"left":return t.minBreadth*a;case"right":return(1-t.maxBreadth)*a;case"top":return e(t.minDepth,s)*a;case"bottom":return(1-e(t.maxDepth,s))*a;case"radial":return a/2}}(h),"radial"==r?(h.innerRadius=function(t){return Math.max(0,e(t.minDepth,s/2))*(u-l)+l}(h),h.outerRadius=function(t){return e(t.maxDepth,s/2)*(u-l)+l}(h),h.startAngle=function(t){return 2*(t.parentNode?t.minBreadth-.25:0)*Math.PI}(h),h.angle=function(t){return 2*(t.parentNode?t.maxBreadth-t.minBreadth:1)*Math.PI}(h),h.midAngle=h.startAngle+h.angle/2):h.midAngle=i?-Math.PI/2:0,h.dx=function(t){switch(r){case"left":case"right":return(t.maxDepth-t.minDepth)/(1+s)*o;case"top":case"bottom":return(t.maxBreadth-t.minBreadth)*o;case"radial":return t.parentNode?(t.innerRadius+t.outerRadius)*Math.cos(t.midAngle):0}}(h),h.dy=function(t){switch(r){case"left":case"right":return(t.maxBreadth-t.minBreadth)*a;case"top":case"bottom":return(t.maxDepth-t.minDepth)/(1+s)*a;case"radial":return t.parentNode?(t.innerRadius+t.outerRadius)*Math.sin(t.midAngle):0}}(h)}}},e.Layout.Grid=function(){e.Layout.call(this);var t=this;(this.cell=(new e.Mark).data(function(){return t.scene[t.index].$grid}).width(function(){return t.width()/t.cols()}).height(function(){return t.height()/t.rows()}).left(function(){return this.width()*(this.index%t.cols())}).top(function(){return this.height()*Math.floor(this.index/t.cols())})).parent=this},e.Layout.Grid.prototype=e.extend(e.Layout).property("rows").property("cols"),e.Layout.Grid.prototype.defaults=(new e.Layout.Grid).extend(e.Layout.prototype.defaults).rows(1).cols(1),e.Layout.Grid.prototype.buildImplied=function(t){e.Layout.prototype.buildImplied.call(this,t);var n=t.rows,r=t.cols;"object"==typeof r&&(n=e.transpose(r)),"object"==typeof n?(t.$grid=e.blend(n),t.rows=n.length,t.cols=n[0]?n[0].length:0):t.$grid=e.repeat([t.data],n*r)},e.Layout.Stack=function(){function t(t){return function(){return o[t](this.parent.index,this.index)}}e.Layout.call(this);var n,r=this,i=function(){return null},o={t:i,l:i,r:i,b:i,w:i,h:i},a=r.buildImplied;this.buildImplied=function(t){a.call(this,t);var r,s=t.layers,l=s.length,u=t.orient,c=/^(top|bottom)\b/.test(u),h=this.parent[c?"height":"width"](),d=[],f=[],p=[],m=e.Mark.stack,g={parent:{parent:this}};m.unshift(null),n=[];for(var y=0;y<l;y++){p[y]=[],f[y]=[],g.parent.index=y,m[0]=s[y],n[y]=this.$values.apply(g.parent,m),y||(r=n[y].length),m.unshift(null);for(var v=0;v<r;v++)m[0]=n[y][v],g.index=v,y||(d[v]=this.$x.apply(g,m)),p[y][v]=this.$y.apply(g,m);m.shift()}m.shift();var b;switch(t.order){case"inside-out":for(var _=p.map(function(t){return e.max.index(t)}),w=e.range(l).sort(function(t,e){return _[t]-_[e]}),x=p.map(function(t){return e.sum(t)}),C=0,S=0,k=[],D=[],y=0;y<l;y++){var v=w[y];C<S?(C+=x[v],k.push(v)):(S+=x[v],D.push(v))}b=D.reverse().concat(k);break;case"reverse":b=e.range(l-1,-1,-1);break;default:b=e.range(l)}switch(t.offset){case"silohouette":for(var v=0;v<r;v++){for(var g=0,y=0;y<l;y++)g+=p[y][v];f[b[0]][v]=(h-g)/2}break;case"wiggle":for(var g=0,y=0;y<l;y++)g+=p[y][0];f[b[0]][0]=g=(h-g)/2;for(var v=1;v<r;v++){for(var M=0,N=0,T=d[v]-d[v-1],y=0;y<l;y++)M+=p[y][v];for(var y=0;y<l;y++){for(var A=(p[b[y]][v]-p[b[y]][v-1])/(2*T),P=0;P<y;P++)A+=(p[b[P]][v]-p[b[P]][v-1])/T;N+=A*p[b[y]][v]}f[b[0]][v]=g-=M?N/M*T:0}break;case"expand":for(var v=0;v<r;v++){f[b[0]][v]=0;for(var P=0,y=0;y<l;y++)P+=p[y][v];if(P){P=h/P;for(var y=0;y<l;y++)p[y][v]*=P}else{P=h/l;for(var y=0;y<l;y++)p[y][v]=P}}break;default:for(var v=0;v<r;v++)f[b[0]][v]=0}for(var v=0;v<r;v++)for(var g=f[b[0]][v],y=1;y<l;y++)g+=p[b[y-1]][v],f[b[y]][v]=g;var y=u.indexOf("-"),j=c?"h":"w",O=y<0?c?"l":"b":u.charAt(y+1),I=u.charAt(0);for(var E in o)o[E]=i;o[O]=function(t,e){return d[e]},o[I]=function(t,e){return f[t][e]},o[j]=function(t,e){return p[t][e]}},this.layer=(new e.Mark).data(function(){return n[this.parent.index]}).top(t("t")).left(t("l")).right(t("r")).bottom(t("b")).width(t("w")).height(t("h")),this.layer.add=function(t){return r.add(e.Panel).data(function(){return r.layers()}).add(t).extend(this)}},e.Layout.Stack.prototype=e.extend(e.Layout).property("orient",String).property("offset",String).property("order",String).property("layers"),e.Layout.Stack.prototype.defaults=(new e.Layout.Stack).extend(e.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]),e.Layout.Stack.prototype.$x=e.Layout.Stack.prototype.$y=function(){return 0},e.Layout.Stack.prototype.x=function(t){return this.$x=e.functor(t),this},e.Layout.Stack.prototype.y=function(t){return this.$y=e.functor(t),this},e.Layout.Stack.prototype.$values=e.identity,e.Layout.Stack.prototype.values=function(t){return this.$values=e.functor(t),this},e.Layout.Band=function(){function t(t){return function(){return n[t](this.index,this.parent.index)}}e.Layout.call(this);var n,r,i=this,o=i.buildImplied,a=(new e.Mark).data(function(){return r[this.parent.index]}).top(t("t")).left(t("l")).right(t("r")).bottom(t("b")).width(t("w")).height(t("h")).antialias(t("antialias"));this.buildImplied=function(t){o.call(this,t),n=Object.create(e.Layout.Band.$baseItemProps),r=[];var i=t.layers,a=i.length;if(a>0){var s=t.orient,l=/^(top|bottom)\b/.test(s),u=this.parent[l?"height":"width"](),c=this._readData(i,r,t),h=c.length;if("reverse"===t.bandOrder&&c.reverse(),"reverse"===t.order){r.reverse();for(var d=0;d<h;d++)c[d].items.reverse()}switch(t.layout){case"grouped":this._calcGrouped(c,a,u,t);break;case"stacked":this._calcStacked(c,a,u,t)}for(var f=t.hZero||0,p="stacked"===t.layout,m=0;m<h;m++)for(var g=c[m],y=p?Math.max(0,g.vertiMargin)/2:0,v=0;v<a;v++){var b=g.items[v];b.zero&&(b.h=f,b.y-=y+f/2)}this._bindItemProps(c,n,s,l)}};var s=this.item={end:this,add:function(t){return i.add(e.Panel).data(function(){return i.layers()}).add(t).extend(a)},order:function(t){return i.order(t),this},w:function(t){return i.$iw=e.functor(t),this},h:function(t){return i.$ih=e.functor(t),this},horizontalRatio:function(t){return i.$ihorizRatio=e.functor(t),this},verticalMargin:function(t){return i.$ivertiMargin=e.functor(t),this}},l=this.band={end:this,w:function(t){return i.$bw=e.functor(t),this},x:function(t){return i.$bx=e.functor(t),this},order:function(t){return i.bandOrder(t),this},differentialControl:function(t){return i.$bDiffControl=e.functor(t),this}};this.band.item=s,this.item.band=l},e.Layout.Band.$baseItemProps=function(){var t=function(){return null};return{t:t,l:t,r:t,b:t,w:t,h:t}}(),e.Layout.Band.prototype=e.extend(e.Layout).property("orient",String).property("layout",String).property("layers").property("yZero",Number).property("hZero",Number).property("verticalMode",String).property("horizontalMode",String).property("order",String).property("bandOrder",String),e.Layout.Band.prototype.defaults=(new e.Layout.Band).extend(e.Layout.prototype.defaults).orient("bottom-left").layout("grouped").yZero(0).hZero(1.5).layers([[]]),e.Layout.Band.prototype.$bx=e.Layout.Band.prototype.$bw=e.Layout.Band.prototype.$bDiffControl=e.Layout.Band.prototype.$iw=e.Layout.Band.prototype.$ih=e.Layout.Band.prototype.$ivertiMargin=e.functor(0),e.Layout.Band.prototype.$ihorizRatio=e.functor(.9),e.Layout.Band.prototype.$values=e.identity,e.Layout.Band.prototype.values=function(t){return this.$values=e.functor(t),this},e.Layout.prototype._readData=function(t,n,r){var i,o=t.length,a=[],s=e.Mark.stack,l=r.hZero,u={parent:{parent:this}};s.unshift(null);for(var c=0;c<o;c++){u.parent.index=c,s[0]=t[c];var h=n[c]=this.$values.apply(u.parent,s);c||(i=h.length),s.unshift(null);for(var d=0;d<i;d++){s[0]=h[d],u.index=d;var f=a[d];f||(f=a[d]={horizRatio:this.$ihorizRatio.apply(u,s),vertiMargin:this.$ivertiMargin.apply(u,s),w:this.$bw.apply(u,s),x:this.$bx.apply(u,s),diffControl:this.$bDiffControl?this.$bDiffControl.apply(u,s):0,items:[]});var p=this.$ih.apply(u,s),m=null!=p?Math.abs(p):p;f.items[c]={y:r.yZero||0,x:0,w:this.$iw.apply(u,s),h:m,zero:null!=m&&m<=l,dir:p<0?-1:1}}s.shift()}return s.shift(),a},e.Layout.Band.prototype._normalizeBands=function(t,e,n,r){var i,o=t.length;if("expand"===r.verticalMode)for(var a=0;a<o;a++){i=t[a].items;for(var s=null,l=0,u=0;u<e;u++){var c=i[u];c.dir=1;var h=c.h;null!=h&&(l++,s+=h)}if(l)if(s)for(var d=n/s,u=0;u<e;u++){var h=i[u].h;null!=h&&(i[u].h=h*d,i[u].zero=i[u].h<=r.hZero)}else if(0==s)for(var u=0;u<e;u++)i[u].h=0;else for(var f=n/l,u=0;u<e;u++){var h=i[u].h;null!=h&&(i[u].h=f)}}return i},e.Layout.Band.prototype._calcGrouped=function(t,e,n,r){for(var i=this._normalizeBands(t,e,n,r),o=0,a=t.length;o<a;o++){for(var s=t[o],i=s.items,l=s.w,u=s.horizRatio,c=0,h=0;h<e;h++)c+=i[h].w;if(1===e?u=1:u>0&&u<=1||(u=1),null==l)l=s.w=c/u;else if("expand"===r.horizontalMode){var d=u*l;if(c)for(var f=d/c,h=0;h<e;h++)i[h].w*=f;else for(var p=d/e,h=0;h<e;h++)i[h].w=p;c=d}for(var m=c/u,g=s.x-m/2,y=e>1?(m-c)/(e-1):0,h=0;h<e;h++){var v=i[h];v.x=g,g+=v.w+y,v.dir<0&&(v.y-=v.h)}}},e.Layout.Band.prototype._calcStacked=function(t,e,n,r){for(var i=this._normalizeBands(t,e,n,r),o=r.yZero,a=o,s=0,l=t.length;s<l;s++){var u=t[s],c=u.x,h=u.diffControl,d=h<0,f=Math.max(0,u.vertiMargin);i=u.items;var p=this._layoutItemsOfDir(1,d,i,f,c,a),m=null;if(p.existsOtherDir&&(m=this._layoutItemsOfDir(-1,d,i,f,c,a)),h){if(1===Math.abs(h)){var g=a;a=p.yOffset,m&&(a-=g-m.yOffset)}}else a=o}},e.Layout.Band.prototype._layoutItemsOfDir=function(t,e,n,r,i,o){for(var a=!1,s=r/2,l=e?-t:t,u=e,c=0,h=n.length;c<h;c+=1){var d=n[u?h-c-1:c];if(d.dir===t){var f=d.h||0;l>0?(d.y=o+s,o+=f):(d.y=o-(f-s),o-=f);var p=f-r;d.h=p>0?p:0,d.x=i-d.w/2}else a=!0}return{existsOtherDir:a,yOffset:o}},e.Layout.Band.prototype._bindItemProps=function(t,e,n,r){var i=n.indexOf("-"),o=r?"h":"w",a=r?"w":"h",s=i<0?r?"l":"b":n.charAt(i+1),l=n.charAt(0);e[s]=function(e,n){return t[e].items[n].x},e[l]=function(e,n){return t[e].items[n].y},e[a]=function(e,n){return t[e].items[n].w},e[o]=function(e,n){return t[e].items[n].h||0},e.antialias=function(e,n){return t[e].items[n].zero}},e.Layout.Treemap=function(){e.Layout.Hierarchy.call(this),this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(t){return t.dx}).height(function(t){return t.dy}),this.label.visible(function(t){return!t.firstChild}).left(function(t){return t.x+t.dx/2}).top(function(t){return t.y+t.dy/2}).textAlign("center").textAngle(function(t){return t.dx>t.dy?0:-Math.PI/2}),(this.leaf=(new e.Mark).extend(this.node).fillStyle(null).strokeStyle(null).visible(function(t){return!t.firstChild})).parent=this,delete this.link},e.Layout.Treemap.prototype=e.extend(e.Layout.Hierarchy).property("round",Boolean).property("mode",String).property("order",String),e.Layout.Treemap.prototype.defaults=(new e.Layout.Treemap).extend(e.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending"),e.Layout.Treemap.prototype.$size=function(t){return Number(t.nodeValue)},e.Layout.Treemap.prototype.$padLeft=e.Layout.Treemap.prototype.$padRight=e.Layout.Treemap.prototype.$padBottom=e.Layout.Treemap.prototype.$padTop=function(){return 0},e.Layout.Treemap.prototype.size=function(t){return this.$size=e.functor(t),this},e.Layout.Treemap.prototype.padding=function(t){return t=e.functor(t),this.paddingLeft(t).paddingRight(t).paddingTop(t).paddingBottom(t)},e.Layout.Treemap.prototype.paddingLeft=function(t){return arguments.length?(this.$padLeft=e.functor(t),this):this.$padLeft},e.Layout.Treemap.prototype.paddingRight=function(t){return arguments.length?(this.$padRight=e.functor(t),this):this.$padRight},e.Layout.Treemap.prototype.paddingBottom=function(t){return arguments.length?(this.$padBottom=e.functor(t),this):this.$padBottom},e.Layout.Treemap.prototype.paddingTop=function(t){return arguments.length?(this.$padTop=e.functor(t),this):this.$padTop},e.Layout.Treemap.prototype.buildImplied=function(t){function n(t,e,n,r,i,o,a){for(var s=0,l=0;s<t.length;s++){var u=t[s];n?(u.x=r+l,u.y=i,l+=u.dx=c(o*u.size/e),u.dy=a):(u.x=r,u.y=i+l,u.dx=o,l+=u.dy=c(a*u.size/e))}u&&(n?u.dx+=o-l:u.dy+=a-l)}function r(t,e){for(var n=-1/0,r=1/0,i=0,o=0;o<t.length;o++){var a=t[o].size;a<r&&(r=a),a>n&&(n=a),i+=a}return i*=i,e*=e,Math.max(e*n/i,i/(e*r))}function i(t,i){function o(t){var r=d==g,i=e.sum(t,u),o=g?c(i/g):0;return n(t,i,r,s,l,r?d:o,r?o:f),r?(l+=o,f-=o):(s+=o,d-=o),g=Math.min(d,f),r}var a=t.parentNode,s=t.x,l=t.y,d=t.dx,f=t.dy;if(a&&(s+=a.paddingLeft,l+=a.paddingTop,d+=-a.paddingLeft-a.paddingRight,f+=-a.paddingTop-a.paddingBottom),"squarify"==h){var p=[],m=1/0,g=Math.min(d,f),y=d*f/t.size;if(!(t.size<=0)){t.visitBefore(function(t){t.size*=y});for(var v=t.childNodes.slice();v.length;){var b=v[v.length-1];if(b.size){p.push(b);var y=r(p,g);y<=m?(v.pop(),m=y):(p.pop(),o(p),p.length=0,m=1/0)}else v.pop()}if(o(p))for(var i=0;i<p.length;i++)p[i].dy+=f;else for(var i=0;i<p.length;i++)p[i].dx+=d}}else n(t.childNodes,t.size,"slice"==h||"dice"!=h&&1&i,s,l,d,f)}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var o=this,a=t.nodes,s=a[0],l=e.Mark.stack,u=function(t){return t.size},c=t.round?Math.round:Number,h=t.mode;l.unshift(null);try{s.visitAfter(function(t,n){t.depth=n,t.x=t.y=t.dx=t.dy=0,l[0]=t,t.firstChild?(t.size=e.sum(t.childNodes,u),t.paddingRight=+o.$padRight.apply(o,l)||0,t.paddingLeft=+o.$padLeft.apply(o,l)||0,t.paddingBottom=+o.$padBottom.apply(o,l)||0,t.paddingTop=+o.$padTop.apply(o,l)||0):t.size=o.$size.apply(o,l)})}finally{l.shift()}switch(t.order){case"ascending":s.sort(function(t,e){return t.size-e.size});break;case"descending":s.sort(function(t,e){return e.size-t.size});break;case"reverse":s.reverse()}s.x=0,s.y=0,s.dx=t.width,s.dy=t.height,s.visitBefore(i)}},e.Layout.Tree=function(){e.Layout.Hierarchy.call(this)},e.Layout.Tree.prototype=e.extend(e.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String),e.Layout.Tree.prototype.defaults=(new e.Layout.Tree).extend(e.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top"),e.Layout.Tree.prototype.buildImplied=function(t){function n(t){var e,r,o;if(t.firstChild){e=t.firstChild,r=t.lastChild,o=e;for(var a=e;a;a=a.nextSibling)n(a),o=i(a,o);l(t);var s=.5*(e.prelim+r.prelim);(e=t.previousSibling)?(t.prelim=e.prelim+c(t.depth,!0),t.mod=t.prelim-s):t.prelim=s}else(e=t.previousSibling)&&(t.prelim=e.prelim+c(t.depth,!0))}function r(t,e,n){t.breadth=t.prelim+e,e+=t.mod;for(var i=t.firstChild;i;i=i.nextSibling)r(i,e,n)}function i(t,e){var n=t.previousSibling;if(n){for(var r=t,i=t,l=n,h=t.parentNode.firstChild,d=r.mod,f=i.mod,p=l.mod,m=h.mod,g=a(l),y=o(r);g&&y;){l=g,r=y,h=o(h),i=a(i),i.ancestor=t;var v=l.prelim+p-(r.prelim+d)+c(l.depth,!1);v>0&&(s(u(l,t,e),t,v),d+=v,f+=v),p+=l.mod,d+=r.mod,m+=h.mod,f+=i.mod,g=a(l),y=o(r)}g&&!a(i)&&(i.thread=g,i.mod+=p-f),y&&!o(h)&&(h.thread=y,h.mod+=d-m,e=t)}return e}function o(t){return t.firstChild||t.thread}function a(t){return t.lastChild||t.thread}function s(t,e,n){var r=e.number-t.number;e.change-=n/r,e.shift+=n,t.change+=n/r,e.prelim+=n,e.mod+=n}function l(t){for(var e=0,n=0,r=t.lastChild;r;r=r.previousSibling)r.prelim+=e,r.mod+=e,n+=r.change,e+=r.shift+n}function u(t,e,n){return t.ancestor.parentNode==e.parentNode?t.ancestor:n}function c(t,e){return(e?1:v+1)/("radial"==m?t:1)}function h(t){return"radial"==m?t.breadth/g:0}function d(t){switch(m){case"left":return t.depth;case"right":return b-t.depth;case"top":case"bottom":return t.breadth+b/2;case"radial":return b/2+t.depth*Math.cos(h(t))}}function f(t){switch(m){case"left":case"right":return t.breadth+_/2;case"top":return t.depth;case"bottom":return _-t.depth;case"radial":return _/2+t.depth*Math.sin(h(t))}}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var p=t.nodes,m=t.orient,g=t.depth,y=t.breadth,v=t.group,b=t.width,_=t.height,w=p[0];w.visitAfter(function(t,e){t.ancestor=t,t.prelim=0,t.mod=0,t.change=0,t.shift=0,t.number=t.previousSibling?t.previousSibling.number+1:0,t.depth=e}),n(w),r(w,-w.prelim,0),w.visitAfter(function(t){t.breadth*=y,t.depth*=g,t.midAngle=h(t),t.x=d(t),t.y=f(t),t.firstChild&&(t.midAngle+=Math.PI),delete t.breadth,delete t.depth,delete t.ancestor,delete t.prelim,delete t.mod,delete t.change,delete t.shift,delete t.number,delete t.thread})}},e.Layout.Indent=function(){e.Layout.Hierarchy.call(this),this.link.interpolate("step-after")},e.Layout.Indent.prototype=e.extend(e.Layout.Hierarchy).property("depth",Number).property("breadth",Number),e.Layout.Indent.prototype.defaults=(new e.Layout.Indent).extend(e.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15),e.Layout.Indent.prototype.buildImplied=function(t){function n(t,e,r){t.x=a+r++*o,t.y=s+e++*i,t.midAngle=0;for(var l=t.firstChild;l;l=l.nextSibling)e=n(l,e,r);return e}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var r=t.nodes,i=t.breadth,o=t.depth,a=0,s=0;n(r[0],1,1)}},e.Layout.Pack=function(){e.Layout.Hierarchy.call(this),this.node.shapeRadius(function(t){return t.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)"),this.label.textAlign("center"),delete this.link},e.Layout.Pack.prototype=e.extend(e.Layout.Hierarchy).property("spacing",Number).property("order",String),e.Layout.Pack.prototype.defaults=(new e.Layout.Pack).extend(e.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending"),e.Layout.Pack.prototype.$radius=function(){return 1},e.Layout.Pack.prototype.size=function(t){return this.$radius="function"==typeof t?function(){return Math.sqrt(t.apply(this,arguments))}:(t=Math.sqrt(t),function(){return t}),this},e.Layout.Pack.prototype.buildImplied=function(t){function n(e){for(var i=[],o=e.firstChild;o;o=o.nextSibling)o.firstChild&&(o.radius=n(o)),o.n=o.p=o,i.push(o);switch(t.order){case"ascending":i.sort(function(t,e){return t.radius-e.radius});break;case"descending":i.sort(function(t,e){return e.radius-t.radius});break;case"reverse":i.reverse()}return r(i)}function r(e){function n(t){d=Math.min(t.x-t.radius,d),f=Math.max(t.x+t.radius,f),p=Math.min(t.y-t.radius,p),m=Math.max(t.y+t.radius,m)}function r(t,e){var n=t.n;t.n=e,e.p=t,e.n=n,n.p=e}function o(t,e){t.n=e,e.p=t}function a(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.radius+e.radius;return i*i-n*n-r*r>.001}var s,l,u,c,h,d=1/0,f=-1/0,p=1/0,m=-1/0;if(s=e[0],s.x=-s.radius,s.y=0,n(s),e.length>1&&(l=e[1],l.x=l.radius,l.y=0,n(l),e.length>2)){u=e[2],i(s,l,u),n(u),r(s,u),s.p=u,r(u,l),l=s.n;for(var g=3;g<e.length;g++){i(s,l,u=e[g]);var y=0,v=1,b=1;for(c=l.n;c!=l;c=c.n,v++)if(a(c,u)){y=1;break}if(1==y)for(h=s.p;h!=c.p;h=h.p,b++)if(a(h,u)){b<v&&(y=-1,c=h);break}0==y?(r(s,u),l=u,n(u)):y>0?(o(s,c),l=c,g--):y<0&&(o(c,l),s=c,g--)}}for(var _=(d+f)/2,w=(p+m)/2,x=0,g=0;g<e.length;g++){var C=e[g];C.x-=_,C.y-=w,x=Math.max(x,C.radius+Math.sqrt(C.x*C.x+C.y*C.y))}return x+t.spacing}function i(t,e,n){var r=e.radius+n.radius,i=t.radius+n.radius,o=e.x-t.x,a=e.y-t.y,s=Math.sqrt(o*o+a*a),l=(i*i+s*s-r*r)/(2*i*s),u=Math.acos(l),c=l*i,h=Math.sin(u)*i;o/=s,a/=s,n.x=t.x+c*o+h*a,n.y=t.y+c*a-h*o}function o(t,e,n,r){for(var i=t.firstChild;i;i=i.nextSibling)i.x+=t.x,i.y+=t.y,o(i,e,n,r);t.x=e+r*t.x,t.y=n+r*t.y,t.radius*=r}if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var a=this,s=t.nodes,l=s[0];!function(t){var n=e.Mark.stack;n.unshift(null);for(var r=0,i=t.length;r<i;r++){var o=t[r];o.firstChild||(o.radius=a.$radius.apply(a,(n[0]=o,n)))}n.shift()}(s),l.x=0,l.y=0,l.radius=n(l);var u=this.width(),c=this.height();o(l,u/2,c/2,1/Math.max(2*l.radius/u,2*l.radius/c))}},e.Layout.Force=function(){e.Layout.Network.call(this),this.link.lineWidth(function(t,e){return 1.5*Math.sqrt(e.linkValue)}),this.label.textAlign("center")},e.Layout.Force.prototype=e.extend(e.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number),e.Layout.Force.prototype.defaults=(new e.Layout.Force).extend(e.Layout.Network.prototype.defaults).dragConstant(.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(.9).springConstant(.1).springDamping(.3).springLength(20),e.Layout.Force.prototype.buildImplied=function(t){function n(t){return t.fix?1:t.vx*t.vx+t.vy*t.vy}if(e.Layout.Network.prototype.buildImplied.call(this,t)){var r=t.$force;r&&(r.next=this.binds.$force,this.binds.$force=r)}else{for(var i,o=this,a=t.nodes,s=t.links,l=t.iterations,u=t.width,c=t.height,h=0;h<a.length;h++)i=a[h],isNaN(i.x)&&(i.x=u/2+40*Math.random()-20),isNaN(i.y)&&(i.y=c/2+40*Math.random()-20);var d=e.simulation(a);if(d.force(e.Force.drag(t.dragConstant)),d.force(e.Force.charge(t.chargeConstant).domain(t.chargeMinDistance,t.chargeMaxDistance).theta(t.chargeTheta)),d.force(e.Force.spring(t.springConstant).damping(t.springDamping).length(t.springLength).links(s)),d.constraint(e.Constraint.position()),t.bound&&d.constraint(e.Constraint.bound().x(6,u-6).y(6,c-6)),null==l)d.step(),d.step(),t.$force=this.binds.$force={next:this.binds.$force,nodes:a,min:1e-4*(s.length+1),sim:d},this.$timer||(this.$timer=setInterval(function(){for(var t=!1,r=o.binds.$force;r;r=r.next)e.max(r.nodes,n)>r.min&&(r.sim.step(),t=!0);t&&o.render()},42));else for(var h=0;h<l;h++)d.step()}},e.Layout.Cluster=function(){e.Layout.Hierarchy.call(this);var t,n=this.buildImplied;this.buildImplied=function(e){n.call(this,e),t=/^(top|bottom)$/.test(e.orient)?"step-before":/^(left|right)$/.test(e.orient)?"step-after":"linear"},this.link.interpolate(function(){return t})},e.Layout.Cluster.prototype=e.extend(e.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),e.Layout.Cluster.prototype.defaults=(new e.Layout.Cluster).extend(e.Layout.Hierarchy.prototype.defaults).group(0).orient("top"),e.Layout.Cluster.prototype.buildImplied=function(t){if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var n,r,i=t.nodes[0],o=t.group,a=0,s=.5-o/2,l=void 0;i.visitAfter(function(t){t.firstChild?t.depth=1+e.max(t.childNodes,function(t){return t.depth}):(o&&l!=t.parentNode&&(l=t.parentNode,a+=o),a++,t.depth=0)}),n=1/a,r=1/i.depth;var l=void 0;i.visitAfter(function(t){t.firstChild?t.breadth=e.mean(t.childNodes,function(t){return t.breadth}):(o&&l!=t.parentNode&&(l=t.parentNode,s+=o),t.breadth=n*s++),t.depth=1-t.depth*r}),i.visitAfter(function(t){t.minBreadth=t.firstChild?t.firstChild.minBreadth:t.breadth-n/2,t.maxBreadth=t.firstChild?t.lastChild.maxBreadth:t.breadth+n/2}),i.visitBefore(function(t){t.minDepth=t.parentNode?t.parentNode.maxDepth:0,t.maxDepth=t.parentNode?t.depth+i.depth:t.minDepth+2*i.depth}),i.minDepth=-r,e.Layout.Hierarchy.NodeLink.buildImplied.call(this,t)}},e.Layout.Cluster.Fill=function(){e.Layout.Cluster.call(this),e.Layout.Hierarchy.Fill.constructor.call(this)},e.Layout.Cluster.Fill.prototype=e.extend(e.Layout.Cluster),e.Layout.Cluster.Fill.prototype.buildImplied=function(t){e.Layout.Cluster.prototype.buildImplied.call(this,t)||e.Layout.Hierarchy.Fill.buildImplied.call(this,t)},e.Layout.Partition=function(){e.Layout.Hierarchy.call(this)},e.Layout.Partition.prototype=e.extend(e.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),e.Layout.Partition.prototype.defaults=(new e.Layout.Partition).extend(e.Layout.Hierarchy.prototype.defaults).orient("top"),e.Layout.Partition.prototype.$size=function(){return 1},e.Layout.Partition.prototype.size=function(t){return this.$size=t,this},e.Layout.Partition.prototype.buildImplied=function(t){if(!e.Layout.Hierarchy.prototype.buildImplied.call(this,t)){var n=this,r=t.nodes[0],i=e.Mark.stack,o=0;switch(i.unshift(null),r.visitAfter(function(t,r){r>o&&(o=r),t.size=t.firstChild?e.sum(t.childNodes,function(t){return t.size}):n.$size.apply(n,(i[0]=t,i))}),i.shift(),t.order){case"ascending":r.sort(function(t,e){return t.size-e.size});break;case"descending":r.sort(function(t,e){return e.size-t.size})}r.minBreadth=0,r.breadth=.5,r.maxBreadth=1,r.visitBefore(function(t){for(var e=t.minBreadth,n=t.maxBreadth-e,r=t.firstChild;r;r=r.nextSibling)r.minBreadth=e,e+=r.size/t.size*n,r.maxBreadth=e,r.breadth=(e+r.minBreadth)/2}),r.visitAfter(function(t,e){t.minDepth=(e-1)/o,t.maxDepth=t.depth=e/o}),e.Layout.Hierarchy.NodeLink.buildImplied.call(this,t)}},e.Layout.Partition.Fill=function(){e.Layout.Partition.call(this),e.Layout.Hierarchy.Fill.constructor.call(this)},e.Layout.Partition.Fill.prototype=e.extend(e.Layout.Partition),e.Layout.Partition.Fill.prototype.buildImplied=function(t){e.Layout.Partition.prototype.buildImplied.call(this,t)||e.Layout.Hierarchy.Fill.buildImplied.call(this,t)},e.Layout.Arc=function(){e.Layout.Network.call(this);var t,n,r,i=this.buildImplied;this.buildImplied=function(e){i.call(this,e),n=e.directed,t="radial"==e.orient?"linear":"polar",r="right"==e.orient||"top"==e.orient},this.link.data(function(t){var e=t.sourceNode,i=t.targetNode;return r!=(n||e.breadth<i.breadth)?[e,i]:[i,e]}).interpolate(function(){return t})},e.Layout.Arc.prototype=e.extend(e.Layout.Network).property("orient",String).property("directed",Boolean),e.Layout.Arc.prototype.defaults=(new e.Layout.Arc).extend(e.Layout.Network.prototype.defaults).orient("bottom"),e.Layout.Arc.prototype.sort=function(t){return this.$sort=t,this},e.Layout.Arc.prototype.buildImplied=function(t){function n(t){switch(i){case"top":return-Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return 2*(t-.25)*Math.PI}}if(!e.Layout.Network.prototype.buildImplied.call(this,t)){var r=t.nodes,i=t.orient,o=this.$sort,a=e.range(r.length),s=t.width,l=t.height,u=Math.min(s,l)/2;o&&a.sort(function(t,e){return o(r[t],r[e])});for(var c=0;c<r.length;c++){var h=r[a[c]],d=h.breadth=(c+.5)/r.length;h.x=function(t){switch(i){case"top":case"bottom":return t*s;case"left":return 0;case"right":return s;case"radial":return s/2+u*Math.cos(n(t))}}(d),h.y=function(t){switch(i){case"top":return 0;case"bottom":return l;case"left":case"right":return t*l;case"radial":return l/2+u*Math.sin(n(t))}}(d),h.midAngle=n(d)}}},e.Layout.Horizon=function(){e.Layout.call(this);var t,n,r,i,o,a,s=this,l=this.buildImplied;this.buildImplied=function(s){l.call(this,s),t=s.bands,n=s.mode,r=Math.round(("color"==n?.5:1)*s.height),i=s.backgroundStyle,o=e.ramp(i,s.negativeStyle).domain(0,t),a=e.ramp(i,s.positiveStyle).domain(0,t)};var t=(new e.Panel).data(function(){return e.range(2*t)}).overflow("hidden").height(function(){return r}).top(function(t){return"color"==n?(1&t)*r:0}).fillStyle(function(t){return t?null:i});this.band=(new e.Mark).top(function(t,e){return"mirror"==n&&1&e?(e+1>>1)*r:null}).bottom(function(t,e){return"mirror"==n?1&e?null:(e+1>>1)*-r:(1&e||-1)*(e+1>>1)*r}).fillStyle(function(t,e){return(1&e?o:a)(1+(e>>1))}),this.band.add=function(n){return s.add(e.Panel).extend(t).add(n).extend(this)}},e.Layout.Horizon.prototype=e.extend(e.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",e.fillStyle).property("positiveStyle",e.fillStyle).property("negativeStyle",e.fillStyle),e.Layout.Horizon.prototype.defaults=(new e.Layout.Horizon).extend(e.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728"),e.Layout.Rollup=function(){e.Layout.Network.call(this);var t,n,r=this,i=r.buildImplied;this.buildImplied=function(e){i.call(this,e),t=e.$rollup.nodes,n=e.$rollup.links},this.node.data(function(){return t}).shapeSize(function(t){return 20*t.nodes.length}),this.link.interpolate("polar").eccentricity(.8),this.link.add=function(t){return r.add(e.Panel).data(function(){return n}).add(t).extend(this)}},e.Layout.Rollup.prototype=e.extend(e.Layout.Network).property("directed",Boolean),e.Layout.Rollup.prototype.x=function(t){return this.$x=e.functor(t),this},e.Layout.Rollup.prototype.y=function(t){return this.$y=e.functor(t),this},e.Layout.Rollup.prototype.buildImplied=function(t){function n(t){return s[t]+","+l[t]}if(!e.Layout.Network.prototype.buildImplied.call(this,t)){
var r=t.nodes,i=t.links,o=t.directed,a=r.length,s=[],l=[],u=0,c={},h={},d=e.Mark.stack,f={parent:this};d.unshift(null);for(var p=0;p<a;p++)f.index=p,d[0]=r[p],s[p]=this.$x.apply(f,d),l[p]=this.$y.apply(f,d);d.shift();for(var p=0;p<r.length;p++){var m=n(p),g=c[m];g||(g=c[m]=Object.create(r[p]),g.index=u++,g.x=s[p],g.y=l[p],g.nodes=[]),g.nodes.push(r[p])}for(var p=0;p<i.length;p++){var y=i[p].sourceNode,v=i[p].targetNode,b=c[n(y.index)],_=c[n(v.index)],w=!o&&b.index>_.index,x=w?_.index+","+b.index:b.index+","+_.index,C=h[x];C||(C=h[x]={sourceNode:b,targetNode:_,linkValue:0,links:[]}),C.links.push(i[p]),C.linkValue+=i[p].linkValue}t.$rollup={nodes:e.values(c),links:e.values(h)}}},e.Layout.Matrix=function(){e.Layout.Network.call(this);var t,n,r,i,o,a=this,s=a.buildImplied;this.buildImplied=function(e){s.call(this,e),t=e.nodes.length,n=e.width/t,r=e.height/t,i=e.$matrix.labels,o=e.$matrix.pairs},this.link.data(function(){return o}).left(function(){return n*(this.index%t)}).top(function(){return r*Math.floor(this.index/t)}).width(function(){return n}).height(function(){return r}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(t){return t.linkValue?"#555":"#eee"}).parent=this,delete this.link.add,this.label.data(function(){return i}).left(function(){return 1&this.index?n*(.5+(this.index>>1)):0}).top(function(){return 1&this.index?0:r*(.5+(this.index>>1))}).textMargin(4).textAlign(function(){return 1&this.index?"left":"right"}).textAngle(function(){return 1&this.index?-Math.PI/2:0}),delete this.node},e.Layout.Matrix.prototype=e.extend(e.Layout.Network).property("directed",Boolean),e.Layout.Matrix.prototype.sort=function(t){return this.$sort=t,this},e.Layout.Matrix.prototype.buildImplied=function(t){if(!e.Layout.Network.prototype.buildImplied.call(this,t)){var n=t.nodes,r=t.links,i=this.$sort,o=n.length,a=e.range(o),s=[],l=[],u={};t.$matrix={labels:s,pairs:l},i&&a.sort(function(t,e){return i(n[t],n[e])});for(var c=0;c<o;c++)for(var h=0;h<o;h++){var d=a[c],f=a[h],p={row:c,col:h,sourceNode:n[d],targetNode:n[f],linkValue:0};l.push(u[d+"."+f]=p)}for(var c=0;c<o;c++){var d=a[c];s.push(n[d],n[d])}for(var c=0;c<r.length;c++){var m=r[c],g=m.sourceNode.index,y=m.targetNode.index,v=m.linkValue;u[g+"."+y].linkValue+=v,t.directed||(u[y+"."+g].linkValue+=v)}}},e.Layout.Bullet=function(){e.Layout.call(this);var t,n,r,i,o,a=this,s=a.buildImplied,l=a.x=e.Scale.linear();this.buildImplied=function(a){s.call(this,o=a),t=a.orient,n=/^left|right$/.test(t),r=e.ramp("#bbb","#eee").domain(0,Math.max(1,o.ranges.length-1)),i=e.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,o.measures.length-1))},(this.range=new e.Mark).data(function(){return o.ranges}).reverse(!0).left(function(){return"left"==t?0:null}).top(function(){return"top"==t?0:null}).right(function(){return"right"==t?0:null}).bottom(function(){return"bottom"==t?0:null}).width(function(t){return n?l(t):null}).height(function(t){return n?null:l(t)}).fillStyle(function(){return r(this.index)}).antialias(!1).parent=a,(this.measure=new e.Mark).extend(this.range).data(function(){return o.measures}).left(function(){return"left"==t?0:n?null:this.parent.width()/3.25}).top(function(){return"top"==t?0:n?this.parent.height()/3.25:null}).right(function(){return"right"==t?0:n?null:this.parent.width()/3.25}).bottom(function(){return"bottom"==t?0:n?this.parent.height()/3.25:null}).fillStyle(function(){return i(this.index)}).parent=a,(this.marker=new e.Mark).data(function(){return o.markers}).left(function(e){return"left"==t?l(e):n?null:this.parent.width()/2}).top(function(e){return"top"==t?l(e):n?this.parent.height()/2:null}).right(function(e){return"right"==t?l(e):null}).bottom(function(e){return"bottom"==t?l(e):null}).strokeStyle("black").shape("bar").shapeAngle(function(){return n?0:Math.PI/2}).parent=a,(this.tick=new e.Mark).data(function(){return l.ticks(7)}).left(function(e){return"left"==t?l(e):null}).top(function(e){return"top"==t?l(e):null}).right(function(e){return"right"==t?l(e):n?null:-6}).bottom(function(e){return"bottom"==t?l(e):n?-8:null}).height(function(){return n?6:null}).width(function(){return n?null:6}).parent=a},e.Layout.Bullet.prototype=e.extend(e.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("minimum").property("maximum"),e.Layout.Bullet.prototype.defaults=(new e.Layout.Bullet).extend(e.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]),e.Layout.Bullet.prototype._originIsZero=!0,e.Layout.Bullet.prototype.originIsZero=function(t){return arguments.length?this._originIsZero=!!t:this._originIsZero},e.Layout.Bullet.prototype.buildImplied=function(t){e.Layout.prototype.buildImplied.call(this,t);var n,r=this.parent[/^left|right$/.test(t.orient)?"width":"height"](),i=t.maximum,o=t.minimum;null==i?(n=[].concat(t.ranges,t.markers,t.measures),i=e.max(n)):i=+i,null==o?(n||(n=[].concat(t.ranges,t.markers,t.measures)),o=e.min(n),o*=.95):o=+o,(o>i||i-o<1e-10)&&(o=Math.abs(i)<1e-10?-.1:.99*i),this._originIsZero&&o*i>0&&(o>0?o=0:i=0),t.minimum=o,t.maximum=i,this.x.domain(o,i).range(0,r)},e.Behavior={},e.Behavior.dragBase=function(t){function n(n){if(h||(h=!0,this.addEventInterceptor("click",s,!0)),!l){var a=this.root.scene.$g;l=[[a,"mousemove",e.listen(a,"mousemove",r)],[a,"mouseup",e.listen(a,"mouseup",i)],[document,"mousemove",e.listen(document,"mousemove",r)],[document,"mouseup",e.listen(document,"mouseup",i)]]}var f=arguments[arguments.length-1];u=f.target,c=!1,f.stopPropagation();var p=this.mouse(),m=this.scene,g=this.index;d=m[g].drag={phase:"start",m:p,m1:p,m2:null,d:n,scene:m,index:g},f=o(f,d),t.dragstart.call(this,f);var y=d.m;y!==p&&(p.x=y.x,p.y=y.y)}function r(e){if(d){d.phase="move",e.stopPropagation(),e=o(e,d);var n=d.scene;n.mark.context(n,d.index,function(){var n=d.m2||d.m1,r=this.mouse();if(!(n&&r.distance2(n).dist2<=2)){d.m=d.m2=r,t.drag.call(this,e);var i=d.m;i!==r&&(r.x=i.x,r.y=i.y)}})}}function i(n){if(d){d.phase="end";var r=d.m2,i=r&&d.m1.distance2(r).dist2>.1;d.canceled=!i,c=i&&u===n.target,c||(u=null),n.stopPropagation(),n=o(n,d),l&&(l.forEach(function(t){e.unlisten.apply(e,t)}),l=null);var a=d.scene,s=d.index;try{a.mark.context(a,s,function(){t.dragend.call(this,n)})}finally{d=null,delete a[s].drag}}}function o(t,e){try{return t.drag=e,t}catch(t){}var n={};for(var r in t){var i=t[r];n[r]="function"!=typeof i?i:a(i,t)}return n._sourceEvent=t,n}function a(t,e){return function(){return t.apply(e,arguments)}}function s(t,e){if(c&&u===e.target)return c=!1,u=null,!1}var l,u,c,h,d;return t.autoRender=!0,t.positionConstraint=null,t.bound=function(t,e){return Math.max(d.min[e],Math.min(d.max[e],t))},n.autoRender=function(e){return arguments.length?(t.autoRender=!!e,n):t.autoRender},n.positionConstraint=function(e){return arguments.length?(t.positionConstraint=e,n):t.positionConstraint},n},e.Behavior.drag=function(){var t,n=null,r=1,i=1,o={dragstart:function(n){var r=n.drag;r.type="drag";var i=r.d,a=e.vector(i.x,i.y);i.fix=a,i.drag=r,t=a.minus(r.m1);var s=this.parent;r.max={x:s.width()-(i.dx||0),y:s.height()-(i.dy||0)},r.min={x:0,y:0},o.autoRender&&this.render(),e.Mark.dispatch("dragstart",r.scene,r.index,n)},drag:function(n){var a=n.drag,s=a.m2,l=a.d;a.m=t.plus(s);var u=o.positionConstraint;u&&u(a);var c=a.m;r&&(l.x=l.fix.x=o.bound(c.x,"x")),i&&(l.y=l.fix.y=o.bound(c.y,"y")),o.autoRender&&this.render(),e.Mark.dispatch("drag",a.scene,a.index,n)},dragend:function(n){var r=n.drag,i=r.d;i.fix=null,t=null,o.autoRender&&this.render();try{e.Mark.dispatch("dragend",r.scene,r.index,n)}finally{delete i.drag}}},a=e.Behavior.dragBase(o);return a.collapse=function(t){if(arguments.length){switch(n=String(t)){case"y":r=1,i=0;break;case"x":r=0,i=1;break;default:r=1,i=1}return a}return n},a},e.Behavior.point=function(t){function n(t,e){if(t.visible)for(var n=t.children.length-1;n>=0;n--)if(r(t.children[n],e))return!0}function r(t,e){var r,a,s,l=t.mark,u="panel"===l.type;if(l.$handlers.point){var c,h=(u&&l.parent||l).mouse(),d=l._pointingRadiusMax,f=d*d;for(a=t.length;a--;)if((c=i(t,a))&&o(t,a,h,e,c,f)){r=!0;break}}if(u){l.scene=t,s=!(!l.isPointingBarrier||!l.parent);try{for(a=t.length;a--;)if(l.index=a,(!s||l.getShape(t,a).containsPoint(l.parent.mouse()))&&n(t[a],e))return!0}finally{delete l.scene,delete l.index}}return r}function i(t,e){var n=t[e];if(!n.visible)return 0;if(!d)return 1;var r=t.mark.properties;if(!r.fillStyle&&!r.strokeStyle)return 1;var i=n.fillStyle?n.fillStyle.opacity:0,o=n.strokeStyle?n.strokeStyle.opacity:0,a=Math.max(i,o);return a<.02?0:a>.98?1:.5}function o(t,n,r,i,o,a){var s,l=t.mark.getShape(t,n),u=l.hasArea(),d=l.containsPoint(r,p)?!h||l.containsPoint(r)?2:1:0,f=isFinite(a)&&d<2,m=function(){if(f&&a<=0)return-1;if(s=l.distance2(r,p),f&&e.floatLess(a,s.cost))return-2;if(y&&!d&&e.floatLess(g,s.dist2))return-3;if(u===i.hasArea){if(d<i.inside)return-4;if(d>i.inside)return 1}else{if(h){if(!d&&i.inside)return-5;if(d&&!i.inside)return 2}if(u||2!==i.inside){if(u&&2===d){if(2===i.inside)return-7;if(0===i.inside&&e.floatLess(3,i.cost))return 4}}else{if(2===d)return 3;if(0===d&&e.floatLess(3,s.cost))return-6}}if(!h||!d){if(e.floatLess(i.dist2,s.dist2))return-8;if(e.floatLess(s.dist2,i.dist2))return 5}return h&&e.floatLess(s.cost,i.cost)?6:-9}();if(c&&function(){if(m<-3||m>0){var e=t&&t.mark;console.log("POINT "+(m>0?"choose":"skip")+" ("+m+") "+(e?e.type+" "+n:"none")+" in="+d+" d2="+(s&&s.dist2)+" cost="+(s&&s.cost)+" opaq="+(1===o))}}(),m>0&&(i.hasArea=u,i.inside=d,i.dist2=s.dist2,i.cost=s.cost,i.scenes=t,i.index=n,i.shape=l,u&&2===d&&1===o))return!0}function a(){var t=e.event;c&&console.log("POINT MOUSE MOVE BEG");try{var r={cost:1/0,dist2:1/0,inside:0,hasArea:!1,x:t.pageX||0,y:t.pageY||0};if(u&&v&&e.Shape.dist2(r,u).cost<v)return;if(n(this.scene[this.index],r),r.inside||isFinite(r.cost)||(r=null),t.pointFrom=u,t.pointTo=r,u){if(r&&u.scenes==r.scenes&&u.index==r.index)return;t.isPointSwitch=!!r,e.Mark.dispatch("unpoint",u.scenes,u.index,t)}u=r,r&&(e.Mark.dispatch("point",r.scenes,r.index,t),m||("panel"===this.type?(m=this,this.event("mouseout",function(){s.call(this.scene.$g)}),f&&m.addEventInterceptor("click",l)):e.listen(this.root.canvas(),"mouseout",s)))}finally{c&&console.log("POINT MOUSE MOVE END")}}function s(){var t=e.event;u&&!e.ancestor(this,t.relatedTarget)&&(e.Mark.dispatch("unpoint",u.scenes,u.index,t),u=null)}function l(t,e){if(u){var n=u.scenes,r=n.mark.$handlers[t];if(r)return[r,n,u.index,e]}}"object"!=typeof t&&(t={radius:t});var u,c=0,h=null,d=!!e.get(t,"painted",!1),f=!!e.get(t,"stealClick",!1),p={x:1,y:1},m=null,g=function(){var n=e.parseNumNonNeg(e.get(t,"radius"),30);return n*n}(),y=isFinite(g),v=function(){var n=e.parseNumNonNeg(e.get(t,"radiusHyst"),0);return isFinite(n)||(n=4),n*n}();return a.collapse=function(t){if(arguments.length){switch(h=String(t)){case"y":p.x=1,p.y=0;break;case"x":p.x=0,p.y=1;break;default:p.x=1,p.y=1,h=null}return a}return h},t&&null!=t.collapse&&a.collapse(t.collapse),t=null,a},e.Behavior.select=function(){var t=null,n=1,r=1,i=!1,o={dragstart:function(t){var a=t.drag;a.type="select",a.dxmin=0,a.dymin=0;var s=a.d;s.drag=a,a.max={x:this.width(),y:this.height()},a.min={x:0,y:0};var l=o.positionConstraint;l&&(a.m=a.m.clone(),l(a));var u=a.m;n&&(s.x=o.bound(u.x,"x"),i||(s.dx=Math.max(0,a.dxmin))),r&&(s.y=o.bound(u.y,"y"),i||(s.dy=Math.max(0,a.dymin))),e.Mark.dispatch("selectstart",a.scene,a.index,t)},drag:function(t){var a=t.drag,s=a.m1,l=a.d;a.max.x=this.width(),a.max.y=this.height();var u=o.positionConstraint;u&&(a.m=a.m.clone(),u(a));var c=a.m;if(n){var h=Math.min(s.x,c.x);if(h=o.bound(h,"x"),l.x=h,!i){var d=Math.max(c.x,s.x);d=o.bound(d,"x"),l.dx=Math.max(0,a.dxmin,d-h)}}if(r){var f=Math.min(s.y,c.y);if(f=o.bound(f,"y"),l.y=f,!i){var p=Math.max(c.y,s.y);p=o.bound(p,"y"),l.dy=Math.max(0,a.dymin,p-f)}}o.autoRender&&this.render(),e.Mark.dispatch("select",a.scene,a.index,t)},dragend:function(t){var n=t.drag;try{e.Mark.dispatch("selectend",n.scene,n.index,t)}finally{delete n.d.drag}}},a=e.Behavior.dragBase(o);return a.collapse=function(e){if(arguments.length){switch(t=String(e)){case"y":n=1,r=0;break;case"x":n=0,r=1;break;default:n=1,r=1}return a}return t},a.preserveLength=function(t){return arguments.length?(i=!!t,a):i},a},e.Behavior.resize=function(t){var n=!1,r="left"===t||"right"===t,i={dragstart:function(n){var r=n.drag;r.type="resize";var i=r.m1,o=r.d;switch(o.drag=r,t){case"left":i.x=o.x+o.dx;break;case"right":i.x=o.x;break;case"top":i.y=o.y+o.dy;break;case"bottom":i.y=o.y}var a=this.parent;r.max={x:a.width(),y:a.height()},r.min={x:0,y:0},e.Mark.dispatch("resizestart",r.scene,r.index,n)},drag:function(t){var o=t.drag,a=o.m1,s=i.positionConstraint;s&&(o.m=o.m.clone(),s(o));var l=o.m,u=o.d;if(!n||r){var c=Math.min(a.x,l.x),h=Math.max(l.x,a.x);c=i.bound(c,"x"),h=i.bound(h,"x"),u.x=c,u.dx=h-c}if(!n||!r){var d=Math.min(a.y,l.y),f=Math.max(l.y,a.y);d=i.bound(d,"y"),f=i.bound(f,"y"),u.y=d,u.dy=f-d}i.autoRender&&this.render(),e.Mark.dispatch("resize",o.scene,o.index,t)},dragend:function(t){var n=t.drag;n.max=null;try{e.Mark.dispatch("resizeend",n.scene,n.index,t)}finally{delete n.d.drag}}},o=e.Behavior.dragBase(i);return o.preserveOrtho=function(t){return arguments.length?(n=!!t,o):n},o},e.Behavior.pan=function(){function t(){o=this.index,i=this.scene,s=e.vector(e.event.pageX,e.event.pageY),a=this.transform(),l=1/(a.k*this.scale),u&&(u={x:(1-a.k)*this.width(),y:(1-a.k)*this.height()})}function n(t){i&&(i.mark.context(i,o,function(){var t=(e.event.pageX-s.x)*l,n=(e.event.pageY-s.y)*l,r=a.translate(t,n);u&&(r.x=Math.max(u.x,Math.min(0,r.x)),r.y=Math.max(u.y,Math.min(0,r.y))),this.transform(r).render()}),e.Mark.dispatch("pan",i,o,t))}function r(){i=null}var i,o,a,s,l,u;return t.bound=function(t){return arguments.length?(u=Boolean(t),this):Boolean(u)},e.listen(window,"mousemove",n),e.listen(window,"mouseup",r),t},e.Behavior.zoom=function(t){function n(n){var i=this.mouse(),o=e.event.wheel*t,a=this.transform().translate(i.x,i.y).scale(o<0?1e3/(1e3-o):(1e3+o)/1e3).translate(-i.x,-i.y);r&&(a.k=Math.max(1,a.k),a.x=Math.max((1-a.k)*this.width(),Math.min(0,a.x)),a.y=Math.max((1-a.k)*this.height(),Math.min(0,a.y))),this.transform(a).render(),e.Mark.dispatch("zoom",this.scene,this.index,n)}var r;return arguments.length||(t=1/48),n.bound=function(t){return arguments.length?(r=Boolean(t),this):Boolean(r)},n},e.Geo=function(){},e.Geo.projections={mercator:{project:function(t){return{x:t.lng/180,y:t.lat>85?1:t.lat<-85?-1:Math.log(Math.tan(Math.PI/4+e.radians(t.lat)/2))/Math.PI}},invert:function(t){return{lng:180*t.x,lat:e.degrees(2*Math.atan(Math.exp(t.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(t){return{x:t.lng/180,y:Math.sin(e.radians(t.lat))}},invert:function(t){return{lng:180*t.x,lat:e.degrees(Math.asin(t.y))}}},sinusoidal:{project:function(t){return{x:e.radians(t.lng)*Math.cos(e.radians(t.lat))/Math.PI,y:t.lat/90}},invert:function(t){return{lng:e.degrees(t.x*Math.PI/Math.cos(t.y*Math.PI/2)),lat:90*t.y}}},aitoff:{project:function(t){var n=e.radians(t.lng),r=e.radians(t.lat),i=Math.acos(Math.cos(r)*Math.cos(n/2));return{x:2*(i?Math.cos(r)*Math.sin(n/2)*i/Math.sin(i):0)/Math.PI,y:2*(i?Math.sin(r)*i/Math.sin(i):0)/Math.PI}},invert:function(t){var n=t.x*Math.PI/2,r=t.y*Math.PI/2;return{lng:e.degrees(n/Math.cos(r)),lat:e.degrees(r)}}},hammer:{project:function(t){var n=e.radians(t.lng),r=e.radians(t.lat),i=Math.sqrt(1+Math.cos(r)*Math.cos(n/2));return{x:2*Math.SQRT2*Math.cos(r)*Math.sin(n/2)/i/3,y:Math.SQRT2*Math.sin(r)/i/1.5}},invert:function(t){var n=3*t.x,r=1.5*t.y,i=Math.sqrt(1-n*n/16-r*r/4);return{lng:e.degrees(2*Math.atan2(i*n,2*(2*i*i-1))),lat:e.degrees(Math.asin(i*r))}}},identity:{project:function(t){return{x:t.lng/180,y:t.lat/90}},invert:function(t){return{lng:180*t.x,lat:90*t.y}}}},e.Geo.scale=function(t){function n(t){if(!o||t.lng!=o.lng||t.lat!=o.lat){o=t;var e=r(t);a={x:h(e.x),y:d(e.y)}}return a}function r(t){var e={lng:t.lng-f.lng,lat:t.lat};return c.project(e)}function i(t){var e=c.invert(t);return e.lng+=f.lng,e}var o,a,s={x:0,y:0},l={x:1,y:1},u=[],c=e.Geo.projections.identity,h=e.Scale.linear(-1,1).range(0,1),d=e.Scale.linear(-1,1).range(1,0),f={lng:0,lat:0};return n.x=function(t){return n(t).x},n.y=function(t){return n(t).y},n.ticks={lng:function(t){var n,r;if(u.length>1){var i=e.Scale.linear();void 0==t&&(t=10),n=i.domain(u,function(t){return t.lat}).ticks(t),r=i.domain(u,function(t){return t.lng}).ticks(t)}else n=e.range(-80,81,10),r=e.range(-180,181,10);return r.map(function(t){return n.map(function(e){return{lat:e,lng:t}})})},lat:function(t){return e.transpose(n.ticks.lng(t))}},n.invert=function(t){return i({x:h.invert(t.x),y:d.invert(t.y)})},n.domain=function(t,n){if(arguments.length){if(u=t instanceof Array?arguments.length>1?e.map(t,n):t:Array.prototype.slice.call(arguments),u.length>1){var i=u.map(function(t){return t.lng}),a=u.map(function(t){return t.lat});f={lng:(e.max(i)+e.min(i))/2,lat:(e.max(a)+e.min(a))/2};var s=u.map(r);h.domain(s,function(t){return t.x}),d.domain(s,function(t){return t.y})}else f={lng:0,lat:0},h.domain(-1,1),d.domain(-1,1);return o=null,this}return u},n.range=function(t,e){return arguments.length?("object"==typeof t?(s={x:Number(t.x),y:Number(t.y)},l={x:Number(e.x),y:Number(e.y)}):(s={x:0,y:0},l={x:Number(t),y:Number(e)}),h.range(s.x,l.x),d.range(l.y,s.y),o=null,this):[s,l]},n.projection=function(t){return arguments.length?(c="string"==typeof t?e.Geo.projections[t]||e.Geo.projections.identity:t,this.domain(u)):t},e.copyOwn(n,e.Scale.common),arguments.length&&n.projection(t),n},e}),define("cdf/lib/CCC/cdo",["./def","./protovis-compat!"],function(t,e){function n(t,e){var n=t&&t.length;if(n){for(var r=0;r<n;r++){var i=t[r];e&&(i[e]=null),i.dispose()}t.length=0}}function r(t,e,n,r,i){n[r]=t;var o=t[e]||(t[e]=[]);null==i||i>=o.length?o.push(n):o.splice(i,0,n)}function i(e,n,r,i){var o,a=e[n];a&&(o=a.indexOf(r))>=0&&t.array.removeAt(a,o),r[i]=null}function o(t){return t.toISOString()}function a(t,e){return t.id-e.id}function s(t,e){return e.id-t.id}function l(){delete this.isSelected}function u(t){return t.isNull||t.isSelected}function c(t){return!0===t.isSelected}function h(t){return!1===t.isSelected}function d(t){return!0===t.isVisible}function f(t){return!1===t.isVisible}function p(t){return!0===t.isNull}function m(t){return!1===t.isNull}function g(e,n,r,i,o){var a;if(this.owner===this)a=new Mt.Atom(this,r,i,e,n),o&&(a.isVirtual=!0);else{var s=this.parent||this.linkParent;a=s._atomsByKey[n]||g.call(s,e,n,r,i,o)}return t.array.insert(this._atoms,a,this._atomComparer),C.call(this),this._atomsByKey[n]=a,a}function y(e){var n=e.key,r=this,i=!r._lazyInit;if(e.dimension===r)return r.owner===r||t.assert("Should be an owner dimension"),n||e!==r._virtualNullAtom?i?C.call(this):this._sumCache=null:e=r.intern(null),e;if(i){var o=r._atomsByKey[n];if(o){if(o!==e)throw t.error.operationInvalid("Atom is from a different root data.");return C.call(r),e}if(r.owner===r)throw t.error.operationInvalid("Atom is from a different root data.")}return y.call(r.parent||r.linkParent,e),i?(r._atomsByKey[n]=e,n?t.array.insert(r._atoms,e,r._atomComparer):(r._nullAtom=e,r._atoms.unshift(e)),C.call(r)):this._sumCache=null,e}function v(e){var n=t.get(e,"visible"),r=t.get(e,"selected");return(null==n?null:!!n)+":"+(null==r?null:!!r)}function b(t){var e=this._nullAtom;return e||(this.owner===this?this.data._atomsBase[this.name]=e=new Mt.Atom(this,null,t,null,""):e=b.call(this.parent||this.linkParent,t),this._atomsByKey[""]=this._nullAtom=e,this._atoms.unshift(e)),e}function _(){return this.owner===this||t.assert("Can only create atoms on an owner dimension."),this._virtualNullAtom||(this._virtualNullAtom=new Mt.Atom(this,null,"",null,""),this.data._atomsBase[this.name]=this._virtualNullAtom),this._virtualNullAtom}function w(){this.owner===this||t.assert("Can only unintern atoms of an owner dimension.");var e=this._atoms;if(e){for(var n=this._atomsByKey,r=0,i=e.length;r<i;){var o=e[r];if(o.visited)delete o.visited,r++;else if(o!==this._virtualNullAtom){e.splice(r,1),i--;var a=o.key;delete n[a],a||(delete this._nullAtom,this.data._atomsBase[this.name]=this._virtualNullAtom)}}C.call(this)}}function x(){var e=this._atoms;if(e){for(var n,r=this._atomsByKey,i=0,o=e.length;i<o;){var a=e[i];a.isVirtual?(e.splice(i,1),o--,n=!0,delete r[a.key||t.assert("Cannot be the null or virtual null atom.")]):i++}n&&C.call(this)}}function C(){this._atomVisibleDatumsCount=this._sumCache=this._visibleAtoms=this._visibleIndexes=null}function S(t){r(this,"childNodes",t,"parent"),t.owner=this.owner}function k(t){r(this,"_linkChildren",t,"linkParent"),t.owner=this.owner}function D(t,e){var n;if(!this._disposed&&(n=this._atomVisibleDatumsCount)){var r=t.atoms[this.name],i=r.key,o=n[i];n[i]=(o||0)+(e?1:-1),this._visibleAtoms=this._sumCache=this._visibleIndexes=null}}function M(){var t=this._atomVisibleDatumsCount;return t||(t={},this.data.datums(null,{visible:!0}).each(function(e){var n=e.atoms[this.name],r=n.key;t[r]=(t[r]||0)+1},this),this._atomVisibleDatumsCount=t),t}function N(t){var e=[];return this._atoms.forEach(function(n,r){this.isVisible(n)===t&&e.push(r)},this),e}function T(e){return t.query(this._atoms).where(function(t){return this.isVisible(t)===e},this).array()}function A(e,n){this.insertAt(e,n),t.lazy(this,"_childrenByKey")[e.key]=e}function P(t,e){r(this,"_linkChildren",t,"linkParent",e)}function j(t){i(this,"_linkChildren",t,"linkParent")}function O(){n(this.childNodes,"parent"),this._childrenByKey=null,n(this._linkChildren,"linkParent"),this._groupByCache=null,this._sumAbsCache=null}function I(){this.isOwner()||t.fail("Can only be called on the owner data.")}function E(e,n){!e.isNull||t.assert("Null datums do not notify selected changes"),n?this._selectedNotNullDatums.set(e.id,e):this._selectedNotNullDatums.rem(e.id),this._sumAbsCache=null}function L(e,n){var r=e.id,i=this;if(t.hasOwnProp.call(i._datumsById,r)){!e.isNull||t.assert("Null datums do not notify visible changes"),n?i._visibleNotNullDatums.set(r,e):i._visibleNotNullDatums.rem(r),i._sumAbsCache=null;for(var o=i._dimensionsList,a=0,s=o.length;a<s;)D.call(o[a++],e,n);for(o=i.childNodes,a=0,s=o.length;a<s;)L.call(o[a++],e,n);if((o=i._linkChildren)&&(s=o.length))for(a=0;a<s;)L.call(o[a++],e,n)}}function R(t){for(var e,n=[t];e=t.parent||t.linkParent;)n.unshift(t=e);return n}function F(t,e){for(var n,r=0,i=Math.min(t.length,e.length),o=null;r<i&&(n=t[r])===e[r];)o=n,r++;return o}function B(e,n){function r(e){if(e){var n=e.key;if(!t.hasOwnProp.call(o,n)){null!==u&&t.hasOwnProp.call(u,n)&&(e=u[n]);var r=e.id;i.push(e),o[n]=e,a[r]=e,null!==d&&d.push(e),e.isNull||(e.isSelected&&h.set(r,e),e.isVisible&&c.set(r,e))}}}if(!e)throw t.error.argumentRequired("setDatums");var i,o,a,s=this._datums.length>0,l=!!t.get(n,"isAdditive"),u=null,c=this._visibleNotNullDatums,h=this._selectedNotNullDatums;s&&!l?(O.call(this),u=this._datumsByKey,this._datums=i=[],this._datumsById=a={},this._datumsByKey=o={},c.clear(),h&&h.clear()):(i=this._datums,o=this._datumsByKey,a=this._datumsById,s&&(this._sumAbsCache=null));var d=null,f=!!this._linkChildren&&this._linkChildren.length>0;if(f&&s&&l&&(d=[]),t.array.is(e))for(var p=0,m=e.length;p<m;)r.call(this,e[p++]);else{if(!(e instanceof t.Query))throw t.error.argumentInvalid("setDatums","Argument is of invalid type.");e.each(r,this)}this.select&&this.select(i).forEach(function(t){U.call(this,t),null!==d&&d.splice(d.indexOf(t),1)},this),H.call(this),f&&this._onDatumsAdded(d||i)}function H(){for(var t=-1,e=this._datums,n=e.length;++t<n;)W.call(this,e[t],!1,!0);var r=this._dimensionsList;for(t=-1,n=r.length;++t<n;)w.call(r[t])}function W(t,e,n){var r=this._dimensionsList;if(r||(e=!1),e||n){var i,o,a,s=t.atoms,l=0;if(r)for(i=r.length;l<i;)a=r[l++],(o=s[a.name])&&(e&&y.call(a,o),n&&(o.visited=!0));else{var u=this.type.dimensionsNames();for(i=u.length;l<i;)(o=s[u[l++]])&&(o.visited=!0)}}}function U(t){var e=this._datums,n=this._selectedNotNullDatums,r=t.id;e.splice(e.indexOf(t),1),delete this._datumsById[r],delete this._datumsByKey[t.key],n&&t.isSelected&&n.rem(r),t.isVisible&&this._visibleNotNullDatums.rem(r)}function V(e){function n(e){if(null!=e){"object"==typeof e||t.fail.invalidArgument("datumFilter");var n={},i=!1;for(var o in e){var a=e[o],s=this.dimensions(o).getDistinctAtoms(null!==a?t.array.as(a):[null]);s.length&&(i=!0,n[o]=s)}i&&r.push(n)}}var r=[];return e=t.array.as(e),e&&e.forEach(n,this),r}function q(e,n){var r=t.get(n,"visible"),i=t.get(n,"isNull"),o=t.get(n,"selected"),a=t.get(n,"where");return null!=r&&(e=e.where(r?d:f)),null!=i&&(e=e.where(i?p:m)),null!=o&&(e=e.where(o?c:h)),a&&(e=e.where(a)),e}function z(e,n){var r=t.get(n,"visible"),i=t.get(n,"isNull"),o=t.get(n,"selected"),a=t.get(n,"where"),s=[];null!=r&&s.unshift(r?d:f),null!=i&&s.unshift(i?p:m),null!=o&&s.unshift(o?c:h),a&&s.unshift(a),e&&s.unshift($(e));var l=s.length;return l?1===l?s[0]:function(t){for(var e=l;e;)if(!s[--e](t))return!1;return!0}:null}function $(t){function e(e){for(var i=e.atoms,o=0;o<r;o++)if(n(i,t[o]))return!0;return!1}function n(t,e){for(var n in e)if(e[n].indexOf(t[n])<0)return!1;return!0}var r=t.length;return e}function G(e,n){var r=t.array.as(t.get(n,"orderBy")),i=t.create(n||{},{orderBy:null});return t.query(e).selectMany(function(t,e){return r&&(i.orderBy=r[e]),Y.call(this,t,i)},this).distinct(t.propGet("id"))}function Y(e,n){var r=n.orderBy;if(r){if(r.indexOf("|")>=0)throw t.error.argumentInvalid("keyArgs.orderBy","Multi-dimension order by is not supported.")}else r=Object.keys(e).sort().join(",");var i=this.groupBy(r,n),o=i.treeHeight,a=[];return t.query(function(){var n;if(this._data){if(this._datumsQuery){if(this._data||t.assert("Must have a current data"),a.length||t.assert("Must have a parent data"),!this._dimAtomsOrQuery||t.assert(),this._datumsQuery.next())return this.item=this._datumsQuery.item,1;this._datumsQuery=null,n=a.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery}}else this._data=i,this._dimAtomsOrQuery=t.query(e[i.groupingLevelSpec.dimensions[0].name]);this._dimAtomsOrQuery||t.assert("Invalid programmer"),this._data||t.assert("Must have a current data");for(var r=a.length;;){for(;this._dimAtomsOrQuery.next();){var s=this._dimAtomsOrQuery.item,l=this._data.child(s.key);if(l&&(r<o-1||l._datums.length)){if(a.push({data:this._data,dimAtomsOrQuery:this._dimAtomsOrQuery}),this._data=l,!(r<o-1))return this._dimAtomsOrQuery=null,this._datumsQuery=t.query(l._datums),this._datumsQuery.next(),this.item=this._datumsQuery.item,1;this._dimAtomsOrQuery=t.query(e[l.groupingLevelSpec.dimensions[0].name]),r++}}if(!r)return 0;n=a.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery,r--}return 0})}function Q(e,n,r){return t.string.is(e)||t.fail.argumentInvalid("groupLevelText","Invalid grouping specification."),t.query(e.split(/\s*\|\s*/)).where(t.truthy).select(function(e){var i=jt.exec(e)||t.fail.argumentInvalid("groupLevelText","Invalid grouping level syntax '{0}'.",[e]),o=i[1],a=(i[2]||"").toLowerCase(),s="desc"===a,l=new Mt.GroupingDimensionSpec(o,s);return n&&l.bindComplexType(n,r),l})}function X(e,n){function r(){var r={},o=t.query(i.source).select(function(t){n(t,r);var e=r.series;return null!=e&&null!=e.v&&(e=e.v),e||null}).distinct().array();return i._createPlot2SeriesKeySet(e,o)}var i=this;this._dataPartGet(r)}function K(e){return t.string.is(e)?!!this.mask(e):t.is(e,Lt)?!!this.mask(e.mask()).style(e.style()):void 0}function J(t){t||(t="");var e="_"+t,n=Rt[e];return n||(Ft===Lt.cacheLimit&&(Rt={},Ft=0),Rt[e]=n=Z(t),Ft++),n}function Z(t){function e(t,e){return null==t?o?o(e):"":(t=+t,isNaN(t)||!isFinite(t)?"":n?0===t?i?i(e):n(e,t,null,!1):t>0?n(e,t,i,!1):r?r(e,-t,i||n):n(e,-t,i,!0):String(t))}var n,r,i,o;return function(){var e,a,s,l=tt(t);if(l.forEach(et),e=l.length,n=o=r=i=null,e&&(n=at(s=l[0]),e>1&&(a=l[1],r=at(a.empty?s:a),e>2&&(a=l[2],i=it(a.empty?s:a),e>3&&(a=l[3],o=ot(a.empty?s:a),e>4)))))throw new Error("Invalid mask. More than 4 sections.")}(),e}function tt(t){var e=[];if(t){var n,r,i,o,a=-1,s=t.length,l="",u=1,c=1,h=0,d=0,f=function(t){u=0,i.list.push(t)},p=function(t){u=0,l+=t},m=function(){l&&(b(),f({type:0,text:l}),l="")},g=function(t){m(),f(t)},y=function(){m(),!h&&d&&f({type:2}),i.digits=o,o=0,c=0,i=r.fractional},v=function(){!r||u&&e.length||(c?y():m(),i.digits=o,e.push(r)),u=c=1,d=o=h=0,r={empty:0,scale:0,groupOn:0,scientific:0,abbreviationOn:0,integer:{list:[],digits:0},fractional:{list:[],digits:0}},i=r.integer},b=function(){"A"===l?(l="",g({type:6})):"C"===l?(l="",g({type:4})):"AC"===l?(l="",g({type:6}),g({type:4})):"CA"===l&&(l="",g({type:4}),g({type:6}))};for(v();++a<s;)if("0"===(n=t.charAt(a)))g({type:1}),h=1,o++;else if("#"===n)g({type:2}),h=1,o++;else if(","===n)c&&g({type:3});else if("."===n)c&&(d=1,y());else if(""===n)g({type:4});else if("C"===n&&"Currency"===t.substring(a,a+8))g({type:4}),a+=7;else if("A"===n&&"Abbreviation"===t.substring(a,a+12))g({type:6}),a+=11;else if(";"===n)v(),(a+1>=s||";"===t.charAt(a+1))&&(a++,e.push({empty:1}));else if("\\"===n)++a<s&&p(t.charAt(a));else if('"'===n){a++;var _=t.indexOf(n,a);_<0&&(_=s),p(t.substring(a,_)),a=_}else" "===n?g({type:7}):("e"!==n&&"E"!==n||!function(){var e,i=a+1,o=!1,l=0;if(i<s){if("-"===(e=t.charAt(i))||"+"===e){if(o="+"===e,!(++i<s))return 0;e=t.charAt(i)}for(;"0"===e&&++l&&++i<s&&(e=t.charAt(i)););if(l)return a=i-1,g({type:5,text:n,digits:l,positive:o}),r.scientific=1,1}return 0}())&&("%"===n?r.scale+=2:""===n?r.scale+=3:""===n&&(r.scale+=4),p(n));v()}return e}function et(t){t.empty||(nt(t,!0),nt(t,!1))}function nt(t,e){function n(t){l[o](t)}for(var r,i,o=e?"push":"unshift",a=t[e?"integer":"fractional"],s=a.list,l=a.list=[],u=a.digits-1,c=0,h=0,d=s.length,f=e?0:d,p=e?function(){return f<d?s[f++]:null}:function(){return f>0?s[--f]:null};r=p();)switch(i=r.type){case 0:n(ut(r.text));break;case 1:case 2:h&&2===i&&(i=1),n(ct(e,u,1===i,!c)),u--,c=1,h||1!==i||(h=1);break;case 3:rt(s,f,d)?c&&(t.groupOn=1):t.scale-=3;break;case 4:n(mt);break;case 5:n(dt(t,r));break;case 6:t.abbreviationOn=1,n(gt);break;case 7:n(ut(" "))}!e&&a.digits&&l.unshift(ht(h))}function rt(t,e,n){for(;e<n;){var r=t[e++].type;if(1===r||2===r)return 1}return 0}function it(t){function e(e){return st(t,e,0,!1)}return e}function ot(t){function e(e){return st(t,e,"",!1)}return e}function at(e){function n(n,r,i,o){var a,s,l=r,u=0,c=e.scale;if(e.abbreviationOn)for(var h=n.abbreviations.length,d=h;d>0;d--){var f=3*d;if(Math.pow(10,f)<=r){c-=f,s=d-1;break}}return e.scientific&&(a=Math.floor(Math.log(r)/Math.LN10),u=c+a-e.integer.digits+1,c-=u),c&&(r=t.mult10(r,c)),r=t.round10(r,e.fractional.digits),!r&&i?i(n,l):st(e,n,r,o,u,s)}return n}function st(t,e,n,r,i,o){var a=""+n,s=a.indexOf("."),l=s<0?a:a.substr(0,s),u=s<0?"":a.substr(s+1);"0"===l&&(l=""),i||(i=0);var c=[];return r&&c.push(e.negativeSign),l=l.split(""),u=u.split(""),e.group&&t.groupOn&&lt(e,l),t.integer.list.forEach(function(t){c.push(t(e,l,i,o))}),t.fractional.list.forEach(function(t){c.push(t(e,u,i,o))}),c.join("")}function lt(t,e){for(var n,r=t.group,i=function(){e[o-l-1]+=r},o=e.length,a=t.groupSizes,s=a.length,l=0,u=-1;++u<s;){if(!((l+=n=a[u])<o))return;i()}for(;(l+=n)<o;)i()}function ut(t){function e(){return t}return e}function ct(t,e,n,r){function i(e){return e[t?"integerPad":"fractionPad"]}function o(t,n){var i=n.length;if(e<i){var o=i-1-e;return r?n.slice(0,o+1).join(""):n[o]}return s?s(t):""}function a(t,n){return e<n.length?n[e]:s?s(t):""}var s=n?i:null;return t?o:a}function ht(t){return t?ft:pt}function dt(t,e){function n(t,n,r){var i=r<0?t.negativeSign:e.positive?"+":"",o=""+Math.abs(r),a=e.digits-o.length;return a>0&&(o=new Array(a+1).join("0")+o),e.text+i+o}return n}function ft(t){return t.decimal}function pt(t,e){return e.length?t.decimal:""}function mt(t){return t.currency}function gt(t,e,n,r){if(null!=r)return t.abbreviations[r]}function yt(e){return t.string.is(e)?!!this.mask(e):t.is(e,Bt)?!!this.mask(e.mask()):void 0}function vt(n){
return n?e.Format.createFormatter(e.Format.date(n)):t.string.to}function bt(e){return t.is(e,Ht)?!!this.formatter(e.formatter()):t.fun.is(e)?!!this.formatter(e):void 0}function _t(t){return null!=t?String(t):""}function wt(e){function n(n){return t.is(n,e)||t.is(n,Ht)?n:null}function r(n,r){return(t.fun.is(n)?Ht:e)(n,r)}return{cast:n,factory:r}}function xt(e){switch(t.classOf(e)){case Ut:return!!this.number(e.number()).percent(e.percent()).date(e.date()).any(e.any());case Lt:return!!this.number(e);case Bt:return!!this.date(e);case Ht:return!!this.any(e)}if(t.string.is(e)){var n=zt(e);if(n)return!!t.configure(this,n)}}function Ct(e,n){e=kt(e);var r=t.getOwn(Vt,e);return r?t.configure(r,n):(r=Vt[e]=Ut(n),r.languageCode=e),r}function St(t){var e=/^([a-z]{2,8})(?:[-_]([a-z]{2}|\d{3}))?$/i,n=e.exec(t);if(!n)return null;var r=n[1]?n[1].toLowerCase():"",i=n[2]?n[2].toLowerCase():"";return{code:r+(i?"-"+i:""),primary:r,region:i}}function kt(t){return t?t.toLowerCase():""}function Dt(e,n){e=kt(e);var r=t.getOwn(Vt,e);if(r)return r;if(!n)return null;var i=St(e);if(i){if(i.code!==e&&(r=t.getOwn(Vt,i.code)))return r;if(i.region&&(r=t.getOwn(Vt,i.primary)))return r}return t.getOwn(Vt,Wt,null)}var Mt=t.globalSpace("cdo",{});t.type("cdo.DimensionType").init(function(n,r,i){this.complexType=n,this.name=r,this.label=t.get(i,"label")||t.titleFromName(r);var a=t.splitIndexedId(r);this.group=a[0],this.groupLevel=t.nullyTo(a[1],0),this.label.indexOf("{")>=0&&(this.label=t.format(this.label,[this.groupLevel+1])),this.isHidden=!!t.get(i,"isHidden");var s=t.get(i,"valueType")||null,l=Mt.DimensionType.valueTypeName(s),u=t.getOwn(Mt.DimensionType.cast,l,null);this.valueType=s,this.valueTypeName=l,this.cast=u;var c=this.valueType===Number,h=!c&&this.valueType===Date;if(this.isDiscreteValueType=!c&&!h,this.isDiscrete=t.get(i,"isDiscrete"),null==this.isDiscrete)this.isDiscrete=this.isDiscreteValueType;else if(this.isDiscrete=!!this.isDiscrete,!this.isDiscrete&&this.isDiscreteValueType)throw t.error.argumentInvalid("isDiscrete","The only supported continuous value types are Number and Date.");if(this._converter=t.get(i,"converter")||null,!this._converter){var d=t.get(i,"rawFormat");if(d)switch(this.valueType){case Date:this._converter=e.Format.createParser(e.Format.date(d))}}this._key=t.get(i,"key")||null,null===this._key&&h&&(this._key=o),this.setComparer(i&&i.comparer);var f,p=t.get(i,"formatter"),m=t.get(i,"formatProto"),g=c?"number":h?"date":"any";p?f=Mt.format(t.set({},g,p),m):this.isDiscreteValueType?f=Ut(null,m):(f=t.get(i,"format"),f||c||(f=t.get(i,"rawFormat"))&&(f=f.replace(/-/g,"/")),f?t.is(f,Ut)||((t.string.is(f)||t.fun.is(f)&&!t.classOf(f))&&(f=t.set({},g,f)),f=Ut(f,m)):f=Ut(null,m),p=f[g]()),this._formatter=p||null,this._format=f||null,this.isKey=Boolean(t.get(i,"isKey"))}).add({isCalculated:!1,compare:function(t,e){return null==t?null==e?0:-1:null==e?1:this._comparer.call(null,t,e)},comparer:function(t){var e=this;return e.isComparable?t?e._rc||(e._rc=function(t,n){return e.compare(n,t)}):e._dc||(e._dc=function(t,n){return e.compare(t,n)}):null},setComparer:function(e){if(void 0===e||!e&&!this.isDiscrete)switch(this.valueType){case Number:case Date:e=t.compare}this._comparer=e||null,this.isComparable=null!=this._comparer,this._rc=this._dc=this._rac=this._dac=null},atomComparer:function(t){return t?this._rac||(this._rac=this._createReverseAtomComparer()):this._dac||(this._dac=this._createDirectAtomComparer())},_toDiscrete:function(){this.isDiscrete=!0},_toCalculated:function(){this.isCalculated=!0},_createReverseAtomComparer:function(){function t(t,n){return t===n?0:e.compare(n.value,t.value)}if(!this.isComparable)return s;var e=this;return t},_createDirectAtomComparer:function(){function t(t,n){return t===n?0:e.compare(t.value,n.value)}if(!this.isComparable)return a;var e=this;return t},format:function(){return this._format},formatter:function(){return this._formatter},converter:function(){return this._converter}}),Mt.DimensionType.cast={Date:function(t){return t instanceof Date?t:new Date(t)},Number:function(t){return t=Number(t),isNaN(t)?null:t},String:String,Boolean:Boolean,Object:Object,Any:null},Mt.DimensionType.dimensionGroupName=function(t){return t.replace(/^(.*?)(\d*)$/,"$1")},Mt.DimensionType.valueTypeName=function(e){if(null==e)return"Any";switch(e){case Boolean:return"Boolean";case Number:return"Number";case String:return"String";case Object:return"Object";case Date:return"Date";default:throw t.error.argumentInvalid("valueType","Invalid valueType function: '{0}'.",[e])}},t.type("cdo.ComplexType").init(function(e,n){if(this._dims={},this._dimsList=[],this._dimsNames=[],this._calculations=[],this._calculatedDimNames={},this._dimsIndexByName=null,this._dimsByGroup={},this._dimsNamesByGroup={},this.format=Ut(null,t.get(n,"formatProto")),this.nullNumberAtom=new Mt.NumberAtom(this,null),e)for(var r in e)this.addDimension(r,e[r])}).add({describe:function(){var e=t.textTable(2).rowSep().row("Dimension","Properties").rowSep();return this._dimsList.forEach(function(t){var n=[];n.push('"'+t.label+'"'),n.push(t.valueTypeName),t.isComparable&&n.push("comparable"),t.isDiscrete||n.push("continuous"),t.isHidden&&n.push("hidden"),e.row(t.name,n.join(", "))}),e.rowSep(!0),"COMPLEX TYPE INFORMATION\n"+e()+"\n"},dimensions:function(e,n){if(null==e)return this._dims;var r=t.getOwn(this._dims,e,null);if(!r&&t.get(n,"assertExists",!0))throw t.error.argumentInvalid("name","Undefined dimension '{0}'",[e]);return r},filterExtensionDimensionNames:function(e){return e.filter(function(e){return!!t.hasOwn(this,e)},this._dims)},dimensionsList:function(){return this._dimsList},calculatedDimensionsList:function(){return this._calcDimsList},dimensionsNames:function(){return this._dimsNames},groupDimensions:function(e,n){var r=t.getOwn(this._dimsByGroup,e);if(!r&&t.get(n,"assertExists",!0))throw t.error.operationInvalid("There is no dimension type group with name '{0}'.",[e]);return r},groupDimensionsNames:function(e,n){var r=t.getOwn(this._dimsNamesByGroup,e);if(!r&&t.get(n,"assertExists",!0))throw t.error.operationInvalid("There is no dimension type group with name '{0}'.",[e]);return r},addDimension:function(e,n){e||t.fail.argumentRequired("name"),!t.hasOwn(this._dims,e)||t.fail.operationInvalid("A dimension type with name '{0}' is already defined.",[e]);var r=new Mt.DimensionType(this,e,n);this._dims[e]=r,this._dimsIndexByName=null;var i,o=r.group;if(o){var a,s=t.getOwn(this._dimsByGroup,o);s?a=this._dimsNamesByGroup[o]:(s=this._dimsByGroup[o]=[],a=this._dimsNamesByGroup[o]=[]),i=t.array.insert(a,e,t.compare),i=~i,t.array.insertAt(s,i,r)}var l,u=this._dimsList.length;if(o){i=r.groupLevel;for(var c=0;c<u;c++){var h=this._dimsList[c];if(h.group===o){if(h.groupLevel>i){l=c;break}l=c+1}}null==l&&(l=u)}else l=u;return t.array.insertAt(this._dimsList,l,r),t.array.insertAt(this._dimsNames,l,e),r._calculate&&(l=t.array.binarySearch(this._calcDimsList,r._calculationOrder,t.compare,function(t){return t._calculationOrder}),l>=0?l++:l=~l,t.array.insertAt(this._calcDimsList,l,r)),r},addCalculation:function(e){e||t.fail.argumentRequired("calcSpec");var n=e.calculation||t.fail.argumentRequired("calculations[i].calculation"),r=e.names;if((r=t.string.is(r)?r.split(/\s*\,\s*/):t.array.as(r))&&r.length){var i=this._calculatedDimNames;r.forEach(function(e){if(e){e=e.replace(/^\s*(.+?)\s*$/,"$1"),!t.hasOwn(i,e)||t.fail.argumentInvalid("calculations[i].names","Dimension name '{0}' is already being calculated.",[e]);var n=this._dims[e]||t.fail.argumentInvalid("calculations[i].names","Undefined dimension with name '{0}'' ",[e]);i[e]=!0,n._toCalculated()}},this)}this._calculations.push(n)},isCalculated:function(e){return t.hasOwn(this._calculatedDimNames,e)},_calculate:function(t){var e=this._calculations,n=e.length;if(n){for(var r={},i=0;i<n;i++)(0,e[i])(t,r);return r}},sortDimensionNames:function(e,n){var r=this._dimsIndexByName;return r||(r=t.query(this._dimsList).object({name:function(t){return t.name},value:function(t,e){return e}}),this._dimsIndexByName=r),e.sort(function(e,i){return t.compare(r[n?n(e):e],r[n?n(i):i])}),e}}),t.type("cdo.ComplexTypeProject").init(function(t){this._dims={},this._dimList=[],this._dimGroupsDims={},this._dimGroupSpecs=t||{},this._calcList=[]}).add({_ensureDim:function(e,n){e||t.fail.argumentInvalid("name","Invalid dimension name '{0}'.",[e]);var r=t.getOwn(this._dims,e);if(r)n&&t.setUDefaults(r.spec,n);else{r=this._dims[e]=this._createDim(e,n),this._dimList.push(r);var i=t.array.lazy(this._dimGroupsDims,r.groupName);t.array.insert(i,e,t.compare)}return r},hasDim:function(e){return t.hasOwn(this._dims,e)},setDim:function(e,n){var r=this._ensureDim(e).spec;return n&&t.copy(r,n),this},setDimDefaults:function(e,n){return t.setUDefaults(this._ensureDim(e).spec,n),this},_createDim:function(e,n){var r=Mt.DimensionType.dimensionGroupName(e),i=this._dimGroupSpecs[r];return i&&(n=t.create(i,n)),{name:e,groupName:r,spec:n||{}}},readDim:function(e,n){var r=this._ensureDim(e,n);if(r.isRead)throw t.error.operationInvalid("Dimension '{0}' already is the target of a reader.",[e]);if(r.isCalc)throw t.error.operationInvalid("Dimension '{0}' is being calculated, so it cannot be the target of a reader.",[e]);r.isRead=!0},calcDim:function(e,n){var r=this._ensureDim(e,n);if(r.isCalc)throw t.error.operationInvalid("Dimension '{0}' already is being calculated.",[e]);if(r.isRead)throw t.error.operationInvalid("Dimension '{0}' is the target of a reader, so it cannot be calculated.",[e]);r.isCalc=!0},isReadOrCalc:function(e){if(e){var n=t.getOwn(this._dims,e);if(n)return n.isRead||n.isCalc}return!1},groupDimensionsNames:function(t){return this._dimGroupsDims[t]},setCalc:function(e){e||t.fail.argumentRequired("calculations[i]"),e.calculation||t.fail.argumentRequired("calculations[i].calculation");var n=e.names;n=t.string.is(n)?n.split(/\s*\,\s*/):t.array.as(n),n&&n.length&&n.forEach(this.calcDim,this),this._calcList.push(e)},configureComplexType:function(t,e){this._dimList.forEach(function(n){var r=n.name,i=n.spec;i=this._extendSpec(r,i,e),t.addDimension(r,i)},this),this._calcList.forEach(function(e){t.addCalculation(e)})},_extendSpec:function(e,n,r){var i=Mt.DimensionType.dimensionGroupName(e);switch(n||(n={}),i){case"category":t.get(r,"isCategoryTimeSeries",!1)&&void 0===n.valueType&&(n.valueType=Date);break;case"value":void 0===n.valueType&&(n.valueType=Number)}return void 0!==n.converter||n.valueType!==Date||n.rawFormat||(n.rawFormat=t.get(r,"timeSeriesFormat")),n.formatProto=t.get(r,"formatProto"),n}}),t.type("cdo.Atom").init(function(e,n,r,i,o){this.dimension=e,this.id=null==n?-t.nextId():t.nextId(),this.value=n,this._label=null==r?null:r,void 0!==i&&(this.rawValue=i),this.key=o}).add({isVirtual:!1,rawValue:void 0,get label(){var t=this._label;return null===t&&(this._label=t=this.dimension.format(this.value,this.rawValue)),t},set label(e){this._label=t.string.to(e)},get labelPercent(){return this.dimension.type.format().percent()(this.value)},toString:function(){var t=this.label;return null!=t?t:(t=this.value,null!=t?""+t:"")}}),t.type("cdo.NumberAtom").init(function(e,n,r){this.complexType=e,this.id=t.nextId(),this.value=null==n?null:n,this._label=null==r?null:r,this.key=null==n?"":n.toString()}).add({dimension:null,get key(){return""+this.value},get rawValue(){return this.value},get label(){var t=this._label;return null===t&&(this._label=t=this.complexType.format.number()(this.value,this.rawValue)),t},set label(e){this._label=t.string.to(e)},get labelPercent(){return this.complexType.format.percent()(this.value)}});var Nt=1;t.type("cdo.Complex").init(function(e,n,r,i,o,a){this.id=Nt++,i||(i=null);var s;e?(s=e.owner,null===i&&(i=e.atoms)):s=this,this.owner=s,this.atoms=i?Object.create(i):{};var l=!!r;if(r||(r=s.type._dimsNames),n){var u,c=this.atoms,h=s._dimensions,d=function(e){var r=n[e],o=h[e];if(void 0===o){if(!l)throw t.error.operationInvalid("Extension atom values require dimension names to be specified.");if(!(r instanceof Mt.Atom))throw t.error.operationInvalid("Extension atom values must be cdo.Atom instances.");c[e]=r}else r=o.intern(r),null==r.value||null!==i&&r===i[e]||(c[e]=r)};if(l)for(var f=-1,p=r.length;++f<p;)d(r[f]);else for(u in n)d(u);if(a){n=s.type._calculate(this);for(u in n)t.hasOwnProp.call(c,u)||d(u)}}this._initValueKeyLabel(r,o)}).add({labelSep:" ~ ",keySep:"~",value:null,label:null,rawValue:void 0,_initValueKeyLabel:function(t,e){var n,r=t.length;if(0===r)this.key="",this.value=null,e&&(this.label="");else if(1===r)n=this.atoms[t[0]],this.key=this._getAtomKey(n),this.value=n.value,this.rawValue=n.rawValue,e&&(this.label=n.label);else{for(var i,o,a,s="",l=this.owner.keySep,u=this.owner.labelSep,c=this.atoms,h="",d=-1;++d<r;)n=c[t[d]],0===d?i=n.key:i+=l+n.key,o=this._getAtomKey(n),null!==o&&(0===d?s=o:s+=l+o),e&&""!==(a=n.label)&&(""===h?h=a:h+=u+a);this.value=this.rawValue=i,this.key=s,e&&(this.label=h)}},_getAtomKey:function(t){return t.key},getSpecifiedAtom:function(t){return this.atoms[t]},ensureLabel:function(){var e=this.label;if(null==e){e="";var n=this.owner.labelSep;t.eachOwn(this.atoms,function(t){var r=t.label;r&&(e?e+=n+r:e=r)}),this.label=e}return e},view:function(t){return new Mt.ComplexView(this,t)},toString:function(){var e=[""+t.qualNameOf(this.constructor)];return null!=this.index&&e.push("#"+this.index),this.owner.type.dimensionsNames().forEach(function(n){e.push(n+": "+t.describe(this.atoms[n].value))},this),e.join(" ")},rightTrimKeySep:function(t){return t&&Mt.Complex.rightTrimKeySep(t,this.owner.keySep)},absKeyTrimmed:function(){return this.rightTrimKeySep(this.absKey)},keyTrimmed:function(){return this.rightTrimKeySep(this.key)}}),Mt.Complex.rightTrimKeySep=function(t,e){if(t&&e)for(var n,r=e.length;t.lastIndexOf(e)===(n=t.length-r)&&n>=0;)t=t.substr(0,n);return t},Mt.Complex.values=function(t,e){var n=t.atoms;return e.map(function(t){return n[t].value})},Mt.Complex.compositeKey=function(t,e){for(var n="",r=e.length,i=t.owner.keySep,o=t.atoms,a=0;a<r;a++){var s=o[e[a]].key;a?n+=i+s:n=s}return n},Mt.Complex.labels=function(t,e){var n=t.atoms;return e.map(function(t){return n[t].label})};var Tt=t.propGet("id");t.type("cdo.ComplexView",Mt.Complex).init(function(t,e){this.source=t,this.viewDimNames=e,this.base(t,t.atoms,e,t.owner.atoms,!0)}).add({values:function(){return Mt.Complex.values(this,this.viewDimNames)},labels:function(){return Mt.Complex.labels(this,this.viewDimNames)}}),t.type("cdo.Datum",Mt.Complex).init(function(t,e,n){this.base(t,e,n,null,!1,!0),this.key||(this.key=this.id)}).add({isSelected:!1,isVisible:!0,isNull:!1,isVirtual:!1,isTrend:!1,trend:null,isInterpolated:!1,interpolation:null,_getAtomKey:function(t){return t.dimension.isKey?t.key:null},setSelected:function(t){if(this.isNull)return!1;t=null==t||!!t;var e=this.isSelected!==t;return e&&(t?this.isSelected=!0:delete this.isSelected,E.call(this.owner,this,t)),e},toggleSelected:function(){return this.setSelected(!this.isSelected)},setVisible:function(t){if(this.isNull)return!1;t=null==t||!!t;var e=this.isVisible!==t;return e&&(this.isVisible=t,L.call(this.owner,this,t)),e},toggleVisible:function(){return this.setVisible(!this.isVisible)}});var At=Mt.Datum.isSelected=t.propGet("isSelected");Mt.Datum.isSelectedT=c,Mt.Datum.isSelectedF=h,Mt.Datum.isVisibleT=d,Mt.Datum.isVisibleF=f,Mt.Datum.isNullT=p,Mt.Datum.isNullF=m,t.type("cdo.TrendDatum",Mt.Datum).init(function(t,e,n,r){this.base(t,e,n),this.trend=r}).add({isVirtual:!0,isTrend:!0}),t.type("cdo.InterpolationDatum",Mt.Datum).init(function(t,e,n,r,i){this.base(t,e,n),this.interpolation=r,this.interpDimName=i}).add({isVirtual:!0,isInterpolated:!0});var Pt={abs:!0};t.type("cdo.Dimension").init(function(e,n){this.data=e,this.type=n,this.root=this,this.owner=this;var r=n.name;if(this.name=r,this._atomComparer=n.atomComparer(),this._atomsByKey={},this.isKey=n.isKey,e.isOwner())this._atoms=[],this._lazyInit=null,_.call(this);else{var i,o=e.parent;o?(i=o._dimensions[r],S.call(i,this),this.root=e.parent.root):(o=e.linkParent,o||t.assert("Data must have a linkParent"),i=o._dimensions[r],k.call(i,this)),this._nullAtom=this.owner._nullAtom,this._lazyInit=function(){this._lazyInit=null;for(var e=this.data._datums,o=e.length,a=this._atomsByKey,s=n.isDiscrete,l=0;l<o;l++){var u=e[l];if(s||!u.isNull){var c=u.atoms[r];a[c.key]=c}}this._atoms=i.atoms().filter(function(e){return t.hasOwnProp.call(a,e.key)})}}}).add({parent:null,linkParent:null,_linkChildren:null,_atomsByKey:null,_atomVisibleDatumsCount:null,_disposed:!1,_nullAtom:null,_virtualNullAtom:null,_visibleAtoms:null,_visibleIndexes:null,_atomComparer:null,_atoms:null,_sumCache:null,count:function(){return null!==this._lazyInit&&this._lazyInit(),this._atoms.length},isVisible:function(e){return null!==this._lazyInit&&this._lazyInit(),t.hasOwn(this._atomsByKey,e.key)||t.assert("Atom must exist in this dimension."),M.call(this)[e.key]>0},atoms:function(e){null!==this._lazyInit&&this._lazyInit();var n=t.get(e,"visible");return null==n?this._atoms:(n=!!n,this._visibleAtoms||(this._visibleAtoms={}),this._visibleAtoms[n]||(this._visibleAtoms[n]=T.call(this,n)))},indexes:function(n){null!==this._lazyInit&&this._lazyInit();var r=t.get(n,"visible");return null==r?e.range(0,this._atoms.length):(r=!!r,this._visibleIndexes||(this._visibleIndexes={}),this._visibleIndexes[r]||(this._visibleIndexes[r]=N.call(this,r)))},atom:function(t){if(null==t||""===t)return this._nullAtom;if(t instanceof Mt.Atom)return t;null!==this._lazyInit&&this._lazyInit();var e=this.type._key,n=e?e.call(null,t):t;return this._atomsByKey[n]||null},getDistinctAtoms:function(t){var e,n,r,i=[],o=t?t.length:0;if(o){r={};for(var a=0;a<o;a++)(e=this.atom(t[a]))&&!r[n="\0"+e.key]&&(r[n]=e,i.push(e))}return i},extent:function(e){var n,r=this.atoms(e),i=r.length;if(i){var o=this._nullAtom&&null==r[0].value?1:0,a=i-o;if(a>0){var s=r[o],l=r[i-1];if(s!==l&&t.get(e,"abs",!1)){var u=s.value<0?-1:1,c=l.value<0?-1:1;if(u===c)c<0&&(n=l,l=s,s=n);else if(a>2){l.value<-s.value&&(l=s);var h=t.array.binarySearch(r,0,this.type.comparer(),function(t){return t.value});if(h<0){h=~h;var d=r[h-1],f=r[h];s=-d.value<f.value?d:f}else s=r[h]}else l.value<-s.value&&(n=l,l=s,s=n)}return{min:s,max:l}}}},min:function(t){var e=this.atoms(t),n=e.length;if(n){var r=this._nullAtom&&null==e[0].value?1:0;return n>r?e[r]:void 0}},max:function(t){var e=this.atoms(t),n=e.length;return n&&null!=e[n-1].value?e[n-1]:void 0},sumAbs:function(t){return this.sumAbsAtom(t).value},value:function(t){return this.valueAtom(t).value},valueAbs:function(t){return this.valueAbsAtom(t).value},sum:function(t){return this.sumAtom(t).value},sumAtom:function(e){var n=!!t.get(e,"abs",!1),r=t.get(e,"zeroIfNone",!0),i=v(e)+":"+n,o=t.getOwn(this._sumCache,i);if(void 0===o){var a=this.name,s=this.data.datums(null,e).reduce(function(t,e){if(e.isNull)return t;var r=e.atoms[a].value;return null===r?t:(n&&r<0&&(r=-r),null!=t?t+r:r)},null);(this._sumCache||(this._sumCache={}))[i]=o=this.read(s)}return r&&null===o.value?this.read(0):o},sumAbsAtom:function(e){return e=e?t.create(e,Pt):Pt,this.sumAtom(e)},valueAtom:function(t){return this.sumAtom(t)},valueAbsAtom:function(t){var e=this.valueAtom(t);return e.value<0?this.read(-e.value):e},percent:function(t,e){var n=t instanceof Mt.Atom?t.value:t;if(!n)return 0;var r=this.sumAbs(e);return r?Math.abs(n)/r:0},valuePercent:function(t){var e=this.valueAbs(t);if(!e)return 0;var n=this.data.parent;return n?e/n.dimensionsSumAbs(this.name,t):1},percentOverParent:function(t){return this.valuePercent(t)},format:function(e,n){return t.string.to(this.type._formatter?this.type._formatter.call(null,e,n):e)},intern:function(t,e){return this._read(t,!0,e)},read:function(t){return this._read(t,!1)},_read:function(e,n,r){var i,o;if(null==e||""===e)return this._nullAtom||(n?b.call(this):this.owner._virtualNullAtom);if("object"==typeof e){if(e instanceof Mt.Atom){if(e.dimension!==this)throw t.error.operationInvalid("Atom is of a different dimension.");return e}if("v"in e&&(o=e.f,null==(e=e.v)||""===e))return this._nullAtom||(n?b.call(this,o):this.owner._virtualNullAtom)}var a,s=this.type;if(r||null===(a=s._converter))i=e;else if(null==(i=a(e))||""===i)return this._nullAtom||(n?b.call(this):this.owner._virtualNullAtom);if(null!==(a=s.cast)&&(null==(i=a(i))||""===i))return this._nullAtom||(n?b.call(this):this.owner._virtualNullAtom);var l=""+(null!==(a=s._key)?a(i):i);if(0===l.length)throw t.error.operationInvalid("Only a null value can have an empty key.");var u;return n?(null!==this._lazyInit&&this._lazyInit(),void 0!==(u=this._atomsByKey[l])?(n&&!r&&u.isVirtual&&delete u.isVirtual,u):g.call(this,e,l,i,o,r)):void 0!==(u=this.owner._atomsByKey[l])?u:new Mt.Atom(this,i,o,e,l)},dispose:function(){var t,e=this;e._disposed||(n(e.childNodes,"parent"),n(e._linkChildren,"linkParent"),(t=e.parent)&&i(t,"childNodes",e,"parent"),(t=e.linkParent)&&i(t,"_linkChildren",e,"linkParent"),C.call(e),e._lazyInit=e._atoms=e._nullAtom=e._virtualNullAtom=null,e._disposed=!0)}}),t.type("cdo.Data",Mt.Complex).init(function(n){if(null==n)throw t.error.argumentRequired("keyArgs");this._visibleNotNullDatums=new t.Map;var r,i,o,a,s,l,u=null,c=null,h=this.parent=n.parent||null;if(h)this.root=h.root,this.depth=h.depth+1,this.type=h.type,r=h.owner,u=n.datums||t.fail.argumentRequired("datums"),c=n.atoms||t.fail.argumentRequired("atoms"),a=n.atomsDimNames||t.fail.argumentRequired("atomsDimNames"),o=h.atoms,l=n.extensionDatums||h.extensionDatums,i=Object.create(h.atomsIsSet),a.forEach(function(t){i[t]=!0});else{this.root=this,a=[];var d=n.linkParent||null;d?(r=d.owner,this.type=r.type,u=n.datums||t.fail.argumentRequired("datums"),this._leafs=[],o=n.atomsBase||d.atoms,i=n.atomsBaseIsSet||Object.create(d.atomsIsSet),l=n.extensionDatums||d.extensionDatums,s=t.get(n,"index",null),P.call(d,this,s)):(r=this,this.type=n.type||t.fail.argumentRequired("type"),o={},i={},n.labelSep&&(this.labelSep=n.labelSep),n.keySep&&(this.keySep=n.keySep),this._selectedNotNullDatums=new t.Map)}this.owner=r,this._datums=[],this._datumsById={},this._datumsByKey={},null!==u&&this._addDatumsLocal(u),this._atomsBase=o,this.atomsIsSet=i,this.extensionDatums=l||null,this._dimensions={},this._dimensionsList=[],this.type.dimensionsList().forEach(this._initDimension,this),this.base(r,c,a,o,!0),e.Dom.Node.call(this),h?(s=t.get(n,"index",null),A.call(h,this,s),this.absKey=h.absKey?t.string.join(r.keySep,h.absKey,this.key):this.key,this.absLabel=h.absLabel?t.string.join(r.labelSep,h.absLabel,this.label):this.label):(this.absKey=this.key,this.absLabel=this.label)}).add(e.Dom.Node).add({parent:null,linkParent:null,_dimensions:null,_dimensionsList:null,_freeDimensionNames:null,_linkChildren:null,_leafs:null,_childrenByKey:null,_visibleNotNullDatums:null,_selectedNotNullDatums:null,_groupByCache:null,_sumAbsCache:null,treeHeight:null,_datums:null,_datumsById:null,_datumsByKey:null,depth:0,label:"",absLabel:"",_disposed:!1,_isFlattenGroup:!1,_isDegenerateFlattenGroup:!1,_initDimension:function(t){var e=new Mt.Dimension(this,t);this._dimensions[t.name]=e,this._dimensionsList.push(e)},dimensions:function(e,n){if(null==e)return this._dimensions;var r=t.getOwn(this._dimensions,e);if(!r&&t.get(n,"assertExists",!0))throw t.error.argumentInvalid("name","Undefined dimension '{0}'.",[e]);return r},dimensionsList:function(){return this._dimensionsList},getSpecifiedAtom:function(t){return!0===this.atomsIsSet[t]?this.atoms[t]:null},freeDimensionsNames:function(){var t=this._freeDimensionNames;return t||(this._freeDimensionNames=t=this.type.dimensionsNames().filter(function(t){var e=this.atoms[t];return!(e instanceof Mt.Atom)||null==e.value},this)),t},isOwner:function(){return this.owner===this},children:function(){var e=this.childNodes;return e.length>0?t.query(e):t.query()},child:function(e){return t.getOwn(this._childrenByKey,e,null)},childCount:function(){return this.childNodes.length},contains:function(e){return t.hasOwn(this._datumsById,e.id)},datumByKey:function(e){return t.getOwn(this._datumsByKey,e,null)},leafs:function(){return t.query(this._leafs)},count:function(){return this._datums.length},firstDatum:function(){return this._datums.length>0?this._datums[0]:null},firstAtoms:function(){return(this.firstDatum()||this).atoms},singleDatum:function(){var t=this._datums;return 1===t.length?t[0]:null},dispose:function(){var t=this;if(!t._disposed){O.call(t);var e;(e=t._selectedNotNullDatums)&&e.clear(),t._visibleNotNullDatums.clear(),e=t._dimensionsList;for(var n=0,r=e.length;n<r;n++)e[n].dispose();t._dimensions=null,t._dimensionsList=null,(e=t.parent)&&(e.removeChild(t),t.parent=null),(e=t.linkParent)&&j.call(e,t),t._disposed=!0}},disposeChildren:function(){O.call(this)}}),Mt.Data.add({selectedCount:function(){return this.isOwner()?this._selectedNotNullDatums.count:this.datums(null,{selected:!0}).count()},selectedDatums:function(){return this.isOwner()?this._selectedNotNullDatums.values():this.datums(null,{selected:!0}).array()},selectedDatumMap:function(){if(this.isOwner())return this._selectedNotNullDatums.clone();var e=this.datums(null,{selected:!0}).object({name:t.propGet("id")});return new t.Set(e)},visibleCount:function(){return this._visibleNotNullDatums.count},replaceSelected:function(e){t.array.is(e)||(e=e.array());var n=t.query(e).where(At).object({name:Tt}),r=this.owner.clearSelected(function(e){return!t.hasOwn(n,e.id)});return r|=Mt.Data.setSelected(e,!0)},clearSelected:function(t){if(this.owner!==this)return this.owner.clearSelected(t);if(!this._selectedNotNullDatums.count)return!1;var e;return t?(e=!1,this._selectedNotNullDatums.values().filter(t).forEach(function(t){e=!0,l.call(t),this._selectedNotNullDatums.rem(t.id)},this)):(e=!0,this._selectedNotNullDatums.values().forEach(function(t){l.call(t)}),this._selectedNotNullDatums.clear()),e}}),Mt.Data.setSelected=function(e,n){var r=0;return e&&t.query(e).each(function(t){r|=t.setSelected(n)}),!!r},Mt.Data.toggleSelected=function(e,n){t.array.isLike(e)||(e=t.query(e).array());var r=t.query(e),i=n?r.any(At):r.all(u);return this.setSelected(e,!i)},Mt.Data.setVisible=function(e,n){var r=0;return e&&t.query(e).each(function(t){r|=t.setVisible(n)}),!!r},Mt.Data.toggleVisible=function(e){t.array.isLike(e)||(e=t.query(e).array());var n=t.query(e).all(t.propGet("isVisible"));return Mt.Data.setVisible(e,!n)},Mt.Data.add({select:null,load:function(e,n){I.call(this);var r=t.get(n,"where"),i=t.get(n,"isNull"),o=t.get(n,"isAdditive",!1),a=t.query(e).select(function(t){var e=new Mt.Datum(this,t);return i&&i(e)&&(e.isNull=!0),r&&!r(e)?null:e},this);B.call(this,a,{isAdditive:o,doAtomGC:!0})},clearVirtuals:function(){var e=this._datums,n=e.length;if(n>0){this._sumAbsCache=null;for(var r,i=0;i<n;){var o=e[i];o.isVirtual?(U.call(this,o),n--,r=!0):i++}if(r){if(!e.length&&this.parent)return void this.dispose();var a=this.childNodes;if(a)for(i=0,n=a.length;i<n;){var s=a[i];s.clearVirtuals(),s.parent?i++:n--}this._linkChildren&&this._linkChildren.forEach(function(t){t.clearVirtuals()})}}t.eachOwn(this._dimensions,function(t){x.call(t)})},add:function(t){I.call(this),B.call(this,t,{isAdditive:!0,doAtomGC:!0})},_addDatumsSimple:function(t){this._addDatumsLocal(t),this._onDatumsAdded(t)},_onDatumsAdded:function(t){var e=this._linkChildren;if(e)for(var n=-1,r=e.length;++n<r;)e[n]._addDatumsSimple(t)},_addDatumsLocal:function(t){var e=this._datums,n=this._visibleNotNullDatums,r=this._selectedNotNullDatums,i=this._datumsById,o=this._datumsByKey,a=!!this._dimensions;this._sumAbsCache=null;for(var s=-1,l=t.length;++s<l;){var u=t[s],c=u.id;void 0===i[c]&&(e.push(u),i[c]=u,o[u.key]=u,a&&W.call(this,u,!0,!1),u.isNull||(r&&u.isSelected&&r.set(c,u),u.isVisible&&n.set(c,u)))}},groupBy:function(e,n){var r,i,o=new Mt.GroupingOper(this,e,n),a=o.key;return a&&(r=this._groupByCache,i=r&&r[a]),i?t.debug>=7&&t.log("[GroupBy] Cache key hit '"+a+"'"):(t.debug>=7&&t.log("[GroupBy] "+(a?"Cache key not found : '"+a+"' on '"+this.id+"'":"No Cache key")),i=o.execute(),a&&((r||(this._groupByCache={}))[a]=i)),i},where:function(e,n){var r=e&&V.call(this,e),i=this._datums;i.length>0&&(r?i=G.call(this,r,n).array():n&&(i=q(t.query(i),n).array()));var o=(r||n)&&z(r,n);return new Mt.FilteredData({linkParent:this,datums:i,where:o})},datums:function(e,n){if(0===this._datums.length)return t.query();if(!e)return n?q(t.query(this._datums),n):t.query(this._datums);var r=V.call(this,e);return G.call(this,r,n)},datum:function(t,e){return this.datums(t,e).first()||null},dimensionsSumAbs:function(t,e){var n=this.dimensionNumberValue(t,e).value;return null!==n&&n<0?-n:n},dimensionNumberValue:function(t,e){var n=this._createDimensionOperArgs(t,e);return this._dimensionNumberValue(n)},_createDimensionOperArgs:function(e,n){var r,i,o=null;"function"==typeof e?(r=e,i=t.get(n,"discrimPossibleDims")||null,null!==(o=t.get(n,"discrimKey")||null)&&(o="discrim:"+o)):(r=t.fun.constant(e),i=[e],o=e);var a=null;return null!==o&&(a=o+":"+v(n)+":"+(i||[]).join("|")),{discrimFun:r,discrimPossibleDimNames:i,cacheKey:a,keyArgs:n}},_dimensionNumberValue:function(e){var n,r=e.cacheKey;return null!==r&&void 0!==(n=t.getOwn(this._sumAbsCache,r))||(n=this._dimensionNumberValueCore(e),null!==r&&((this._sumAbsCache||(this._sumAbsCache={}))[r]=n)),n},_dimensionNumberValueCore:function(e){var n,r=e.discrimFun(this,null!==e.discrimPossibleDimNames);if(0===this.childCount()){if(null!==r)return this.dimensions(r).valueAtom(e.keyArgs);n=t.query(e.discrimPossibleDimNames).select(function(t){return this.dimensions(t).valueAbsAtom(e.keyArgs).value},this).reduce(t.addPreservingNull,null)}else n=this.children().where(function(t){return!t._isFlattenGroup||t._isDegenerateFlattenGroup}).select(function(t){var n=t._dimensionNumberValue(e).value;return null!==n&&n<0?-n:n}).reduce(t.addPreservingNull,null);return null!==r?this.dimensions(r).read(n):null===n?this.type.nullNumberAtom:new Mt.NumberAtom(this.type,n)},dimensionPercentValue:function(t,e){function n(t){return null===a?new Mt.NumberAtom(this.type,t):a.read(t)}var r=this._createDimensionOperArgs(t,e),i=this._dimensionNumberValue(r),o=i.value;if(null===o)return i;var a=i.dimension;if(0===o)return n.call(this,0);var s=this.parent;if(null===s)return n.call(this,1);var l=s._dimensionNumberValue(r);return n.call(this,Math.abs(o)/l.value)}}).type().add({lca:function(t){var e,n,r,i=t.length,o=null;if(i){if(1===i)return t[0];var a=1;n=R(t[0]);do{if(e=t[a],r=R(e),!(o=F(n,r)))return null;n=r}while(++a<i)}return o}}),Mt.querySpecPredicate=$,t.type("cdo.FilteredData",Mt.Data).init(function(e){if(null==e||null!=e.parent||null==e.linkParent)throw t.error.argumentRequired("keyArgs.linkParent");this.base(e),this._wherePred=e.where||t.fail.argumentRequired("keyArgs.where")}).add({_addDatumsSimple:function(t){t=t.filter(this._wherePred),this.base(t)}}),t.type("cdo.GroupingData",Mt.Data).init(function(e){if(null==e)throw t.error.argumentRequired("keyArgs");this.base(e),this.groupingOper=e.groupingOper||t.fail.argumentRequired("keyArgs.groupingOper"),this.groupingSpec=e.groupingSpec||null,this.groupingLevelSpec=e.groupingLevelSpec||null}),t.type("cdo.GroupingRootData",Mt.GroupingData).init(function(e){if(null==e||null!=e.parent||null==e.linkParent)throw t.error.argumentRequired("keyArgs.linkParent");var n=e.groupingSpec;if(null==n)throw t.error.argumentRequired("keyArgs.groupingSpec");var r=e.groupingOper;if(r&&n.hasExtensionComplexTypes){e=Object.create(e);var i=e.atomsBase=Object.create(e.linkParent.atoms),o=r._extensionDataSetsMap;n.extensionDimensions().each(function(t){void 0===i[t.fullName]&&(i[t.fullName]=o[t.dataSetName].owner.atoms[t.name])})}this.base(e)}).add({_addDatumsSimple:function(t){t=this.groupingOper.executeAdd(this,t),this._onDatumsAdded(t)}}),t.type("cdo.GroupData",Mt.GroupingData).init(function(e){if(null==e||null==e.parent)throw t.error.argumentRequired("keyArgs.parent");this.base(e)}),Mt.Data.add({getInfo:function(){
var e=["DATA SUMMARY",t.logSeparator,"  Dimension",t.logSeparator];return t.eachOwn(this.dimensions(),function(t,n){var r=t.count(),i=t.type,o=[];o.push(),o.push(i.valueTypeName),i.isComparable&&o.push("comparable"),i.isDiscrete||o.push("continuous"),i.isHidden&&o.push("hidden"),e.push("  "+n+' ("'+i.label+'", #'+r+")\n\t"+t.atoms().slice(0,10).map(function(t){return t.label}).join(", ")+(r>10?"...":""))}),e.join("\n")},getValues:function(){return e.range(0,this.getCategoriesSize()).map(function(t){return this._getValuesForCategoryIndex(t)},this)},_getDimensionValues:function(t){return this.dimensions(t).atoms().map(function(t){return t.value})},_getDimensionVisibleValues:function(t){return this.dimensions(t).atoms({visible:!0}).map(function(t){return t.value})},getSeries:function(){return this._getDimensionValues("series")},getVisibleSeriesIndexes:function(){return this.dimensions("series").indexes({visible:!0})},getVisibleCategoriesIndexes:function(){return this.dimensions("category").indexes({visible:!0})},getVisibleSeries:function(){return this._getDimensionVisibleValues("series")},getCategories:function(){return this._getDimensionValues("category")},getVisibleCategories:function(){return this._getDimensionVisibleValues("category")},_getValuesForCategoryIndex:function(e){var n=this.dimensions("category").atoms()[e],r=this.datums({category:n}).uniqueIndex(function(t){return t.atoms.series.key});return this.dimensions("series").atoms().map(function(e){var n=t.getOwn(r,e.key);return n?n.atoms.value.value:null})},getSeriesSize:function(){var t=this.dimensions("series",{assertExists:!1});return t?t.count():0},getCategoriesSize:function(){var t=this.dimensions("category",{assertExists:!1});return t?t.count():0}}),t.type("cdo.DataOper").init(function(e,n){e||t.fail.argumentRequired("linkParent"),this._linkParent=e}).add({key:null,execute:t.abstractMethod}),t.type("cdo.GroupingOper",Mt.DataOper).init(function(e,n,r){if(n||t.fail.argumentRequired("groupingSpecs"),n=t.array.as(n),0===n.length)throw t.error.argumentRequired("groupingSpecText");t.get(r,"inverted",!1)&&(n=n.slice().reverse()),this.base(e,r);var i=t.get(r,"where"),o=i&&t.get(r,"whereKey")||"",a=t.get(r,"visible",null),s=t.get(r,"selected",null);this._preFilter=z(null,{visible:a,selected:s,where:i});var l=t.get(r,"isNull",null);this._postFilter=z(null,{isNull:l});var u=null==s&&!(i&&!o),c=u?[]:null,h="",d=null,f=t.get(r,"extensionDataSetsMap",null),p=t.get(r,"reverse",!1);this._groupSpecs=n.map(function(n){if(n instanceof Mt.GroupingSpec){if(n.complexType!==e.type)throw t.error.argumentInvalid("groupingSpecText","Invalid associated complex type.")}else n=Mt.GroupingSpec.parse(n,e.type);if(n.isNull)throw t.error.argumentInvalid("groupingSpecText","Null grouping specification.");return n.flatteningMode===Mt.FlatteningMode.SingleLevel&&(n=n.toSingleLevel()),p&&(n=n.reverse()),u&&c.push(n.key),null!==n.extensionComplexTypeNames&&n.extensionComplexTypeNames.forEach(function(e){var n;if(null===f||!(n=f[e]))throw t.error.operationInvalid("Grouping specification requires extension data set '{0}'.",[e]);null===d&&(d=Object.create(null)),d[e]=n,u&&(h+=e+":"+n.id+";")}),n}),this._extensionDataSetsMap=d,u&&(this.key=c.join("!!")+":"+[a,l,o,h].join(":"))}).add({_getExtensionDatumsMap:function(){var e=null,n=this._extensionDataSetsMap;if(n){e=Object.create(null);var r=this._linkParent.extensionDatums;if(t.query(Object.keys(n)).each(function(t){var i=n[t],o=i._datums;if(0===o.length)return!1;if(null!==r){var a=r[t];a&&(o=a.filter(function(t){return o.indexOf(t)>=0}))}if(0===o.length)return!1;e[t]=o}))return!1}return e},execute:function(){var e=this._linkParent._datums,n=t.query(e).where(this._preFilter),r=this._group(n);return this._generateData(r,null,this._linkParent,null)},executeAdd:function(e,n){var r=t.query(n).where(this._preFilter),i=this._group(r);return this._generateData(i,null,this._linkParent,e),i.datums},_group:function(e){var n={isRoot:!0,treeHeight:t.query(this._groupSpecs).select(function(t){return t.flatteningMode&Mt.FlatteningMode.Dfs?1:t.depth}).reduce(t.add,0),datums:[],datumsById:{},groupSpec:this._groupSpecs[0],groupLevelSpec:this._groupSpecs[0].levels[0]},r=this._getExtensionDatumsMap();return!1!==r&&this._groupSpecRecursive(n,t.query(e).array(),r,0),n},_groupSpecRecursive:function(t,e,n,r){var i=this._groupSpecs[r];0!=(i.flatteningMode&Mt.FlatteningMode.Dfs)?this._groupSpecRecursiveFlattened(t,e,n,i,r):this._groupSpecRecursiveNormal(t,e,n,i,r)},_groupSpecRecursiveNormal:function(t,e,n,r,i){function o(t,e,u,c){var h=a[c],d=c===s-1,f=l&&d;t.groupSpec=r,t.groupLevelSpec=h;for(var p=t.children=this._groupLevelDatums(h,t,e,u,!1),m=0,g=p.length;m<g;m++){var y=p[m];if(!f){var v=y.datums;y.datums=[],y.datumsById={},d?this._groupSpecRecursive(y,v,y.extensionDatumsMap,i+1):o.call(this,y,v,y.extensionDatumsMap,c+1)}this._addChildDatums(t.datums,t.datumsById,y.datums,n)}}var a=r.levels,s=a.length,l=i===this._groupSpecs.length-1;t.isRoot&&(t.label=r.rootLabel),o.call(this,t,e,n,0)},_addChildDatums:function(e,n,r,i){if(null===i)t.array.append(e,r);else for(var o=-1,a=r.length;++o<a;){var s=r[o];void 0===n[s.id]&&(n[s.id]=s,e.push(s))}},_groupSpecRecursiveFlattened:function(e,n,r,i,o){function a(e,n,i,f){for(var m=l[f],g=f===u-1,y=c&&g,v=this._groupLevelDatums(m,e,n,i,!0),b=c?e.datums:[],_=c?e.datumsById:{},w=0,x=v.length;w<x;w++){var C=v[w],S=C.datums;if(t.array.lazy(e,"_children").push(C),t.hasOwn(d,C.key))this._addChildDatums(b,_,S,r);else{var k=h.length;s||(p(C),e.isFlattenGroup=!0),y||(C.datums=[],C.datumsById={},g?this._groupSpecRecursive(C,S,i,o+1):a.call(this,C,S,i,f+1)),this._addChildDatums(b,_,C.datums,r),s&&(t.hasOwn(d,C.key)&&(C.isFlattenGroup||t.assert("Must be a parent for duplicate keys to exist."),1===C._children.length&&(h.splice(k,h.length-k),C.isDegenerateFlattenGroup=!0)),p(C),e.isFlattenGroup=!0)}}c||this._groupSpecRecursive(e,b,i,o+1)}var s=i.flatteningMode===Mt.FlatteningMode.DfsPost,l=i.levels,u=l.length,c=o===this._groupSpecs.length-1,h=[],d={},f={key:"",absKey:"",atoms:{},datums:[],datumsById:{},label:i.rootLabel,dimNames:[]},p=function(t){h.push(t),d[t.key]=t};e.children=h,e.childrenByKey=d,s||p(f),a.call(this,f,n,r,0),s&&p(f),e.datums=f.datums},_groupLevelDatums:function(e,n,r,i,o){function a(r,i){var a=u.call(e,r,i),s=t.hasOwnProp.call(f,a)&&f[a];s?p&&!p(r)||s.datums.push(r):(s=c.call(e,r,i),s.key=a,s.firstDatum=r,s.datums=!p||p(r)?[r]:[],s.extensionDatumsMap=i,o&&(null===m&&(m=r.owner.keySep),this._onNewChildNodeFlattened(a,m,s,e,n)),t.array.insert(d,s,h),f[a]=s)}function s(t,e){for(var n=-1,r=e.length;++n<r;)a.call(this,t,e[n])}function l(t,e,n){for(var r=v[e],o=r.dataSetName,a=i[o],s=-1,u=a.length,c=e+1,h=c>=v.length;++s<u;){var d=Object.create(n);d[o]=[a[s]],h?t.push(d):l(t,c,d)}}var u,c,h,d=[],f=Object.create(null),p=this._postFilter,m=null,g=-1,y=r.length,v=e.extensionDimensions;if(null!==v){u=e.buildKeyWithExtension,c=e.buildGroupNodeWithExtension,h=e.compareNodesWithExtension.bind(e);var b=[];for(l(b,0,i);++g<y;)s.call(this,r[g],b)}else for(u=e.buildKeyMain,c=e.buildGroupNodeMain,h=e.compareNodesMain.bind(e);++g<y;)a.call(this,r[g],i);if(p)for(g=d.length;g--;)0===d[g].datums.length&&d.splice(g,1);return d},_onNewChildNodeFlattened:function(e,n,r,i,o){if(t.copy(r.atoms,o.atoms),r.dimNames=i.accAllDimensionNames(),o.dimNames.length){var a=o.absKey+n+e;r.absKey=a,r.key=Mt.Complex.rightTrimKeySep(a,n)}else r.absKey=e},_generateData:function(e,n,r,i){var o=null,a=!1;if(e.isRoot)null!==i?(o=i,o._addDatumsLocal(e.datums)):(a=!0,o=new Mt.GroupingRootData({groupingOper:this,groupingSpec:e.groupSpec,groupingLevelSpec:e.groupLevelSpec,linkParent:r,datums:e.datums,extensionDatums:e.extensionDatumsMap}),o.treeHeight=e.treeHeight);else if(null!==i&&null!==(o=r.child(e.key))&&o._addDatumsSimple(e.datums),null===o){a=!0;var s,l=null;null!==i&&(s=r.childNodes).length>0&&(l=~t.array.binarySearch(s,e.datums[0],n.groupLevelSpec.mainDatumComparer)),o=new Mt.GroupData({groupingOper:this,groupingSpec:e.groupSpec,groupingLevelSpec:e.groupLevelSpec,parent:r,atoms:e.atoms,datums:e.datums,index:l,atomsDimNames:e.dimNames,extensionDatums:e.extensionDatumsMap})}if(a){e.isFlattenGroup&&(o._isFlattenGroup=!0,o._isDegenerateFlattenGroup=!!e.isDegenerateFlattenGroup);var u=e.label;u&&(o.label+=u,o.absLabel+=u)}var c=e.children,h=c?c.length:0;if(h>0)for(var d=-1;++d<h;)this._generateData(c[d],e,o,i);else if(a&&!e.isRoot){var f=o.root._leafs;o.leafIndex=f.length,f.push(o)}return o}}),t.space("cdo").FlatteningMode=t.makeEnum(["SingleLevel","DfsPre","DfsPost"],{zero:"None",all:"AllMask"}),Mt.FlatteningMode.Dfs=Mt.FlatteningMode.DfsPre|Mt.FlatteningMode.DfsPost,t.type("cdo.GroupingSpec").init(function(e,n,r,i){this.complexType=n||null,n=this.complexType;var o=null,a=[],s=[],l=[],u=!1,c=null;this.levels=t.query(e||void 0).where(function(t){return t.allDimensions.length>0}).select(function(t){return a.push(t.key),s.push.apply(s,t.dimensionNames()),t.allDimensions.forEach(function(t){if(t.dataSetName?(null===o&&(o=Object.create(null)),o[t.dataSetName]=!0,l.push(t.fullName)):l.push(t.name),null!==n&&!u){var e=t.dimensionType;e.isDiscrete?u=!0:null===c?c=e.valueType:c!==e.valueType&&(u=!0)}}),t._setAccAllDimNames(l.slice(0)),t}).array(),this.extensionComplexTypesMap=null,this.extensionComplexTypeNames=o&&Object.keys(o),null!==n&&o&&this._setExtensionComplexTypesMap(r),this._dimNames=s,this._allDimNames=l,this.depth=this.levels.length,this._isDiscrete=null!==n?u:void 0,this._singleContinuousValueType=null!==n?u?null:c:void 0,this.isSingleDimension=1===l.length,this.firstDimension=this.depth>0?this.levels[0].allDimensions[0]:null,this.lastDimension=this.depth>0?this.levels[this.depth-1].lastDimension():null,this.rootLabel=t.get(i,"rootLabel")||"",this.flatteningMode=t.get(i,"flatteningMode")||Mt.FlatteningMode.None,this._cacheKey=this._calcCacheKey(),this.key=this._cacheKey+"##"+a.join("||")}).add({_calcCacheKey:function(e){return[t.get(e,"flatteningMode")||this.flatteningMode,t.get(e,"rootLabel")||this.rootLabel].join("#")},bind:function(e,n){this.complexType=e||t.fail.argumentRequired("complexType"),this._setExtensionComplexTypesMap(n),n=this.extensionComplexTypesMap;var r=!1,i=null;this.levels.forEach(function(t){if(t.bind(e,n),!r)for(var o=t.allDimensions,a=-1,s=o.length;++a<s;){var l=o[a].dimensionType;if(l.isDiscrete){r=!0;break}if(null===i)i=l.valueType;else if(i!==l.valueType){r=!0;break}}}),this._isDiscrete=r,this._singleContinuousValueType=r?null:i},get isBound(){return!!this.complexType},_setExtensionComplexTypesMap:function(e){if(this.hasExtensionComplexTypes){if(!e){var n=t.error.operationInvalid("Expects a map of extension types.");throw n.code="need-extension-map",n}this.extensionComplexTypesMap=t.copyProps(e,this.extensionComplexTypeNames)}else this.extensionComplexTypesMap=null},get isNull(){return 0===this.depth},get isSingleLevel(){return 1===this.depth},get hasExtensionComplexTypes(){return!!this.extensionComplexTypeNames},isDiscrete:function(){return this._isDiscrete},get singleContinuousValueType(){return this._singleContinuousValueType},get singleDimensionName(){if(this.isSingleDimension)return this.firstDimension.name;throw t.error.operationInvalid("Expected grouping to contain exactly one dimension.")},get singleDimensionType(){if(this.isSingleDimension)return this.firstDimension.dimensionType;throw t.error.operationInvalid("Grouping contains more than one dimension.")},dimensions:function(){return t.query(this.levels).prop("dimensions").selectMany()},allDimensions:function(){return t.query(this.levels).prop("allDimensions").selectMany()},extensionDimensions:function(){return t.query(this.levels).prop("extensionDimensions").selectMany()},dimensionNames:function(){return this._dimNames},get allDimensionNames(){return this._allDimNames},firstDimensionType:function(){var t=this.firstDimension;return t&&t.dimensionType},firstDimensionName:function(){var t=this.firstDimensionType();return t&&t.name},firstDimensionValueType:function(){var t=this.firstDimensionType();return t&&t.valueType},lastDimensionType:function(){var t=this.lastDimension;return t&&t.dimensionType},lastDimensionName:function(){var t=this.lastDimensionType();return t&&t.name},lastDimensionValueType:function(){var t=this.lastDimensionType();return t&&t.valueType},ensure:function(e){var n;if(e){var r=this._calcCacheKey(e);if(r!==this._cacheKey){var i=t.lazy(this,"_groupingCache");n=t.getOwn(i,r),n||(n=i[r]=this._ensure(e))}}return n||this},_ensure:function(e){return new Mt.GroupingSpec(this.levels,this.complexType,this.extensionComplexTypesMap,{flatteningMode:t.get(e,"flatteningMode")||this.flatteningMode,rootLabel:t.get(e,"rootLabel")||this.rootLabel})},toSingleLevel:function(){if(this.isSingleLevel)return this;var t=this.allDimensions().array(),e=new Mt.GroupingLevelSpec(t,this.complexType,this.extensionComplexTypesMap);return new Mt.GroupingSpec([e],this.complexType,this.extensionComplexTypesMap,{flatteningMode:Mt.FlatteningMode.SingleLevel,rootLabel:this.rootLabel})},reverse:function(){var t=this.levels.map(function(t){return t.reverse()});return new Mt.GroupingSpec(t,this.complexType,this.extensionComplexTypesMap,{flatteningMode:this.flatteningMode,rootLabel:this.rootLabel})},view:function(t){var e=t instanceof Mt.Datum?this.dimensionNames():this.allDimensionNames;return t.view(e)},toString:function(){return this.levels.map(String).join(", ")}}),t.type("cdo.GroupingLevelSpec").init(function(e){var n=[],r=[],i=[],o=[],a=null;this.dimensions=o,this.allDimensions=t.query(e).select(function(t){return n.push(t.key),t.dataSetName?(r.push(t.fullName),null===a&&(a=[]),a.push(t)):(r.push(t.name),i.push(t.name),o.push(t)),t}).array(),this.extensionDimensions=a,this._dimNames=i,this._allDimNames=r,this._accDimNames=null,this.depth=this.allDimensions.length,this.key=n.join(",")}).add({_setAccAllDimNames:function(t){this._accDimNames=t},accAllDimensionNames:function(){return this._accDimNames},dimensionNames:function(){return this._dimNames},get allDimensionNames(){return this._allDimNames},lastDimension:function(){return this.allDimensions[this.depth-1]},bind:function(t,e){this.allDimensions.forEach(function(n){n.bindComplexType(t,e)})},compareNodesMain:function(t,e){for(var n,r=this.dimensions,i=r.length,o=-1;++o<i;)if(0!==(n=r[o].compareDatums(t.firstDatum,e.firstDatum)))return n;return 0},compareNodesWithExtension:function(t,e){for(var n,r,i,o,a,s=this.allDimensions,l=s.length,u=-1;++u<l;)if(null!==(i=(r=s[u]).dataSetName)?(o=t.extensionDatumsMap[i][0],a=e.extensionDatumsMap[i][0]):(o=t.firstDatum,a=e.firstDatum),0!==(n=r.compareDatums(o,a)))return n;return 0},buildKeyMain:function(t){return Mt.Complex.compositeKey(t,this._dimNames)},buildKeyWithExtension:function(t,e){for(var n,r="",i=this.allDimensions,o=i.length,a=-1,s=t.owner.keySep,l=t.atoms;++a<o;){var u=null!==(n=i[a]).dataSetName?e[n.dataSetName][0].atoms[n.name].key:l[n.name].key;a?r+=s+u:r=u}return r},buildGroupNodeMain:function(e){var n=this._dimNames;return{atoms:t.copyProps(e.atoms,n),dimNames:n}},buildGroupNodeWithExtension:function(t,e){for(var n,r={},i=this.allDimensions,o=i.length,a=t.atoms,s=-1;++s<o;)null!==(n=i[s]).dataSetName?r[n.fullName]=e[n.dataSetName][0].atoms[n.name]:r[n.name]=a[n.name];return{atoms:r,dimNames:this._allDimNames}},reverse:function(){var t=this.allDimensions.map(function(t){return t.reverse()});return new Mt.GroupingLevelSpec(t,this.complexType,this.extensionComplexTypesMap)},toString:function(){return t.query(this.allDimensions).select(String).array().join("|")}}),t.type("cdo.GroupingDimensionSpec").init(function(t,e,n){this.fullName=t;var r=/^(?:(.+?)\.)?(.+)$/.exec(t);this.dataSetName=r&&r[1]||null,this.name=r?r[2]:t,this.isReversed=!!e,this.key=t+":"+(e?"0":"1"),this.dimensionType=null,n&&this.bind(n)}).add({bindComplexType:function(e,n){e||t.fail.argumentRequired("complexType");var r;if(null!==this.dataSetName){var i=t.get(n,this.dataSetName);if(!i)throw t.error.operationInvalid("The data set name '{0}' of dimension '{1}' is not defined.",[this.dataSetName,this.fullName]);r=i}else r=e;return this.bind(r.dimensions(this.name)),this},bind:function(e){if(this.dimensionType=e||t.fail.argumentRequired("dimensionType"),e.isComparable){var n=e.atomComparer(this.isReversed),r=this.name;this.compareDatums=function(t,e){return n(t.atoms[r],e.atoms[r])}}else this.isReversed?this.compareDatums=function(t,e){return e.id-t.id}:this.compareDatums=function(t,e){return t.id-e.id};return this},compareDatums:function(e,n){throw t.error.operationInvalid("Not Bound.")},reverse:function(){return new Mt.GroupingDimensionSpec(this.fullName,!this.isReversed,this.dimensionType)},toString:function(){return this.fullName+(this.dimensionType?' ("'+this.dimensionType.label+'")':"")+(this.isReversed?" desc":"")}}),Mt.GroupingSpec.parse=function(e,n,r){var i=null;if(e){var o=t.string.is(e)?e.split(/\s*,\s*/):t.array.as(e);i=t.query(o).select(function(t){var e=Q(t,n,r);return new Mt.GroupingLevelSpec(e,n,r)})}return new Mt.GroupingSpec(i,n,r)};var jt=/^\s*(.+?)(?:\s+(asc|desc))?\s*$/i;t.type("cdo.LinearInterpolationOper").init(function(e,n,r,i,o,a,s,l){this._newDatums=[],this._data=r;var u=i.flatten(e).children();this._isCatDiscrete=i.grouping.isDiscrete(),this._isCatDiscrete||(u=u.where(function(t){return null!==t.value}));var c=o.isBound()?o.flatten(n,{visible:!0,isNull:!1}).children().array():[null],h=this._valDim=e.owner.dimensions(s),d={visible:!0,zeroIfNone:!1};this._stretchEnds=l,this._catInfos=u.select(function(t,e){var n=r.child(t.key),i={data:n||t,value:t.value,isInterpolated:!1,serInfos:null,index:e};return i.serInfos=[],c.forEach(function(t){var e=n;e&&t&&(e=e.child(t.key));var r=a.getBoundDimensionName(e||t,!0);if(null===r||r===s){var o=e?e.dimensions(h.name).value(d):null;i.serInfos.push({data:t,group:e,value:o,isNull:null==o,catInfo:i})}}),i}).array(),this._serCount=c.length,this._serStates=t.range(0,this._serCount).select(function(t){return new Mt.LinearInterpolationOperSeriesState(this,t)},this).array()}).add({interpolate:function(){for(var t;t=this._catInfos.shift();)t.serInfos.forEach(this._visitSeries,this);var e=this._newDatums;e.length&&this._data.owner.add(e)},_visitSeries:function(t,e){this._serStates[e].visit(t)},nextUnprocessedNonNullCategOfSeries:function(t){for(var e=0,n=this._catInfos.length;e<n;){var r=this._catInfos[e++],i=r.serInfos[t];if(!i.isNull)return i}}}),t.type("cdo.LinearInterpolationOperSeriesState").init(function(t,e){this.interpolation=t,this.index=e,this._lastNonNull(null)}).add({visit:function(t){t.isNull?this._interpolate(t):this._lastNonNull(t)},_lastNonNull:function(t){return arguments.length&&(this.__lastNonNull=t,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var e=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&e){var r=e.value,i=n.value,o=i-r;if(this.interpolation._isCatDiscrete){var a=n.catInfo.index-e.catInfo.index;a>=2||t.assert("Must have at least one interpolation point."),this._stepValue=o/a,this._middleIndex=~~(a/2);var s=a-1;this._isOdd=s%2>0}else{var l=+e.catInfo.value,u=+n.catInfo.value,c=u-l;this._steep=o/c,this._middleCat=(u+l)/2}}}},_interpolate:function(e){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var o,a,s=this.interpolation,l=e.catInfo;if(n&&r)if(s._isCatDiscrete){var u=l.index-r.catInfo.index;o=r.value+this._stepValue*u,a=(this._isOdd?u<this._middleIndex:u<=this._middleIndex)?r.group:n.group}else{var c=+l.value,h=+r.catInfo.value;o=r.value+this._steep*(c-h),a=c<this._middleCat?r.group:n.group}else{if(!s._stretchEnds)return;o=i.value,a=i.group}var d=Object.create(a.atoms);t.copyOwn(d,l.data.atoms);var f=s._valDim,p=f.intern(o,!0);d[f.name]=p;var m=s._datumDimNames;m||(s._datumDimNames=m=a.type.filterExtensionDimensionNames(t.keys(d))),s._newDatums.push(new Mt.InterpolationDatum(a.owner,d,m,"linear",f.name))}}}),t.type("cdo.ZeroInterpolationOper").init(function(e,n,r,i,o,a,s,l){this._newDatums=[],this._data=r;var u=i.flatten(e).children();this._isCatDiscrete=i.grouping.isDiscrete(),this._isCatDiscrete||(u=u.where(function(t){return null!==t.value}));var c=o.isBound()?o.flatten(n,{visible:!0,isNull:!1}).children().array():[null],h=this._valDim=e.owner.dimensions(s),d={visible:!0,zeroIfNone:!1};this._stretchEnds=l,this._catInfos=u.select(function(t,e){var n=r.child(t.key),i={data:n||t,value:t.value,isInterpolated:!1,serInfos:null,index:e};return i.serInfos=[],c.forEach(function(t){var e=n;e&&t&&(e=e.child(t.key));var r=a.getBoundDimensionName(e||t,!0);if(null===r||r===s){var o=e?e.dimensions(h.name).value(d):null;i.serInfos.push({data:t,group:e,value:o,isNull:null==o,catInfo:i})}}),i}).array(),this._serCount=c.length,this._serStates=t.range(0,this._serCount).select(function(t){return new Mt.ZeroInterpolationOperSeriesState(this,t)},this).array()}).add({interpolate:function(){for(var t;t=this._catInfos.shift();)t.serInfos.forEach(this._visitSeries,this);var e=this._newDatums;e.length&&this._data.owner.add(e)},_visitSeries:function(t,e){this._serStates[e].visit(t)},nextUnprocessedNonNullCategOfSeries:function(t){for(var e=0,n=this._catInfos.length;e<n;){var r=this._catInfos[e++],i=r.serInfos[t];if(!i.isNull)return i}}}),t.type("cdo.ZeroInterpolationOperSeriesState").init(function(t,e){this.interpolation=t,this.index=e,this._lastNonNull(null)}).add({visit:function(t){t.isNull?this._interpolate(t):this._lastNonNull(t)},_lastNonNull:function(t){return arguments.length&&(this.__lastNonNull=t,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var e=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&e)if(this.interpolation._isCatDiscrete){var r=n.catInfo.index-e.catInfo.index;r>=2||t.assert("Must have at least one interpolation point."),this._middleIndex=~~(r/2);var i=r-1;this._isOdd=i%2>0}else{var o=+e.catInfo.value,a=+n.catInfo.value;this._middleCat=(a+o)/2}}},_interpolate:function(e){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var o,a=this.interpolation,s=e.catInfo;if(n&&r)if(a._isCatDiscrete){var l=s.index-r.catInfo.index;o=this._isOdd?l<this._middleIndex?r.group:n.group:l<=this._middleIndex?r.group:n.group}else{var u=+s.value;o=u<this._middleCat?r.group:n.group}else{if(!a._stretchEnds)return;o=i.group}var c=Object.create(o.atoms);t.copyOwn(c,s.data.atoms);var h=a._valDim,d=a._zeroAtom||(a._zeroAtom=h.intern(0,!0));c[h.name]=d;var f=a._datumDimNames;f||(a._datumDimNames=f=o.type.filterExtensionDimensionNames(t.keys(c))),a._newDatums.push(new Mt.InterpolationDatum(o.owner,c,f,"zero",h.name))}}}),t.type("cdo.TranslationOper").init(function(e,n,r,i){this.complexTypeProj=e||t.fail.argumentRequired("complexTypeProj"),this.source=n||t.fail.argumentRequired("source"),this.metadata=r||t.fail.argumentRequired("metadata"),this.options=i||{},this._initType(),t.debug>=4&&(this._logLogicalRows=!0,this._logLogicalRowCount=0)}).add({_logLogicalRows:!1,logSource:t.abstractMethod,logLogicalRow:t.abstractMethod,_translType:"Unknown",logTranslatorType:function(){return this._translType+" data source translator"},logicalColumnCount:function(){return this.metadata.length},setSource:function(e){if(!e)throw t.error.argumentRequired("source");this.source=e},defReader:function(e){e||t.fail.argumentRequired("readerSpec");var n=t.string.is(e)?e:e.names;n=t.string.is(n)?n.split(/\s*\,\s*/):t.array.as(n);var r=t.array.as(e.indexes);r&&r.forEach(this._userUseIndex,this);var i=!(!n||!n.length),o=e.reader;if(o)i||t.fail.argumentRequired("reader.names","Required argument when a reader function is specified."),this._userRead(o,n);else{if(i)return this._userCreateReaders(n,r);r&&r.forEach(function(t){this._userIndexesToSingleDim[t]=null},this)}return r},configureType:function(){this._configureTypeCore()},_configureTypeCore:t.abstractMethod,_initType:function(){this._userDimsReaders=[],this._userDimsReadersByDim={},this._userUsedIndexes={},this._userIndexesToSingleDim=[];var e=this.options.readers;e&&t.array.each(e,this.defReader,this);var n=t.parseDistinctIndexArray(this.options.multiChartIndexes);n&&(this._multiChartIndexes=this.defReader({names:"multiChart",indexes:n}))},_userUseIndex:function(e){if((e=+e)<0)throw t.error.argumentInvalid("index","Invalid reader index: '{0}'.",[e]);if(t.hasOwn(this._userUsedIndexes,e))throw t.error.argumentInvalid("index","Column '{0}' of the logical table is already assigned.",[e]);return this._userUsedIndexes[e]=!0,e},_userCreateReaders:function(e,n){n?n.forEach(function(t,e){n[e]=+t}):n=[];var r,i=n.length,o=e.length;if(o>i){var a=i>0?n[i-1]+1:0;do{a=this._getNextFreeLogicalColumnIndex(a),n[i]=a,this._userUseIndex(a),i++}while(o>i)}for(var s,l=i===o?o:o-1,u=0;u<l;u++)r=e[u],s=n[u],this._userIndexesToSingleDim[s]=r,this._userRead(this._propGet(r,s),r);if(l<o)for(var c=t.splitIndexedId(e[o-1]),h=c[0],d=t.nullyTo(c[1],0),f=l;f<i;f++,d++)r=t.indexedId(h,d),s=n[f],this._userIndexesToSingleDim[s]=r,this._userRead(this._propGet(r,s),r);return n},_userRead:function(e,n){t.fun.is(e)||t.fail.argumentInvalid("reader","Reader must be a function."),t.array.is(n)?n.forEach(function(t){this._readDim(t,e)},this):this._readDim(n,e),this._userDimsReaders.push(e)},_readDim:function(e,n){var r,i,o=this._userIndexesToSingleDim.indexOf(e);if(o>=0&&(r=this._logicalRowInfos[o])&&!this.options.ignoreMetadataLabels){var a=r.label||r.name&&t.titleFromName(r.name);a&&(i={label:a})}this.complexTypeProj.readDim(e,i),this._userDimsReadersByDim[e]=n},execute:function(t){return this.data=t,this._executeCore()},_executeCore:function(){var e=this._getDimensionsReaders();return t.query(this._getLogicalRows()).select(function(t){return this._readLogicalRow(t,e)},this)},_getLogicalRows:function(){return this.source},_getDimensionsReaders:function(){return this._userDimsReaders.slice().reverse()},_readLogicalRow:function(t,e){for(var n=this._logLogicalRows&&this._logLogicalRowBefore(t),r=e.length,i=this.data,o={};r--;)e[r].call(i,t,o);return n&&this._logLogicalRowAfter(o),o},_logLogicalRowBefore:function(e){return this._logLogicalRowCount<10?(t.log("logical row ["+this._logLogicalRowCount+++"]: "+t.describe(e)),!0):(t.log("..."),this._logLogicalRows=!1)},_logLogicalRowAfter:function(e){var n={};for(var r in e){var i=e[r];t.object.is(i)&&(i="v"in i?i.v:"value"in i?i.value:"..."),n[r]=i}t.log("-> read: "+t.describe(n))},_propGet:function(t,e){function n(n,r){r[t]=n[e]}return n},_getNextFreeLogicalColumnIndex:function(e,n){for(null==e&&(e=0),null==n&&(n=1/0);e<n&&t.hasOwn(this._userUsedIndexes,e);)e++;return e<n?e:-1},_getPhysicalGroupStartIndex:function(e){return t.getOwn(this._logicalRowPhysicalGroupIndex,e)},_getPhysicalGroupLength:function(e){return t.getOwn(this._logicalRowPhysicalGroupsLength,e)},_configureTypeByPhysicalGroup:function(e,n,r,i){var o=this._logicalRowPhysicalGroupIndex[e],a=this._logicalRowPhysicalGroupsLength[e],s=o+a-1,l=o;if((r=null==r?a:Math.min(a,r))&&l<=s){n||(n=e),i||(i=1/0);for(var u,c=0;r&&c<i;)if(u=t.indexedId(n,c++),!this.complexTypeProj.isReadOrCalc(u)){if((l=this._getNextFreeLogicalColumnIndex(l))>s)return l;this.defReader({names:u,indexes:l}),l++,r--}}return l},_configureTypeByOrgLevel:function(t,e){var n=[],r=[];this._logicalRowInfos.forEach(function(t,e){if(!this[e]){var i=1===t.type?n:r;i&&i.push(e)}},this._userUsedIndexes),this._configureTypeByDimGroups(r,this._processDimGroupSpecs(t,!0,1/0)),this._configureTypeByDimGroups(n,this._processDimGroupSpecs(e,!1,1))},_processDimGroupSpecs:function(e,n,r){return e.map(function(e){return t.string.is(e)?{name:e,greedy:n,maxCount:r}:t.setDefaults(e,{greedy:n,maxCount:r})})},_configureTypeByDimGroups:function(t,e){if(e)for(var n,r=-1,i=e.length;++r<i&&(n=t.length);){var o=e[r],a=Math.min(o.maxCount,n),s=this._getFreeDimGroupNames(o.name,a,o.greedy);s&&(s.length,this.defReader({names:s,indexes:t.splice(0,s.length)}))}},_getFreeDimGroupNames:function(e,n,r){if(!e)return null;var i=[],o=0;for(null==n&&(n=1);n;){var a=t.indexedId(e,o++);this.complexTypeProj.isReadOrCalc(a)?r||n--:(i.push(a),n--)}return i.length?i:null}}),t.type("cdo.MatrixTranslationOper",Mt.TranslationOper).add({_initType:function(){this.J=this.metadata.length,this.I=this.source.length,this._processMetadata(),this.base()},setSource:function(t){this.base(t),this.I=this.source.length},_knownContinuousColTypes:{numeric:1,number:1,integer:1},_processMetadata:function(){var e,n=this.options.typeCheckingMode,r=this._knownContinuousColTypes;if("none"===n)e=t.query(this.metadata).select(function(t,e){t.colIndex=e;var n=t.colType;return n&&1===r[n.toLowerCase()]?1:0}).array();else{var i="extended"===n,o=t.query(this.metadata).select(function(t,e){return t.colIndex=e,t}).where(function(t){var e=t.colType;return!e||1!==r[e.toLowerCase()]}).select(function(t){return t.colIndex}).array(),a=this.I,s=this.source,l=o.length;e=t.array.create(this.J,1);for(var u=0;u<a&&l>0;u++)for(var c=s[u],h=0;h<l;){var d=o[h],f=c[d];null!=f?(e[d]=this._getSourceValueType(f,i),o.splice(h,1),l--):h++}}this._columnTypes=e},_buildLogicalColumnInfoFromMetadata:function(t){var e=this.metadata[t];return{type:this._columnTypes[t],name:e.colName,label:e.colLabel}},_getSourceValueType:function(t,e){switch(typeof t){case"number":return 1;case"string":return e&&""!==t&&!isNaN(+t)?1:0;case"object":return t instanceof Date?1:0}return 0},logSource:function(){var e=Mt.previewRowsMax,n=Mt.previewColsMax,r=this.metadata,i=r.length,o=t.array.prepend;i>n&&(r=r.slice(0,n),r.push({colName:"("+n+"/"+i+")",colType:"..."}));var a=t.textTable(r.length+1).rowSep().row.apply(a,o(r.map(function(t){return t.colName}),["Name"])).rowSep().row.apply(a,o(r.map(function(t){return t.colLabel?'"'+t.colLabel+'"':""}),["Label"])).rowSep().row.apply(a,o(r.map(function(t){return t.colType}),["Type"])).rowSep();return t.query(this.source).take(e).each(function(e,r){i>n&&(e=e.slice(0,n)),a.row.apply(a,o(e.map(function(e){return t.describe(e)}),[r+1]))}),a.rowSep().row("("+Math.min(e,this.I)+"/"+this.I+")").rowSep(!0),"DATA SOURCE SUMMARY\n"+a()+"\n"},_logLogicalRow:function(e,n){var r=t.textTable(6).rowSep().row("Index","Kind","Type","Name","Label","Dimension").rowSep(),i=0;return e.forEach(function(t){for(var e=0,o=n[t];e<o;e++){var a=this._logicalRowInfos[i];r.row(i,t,a.type?"number":"string",a.name||"",a.label||"",this._userIndexesToSingleDim[i]||""),i++}},this),r.rowSep(!0),"LOGICAL TABLE\n"+r()+"\n"},_createPlot2SeriesKeySet:function(e,n){var r=null,i=n.length;return t.query(e).each(function(e){var o=+e;if(isNaN(o))throw t.error.argumentInvalid("plot2SeriesIndexes","Element is not a number '{0}'.",[e]);if(o<0){if(o<=-i)throw t.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[o]);o=i+o}else if(o>=i)throw t.error.argumentInvalid("plot2SeriesIndexes","Index is out of range '{0}'.",[o]);r||(r={}),r[n[o]]=!0}),r},_dataPartGet:function(e){function n(e,n){n[l]=t.hasOwn(i,e)?a||(a=r.intern("1")):o||(o=r.intern("0"))}var r,i,o,a,s=this,l=this.options.dataPartDimName,u=function(){i=e(),r=s.data.dimensions(l),t.debug>=3&&i&&t.log("Second axis series values: "+t.describe(t.keys(i))),u=null};this.complexTypeProj.setCalc({names:l,calculation:function(t,e){u&&u(),n(t.atoms.series.value,e)}})},_configureTypeCore:function(){["series","category","value"].forEach(function(t){this._configureTypeByPhysicalGroup(t)},this)}}),Mt.previewRowsMax=15,Mt.previewColsMax=6,t.type("cdo.CrosstabTranslationOper",Mt.MatrixTranslationOper).add({_translType:"Crosstab",logicalColumnCount:function(){return this.R+this.C+this.M},_executeCore:function(){function e(t,e){for(var n=o[t],r=0,s=a[t];s-- >0;)i[n++]=e[r++]}function n(t,e){
for(var n=o.M,r=a._colGroupsIndexes[e],s=a.M,l=0;l<s;l++){var u=r[l];i[n++]=null!=u?t[u]:null}}if(!this.metadata.length)return t.query();var r=this._getDimensionsReaders(),i=new Array(this.logicalColumnCount()),o=this._logicalRowCrossGroupIndex,a=this,s=t.query(this.source);if(this._colGroups&&this._colGroups.length){var l=function(o){return e("R",o),t.query(this._colGroups).select(function(t,a){return e("C",t),n(o,a),this._readLogicalRow(i,r)},this)};return s.selectMany(l,this)}return s.select(function(t){return e("R",t),this._readLogicalRow(i,r)},this)},_processMetadata:function(){this.base(),this._separator=this.options.separator||"~";var e=this.R=1;this.C=1,this.M=1,this.measuresDirection=null;var n=this.options.seriesInRows,r=this.metadata,i=this.options.compatVersion<=1,o=function(){var t=n?function(t){return t.colName}:i?function(t){return{v:t.colName}}:function(t){return{v:t.colName,f:t.colLabel}};return r.map(t)}(),a=this._logicalRowCrossGroupInfos={};if(this.options.isMultiValued){var s=t.get(this.options,"measuresInColumns",!0);if(s||null==this.options.measuresIndex){e=this.R=this._getCategoriesCount();var l=o.slice(e);l.length>0?(s?(this.measuresDirection="columns",this._processEncodedColGroups(l)):(this._colGroups=l,this._colGroupsIndexes=[],this._colGroups.forEach(function(t,e){this._colGroups[e]=this._splitEncodedColGroupCell(t),this._colGroupsIndexes[e]=[this.R+e]},this),a.M=[this._buildLogicalColumnInfoFromMetadata(e)]),this.C=this._colGroups[0].length,a.C=t.range(0,this.C).select(function(){return{type:0}}).array()):(this.C=this.M=0,a.M=[],a.C=[])}else{this.measuresDirection="rows",this.R=+this.options.measuresIndex;var u=this.options.measuresCount;null==u&&(u=1),this.M=u,this._colGroups=o.slice(this.R+1),this._colGroups.forEach(function(t,e){this._colGroups[e]=[t]},this)}}else e=this.R=this._getCategoriesCount(),this._colGroups=o.slice(e),this._colGroupsIndexes=new Array(this._colGroups.length),this._colGroups.forEach(function(t,n){this._colGroups[n]=[t],this._colGroupsIndexes[n]=[e+n]},this),a.C=[{type:0}],a.M=[{type:this._columnTypes[e]}];a.R=t.range(0,this.R).select(this._buildLogicalColumnInfoFromMetadata,this).array();var c=this._logicalRowCrossGroupIndex={C:n?this.R:0,R:n?0:this.C,M:this.C+this.R},h=this._logicalRowInfos=new Array(this.logicalColumnCount());t.eachOwn(c,function(t,e){a[e].forEach(function(e,n){h[t+n]=e})}),this._logicalRowPhysicalGroupsLength={series:n?this.R:this.C,category:n?this.C:this.R,value:this.M},this._logicalRowPhysicalGroupIndex={series:0,category:this._logicalRowPhysicalGroupsLength.series,value:this.C+this.R}},logLogicalRow:function(){return this._logLogicalRow(["C","R","M"],{C:this.C,R:this.R,M:this.M})},_getCategoriesCount:function(){var e=this.options.categoriesCount;return null!=e&&(!isFinite(e)||e<0)&&(e=null),null==e&&((e=t.query(this._columnTypes).whayl(function(t){return 0===t}).count())||(e=1)),e},_splitEncodedColGroupCell:function(t){var e,n=t.v;return null==n?n=[]:(n=n.split(this._separator),(e=t.f)&&(e=e.split(this._separator))),n.map(function(t,n){return{v:t,f:e&&e[n]}})},_processEncodedColGroups:function(e){for(var n,r=e.length||t.assert("Must have columns"),i=this.R,o=[],a={},s=[],l=0;l<r;l++){var u,c,h,d,f=e[l],p=f.v,m=f.f,g=p.lastIndexOf(this._separator);g<0?(u=p,c=m,p="",h=[]):(u=p.substring(g+1),p=p.substring(0,g),h=p.split(this._separator),null!=m&&(d=m.split(this._separator),c=d.pop()),h.forEach(function(t,e){var n=d&&d[e];h[e]={v:t,f:n}})),n&&n.encValues===p?n.measureNames.push(u):(n={startIndex:l,encValues:p,values:h,measureNames:[u]},o.push(n));var y=l-n.startIndex,v=t.getOwn(a,u);v?y>v.groupIndex&&(v.groupIndex=y):(a[u]=v={name:u,label:c,type:this._columnTypes[i+l],groupIndex:y,index:l},s.push(v))}s.sort(function(e,n){return t.compare(e.groupIndex,n.groupIndex)||t.compare(e.index,n.index)}),s.forEach(function(t,e){t.groupIndex=e});var b=o.length,_=new Array(b),w=new Array(b),x=s.length;o.map(function(t,e){_[e]=t.values;var n=t.startIndex,r=w[e]=new Array(x);t.measureNames.forEach(function(t,e){var o=a[t].groupIndex;r[o]=i+n+e})}),this._colGroups=_,this._colGroupsIndexes=w,this._logicalRowCrossGroupInfos.M=s,this.M=x},configureType:function(){if("rows"===this.measuresDirection)throw t.error.notImplemented();var e=this.options.dataPartDimName;if(e&&1===this.C&&!this.complexTypeProj.isReadOrCalc(e)){var n=this.options.plot2DataSeriesIndexes;if(null!=n){var r=this._colGroups.map(function(t){return""+t[0].v});this._plot2SeriesKeySet=this._createPlot2SeriesKeySet(n,r)}}if(this.base(),this._plot2SeriesKeySet&&this._userDimsReadersByDim.series){var i=t.fun.constant(this._plot2SeriesKeySet);this._dataPartGet(i)}}}),t.type("cdo.RelationalTranslationOper",Mt.MatrixTranslationOper).add({M:0,C:0,S:0,_translType:"Relational",_processMetadata:function(){this.base();var e,n,r,i,o=this.metadata,a=this.J,s=this.options.categoriesCount;if(null!=s&&(!isFinite(s)||s<0)&&(s=0),this.options.isMultiValued&&(n=t.parseDistinctIndexArray(this.options.measuresIndexes,0,a-1),r=n?n.length:0),null==r)if(a>0&&a<=3&&(null==s||1===s))r=1,n=[a-1],s=a>=2?1:0,e=a>=3?1:0,i=s+e;else if(null!=s&&s>=a)i=s=a,e=r=0;else{var l=null!=s?a-s:1/0;n=t.query(o).where(function(t,e){return 0!==this._columnTypes[e]},this).select(function(t){return t.colIndex}).take(l).array(),r=n.length}null==i&&(i=a-r,0===i?e=s=0:null!=s?s>i?(s=i,e=0):e=i-s:(e=i>1?1:0,s=i-e));var u=this.options.seriesInRows,c=[];i&&(e&&!u&&c.push({name:"S",count:e}),s&&c.push({name:"C",count:s}),e&&u&&c.push({name:"S",count:e})),r&&c.push({name:"M",count:r});var h=t.range(0,a).array();n&&n.slice().sort(t.descending).forEach(function(t){h.splice(t,1)});var d={};c.forEach(function(t){var e=t.count,r=t.name;d[r]=t,t.indexes=n&&"M"===r?n:h.splice(0,e)}),this.M=r,this.S=e,this.C=s;var f=[];["S","C","M"].forEach(function(e){var n=d[e];n&&t.array.append(f,n.indexes)}),this._logicalRowInfos=f.map(this._buildLogicalColumnInfoFromMetadata,this),this._logicalRowPerm=f,this._logicalRowPhysicalGroupsLength={series:this.S,category:this.C,value:this.M},this._logicalRowPhysicalGroupIndex={series:0,category:this._logicalRowPhysicalGroupsLength.series,value:this.S+this.C}},logLogicalRow:function(){return this._logLogicalRow(["S","C","M"],{S:this.S,C:this.C,M:this.M})},configureType:function(){this.base();var t=this.options.dataPartDimName;if(t&&!this.complexTypeProj.isReadOrCalc(t)){var e=this.options.plot2DataSeriesIndexes;if(null!=e){var n=this._userDimsReadersByDim.series;n&&X.call(this,e,n)}}},_executeCore:function(){var n=this._getDimensionsReaders(),r=this._logicalRowPerm;return t.query(this._getLogicalRows()).select(function(t){return t=e.permute(t,r),this._readLogicalRow(t,n)},this)}});var Ot=Mt.numberFormatStyle=function(t,e){return new Et(t,e)},It=t.priv.key().property(),Et=Ot.of=t("cdo.NumberFormatStyle",t.FieldsBase.extend({init:function(){t.classify(this,Ot)},fields:{decimal:{cast:String,fail:t.falsy},group:{cast:String},groupSizes:{fail:t.array.empty},negativeSign:{cast:String,fail:t.falsy},currency:{cast:String,fail:t.falsy},integerPad:{cast:String,fail:t.falsy},fractionPad:{cast:String,fail:t.falsy},abbreviations:{fail:t.array.empty}},methods:{tryConfigure:function(e){if(t.is(e,Ot))return!!this.integerPad(e.integerPad()).fractionPad(e.fractionPad()).decimal(e.decimal()).group(e.group()).groupSizes(e.groupSizes()).negativeSign(e.negativeSign()).currency(e.currency()).abbreviations(e.abbreviations());if(t.string.is(e)){var n=zt(e);if(n)return!!t.configure(this,n.number().style())}}}},{fieldsPrivProp:It}));t.classify(Et.prototype,Ot),Ot.defaults=Ot({integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:"$"});var Lt=Mt.numberFormat=function(e,n){function r(t){return o||(o=J(i.mask)),o(t,It(i.style))}var i,o;return r.format=r,r.tryConfigure=K,t.classify(r,Lt),i=t.instance(r,e,n,{mask:{cast:String,change:function(){o=null}},style:{cast:t.createAs(Et),factory:Ot}}),r};Lt.defaults=Lt().style(Ot()),Lt.cacheLimit=20;var Rt={},Ft=0,Bt=Mt.dateFormat=function(e,n){function r(t){return o||(o=vt(i.mask)),o(t)}var i,o;return r.format=r,r.tryConfigure=yt,t.classify(r,Bt),i=t.instance(r,e,n,{mask:{cast:String,change:function(){o=null}}}),arguments.length&&t.configure(r,arguments[0]),r};Bt.defaults=Bt();var Ht=Mt.customFormat=function(e,n){function r(t){var e=i.formatter;return String(e&&e.apply(null,arguments))}var i;return r.format=r,r.tryConfigure=bt,t.classify(r,Ht),i=t.instance(r,e,n,{formatter:{cast:t.fun.as}}),r};Ht.defaults=Ht().formatter(_t);var Wt="en-us",Ut=Mt.format=function(e,n){function r(){}r.tryConfigure=xt;var i;if(!n&&t.string.is(e)){var o=zt(e);i=o.languageCode,o&&(n=o,e=null)}return r.languageCode=i||Wt,t.classify(r,Ut),t.instance(r,e,n,{number:wt(Lt),percent:wt(Lt),date:wt(Bt),any:{cast:t.createAs(Ht),factory:Ht}}),r};Ut.defaults=Ut({number:"#,0.##",percent:"#,0.#%",date:"%Y/%m/%d",any:Ht()});var Vt={},qt=Vt[Wt]=Ut.defaults,zt=Mt.format.language=function(e,n){var r=arguments.length;if(!r)return qt;if(1==r){if(void 0===e)throw t.error.operationInvalid("Undefined 'style' value.");if(null===e||""===e)e=Wt;else{if(t.is(e,Ut))return qt=e;if("object"==typeof e){for(var i in e)Ct(i,t.getOwn(e,i));return Mt.format}}return Dt(e,!0)}if(2==r)return Ct(e,n);throw t.error.operationInvalid("Wrong number of arguments")};return zt({"en-gb":{number:{mask:"#,0.##",style:{integerPad:"0",fractionPad:"0",decimal:".",group:",",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:""}},date:{mask:"%d/%m/%Y"}},"pt-pt":{number:{mask:"#,0.##",style:{integerPad:"0",fractionPad:"0",decimal:",",group:" ",groupSizes:[3],abbreviations:["k","m","b","t"],negativeSign:"-",currency:""}},date:{mask:"%d/%m/%Y"}}}),Mt});var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,var:0},html4.URIEFFECTS={},html4.LOADERTYPES={},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=html4),exports.URI=html4):"undefined"!=typeof window&&(window.html4=html4),define("cdf/lib/sanitizer/lib/html4",function(t){return function(){return t.html4}}(this));var URI=function(){function t(t){var e=(""+t).match(f);return e?new l(u(e[1]),u(e[2]),u(e[3]),u(e[4]),u(e[5]),u(e[6]),u(e[7])):null}function e(t,e,o,a,s,u,c){var h=new l(r(t,p),r(e,p),n(o),a>0?a.toString():null,r(s,m),null,n(c));return u&&("string"==typeof u?h.setRawQuery(u.replace(/[^?&=0-9A-Za-z_\-~.%]/g,i)):h.setAllParameters(u)),h}function n(t){return"string"==typeof t?encodeURIComponent(t):null}function r(t,e){return"string"==typeof t?encodeURI(t).replace(e,i):null}function i(t){var e=t.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(e>>4&15)+"0123456789ABCDEF".charAt(15&e)}function o(t){return t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function a(t){if(null===t)return null;for(var e,n=o(t),r=h;(e=n.replace(r,"$1"))!=n;n=e);return n}function s(t,e){var n=t.clone(),r=e.hasScheme();r?n.setRawScheme(e.getRawScheme()):r=e.hasCredentials(),r?n.setRawCredentials(e.getRawCredentials()):r=e.hasDomain(),r?n.setRawDomain(e.getRawDomain()):r=e.hasPort();var i=e.getRawPath(),o=a(i);if(r)n.setPort(e.getPort()),o=o&&o.replace(d,"");else if(r=!!i){if(47!==o.charCodeAt(0)){var s=a(n.getRawPath()||"").replace(d,""),l=s.lastIndexOf("/")+1;o=a((l?s.substring(0,l):"")+a(i)).replace(d,"")}}else(o=o&&o.replace(d,""))!==i&&n.setRawPath(o);return r?n.setRawPath(o):r=e.hasQuery(),r?n.setRawQuery(e.getRawQuery()):r=e.hasFragment(),r&&n.setRawFragment(e.getRawFragment()),n}function l(t,e,n,r,i,o,a){this.scheme_=t,this.credentials_=e,this.domain_=n,this.port_=r,this.path_=i,this.query_=o,this.fragment_=a,this.paramCache_=null}function u(t){return"string"==typeof t&&t.length>0?t:null}var c=new RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),h=new RegExp(c),d=/^(?:\.\.\/)*(?:\.\.$)?/;l.prototype.toString=function(){var t=[];return null!==this.scheme_&&t.push(this.scheme_,":"),null!==this.domain_&&(t.push("//"),null!==this.credentials_&&t.push(this.credentials_,"@"),t.push(this.domain_),null!==this.port_&&t.push(":",this.port_.toString())),null!==this.path_&&t.push(this.path_),null!==this.query_&&t.push("?",this.query_),null!==this.fragment_&&t.push("#",this.fragment_),t.join("")},l.prototype.clone=function(){return new l(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},l.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},l.prototype.getRawScheme=function(){return this.scheme_},l.prototype.setScheme=function(t){return this.scheme_=r(t,p),this},l.prototype.setRawScheme=function(t){return this.scheme_=t||null,this},l.prototype.hasScheme=function(){return null!==this.scheme_},l.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},l.prototype.getRawCredentials=function(){return this.credentials_},l.prototype.setCredentials=function(t){return this.credentials_=r(t,p),this},l.prototype.setRawCredentials=function(t){return this.credentials_=t||null,this},l.prototype.hasCredentials=function(){return null!==this.credentials_},l.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},l.prototype.getRawDomain=function(){return this.domain_},l.prototype.setDomain=function(t){return this.setRawDomain(t&&encodeURIComponent(t))},l.prototype.setRawDomain=function(t){return this.domain_=t||null,this.setRawPath(this.path_)},l.prototype.hasDomain=function(){return null!==this.domain_},l.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},l.prototype.setPort=function(t){if(t){if((t=Number(t))!==(65535&t))throw new Error("Bad port number "+t);this.port_=""+t}else this.port_=null;return this},l.prototype.hasPort=function(){return null!==this.port_},l.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},l.prototype.getRawPath=function(){return this.path_},l.prototype.setPath=function(t){return this.setRawPath(r(t,m))},l.prototype.setRawPath=function(t){return t?(t=String(t),this.path_=!this.domain_||/^\//.test(t)?t:"/"+t):this.path_=null,this},l.prototype.hasPath=function(){return null!==this.path_},l.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},l.prototype.getRawQuery=function(){return this.query_},l.prototype.setQuery=function(t){return this.paramCache_=null,this.query_=n(t),this},l.prototype.setRawQuery=function(t){return this.paramCache_=null,this.query_=t||null,this},l.prototype.hasQuery=function(){return null!==this.query_},l.prototype.setAllParameters=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e=[],n=-1;for(var r in t){var i=t[r];"string"==typeof i&&(e[++n]=r,e[++n]=i)}t=e}this.paramCache_=null;for(var o=[],a="",s=0;s<t.length;){var r=t[s++],i=t[s++];o.push(a,encodeURIComponent(r.toString())),a="&",i&&o.push("=",encodeURIComponent(i.toString()))}return this.query_=o.join(""),this},l.prototype.checkParameterCache_=function(){if(!this.paramCache_){var t=this.query_;if(t){for(var e=t.split(/[&\?]/),n=[],r=-1,i=0;i<e.length;++i){var o=e[i].match(/^([^=]*)(?:=(.*))?$/);n[++r]=decodeURIComponent(o[1]).replace(/\+/g," "),n[++r]=decodeURIComponent(o[2]||"").replace(/\+/g," ")}this.paramCache_=n}else this.paramCache_=[]}},l.prototype.setParameterValues=function(t,e){"string"==typeof e&&(e=[e]),this.checkParameterCache_();for(var n=0,r=this.paramCache_,i=[],o=0;o<r.length;o+=2)t===r[o]?n<e.length&&i.push(t,e[n++]):i.push(r[o],r[o+1]);for(;n<e.length;)i.push(t,e[n++]);return this.setAllParameters(i),this},l.prototype.removeParameter=function(t){return this.setParameterValues(t,[])},l.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},l.prototype.getParameterValues=function(t){this.checkParameterCache_();for(var e=[],n=0;n<this.paramCache_.length;n+=2)t===this.paramCache_[n]&&e.push(this.paramCache_[n+1]);return e},l.prototype.getParameterMap=function(t){this.checkParameterCache_();for(var e={},n=0;n<this.paramCache_.length;n+=2){var r=this.paramCache_[n++],i=this.paramCache_[n++];r in e?e[r].push(i):e[r]=[i]}return e},l.prototype.getParameterValue=function(t){this.checkParameterCache_();for(var e=0;e<this.paramCache_.length;e+=2)if(t===this.paramCache_[e])return this.paramCache_[e+1];return null},l.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},l.prototype.getRawFragment=function(){return this.fragment_},l.prototype.setFragment=function(t){return this.fragment_=t?encodeURIComponent(t):null,this},l.prototype.setRawFragment=function(t){return this.fragment_=t||null,this},l.prototype.hasFragment=function(){return null!==this.fragment_};var f=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),p=/[#\/\?@]/g,m=/[\#\?]/g;return l.parse=t,l.create=e,l.resolve=s,l.collapse_dots=a,l.utils={mimeTypeOf:function(e){return/\.html$/.test(t(e).getPath())?"text/html":"application/javascript"},resolve:function(e,n){return e?s(t(e),t(n)).toString():""+n}},l}();if("undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=URI),exports.URI=URI):"undefined"!=typeof window&&(window.URI=URI),define("cdf/lib/sanitizer/lib/uri",function(t){return function(){return t.URI}}(this)),"i"!=="I".toLowerCase())throw"I/i problem";var html=function(t){function e(t){if(T.hasOwnProperty(t))return T[t];var e=t.match(A);if(e)return String.fromCharCode(parseInt(e[1],10));if(e=t.match(P))return String.fromCharCode(parseInt(e[1],16));if(O&&j.test(t)){O.innerHTML="&"+t+";";var n=O.textContent;return T[t]=n,n}return"&"+t+";"}function n(t,n){return e(n)}function r(t){return t.replace(I,"")}function i(t){return t?t.replace(E,n):t}function o(t){return t?(""+t).replace(R,"&amp;").replace(B,"&lt;").replace(H,"&gt;").replace(W,"&#34;"):t}function a(t){return t?t.replace(F,"&amp;$1").replace(B,"&lt;").replace(H,"&gt;"):t}function s(t){var e={cdata:t.cdata||t.cdata,comment:t.comment||t.comment,endDoc:t.endDoc||t.endDoc,endTag:t.endTag||t.endTag,pcdata:t.pcdata||t.pcdata,rcdata:t.rcdata||t.rcdata,startDoc:t.startDoc||t.startDoc,startTag:t.startTag||t.startTag};return function(t,n){return l(t,e,n)}}function l(t,e,n){c(e,h(t),0,{noMoreGT:!1,noMoreEndComments:!1},n)}function u(t,e,n,r,i){return function(){c(t,e,n,r,i)}}function c(e,n,r,i,o){try{e.startDoc&&0==r&&e.startDoc(o);for(var a,s,l,c=r,h=n.length;c<h;){var m=n[c++],g=n[c];switch(m){case"&":L.test(g)?(e.pcdata&&e.pcdata("&"+g,o,z,u(e,n,c,i,o)),c++):e.pcdata&&e.pcdata("&amp;",o,z,u(e,n,c,i,o));break;case"</":(a=/^([-\w:]+)[^\'\"]*/.exec(g))?a[0].length===g.length&&">"===n[c+1]?(c+=2,l=a[1].toLowerCase(),e.endTag&&e.endTag(l,o,z,u(e,n,c,i,o))):c=d(n,c,e,o,z,i):e.pcdata&&e.pcdata("&lt;/",o,z,u(e,n,c,i,o));break;case"<":if(a=/^([-\w:]+)\s*\/?/.exec(g))if(a[0].length===g.length&&">"===n[c+1]){c+=2,l=a[1].toLowerCase(),e.startTag&&e.startTag(l,[],o,z,u(e,n,c,i,o));var y=t.ELEMENTS[l];if(y&q){var v={name:l,next:c,eflags:y};c=p(n,v,e,o,z,i)}}else c=f(n,c,e,o,z,i);else e.pcdata&&e.pcdata("&lt;",o,z,u(e,n,c,i,o));break;case"\x3c!--":if(!i.noMoreEndComments){for(s=c+1;s<h&&(">"!==n[s]||!/--$/.test(n[s-1]));s++);if(s<h){if(e.comment){var b=n.slice(c,s).join("");e.comment(b.substr(0,b.length-2),o,z,u(e,n,s+1,i,o))}c=s+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&e.pcdata&&e.pcdata("&lt;!--",o,z,u(e,n,c,i,o));break;case"<!":if(/^\w/.test(g)){if(!i.noMoreGT){for(s=c+1;s<h&&">"!==n[s];s++);s<h?c=s+1:i.noMoreGT=!0}i.noMoreGT&&e.pcdata&&e.pcdata("&lt;!",o,z,u(e,n,c,i,o))}else e.pcdata&&e.pcdata("&lt;!",o,z,u(e,n,c,i,o));break;case"<?":if(!i.noMoreGT){for(s=c+1;s<h&&">"!==n[s];s++);s<h?c=s+1:i.noMoreGT=!0}i.noMoreGT&&e.pcdata&&e.pcdata("&lt;?",o,z,u(e,n,c,i,o));break;case">":e.pcdata&&e.pcdata("&gt;",o,z,u(e,n,c,i,o));break;case"":break;default:e.pcdata&&e.pcdata(m,o,z,u(e,n,c,i,o))}}e.endDoc&&e.endDoc(o)}catch(t){if(t!==z)throw t}}function h(t){var e=/(<\/|<\!--|<[!?]|[&<>])/g;if(t+="",V)return t.split(e);for(var n,r=[],i=0;null!==(n=e.exec(t));)r.push(t.substring(i,n.index)),r.push(n[0]),i=n.index+n[0].length;return r.push(t.substring(i)),r}function d(t,e,n,r,i,o){var a=m(t,e);return a?(n.endTag&&n.endTag(a.name,r,i,u(n,t,e,o,r)),a.next):t.length}function f(t,e,n,r,i,o){var a=m(t,e);return a?(n.startTag&&n.startTag(a.name,a.attrs,r,i,u(n,t,a.next,o,r)),a.eflags&q?p(t,a,n,r,i,o):a.next):t.length}function p(e,n,r,i,o,s){var l=e.length;$.hasOwnProperty(n.name)||($[n.name]=new RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));for(var c=$[n.name],h=n.next,d=n.next+1;d<l&&("</"!==e[d-1]||!c.test(e[d]));d++);d<l&&(d-=1);var f=e.slice(h,d).join("");if(n.eflags&t.eflags.CDATA)r.cdata&&r.cdata(f,i,o,u(r,e,d,s,i));else{if(!(n.eflags&t.eflags.RCDATA))throw new Error("bug");r.rcdata&&r.rcdata(a(f),i,o,u(r,e,d,s,i))}return d}function m(e,n){var r=/^([-\w:]+)/.exec(e[n]),i={};i.name=r[1].toLowerCase(),i.eflags=t.ELEMENTS[i.name];for(var o=e[n].substr(r[0].length),a=n+1,s=e.length;a<s&&">"!==e[a];a++)o+=e[a];if(!(s<=a)){for(var l=[];""!==o;)if(r=U.exec(o)){if(r[4]&&!r[5]||r[6]&&!r[7]){for(var u=r[4]||r[6],c=!1,h=[o,e[a++]];a<s;a++){if(c){if(">"===e[a])break}else 0<=e[a].indexOf(u)&&(c=!0);h.push(e[a])}if(s<=a)break;o=h.join("");continue}var d=r[1].toLowerCase(),f=r[2]?g(r[3]):"";l.push(d,f),o=o.substr(r[0].length)}else o=o.replace(/^[\s\S][^a-z\s]*/,"");return i.attrs=l,i.next=a+1,i}}function g(t){var e=t.charCodeAt(0);return 34!==e&&39!==e||(t=t.substr(1,t.length-2)),i(r(t))}function y(e){var n,r,i=function(t,e){r||e.push(t)};return s({startDoc:function(t){n=[],r=!1},startTag:function(i,a,s){if(!r&&t.ELEMENTS.hasOwnProperty(i)){var l=t.ELEMENTS[i];if(!(l&t.eflags.FOLDABLE)){var u=e(i,a);if(!u)return void(r=!(l&t.eflags.EMPTY));if("object"!=typeof u)throw new Error("tagPolicy did not return object (old API?)");if(!("attribs"in u))throw new Error("tagPolicy gave no attribs");a=u.attribs;var c,h;if("tagName"in u?(h=u.tagName,c=t.ELEMENTS[h]):(h=i,c=l),l&t.eflags.OPTIONAL_ENDTAG){var d=n[n.length-1];!d||d.orig!==i||d.rep===h&&i===h||s.push("</",d.rep,">")}l&t.eflags.EMPTY||n.push({orig:i,rep:h}),s.push("<",h);for(var f=0,p=a.length;f<p;f+=2){var m=a[f],g=a[f+1];null!==g&&void 0!==g&&s.push(" ",m,'="',o(g),'"')}s.push(">"),l&t.eflags.EMPTY&&!(c&t.eflags.EMPTY)&&s.push("</",h,">")}}},endTag:function(e,i){if(r)return void(r=!1);if(t.ELEMENTS.hasOwnProperty(e)){var o=t.ELEMENTS[e];if(!(o&(t.eflags.EMPTY|t.eflags.FOLDABLE))){var a;if(o&t.eflags.OPTIONAL_ENDTAG)for(a=n.length;--a>=0;){var s=n[a].orig;if(s===e)break;if(!(t.ELEMENTS[s]&t.eflags.OPTIONAL_ENDTAG))return}else for(a=n.length;--a>=0&&n[a].orig!==e;);if(a<0)return;for(var l=n.length;--l>a;){var u=n[l].rep;t.ELEMENTS[u]&t.eflags.OPTIONAL_ENDTAG||i.push("</",u,">")}a<n.length&&(e=n[a].rep),n.length=a,i.push("</",e,">")}}},pcdata:i,rcdata:i,cdata:i,endDoc:function(t){for(;n.length;n.length--)t.push("</",n[n.length-1].rep,">")}})}function v(t,e,n,r,i){if(!i)return null;try{var o=URI.parse(""+t);if(o&&(!o.hasScheme()||G.test(o.getScheme()))){var a=i(o,e,n,r);return a?a.toString():null}}catch(t){return null}return null}function b(t,e,n,r,i){if(n||t(e+" removed",{change:"removed",tagName:e}),r!==i){var o="changed";r&&!i?o="removed":!r&&i&&(o="added"),t(e+"."+n+" "+o,{change:o,tagName:e,attribName:n,oldValue:r,newValue:i})}}function _(t,e,n){var r;return r=e+"::"+n,t.hasOwnProperty(r)?t[r]:(r="*::"+n,t.hasOwnProperty(r)?t[r]:void 0)}function w(e,n){return _(t.LOADERTYPES,e,n)}function x(e,n){return _(t.URIEFFECTS,e,n)}function C(e,n,r,i,o){for(var a=0;a<n.length;a+=2){var s,l=n[a],u=n[a+1],c=u,h=null;if(s=e+"::"+l,(t.ATTRIBS.hasOwnProperty(s)||(s="*::"+l,t.ATTRIBS.hasOwnProperty(s)))&&(h=t.ATTRIBS[s]),null!==h)switch(h){case t.atype.NONE:break;case t.atype.SCRIPT:u=null,o&&b(o,e,l,c,u);break;case t.atype.STYLE:if(void 0===M){u=null,o&&b(o,e,l,c,u);break}var d=[];M(u,{declaration:function(e,n){var i=e.toLowerCase();N(i,n,r?function(e){return v(e,t.ueffects.SAME_DOCUMENT,t.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:i},r)}:null),n.length&&d.push(i+": "+n.join(" "))}}),u=d.length>0?d.join(" ; "):null,o&&b(o,e,l,c,u);break;case t.atype.ID:case t.atype.IDREF:case t.atype.IDREFS:case t.atype.GLOBAL_NAME:case t.atype.LOCAL_NAME:case t.atype.CLASSES:u=i?i(u):u,o&&b(o,e,l,c,u);break;case t.atype.URI:u=v(u,x(e,l),w(e,l),{TYPE:"MARKUP",XML_ATTR:l,XML_TAG:e},r),o&&b(o,e,l,c,u);break;case t.atype.URI_FRAGMENT:u&&"#"===u.charAt(0)?(u=u.substring(1),null!==(u=i?i(u):u)&&void 0!==u&&(u="#"+u)):u=null,o&&b(o,e,l,c,u);break;default:u=null,o&&b(o,e,l,c,u)}else u=null,o&&b(o,e,l,c,u);n[a+1]=u}return n}function S(e,n,r){return function(i,o){if(!(t.ELEMENTS[i]&t.eflags.UNSAFE))return{attribs:C(i,o,e,n,r)};r&&b(r,i,void 0,void 0,void 0)}}function k(t,e){var n=[];return y(e)(t,n),n.join("")}function D(t,e,n,r){return k(t,S(e,n,r))}var M,N;"undefined"!=typeof window&&(M=window.parseCssDeclarations,N=window.sanitizeCssProperty,window.cssSchema);var T={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:""},A=/^#(\d+)$/,P=/^#x([0-9A-Fa-f]+)$/,j=/^[A-Za-z][A-za-z0-9]+$/,O="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,I=/\0/g,E=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,L=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,R=/&/g,F=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,B=/[<]/g,H=/>/g,W=/\"/g,U=new RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),V=3==="a,b".split(/(,)/).length,q=t.eflags.CDATA|t.eflags.RCDATA,z={},$={},G=/^(?:https?|mailto)$/i,Y={};return Y.escapeAttrib=Y.escapeAttrib=o,Y.makeHtmlSanitizer=Y.makeHtmlSanitizer=y,Y.makeSaxParser=Y.makeSaxParser=s,Y.makeTagPolicy=Y.makeTagPolicy=S,Y.normalizeRCData=Y.normalizeRCData=a,Y.sanitize=Y.sanitize=D,Y.sanitizeAttribs=Y.sanitizeAttribs=C,Y.sanitizeWithPolicy=Y.sanitizeWithPolicy=k,Y.unescapeEntities=Y.unescapeEntities=i,Y}(html4),html_sanitize=html.sanitize;"undefined"!=typeof window&&(window.html=html,window.html_sanitize=html_sanitize);var Sanitizer={};Sanitizer.escapeAttrib=html.escapeAttrib,Sanitizer.makeHtmlSanitizer=html.makeHtmlSanitizer,Sanitizer.makeSaxParser=html.makeSaxParser,Sanitizer.makeTagPolicy=html.makeTagPolicy,Sanitizer.normalizeRCData=html.normalizeRCData,Sanitizer.sanitizeAttribs=html.sanitizeAttribs,Sanitizer.sanitizeWithPolicy=html.sanitizeWithPolicy,Sanitizer.unescapeEntities=html.unescapeEntities,Sanitizer.escape=html.escapeAttrib,Sanitizer.sanitize=function(t,e,n,r){return"string"==typeof t&&(t=t.replace(/<([a-zA-Z]+)([^>]*)\/>/g,"<$1$2></$1>")),t?html.sanitize(t,e,n,r):t},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Sanitizer),exports.Sanitizer=Sanitizer):this.Sanitizer=Sanitizer,define("cdf/lib/sanitizer",["cdf/lib/sanitizer/lib/html4","cdf/lib/sanitizer/lib/uri"],function(t){return function(){return t.Sanitizer}}(this)),define("cdf/dashboard/Utils",["../Logger","amd!../lib/underscore","../lib/moment","../lib/CCC/cdo","../lib/jquery","amd!../lib/queryParser","../lib/sanitizer"],function(t,e,n,r,i){
function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n][0]]=t[n][1]);return e}function a(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push([n,t[n]]);return e}var s={},l=void 0,u=void 0;return s.escapeHtml=function(e){return"string"!=typeof e?(t.warn("escapeHtml expects string values, returning an empty string"),""):e.replace(/&(?!#([0-9][0-9]?[0-9]?[0-9]?[0-9]?);)(?!([a-zA-Z]{2,8});)(?!#x[A-F0-9][A-F0-9][A-F0-9]?[A-F0-9]?;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},s.sanitizeHtml=function(t){return t=t.replace(/<iframe\b[^>]*>/gi,"<script>").replace(/<\/iframe>/gi,"<\/script>"),t=Sanitizer.sanitize(t)},s.getPathParameter=function(t){t=t||window.location.pathname,t=decodeURIComponent(t);var e=t.match("/:(.[^/]+)(.*)/");if(e&&e.length>1)return(":"+e[1]).replace(/:/g,"/")},s.getLocationSearchString=function(){return window.location.search},s.getQueryParameter=function(t){return void 0===u&&(u=i.parseQuery(this.getLocationSearchString())),u[t]||""},s.numberFormat=function(t,e,n){if(void 0===l&&(l=r.format.language().createChild()),null!=n){var i=r.format.language(n).createChild();return i.number({mask:e}),i.number()(t)}return l.number({mask:e}),l.number()(t)},s.configLanguage=function(t,e){var i=e.dateLocale||{},o=n.locale();delete e.dateLocale,r.format.language(t,e),n.locale(t,i),n.locale(o)},s.dateFormat=function(t,e,r){var i=n(t);return i.isValid()?(null!=r&&(null===n.localeData(r)&&(r="en-US"),i.locale(r)),i.format(e)):i.toDate()},s.dateParse=function(t,e){return n(t,e).toDate()},s.propertiesArrayToObject=function(t){return e.isArray(t)&&o(t)||e.isObject(t)&&t||void 0},s.objectToPropertiesArray=function(t){return e.isArray(t)&&t||e.isObject(t)&&a(t)||void 0},s.getURLParameters=function(t){if(t.indexOf("?")>0)for(var e=t.split("?"),n=e[1].split("&"),r=[],i=0;i<n.length;i++){var o=n[i].split("=");if(0==o[0].indexOf("param",0)){var a=[o[0].substring(5,o[0].length),unescape(o[1])];r.push(a)}}return r},s.toFormatedString=function(t){t+="";for(var e=t.split("."),n=e[0],r=e.length>1?"."+e[1]:"",i=/(\d+)(\d{3})/;i.test(n);)n=n.replace(i,"$1,$2");return n+r},s.doCsvQuoting=function(t,e,n){var r='"';return null==e?t:null==t?null:(t.indexOf(r)>=0&&(t=t.replace(r,r.concat(r))),(n||t.indexOf(e)>=0)&&(t=r.concat(t,r)),t)},s.ev=function(t){return"function"==typeof t?t():t},s.post=function(t,e){var n='<form action="'+t+'" method="post">';for(var r in e){var o=s.ev(e[r]);"string"==typeof o&&(o=o.replace(/"/g,"'")),n+='"<input type="hidden" name="'+r+'" value="'+o+'"/>'}n+="</form>",i(n).appendTo("body").submit().remove()},s.clone=function(t){var e=t instanceof Array?[]:{};for(var n in t){var r=t[n];if("object"==typeof r)if(r instanceof Array){e[n]=[];for(var i=0;i<r.length;i++)"object"!=typeof r[i]?e[n].push(r[i]):e[n].push(this.clone(r[i]))}else e[n]=this.clone(r);else e[n]=r}return e},s.addArgs=function(t){void 0!=t&&(this.args=getURLParameters(t))},s.getArgValue=function(t){for(var e=0;e<this.args.length;e++)if(this.args[e][0]==t)return this.args[e][1]},s.eachValuesArray=function(t,e,n,r){"function"==typeof e&&(r=n,n=e,e=null);for(var i=!(!e||!e.valueAsId),o=0,a=0,s=t.length;o<s;o++){var l=t[o];if(l&&l.length){var u,c,h=l[0],d=void 0;if(l.length>1?(i&&(d=h),c=""+l[1],u=i||null==h?c:""+h):u=c=""+h,!1===n.call(r,u,c,d,a,o))return!1;a++}}return!0},s.parseMultipleValues=function(t){if(null!=t&&""!==t){if(this.isArray(t))return t;if("string"==typeof t)return t.split("|")}return null},s.normalizeValue=function(t){return""===t||null==t?null:this.isArray(t)&&!t.length?null:t},s.isArray=function(t){return!!t&&(t instanceof Array||"object"==typeof t&&t.join&&null!=t.length)},s.isFunction=function(t){return"function"==typeof t},s.isString=function(t){return"string"==typeof t||t instanceof String},s.isNumber=function(t){return"number"==typeof t&&isFinite(t)},s.equalValues=function(t,e){if(t=this.normalizeValue(t),e=this.normalizeValue(e),t===e)return!0;if(this.isArray(t)&&this.isArray(e)){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(!this.equalValues(t[n],e[n]))return!1;return!0}return t==e},s.hsvToRgb=function(t,e,n){n/=100,e/=100;var r,i=t%360/60,o=n*e,a=n-o,s=Math.abs(i%2-1),l=n*(1-e*s),u=n;switch(~~i){case 0:r=[u,l,a];break;case 1:r=[l,u,a];break;case 2:r=[a,u,l];break;case 3:r=[a,l,u];break;case 4:r=[l,a,u];break;case 5:r=[u,a,l]}return r.forEach(function(t,e){r[e]=Math.min(255,Math.round(256*t))}),"rgb("+r.join(",")+")"},s}),define("cdf/components/BaseComponent",["../lib/Base","../lib/jquery","amd!../lib/underscore","amd!../lib/backbone","../Logger","../dashboard/Utils"],function(t,e,n,r,i,o){return t.extend(r.Events).extend({name:void 0,type:void 0,htmlObject:void 0,visible:!0,isManaged:!0,timerStart:0,timerSplit:0,elapsedSinceSplit:-1,elapsedSinceStart:-1,logColor:void 0,isDisposed:!1,constructor:function(t){this.extend(t)},placeholder:function(t){var n=this.htmlObject;return n?e("#"+n+(t?" "+t:"")):e()},focus:function(){try{this.placeholder("*:first").focus()}catch(t){}},_doAutoFocus:function(){this.autoFocus&&(delete this.autoFocus,this.focus())},clear:function(){this.placeholder().empty()},copyEvents:function(t,e){n.each(e,function(e,n){for(var r=e,i=e.tail;(r=r.next)!==i;)t.on(n,r.callback,r.context)})},clone:function(t,n,r){this._throwIfDisposed();var i,o,a;return o=this.dashboard,a=this._events,delete this.dashboard,delete this._events,i=e.extend(!0,{},this),i.dashboard=this.dashboard=o,this._events=a,this.copyEvents(i,a),i.parameters&&(i.parameters=i.parameters.map(function(e){return e[1]in t?[e[0],t[e[1]]]:e})),i.components&&(i.components=i.components.map(function(t){return t in n?n[t]:t})),i.htmlObject=i.htmlObject?r[i.htmlObject]:void 0,i.listeners&&(i.listeners=i.listeners.map(function(e){return e in t?t[e]:e})),i.parameter&&i.parameter in t&&(i.parameter=t[i.parameter]),i},getAddIn:function(t,e){if(!this.dashboard)return i.warn("dashboard not yet defined, can't call getAddIn"),!1;var n="function"==typeof this.type?this.type():this.type;return this.dashboard.getAddIn(n,t,e)},hasAddIn:function(t,e){if(!this.dashboard)return i.warn("dashboard not yet defined, can't call hasAddIn"),!1;var n="function"==typeof this.type?this.type():this.type;return this.dashboard.hasAddIn(n,t,e)},getValuesArray:function(){var t;if(void 0===this.valuesArray||0==this.valuesArray.length){if(void 0!==this.queryDefinition){var n="sql"==this.queryDefinition.queryType?"sql":"none";"mdx"!=this.queryDefinition.queryType||this.valueAsId?void 0===this.queryDefinition.dataAccessId||this.valueAsId||(n="cda"):n="mdx",QueryComponent.makeQuery(this);var r=new Array;for(o in this.result)if(this.result.hasOwnProperty(o))switch(n){case"sql":r.push([this.result[o][0],this.result[o][1]]);break;case"mdx":r.push([this.result[o][1],this.result[o][0]]);break;case"cda":r.push([this.result[o][0],this.result[o][1]]);break;default:r.push([this.result[o][0],this.result[o][0]])}return r}if(!this.dashboard)return i.warn("dashboard not yet defined, returning an empty array"),[];for(var o=new Array(this.parameters?this.parameters.length:0),a=0,s=o.length;a<s;a++){var l=this.parameters[a][0],u=""==this.parameters[a][1]||"NIL"==this.parameters[a][1]?this.parameters[a][2]:this.dashboard.getParameterValue(this.parameters[a][1]);o[a]=[l,u]}var c=this;if(this.url){var h={};e.each(o,function(t,e){h[e[0]]=e[1]}),t=this.dashboard.parseXActionResult(c,this.dashboard.urlAction(this.url,h))}else t=this.dashboard.callPentahoAction(c,this.solution,this.path,this.action,o,null);return this.parseArray(t,!1)}return this.valuesArray},parseArray:function(t,n){if(null===t)return[];if(e(t).find("CdaExport").size()>0)return this.parseArrayCda(t,n);var r=new Array,i=e(t).find("COLUMN-HDR-ITEM");if(n&&i.size()>0){var o=new Array;i.each(function(){o.push(e(this).text())}),r.push(o)}return e(t).find("DATA-ROW").each(function(){var t=new Array;e(this).children("DATA-ITEM").each(function(){t.push(e(this).text())}),r.push(t)}),r},parseArrayCda:function(t,n){var r=new Array,i=e(t).find("ColumnMetaData");if(i.size()>0&&n){var o=new Array;i.each(function(){o.push(e(this).attr("name"))}),r.push(o)}return e(t).find("Row").each(function(){var t=new Array;e(this).children("Col").each(function(){t.push(e(this).text())}),r.push(t)}),r},setAddInDefaults:function(t,e,n){i.log("BaseComponent.setAddInDefaults was removed. You should call setAddInOptions or dashboard.setAddInDefaults")},setAddInOptions:function(t,e,n){this.addInOptions||(this.addInOptions={}),this.addInOptions[t]||(this.addInOptions[t]={}),this.addInOptions[t][e]=n},getAddInOptions:function(t,e){var n=null;try{n=this.addInOptions[t][e]}catch(t){}return n||{}},dispose:function(){this.isDisposed||(this.isDisposed=!0,null!=this.dashboard?this.dashboard.removeComponent(this):this._unlink(),this._disposeCore())},onWillRemove:function(){this._unlink()},_unlink:function(){null!=this.query&&(this.query.dispose(),this.query=null),this.placeholder().off()},_disposeCore:function(){},_throwIfDisposed:function(){if(this.isDisposed)throw new Error("Invalid operation. The component has been disposed.")},startTimer:function(){this.timerStart=new Date,this.timerSplit=new Date},splitTimer:function(){-1!==this.elapsedSinceStart&&-1!==this.elapsedSinceSplit||this.startTimer();var t=new Date;return this.elapsedSinceStart=t.getTime()-this.timerStart.getTime(),this.elapsedSinceSplit=t.getTime()-this.timerSplit.getTime(),this.timerSplit=t,this.getTimerInfo()},formatTimeDisplay:function(t){return Math.log(t)/Math.log(10)>=3?Math.round(t/100)/10+"s":t+"ms"},getTimerInfo:function(){return{timerStart:this.timerStart,timerSplit:this.timerSplit,elapsedSinceStart:this.elapsedSinceStart,elapsedSinceStartDesc:this.formatTimeDisplay(this.elapsedSinceStart),elapsedSinceSplit:this.elapsedSinceSplit,elapsedSinceSplitDesc:this.formatTimeDisplay(this.elapsedSinceSplit)}},getLogColor:function(){if(this.logColor)return this.logColor;var t=function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e}(this.name).toString(),e=t.substr(t.length-6,2)||0,n=t.substr(t.length-2,2)||0,r=t.substr(t.length-4,2)||0;return this.logColor=o.hsvToRgb(3.6*e,.75*n,45+.35*r),this.logColor}})}),define("cdf/dashboard/RefreshEngine",["amd!../lib/underscore"],function(t){return function(t){var e=new Array,n=null,r=0,i=null,o=function(){return{nextRefresh:0,component:null}},a=function(e){null!=i&&(clearInterval(i),i=null),0!=(r=e>0?e:0)&&(i=setInterval(t.refreshEngine.fireGlobalRefresh,1e3*r))},s=function(t){for(var n=0;n<e.length;n++)e[n].component==t&&(e.splice(n,1),n--)},l=function(){e.length>0&&e.splice(0,e.length)},u=function(t,e){for(var n,r=t.length-1,i=0;i<=r;)if(n=parseInt((i+r)/2),t[n].nextRefresh>e.nextRefresh)r=n-1;else{if(!(t[n].nextRefresh<e.nextRefresh))return n;i=n+1}return i},c=function(t,e){var n=u(t,e);t.splice(n,0,e)},h=function(){null!=n&&(clearTimeout(n),n=null)},d=function(){h(),t.refreshEngine.fireRefresh()},f=function(){return(new Date).getTime()},p=function(t){return e.length>0&&e[0].component==t},m=function(e){t.update(e)},g=function(t){var n=f();if(t.refreshPeriod>0||(t.refreshPeriod=0),0!=t.refreshPeriod){var r=new o;r.nextRefresh=n+1e3*t.refreshPeriod,r.component=t,c(e,r)}},y=function(t){s(t),g(t)};return{registerComponent:function(t,e){if(!t)return!1;t.refreshPeriod=e>0?e:0;var n=p(t);return s(t),n&&d(),!0},unregisterComponent:function(t){t&&s(t)},getRefreshPeriod:function(t){return t&&t.refreshPeriod>0?t.refreshPeriod:0},processComponent:function(t){return y(t),p(t)&&d(),!0},processComponents:function(){l();for(var e=0;e<t.components.length;e++)g(t.components[e]);return d(),!0},fireRefresh:function(){n=null;for(var r=f(),i=null;e.length>0&&e[0].nextRefresh<=r;){i=e.shift().component,t.isComponentUpdating(i)?g(i):m(i)}e.length>0&&(n=setTimeout(t.refreshEngine.fireRefresh,e[0].nextRefresh-r))},fireGlobalRefresh:function(){for(var e=0;e<t.components.length;e++){var n=t.components[e];n.refreshPeriod>0||"select"==n.type||m(n)}},setGlobalRefresh:function(t){a(t)},getQueue:function(){return e},stopTimer:h,clearQueue:l,dispose:function(){this.stopTimer(),this.setGlobalRefresh(0),this.clearQueue()}}}}),function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function r(t,e){z[F]=t,z[F+1]=e,2===(F+=2)&&L()}function i(){return function(){E(a)}}function o(){return function(){setTimeout(a,1)}}function a(){for(var t=0;t<F;t+=2){(0,z[t])(z[t+1]),z[t]=void 0,z[t+1]=void 0}F=0}function s(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function u(){return new TypeError("A promises callback cannot return that same promise.")}function c(t){try{return t.then}catch(t){return Q.error=t,Q}}function h(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function d(t,e,n){B(function(t){var r=!1,i=h(n,e,function(n){r||(r=!0,e!==n?m(t,n):y(t,n))},function(e){r||(r=!0,v(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,v(t,i))},t)}function f(t,e){e._state===G?y(t,e._result):e._state===Y?v(t,e._result):b(e,void 0,function(e){m(t,e)},function(e){v(t,e)})}function p(t,n){if(n.constructor===t.constructor)f(t,n);else{var r=c(n);r===Q?v(t,Q.error):void 0===r?y(t,n):e(r)?d(t,n,r):y(t,n)}}function m(e,n){e===n?v(e,l()):t(n)?p(e,n):y(e,n)}function g(t){t._onerror&&t._onerror(t._result),_(t)}function y(t,e){t._state===$&&(t._result=e,t._state=G,0!==t._subscribers.length&&B(_,t))}function v(t,e){t._state===$&&(t._state=Y,t._result=e,B(g,t))}function b(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+G]=n,i[o+Y]=r,0===o&&t._state&&B(_,t)}function _(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,a=0;a<e.length;a+=3)r=e[a],i=e[a+n],r?C(n,r,i,o):i(o);t._subscribers.length=0}}function w(){this.error=null}function x(t,e){try{return t(e)}catch(t){return X.error=t,X}}function C(t,n,r,i){var o,a,s,l,c=e(r);if(c){if(o=x(r,i),o===X?(l=!0,a=o.error,o=null):s=!0,n===o)return void v(n,u())}else o=i,s=!0;n._state!==$||(c&&s?m(n,o):l?v(n,a):t===G?y(n,o):t===Y&&v(n,o))}function S(t,e){try{e(function(e){m(t,e)},function(e){v(t,e)})}catch(e){v(t,e)}}function k(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(s),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?y(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&y(n.promise,n._result))):v(n.promise,n._validationError())}function D(t){return new K(this,t).promise}function M(t){function e(t){m(i,t)}function n(t){v(i,t)}var r=this,i=new r(s);if(!R(t))return v(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,a=0;i._state===$&&a<o;a++)b(r.resolve(t[a]),void 0,e,n);return i}function N(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(s);return m(n,t),n}function T(t){var e=this,n=new e(s);return v(n,t),n}function A(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(t){this._id=nt++,this._state=void 0,this._result=void 0,this._subscribers=[],s!==t&&(e(t)||A(),this instanceof j||P(),S(this,t))}function O(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=rt)}var I;I=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var E,L,R=I,F=0,B=r,H="undefined"!=typeof window?window:void 0,W=H||{},U=W.MutationObserver||W.WebKitMutationObserver,V="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,z=new Array(1e3);L=V?function(){var t=process.nextTick,e=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=setImmediate),function(){t(a)}}():U?function(){var t=0,e=new U(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():q?function(){var t=new MessageChannel;return t.port1.onmessage=a,function(){t.port2.postMessage(0)}}():void 0===H&&"function"==typeof require?function(){try{var t=require,e=t("vertx");return E=e.runOnLoop||e.runOnContext,i()}catch(t){return o()}}():o();var $=void 0,G=1,Y=2,Q=new w,X=new w;k.prototype._validateInput=function(t){return R(t)},k.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},k.prototype._init=function(){this._result=new Array(this.length)};var K=k;k.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===$&&i<e;i++)t._eachEntry(r[i],i)},k.prototype._eachEntry=function(t,e){var r=this,i=r._instanceConstructor;n(t)?t.constructor===i&&t._state!==$?(t._onerror=null,r._settledAt(t._state,e,t._result)):r._willSettleAt(i.resolve(t),e):(r._remaining--,r._result[e]=t)},k.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===$&&(r._remaining--,t===Y?v(i,n):r._result[e]=n),0===r._remaining&&y(i,r._result)},k.prototype._willSettleAt=function(t,e){var n=this;b(t,void 0,function(t){n._settledAt(G,e,t)},function(t){n._settledAt(Y,e,t)})};var J=D,Z=M,tt=N,et=T,nt=0,rt=j;j.all=J,j.race=Z,j.resolve=tt,j.reject=et,j.prototype={constructor:j,then:function(t,e){var n=this,r=n._state;if(r===G&&!t||r===Y&&!e)return this;var i=new this.constructor(s),o=n._result;if(r){var a=arguments[r-1];B(function(){C(r,i,a,o)})}else b(n,i,t,e);return i},catch:function(t){return this.then(null,t)}};var it=O,ot={Promise:rt,polyfill:it};"function"==typeof define&&define.amd?define("pentaho/shim/_es6-promise/es6-promise",[],function(){return ot}):"undefined"!=typeof module&&module.exports?module.exports=ot:void 0!==this&&(this.ES6Promise=ot),it()}.call(this),define("pentaho/shim/es6-promise",["./_es6-promise/es6-promise"],function(t){return t.polyfill(),Promise}),define("pentaho/util/requireJS",["require","../shim/es6-promise"],function(t){var e=function(){return require.s.contexts[t.contextName||"_"]}(),n=Array.prototype.slice,r={define:function(t,n,i){if(!t||"string"!=typeof t)throw new Error("Argument 'id' is required.");return Array.isArray(n)||(i=n,n=null),n||"function"!=typeof i||(n=[]),e.defQueue.push([t,n,i]),e.defQueueMap[t]=!0,r},promise:function(t,r){if(null==t)throw new Error("Argument 'deps' is required.");var i=r||e.require;return Array.isArray(t)?new Promise(function(e,r){i(t,function(){e(n.call(arguments))},r)}):new Promise(function(e,n){i([t],e,n)})},config:function(t){return arguments.length>0?(e.configure(t),r):e.config}};return r}),define("pentaho/util/has",[],function(){"use strict";function t(t){return e.call(i,t)&&!!i[t]}var e=Object.prototype.hasOwnProperty,n=!1;if("undefined"!=typeof URL)try{var r=new URL("b","http://a");r.pathname="c%20d",n="http://a/c%20d"===r.href}catch(t){}var i={"Object.setPrototypeOf":null!=Object.setPrototypeOf,"Object.prototype.__proto__":null!={}.__proto__,URL:n};return t}),define("pentaho/util/url",["./has"],function(t){"use strict";function e(e){if(!e)return null;if(t("URL"))return new URL(e,document.location);var i=n(e)||n(e=r(e))||[e,"",null,"",null,e],o=i[1]||"",a=i[2]?i[2].slice(0,-1).split(":"):"",s=i[3]||"",l=i[4]?i[4].substring(1):"",u=i[5]||"";return{href:e,protocol:o,username:a.length>0?a[0]:"",password:a.length>1?a[1]:"",hostname:s,host:s+":"+l,port:l,origin:o+"//"+s+":"+l,pathname:u,toString:function(){return e}}}function n(t){return/^\s*([^:\/?#]+:)\/\/([^@]*@)?([^:\/?#]*)(:\d*)?(\/[^?#]*)+/.exec(t)}function r(t){var e=document.createElement("a");return e.href=t,e.href}return{create:e,parse:n}}),define("pentaho/environment/impl/Environment",["pentaho/util/url"],function(t){"use strict";function e(e,r){e||(e={}),this.application=n(e,"application",r),this.theme=n(e,"theme",r);var i=n(e,"locale",r);this.locale=i&&i.toLowerCase();var o=n(e,"user"),a=n(r,"user");this.user=Object.freeze({id:n(o,"id",a),home:n(o,"home",a)}),o=n(e,"server"),a=n(r,"server"),this.server=Object.freeze({root:t.create(n(o,"root",a)),packages:t.create(n(o,"packages",a)),services:t.create(n(o,"services",a))}),this.reservedChars=n(e,"reservedChars",r),Object.freeze(this)}function n(t,e,n){return t&&t[e]||n&&n[e]||null}var r=e.prototype={createChild:function(t){return new e(t,this.toSpec())},toSpec:function(){return{application:this.application,theme:this.theme,locale:this.locale,user:{id:this.user.id,home:this.user.home},server:{root:this.server.root&&this.server.root.href,packages:this.server.packages&&this.server.packages.href,services:this.server.services&&this.server.services.href},reservedChars:this.reservedChars}}};return r.toJSON=r.toSpec,e}),define("pentaho/environment/main",["pentaho/util/requireJS","./impl/Environment"],function(t,e){"use strict";return new e(t.config().config["pentaho/environment"]||null)}),define("pentaho/environment",["pentaho/environment/main"],function(t){return t}),Object.create||(Object.create=function(){function t(t){e.prototype=t||{};var r=new e;return e.prototype=n,r}var e=function(){},n=e.prototype;return t}()),Function.prototype.method=Function.prototype.method||function(t,e){return this.prototype[t]=e,this},String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.match(t+"$")==t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var a in i)t.call(i,a)&&o.push(a);if(e)for(var s=0;s<r;s++)t.call(i,n[s])&&o.push(n[s]);return o}}()),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),r=new Array(a),i=0;i<a;){var s,l;i in o&&(s=o[i],l=t.call(n,s,i,o),r[i]=l),i++}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);i<n;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!=r&&r!=1/0&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,n,r=this.length;if("function"!=typeof t)throw new TypeError("First argument is not callable");if((0==r||null===r)&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");for(arguments.length<=1?(n=this[0],e=1):n=arguments[1],e=e||0;e<r;++e)e in this&&(n=t.call(void 0,n,this[e],e,this));return n}),Date.prototype.toISOString||function(){function t(t){return t<10?"0"+t:t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&t.call(e,this[r],r,this)}),Date.now||(Date.now=function(){return(new Date).valueOf()}),define("cdf/lib/shims",function(){}),define("cdf/dashboard/Dashboard",["../lib/Base","../Logger","./RefreshEngine","pentaho/environment","amd!../lib/underscore","amd!../lib/backbone","../lib/jquery","module","amd!../lib/jquery.impromptu","../lib/shims"],function(t,e,n,r,i,o,a,s){return t.extend({constructor:function(t){function s(t,n){"function"==typeof t?(e.info("Calling init method of module: "+n),t.apply(u)):e.warn("Not calling init method of module: "+n)}function l(){var t=this;"function"==typeof a?(a.ajaxSetup({type:"POST",async:!1,traditional:!0,scriptCharset:"utf-8",contentType:"application/x-www-form-urlencoded;charset=UTF-8",dataFilter:function(e,n){return t.lastServerResponse=Date.now?Date.now():(new Date).getTime(),e}}),a.prompt&&"function"==typeof a.prompt.setDefaults?a.prompt.setDefaults({prefix:"jqi",show:"slideDown"}):e.log("$.prompt plugin not loaded!!"),"function"==typeof a.blockUI?(a.blockUI.defaults.fadeIn=0,a.blockUI.defaults.message='<div class="blockUIDefaultImg"></div>',a.blockUI.defaults.css.left="50%",a.blockUI.defaults.css.top="40%",a.blockUI.defaults.css.marginLeft="-16px",a.blockUI.defaults.css.width="32px",a.blockUI.defaults.css.background="none",a.blockUI.defaults.overlayCSS={backgroundColor:"#FFFFFF",opacity:.8,cursor:"wait"},a.blockUI.defaults.css.border="none"):e.log("$.blockUI plugin not loaded!!")):e.log("jQuery plugin not loaded!!")}var u=this;t&&(t.context&&(this.context=t.context),t.storage&&(this.context&&"anonymousUser"===this.context.user||(this.storage=t.storage)),t.view&&(this.view=t.view),this.isSilent=!!t.isSilent),i.extend(this,o.Events),l.call(u);var c=r.server.root;null!=c&&(this.webAppPath=c.toString()),null==this.webAppPath&&(this.webAppPath="/"+window.location.pathname.split("/")[1]),this.webAppPath.endsWith("/")&&(this.webAppPath=this.webAppPath.substr(0,this.webAppPath.length-1)),s(this._initContext,"Context"),s(this._initStorage,"Storage"),s(this._initViews,"Views"),s(this._initParameters,"Parameters"),s(this._initBookmarkables,"Bookmarkables"),s(this._initI18n,"I18n"),s(this._initComponents,"Components"),s(this._initLifecycle,"Lifecycle"),s(this._initNotifications,"Notifications"),s(this._initDataSources,"DataSources"),s(this._initQuery,"Query"),s(this._initAddIns,"AddIns"),s(this._throwIfDisposed,"Lifecycle"),this.refreshEngine=new n(this)},refreshEngine:void 0,globalContext:!1,contextObj:s.config().context||{},storageObj:s.config().storage||{},viewObj:s.config().view,legacyPriority:-1e3,logLifecycle:!0,args:[],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],isSilent:!1,registerEvent:function(t,e){void 0===this.events&&(this.events={}),this.events[t]=e},debug:1,isDisposed:!1,syncDebugLevel:function(){var t=1;try{var e=function(t){return t&&/\bdebug=true\b/.test(t)?t:null},n=e(window.location.href)||e(window.top.location.href);if(n){var r=/\bdebugLevel=(\d+)/.exec(n);t=r?+r[1]:3}}catch(t){}return this.debug=t},setGlobalContext:function(t){this.globalContext=t},getWebAppPath:function(){return this.webAppPath},getWcdfSettings:function(){return e.info("getWcdfSettings was not overridden, returning empty object"),{}},normalizeId:function(t){return t},dispose:function(){this.isDisposed||(this.isDisposed=!0,this.refreshEngine&&this.refreshEngine.dispose(),this.events&&(this.events={}),this._disposeComponents(),this._disposeStorage(),this._disposeParameters(),this._disposeViews())}})}),define("common-ui/util/URLEncoder",[],function(){function t(t){var e=[];for(var n in t){var i=t[n];if(i!==r[n]){var o=encodeURIComponent(n)+"=";if(Array.isArray(i))for(var a=0,s=i.length;a<s;++a)e.push(o+encodeURIComponent(i[a]));else e.push(o+encodeURIComponent(i))}}return e.join("&")}function e(t,e){return String(t).replace(/\{(\d+)\}/g,function(t,n){return e[n]})}pho="undefined"==typeof pho?{}:pho;var n=pho.Encoder||(pho.Encoder={}),r=Object.prototype;return n.encode=function(n,r,i){"use strict";if(void 0===r)return n;"string"==typeof r&&(r=[r]);var o=n.split("?")[0],a=(o.match(/\{[\d]+\}/g)||[]).length;r=(r||[]).map(function(t,e){var n=encodeURIComponent(String(t));return e<a&&(n=n.replace(/%5C/g,"%255C").replace(/%2F/g,"%252F")),n});var s=e(n,r);return i&&(s+=s.indexOf("?")>-1?"&":"?",s+=t(i)),s},n.encodeRepositoryPath=function(t){"use strict";return String(t).replace(new RegExp(":","g"),"\t").replace(new RegExp("[\\\\/]","g"),":")},n.decodeRepositoryPath=function(t){"use strict";return String(t).replace(new RegExp(":","g"),"/").replace(new RegExp("\\t","g"),":")},n}),require(["common-ui/util/URLEncoder"]),define("cdf/dashboard/Dashboard.ext",["common-ui/util/URLEncoder","pentaho/environment"],function(t,e){return{pluginName:"pentaho-cdf",samplesBasePath:"/public/plugin-samples/",getPluginBase:function(t){return e.server.root+"plugin/"+t+"/api"},getPluginWebsocketBase:function(t){return this.httpUrlToWebSocketUrl(""+e.server.root)+t+"/websocket"},getCdfBase:function(){return this.getPluginBase(this.pluginName)},getFilePathFromUrl:function(){var t=window.location.pathname;if(-1==t.indexOf("/:")&&(t=decodeURIComponent(window.location.pathname)),t.indexOf("/:")>0){var e=t.match("(/:)(.*)(/)");if(e[2])return"/"+e[2].replace(new RegExp(":","g"),"/")}},getTimestamp:function(){return"ts="+(new Date).getTime()},getFullPath:function(t,e){t=t||"",e=e||"";var n=0==t.indexOf(this.pluginName)?this.samplesBasePath+t:t;return n+=(e?"/"+e:"").replace(/\/\//g,"/")},composePath:function(t){var e=function(t){return"/"==t.charAt(0)&&(t=t.substring(1,t.length)),"/"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t},n="/";return t.solution&&(n+=e(t.solution)+"/"),t.path&&(n+=e(t.path)),t.action&&(n+="/"+e(t.action)),n},getSettings:function(t,e){return e?this.getCdfBase()+"/settings/"+t+"?"+$.param({key:e}):this.getCdfBase()+"/settings/"+t},getServiceAction:function(n,r,i,o){var a={};return a.wrapper=!1,a.action=o,a.url=t.encode(e.server.root+"api/repos/{0}/generatedContent",t.encodeRepositoryPath(this.getFullPath(i,o))),a},getStaticResource:function(t){return this.getCdfBase()+"/resources/"+t},getCaptifyZoom:function(){return this.getStaticResource("js/lib/captify/zoom.html")},getExport:function(){return this.getCdfBase()+"/export"},getPluginEndpoint:function(t,e){return this.getPluginBase(t)+"/"+e},getJSONSolution:function(){return this.getCdfBase()+"/getJSONSolution"},getRenderHTML:function(){return this.getCdfBase()+"/RenderHtml"},httpUrlToWebSocketUrl:function(t){return t.replace(/(http)(s)?\:\/\//i,"ws$2://")}}}),define("cdf/dashboard/Dashboard.context.ext",["./Dashboard.ext"],function(t){return{getContext:function(){return t.getCdfBase()+"/context/get"}}}),define("cdf/dashboard/Dashboard.context",["../lib/jquery","./Dashboard","./Dashboard.ext","./Dashboard.context.ext"],function(t,e,n,r){e.implement({context:void 0,_initContext:function(){this.context||(this.context={},t.extend(this.context,this.contextObj))}})}),define("cdf/dashboard/Container",[],function(){function t(t,e,r){var i;r||(r="instance"),this.build=function(n,o){if(i&&!o)return i;var a=e(t,n);return o||"singleton"!==r||(i=a),a},this.dispose=function(){i&&(n(i),i=null)}}function e(t,e,r){r||(r="external"),this.build=function(){return e},this.dispose=function(){e&&("singleton"===r&&n(e),e=null)}}function n(t){"function"==typeof t.dispose&&t.dispose()}function r(t){for(var e in t)if(i.call(t,e))return!1;return!0}var i=Object.prototype.hasOwnProperty;return function(){function n(t,e){if(!t)throw new Error("Argument 'type' is required.")
;if("string"!=typeof t)throw new Error("Argument 'type' must be a string.");var n=s[t];if(!e&&(!n||r(n)))throw new Error("There are no registrations for type '"+t+"'.");return n}function i(t,e,r){var i,o=n(t,r);if(o&&!(i=o[e||""])&&!r)throw new Error("There is no registration for type '"+t+"'"+(e?" and name '"+e+"'":"")+".");return i}function o(t,e,n,r,o){"string"!=typeof e&&(n=e,e="");var a=i(t,e,o);return n?r=!0:r||(n={}),a?a.build(n,r):null}function a(t,e){var r=n(t,e),i=[];for(var o in r)i.push(r[o].build({},!1));return i}this.register=function(n,r,i,o){if(!n)throw new Error("Argument 'type' is required.");if("string"!=typeof n)throw new Error("Argument 'type' must be a string.");if(null!=r&&("string"!=typeof r?(o=i,i=r,r=null):r||(r=null)),!i)throw new Error("Argument 'what' is required.");var a;switch(typeof i){case"function":a=new t(this,i,o);break;case"object":a=new e(this,i,o);break;default:throw new Error("Argument 'what' is of an invalid type.")}r||(r="");var l=s[n]||(s[n]={}),u=l[r];u&&u.dispose(),l[r]=a},this.has=function(t,e){return!!i(t,e,!0)},this.canNew=function(e,n){return i(e,n,!1)instanceof t},this.get=function(t,e){return o(t,e,null,!1,!1)},this.tryGet=function(t,e){return o(t,e,null,!1,!0)},this.getNew=function(t,e,n){return o(t,e,n,!0,!1)},this.tryGetNew=function(t,e,n){return o(t,e,n,!0,!0)},this.getAll=function(t){return a(t,!1)},this.tryGetAll=function(t){return a(t,!0)},this.listType=function(t){return n(t,!1)},this.tryListType=function(t){return n(t,!0)},this.dispose=function(){if(s){for(var t in s){var e=s[t];for(var n in e)e[n].dispose()}s=null}};var s={}}}),define("cdf/dashboard/Dashboard.addIns",["./Dashboard","./Container","./Utils"],function(t,e,n){function r(t,e){return-1!==t.indexOf("Component",t.length-"Component".length)&&(t=t.substring(0,t.length-"Component".length)),t=t.charAt(0).toUpperCase()+t.substring(1),e&&(t+="."+e),t}var i=new e;t.registerGlobalAddIn=function(t,e,n){var t=r(t,e),o=n.getName?n.getName():null;i.register(t,o,n)},t.implement({addIns:void 0,_initAddIns:function(){this.addIns=n.clone(i)},registerGlobalAddIn:function(e,n,r){t.registerGlobalAddIn(e,n,r)},registerAddIn:function(t,e,n){var t=r(t,e),i=n.getName?n.getName():null;this.addIns.register(t,i,n)},hasAddIn:function(t,e,n){var t=r(t,e);return Boolean(this.addIns&&this.addIns.has(t,n))},getAddIn:function(t,e,n){var t=r(t,e);try{return this.addIns.get(t,n)}catch(t){return null}},setAddInDefaults:function(t,e,n,r){var i=this.getAddIn(t,e,n);i&&i.setDefaults(r)},listAddIns:function(t,e){var t=r(t,e);try{return this.addIns.listType(t)}catch(t){return[]}}})}),define("cdf/dashboard/Dashboard.bookmarkable",["./Dashboard","../Logger","./Utils","../lib/jquery"],function(t,e,n,r){t.implement({_initBookmarkables:function(){this.bookmarkables={}},getHashValue:function(t){var e,n=window.location.hash;try{e=JSON.parse(n.slice(1))}catch(t){e={}}return 0===arguments.length?e:e[t]},setHashValue:function(t,e){var n;1==arguments.length?n=t:(n=this.getHashValue(),n[t]=e);var r=JSON.stringify(n);"{}"!=r?window.location.hash=r:window.location.hash&&(window.location.hash="")},deleteHashValue:function(t){if(0===arguments.length)window.location.hash="";else{var e=this.getHashValue();delete e[t],this.setHashValue(e)}},setBookmarkable:function(t,e){1===arguments.length?this.bookmarkables[t]=!0:this.bookmarkables[t]=e},isBookmarkable:function(t){return Boolean(this.bookmarkables[t])},generateBookmarkState:function(){var t={},e=this.bookmarkables;for(var n in e)e.hasOwnProperty(n)&&e[n]&&(t[n]=this.getParameterValue(n));return t},persistBookmarkables:function(t){this.bookmarkables[t]&&this.finishedInit&&this.setBookmarkState({impl:"client",params:this.generateBookmarkState()})},setBookmarkState:function(t){if(window.history&&window.history.replaceState){var e,i=window.location.pathname.split("/").pop(),o=window.location.search.slice(1).split("&").map(function(t){var e=t.split("=");return e[1]=decodeURIComponent(e[1]),e});o=n.propertiesArrayToObject(o),o.bookmarkState=JSON.stringify(t),e=i+"?"+r.param(o),window.history.replaceState({},"",e),this.deleteHashValue("bookmark")}else this.setHashValue("bookmark",t)},getBookmarkState:function(){if(window.location.hash.length>1)try{return this.getHashValue("bookmark")||{}}catch(t){}var t=window.location.search.slice(1).split("&").map(function(t){var e=t.split("=");return e[1]=decodeURIComponent(e[1]),e}),e=n.propertiesArrayToObject(t);return e.bookmarkState?JSON.parse(decodeURIComponent(e.bookmarkState.replace(/\+/g," ")))||{}:{}},restoreBookmarkables:function(){var t;try{t=this.getBookmarkState().params;for(var n in t)t.hasOwnProperty(n)&&this.setParameter(n,t[n])}catch(t){e.log(t,"error")}}})}),function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define("cdf/lib/mustache",["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function n(t){return m(t)?"array":typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}function o(t,e){return g.call(t,e)}function a(t){return!o(y,t)}function s(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return v[t]})}function l(e,n){function i(t){if("string"==typeof t&&(t=t.split(_,2)),!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(r(t[0])+"\\s*"),s=new RegExp("\\s*"+r(t[1])),l=new RegExp("\\s*"+r("}"+t[1]))}if(!e)return[];var o,s,l,d=[],f=[],p=[],g=!1,y=!1;i(n||t.tags);for(var v,S,k,D,M,N,T=new h(e);!T.eos();){if(v=T.pos,k=T.scanUntil(o))for(var A=0,P=k.length;A<P;++A)D=k.charAt(A),a(D)?p.push(f.length):y=!0,f.push(["text",D,v,v+1]),v+=1,"\n"===D&&function(){if(g&&!y)for(;p.length;)delete f[p.pop()];else p=[];g=!1,y=!1}();if(!T.scan(o))break;if(g=!0,S=T.scan(C)||"name",T.scan(b),"="===S?(k=T.scanUntil(w),T.scan(w),T.scanUntil(s)):"{"===S?(k=T.scanUntil(l),T.scan(x),T.scanUntil(s),S="&"):k=T.scanUntil(s),!T.scan(s))throw new Error("Unclosed tag at "+T.pos);if(M=[S,k,v,T.pos],f.push(M),"#"===S||"^"===S)d.push(M);else if("/"===S){if(!(N=d.pop()))throw new Error('Unopened section "'+k+'" at '+v);if(N[1]!==k)throw new Error('Unclosed section "'+N[1]+'" at '+v)}else"name"===S||"{"===S||"&"===S?y=!0:"="===S&&i(k)}if(N=d.pop())throw new Error('Unclosed section "'+N[1]+'" at '+T.pos);return c(u(f))}function u(t){for(var e,n,r=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}function c(t){for(var e,n,r=[],i=r,o=[],a=0,s=t.length;a<s;++a)switch(e=t[a],e[0]){case"#":case"^":i.push(e),o.push(e),i=e[4]=[];break;case"/":n=o.pop(),n[5]=e[2],i=o.length>0?o[o.length-1][4]:r;break;default:i.push(e)}return r}function h(t){this.string=t,this.tail=t,this.pos=0}function d(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function f(){this.cache={}}var p=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===p.call(t)},g=RegExp.prototype.test,y=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,_=/\s+/,w=/\s*=/,x=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/;h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},d.prototype.push=function(t){return new d(t,this)},d.prototype.lookup=function(t){var n,r=this.cache;if(r.hasOwnProperty(t))n=r[t];else{for(var o,a,s=this,l=!1;s;){if(t.indexOf(".")>0)for(n=s.view,o=t.split("."),a=0;null!=n&&a<o.length;)a===o.length-1&&(l=i(n,o[a])),n=n[o[a++]];else n=s.view[t],l=i(s.view,t);if(l)break;s=s.parent}r[t]=n}return e(n)&&(n=n.call(this.view)),n},f.prototype.clearCache=function(){this.cache={}},f.prototype.parse=function(t,e){var n=this.cache,r=n[t];return null==r&&(r=n[t]=l(t,e)),r},f.prototype.render=function(t,e,n){var r=this.parse(t),i=e instanceof d?e:new d(e);return this.renderTokens(r,i,n,t)},f.prototype.renderTokens=function(t,e,n,r){for(var i,o,a,s="",l=0,u=t.length;l<u;++l)a=void 0,i=t[l],o=i[0],"#"===o?a=this.renderSection(i,e,n,r):"^"===o?a=this.renderInverted(i,e,n,r):">"===o?a=this.renderPartial(i,e,n,r):"&"===o?a=this.unescapedValue(i,e):"name"===o?a=this.escapedValue(i,e):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(s+=a);return s},f.prototype.renderSection=function(t,n,r,i){function o(t){return a.render(t,n,r)}var a=this,s="",l=n.lookup(t[1]);if(l){if(m(l))for(var u=0,c=l.length;u<c;++u)s+=this.renderTokens(t[4],n.push(l[u]),r,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(t[4],n.push(l),r,i);else if(e(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(t[3],t[5]),o),null!=l&&(s+=l)}else s+=this.renderTokens(t[4],n,r,i);return s}},f.prototype.renderInverted=function(t,e,n,r){var i=e.lookup(t[1]);if(!i||m(i)&&0===i.length)return this.renderTokens(t[4],e,n,r)},f.prototype.renderPartial=function(t,n,r){if(r){var i=e(r)?r(t[1]):r[t[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},f.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},f.prototype.escapedValue=function(e,n){var r=n.lookup(e[1]);if(null!=r)return t.escape(r)},f.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.1",t.tags=["{{","}}"];var S=new f;t.clearCache=function(){return S.clearCache()},t.parse=function(t,e){return S.parse(t,e)},t.render=function(t,e,r){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+n(t)+'" was given as the first argument for mustache#render(template, view, partials)');return S.render(t,e,r)},t.to_html=function(n,r,i,o){var a=t.render(n,r,i);if(!e(o))return a;o(a)},t.escape=s,t.Scanner=h,t.Context=d,t.Writer=f}),define("cdf/dashboard/Dashboard.components",["./Dashboard","amd!../lib/backbone","../lib/mustache","../Logger","../lib/jquery"],function(t,e,n,r,i){t.implement({components:[],_initComponents:function(){this.components=[]},getComponent:function(t){if(!t||"string"!=typeof t)return void r.warn("getComponent: invalid component name");for(var e in this.components)if(this.components[e].name===t)return this.components[e]},getComp:function(t){return this.getComponent(t)},getComponentByName:function(t){return this.getComponent(t)},addComponents:function(t){if(!i.isArray(t))return void r.warn("addComponents: components in a structure other than an array will not be added");t.forEach(function(t){this.addComponent(t)},this)},addComponent:function(t,e){if(!t||!t.name)throw r.error("addComponent: invalid component"),new Error("addComponent: invalid component");t._throwIfDisposed();var n=this.getComponentByName(t.name);if(n){if(n!==t)throw r.error("addComponent: duplicate component name '"+t.name+"'"),new Error("addComponent: duplicate component name '"+t.name+"'");return this}this._bindControl(t);var i=e&&e.index,o=this.components.length;return null==i||i<0||i>=o?this.components.push(t):this.components.splice(i,0,t),this},getComponentIndex:function(t){if(null!=t)switch(typeof t){case"string":for(var e=0,n=this.components,r=n.length;e<r;e++)if(n[e].name===t)return e;break;case"number":if(t>=0&&t<this.components.length)return t;break;default:return this.components.indexOf(t)}return-1},removeComponent:function(t){var e=this.getComponentIndex(t);if(-1===e)return void r.warn("removeComponent: component not found");var n=this.components[e];return this.refreshEngine&&this.refreshEngine.unregisterComponent(this),n.onWillRemove(),n.clear(),this.components.splice(e,1),n.dashboard=null,n.off("cdf:postExecution"),n.off("cdf:preExecution"),n.off("cdf:error"),n.off("all"),n},_disposeComponents:function(){this.components.forEach(function(t){t.dashboard=null,t.dispose()}),this.components=[]},_bindControl:function(t){return t.dashboard||(t.dashboard=this,this._addLogLifecycleToControl(t)),t},_bindExistingControl:function(t){return t.dashboard||(t.dashboard=this,delete t.initInstance,"function"==typeof t.off&&t.off("all"),t.on||i.extend(t,e.Events),this._addLogLifecycleToControl(t),null!=t.priority&&""!==t.priority||(t.priority=this.legacyPriority++)),t},_castControlToClass:function(t,e){if(!(t instanceof e)){var n=this._makeInstance(e);i.extend(t,n)}},_getControlClass:function(t){var e=t.type;"function"==typeof e&&(e=e.call(t));for(var n=e.substring(0,1).toUpperCase()+e.substring(1),r=[n+"Component",e,n],i=0,o=r.length;i<o;i++){var a=window[r[i]];if(a&&"function"==typeof a)return a}},_makeInstance:function(t,e){var n=Object.create(t.prototype);return e?t.apply(n,e):t.apply(n),n},_castControlToComponent:function(t,e){if(!(t instanceof BaseComponent||e&&e.prototype instanceof BaseComponent)){var n=BaseComponent.prototype;for(var r in n)if(n.hasOwnProperty(r)&&void 0===t[r]&&"function"==typeof n[r])switch(r){case"base":break;default:t[r]=n[r]}}},_addLogLifecycleToControl:function(t){t.on("all",function(t){var e=this.dashboard;if(e&&e.logLifecycle&&"cdf"!==t&&"PostInitMarker"!==this.name&&"undefined"!=typeof console){var i,o=t.substr(4);switch(o){case"preExecution":i=">Start";break;case"postExecution":i="<End  ";break;case"error":i="!Error";break;default:i="      "}var a=n.render("Timing: {{elapsedSinceStartDesc}} since start, {{elapsedSinceStartDesc}} since last event",this.splitTimer());r.log("          [Lifecycle "+i+"] "+this.name+" ["+this.type+"] (P: "+this.priority+" ): "+o+" "+a+" (Running: "+this.dashboard.runningCalls+")","log","color: "+this.getLogColor())}})}})}),define("cdf/lib/cdf.jquery.i18n",["../lib/jquery","amd!./jquery.i18n"],function(t){var e,n=t.i18n.properties;t.i18n.properties=function(t){t.language=i(t),e&&a(t)};var r=t.i18n.browserLang;t.i18n.browserLang=function(){return null};var i=function(n){null!=n.language&&""!==n.language||(n.language=r()),null==n.language&&(n.language="");var i,a=null!=n.encoding?n.encoding:"UTF-8",s=null!=n.path?n.path:"",l=s+n.name+"_supported_languages.properties";return t.ajax({type:"GET",url:l,async:!1,xhrFields:{withCredentials:!0},cache:n.cache,contentType:"text/plain;charset="+a,dataType:"text",success:function(t){i=o(t,n.language),e=!0},error:function(t){e=!1,404===t.status&&(i=n.language)}}),i},o=function(t,e){var n;e.length>=2&&(n=e.substring(0,2));var r;if(e.length>=5&&(r=e.substring(0,5)),null!=t){for(var i=null,o=t.split(/\n/),a=0;a<o.length;a++){var s=o[a],l=s.substr(0,s.indexOf("="));l===n&&null==i&&(i=n),l===r&&(i=r)}return null==i&&(i=""),i}},a=function(e){t.ajaxSetup({type:"GET",xhrFields:{withCredentials:!0}}),n(e),t.ajaxSetup({type:"POST",xhrFields:{withCredentials:!0}})};return t}),define("cdf/dashboard/Dashboard.i18n",["../Logger","./Dashboard","./Dashboard.ext","pentaho/environment","../lib/moment","../lib/CCC/cdo","../lib/cdf.jquery.i18n"],function(t,e,n,r,i,o,a){e.implement({_i18nSupport:void 0,set i18nSupport(t){a.extend(this._i18nSupport,t)},get i18nSupport(){return this._i18nCurrentLanguageCode},_i18nCurrentLanguageCode:void 0,set i18nCurrentLanguageCode(t){this._i18nCurrentLanguageCode=t},get i18nCurrentLanguageCode(){return this._i18nCurrentLanguageCode},_initI18n:function(){this.setI18nSupport(void 0,{prop:function(e){return t.warn("i18n support wasn't properly initiated. Is the file messages_supported_languages.properties present?"),e}});var e=this.__normalizeLocale(),r={name:"messages",mode:"map",language:e,path:n.getStaticResource("resources/languages/"),callback:this.__initI18nCallback.bind(this,e)};a.i18n.properties(r);var s=o.format.language(e);o.format.language(s),i.locale(e)},__initI18nCallback:function(t){var e={name:"messages",mode:"map",type:"GET",language:t,path:this.getMessagesPath(),callback:this.setI18nSupport.bind(this,t,a.i18n)};a.i18n.properties(e)},__normalizeLocale:function(){var t=r.locale;return null!=t?t.split("-").join("_"):null},setI18nSupport:function(t,e){this.i18nCurrentLanguageCode=t,this.i18nSupport=e},getMessagesPath:function(){}})}),define("cdf/queries/CdaQuery.ext",["../dashboard/Dashboard.ext","../lib/jquery"],function(t,e){return{getDoQuery:function(){return t.getPluginBase("cda")+"/doQuery?"},getWebsocketQuery:function(){return t.getPluginWebsocketBase("cda")+"/query"},getUnwrapQuery:function(n){return t.getPluginBase("cda")+"/unwrapQuery?"+e.param(n)}}}),define("cdf/components/XactionComponent.ext",["../dashboard/Utils","../dashboard/Dashboard.ext","common-ui/util/URLEncoder","../lib/jquery"],function(t,e,n,r){return{getCdfXaction:function(i,o,a,s){if(s){var l={};for(var u in s)s.hasOwnProperty(u)&&(l[u]=t.ev(s[u]));return n.encode(e.getCdfBase()+"/viewAction",null,r.extend({path:e.getFullPath(i,o),ts:(new Date).getTime()},l))}return n.encode(e.getCdfBase()+"/viewAction",null,{path:e.getFullPath(i,o),ts:(new Date).getTime()})}}}),define("cdf/dashboard/Dashboard.legacy",["../queries/CdaQuery.ext","../components/XactionComponent.ext","./Dashboard.ext","./Dashboard","../Logger","../lib/jquery","css!./theme/Dashboard.legacy.css"],function(t,e,n,r,i,o){r.implement({callPentahoAction:function(t,e,n,r,i,o){var a=this;return"function"==typeof o?a.pentahoAction(e,n,r,i,function(e){o(a.parseXActionResult(t,e))}):a.parseXActionResult(t,a.pentahoAction(e,n,r,i,o))},urlAction:function(t,e,n){return this.executeAjax("xml",t,e,n)},executeAjax:function(t,e,n,r){if("function"==typeof r)return o.ajax({url:e,type:"POST",traditional:!0,dataType:t,async:!0,data:n,complete:function(t,e){r(t.responseXML)},error:function(t,e,n){i.error("Found error: "+t+" - "+e+", Error: "+n)}});var a=o.ajax({url:e,type:"POST",dataType:t,async:!1,data:n,error:function(t,e,n){i.error("Found error: "+t+" - "+e+", Error: "+n)}});return"xml"==t?a.responseXML:a.responseText},pentahoAction:function(t,e,n,r,i){return this.pentahoServiceAction("ServiceAction","xml",t,e,n,r,i)},pentahoServiceAction:function(t,e,r,i,a,s,l){var u=n.getServiceAction(t,r,i,a),c=u.url;return delete u.url,o.each(s,function(t,e){u[e[0]]=e[1]}),this.executeAjax(e,c,u,l)},CDF_ERROR_DIV:"cdfErrorDiv",createAndCleanErrorDiv:function(){0==o("#"+this.CDF_ERROR_DIV).length&&o("body").append("<div id='"+this.CDF_ERROR_DIV+"'></div>"),o("#"+this.CDF_ERROR_DIV).empty()},showErrorTooltip:function(){o(function(){o.tooltip&&o(".cdf_error").tooltip({delay:0,track:!0,fade:250,showBody:" -- "})})},parseXActionResult:function(t,e){var n=o(e),r=n.find("SOAP-ENV\\:Fault");if(0==r.length)return n;var i="Error executing component "+t.name,a=new Array;a[0]=" Error details for component execution "+t.name+" -- ",a[1]=r.find("SOAP-ENV\\:faultstring").find("SOAP-ENV\\:Text:eq(0)").text(),r.find("SOAP-ENV\\:Detail").find("message").each(function(){a.push(o(this).text())}),a.length>8&&(a=a.slice(0,7),a.push("..."));var s="<table class='errorMessageTable' border='0'><tr><td class='errorIcon'></td><td><span class='cdf_error' title=\""+a.join("<br/>").replace(/"/g,"'")+'" >'+i+" </span></td></tr></table>";return 0==t.visible?o("#"+this.CDF_ERROR_DIV).append("<br />"+s):o("#"+t.htmlObject).html(s),null},setSettingsValue:function(t,e){var r={method:"set",key:t,value:JSON.stringify(e)};o.post(n.getSettings("set",null),r,function(){})},getSettingsValue:function(t,e){o.ajax({type:"GET",dataType:"json",url:n.getSettings("get",t),data:args,async:!0,xhrFields:{withCredentials:!0}}).done("function"==typeof e?e:function(t){e=t})},fetchData:function(e,n,r){if(i.warn("Dashboard fetchData() is deprecated. Use Query objects instead"),void 0!=e&&void 0!=e.dataAccessId){for(var a in n)e["param"+n[a][0]]=this.getParameterValue(n[a][1]);o.post(t.getDoQuery(),e,function(t){r(t)},"json").error(this.handleServerError)}else r([])}})}),define("cdf/components/UnmanagedComponent",["./BaseComponent","amd!../lib/underscore","../lib/jquery","../Logger"],function(t,e,n,r){return t.extend({isManaged:!1,isRunning:!1,isDataPush:!1,preExec:function(){null==this.runCounter&&(this.runCounter=0);var t=!0;if("function"==typeof this.preExecution)try{var e=this.preExecution();void 0===e||e||(t=!1)}catch(e){t=!1,this.failExec(e)}return this.trigger("cdf cdf:preExecution",this,t),t},postExec:function(){"function"==typeof this.postExecution&&this.postExecution(),this.trigger("cdf cdf:postExecution",this)},postFetchData:function(t){if("function"==typeof this.postFetch){var e=this.postFetch(t);t=void 0===e?t:e,this.trigger("cdf cdf:postFetch",this,t)}return t},drawTooltip:function(){this.htmlObject&&this.tooltip&&(this._tooltip="function"==typeof this.tooltip?this.tooltip():this.tooltip)},showTooltip:function(){var t;this.htmlObject&&void 0!==(t=this._tooltip)&&this.placeholder().attr("title",t).tooltip({delay:0,track:!0,fade:250,content:t})},beginExec:function(t){t&&(this.isDataPush=!0);var e=this.preExec();return e?this._maybeBlock():this.isDataPush=!1,e},failExec:function(t){if("string"==typeof t)this.error(null,t);else if(t&&"responseText"in t){var e=this.dashboard.parseServerError.apply(this.dashboard,arguments);this.error(e.msg,e.error)}else this.error(null,t);this.isDataPush=!1},endExec:function(){try{this.drawTooltip(),this.postExec(),this.showTooltip(),this._maybeUnblock(),this.isDataPush=!1}catch(t){this.failExec(t)}},execute:function(t){if(this.beginExec())try{t.call(this)}catch(t){this.failExec(t)}},synchronous:function(t,n){function r(){try{t.call(this,n||[])}catch(t){return void this.failExec(t)}this.endExec()}this.beginExec()&&setTimeout(e.bind(r,this),10)},triggerQuery:function(t,e,n){this.beginQuery(t,function(t){e(t),this.endExec()},n)},beginQuery:function(t,e,n){this.execute(function(){this._setQuery(this._resolveQueryDefinition(t),n).fetchData(this.parameters,this.getSuccessHandler(e,void 0,this._maybeUnblock),this.getErrorHandler())})},_resolveQueryDefinition:function(t){var n;return e.isFunction(this.getQueryDefinition)&&(n=this.getQueryDefinition()),this.dashboard.isValidQueryDefinition(n)?n:e.isFunction(t)?t():t},getQueryDefinition:function(){return this.queryDefinition||this.chartDefinition||this.trafficDefinition},triggerAjax:function(t,r,i,o){var a=n.extend({},o);"function"!=typeof i?(i=r,e.extend(a,t)):e.extend(a,{url:t,data:r}),this.beginAjax(a,function(t){i.call(this,t),this.trigger("cdf cdf:render",this,t),this.endExec()})},beginAjax:function(t,e){this.execute(function(){var r=n.extend({async:!0},t,{success:this.getSuccessHandler(e,void 0,this._maybeUnblock),error:this.getErrorHandler()});n.ajax(r)})},_setQuery:function(t,n){this.query&&this.query.dispose();var r=this.queryState=this.query=this.dashboard.getQuery(t),i={async:!0};return n&&n.ajax&&e.extend(i,n.ajax),r.setAjaxOptions(i),n&&n.pageSize&&r.setPageSize(n.pageSize),r},callCounter:function(){return++this.runCounter},getSuccessHandler:function(t,n,r,i){function o(e,o){if(!o||this.beginExec(!0)){var a;if(t>=this.runCounter)try{a=this.postFetchData(e),n.call(this,a)}catch(t){this.failExec(t)}else i&&i.call(this,e);return"function"==typeof r&&r.call(this),a}}return 1===arguments.length?(n=t,t=this.callCounter()):"function"==typeof t&&(i=r,r=n,n=t,t=this.callCounter()),e.bind(o,this)},getErrorHandler:function(){function t(t,e,n,r){r&&!this.beginExec(!0)||this.failExec(t,e,n)}return e.bind(t,this)},error:function(t,e){t||(t=this.dashboard.getErrorObj("COMPONENT_ERROR").msg),this._maybeUnblock(),this.errorNotification({msg:t,error:e}),this.trigger("cdf cdf:error",this,t,e||null),e&&r.log(e,"error")},errorNotification:function(t,e){e||(e=this.htmlObject?this.placeholder():void 0);var n=this.name.replace("render_","");t.msg=t.msg+" ("+n+")",this.dashboard.errorNotification(t,e)},block:function(){this.isRunning||(this.dashboard.incrementRunningCalls(),this.isRunning=!0)},unblock:function(){this.isRunning&&(this.dashboard.decrementRunningCalls(),this.isRunning=!1)},isSilent:function(){return!(!this.lifecycle||!this.lifecycle.silent)},_maybeBlock:function(){this.isSilent()||this.block()},_maybeUnblock:function(){this.isSilent()||this.unblock()}})}),define("cdf/dashboard/Dashboard.lifecycle",["./Dashboard","../Logger","amd!../lib/underscore","../components/UnmanagedComponent","../lib/jquery"],function(t,e,n,r,i){t.implement({initCounter:void 0,runningCalls:void 0,lastServerResponse:void 0,serverCheckResponseTimeout:void 0,_initLifecycle:function(){this.initCounter=0,this.runningCalls=0,this.lastServerResponse=Date.now?Date.now():(new Date).getTime(),this.serverCheckResponseTimeout=1/0},_throwIfDisposed:function(){if(this.isDisposed)throw new Error("Invalid operation. The dashboard has been disposed.")},resetRunningCalls:function(){this.runningCalls=0,setTimeout(n.bind(function(){this.hideProgressIndicator()},this),10)},getRunningCalls:function(){return this.runningCalls},incrementRunningCalls:function(){this.runningCalls++,this.showProgressIndicator(),e.log("+Running calls incremented to: "+this.getRunningCalls())},decrementRunningCalls:function(){this.runningCalls--,e.log("-Running calls decremented to: "+this.getRunningCalls()),setTimeout(n.bind(function(){this.runningCalls<=0&&(this.hideProgressIndicator(),this.runningCalls=0)},this),10)},init:function(t){var r=this;r._throwIfDisposed();var o=r.initCounter++;e.log("InitInstance "+o),0==o&&(r.syncDebugLevel(),r.initialStorage?n.extend(r.storage,r.initialStorage):r.loadStorage(),null!=r.context&&null!=r.context.sessionTimeout&&(r.serverCheckResponseTimeout=900*r.context.sessionTimeout),r.restoreBookmarkables(),r.restoreView(),r.syncParametersInit()),n.isArray(t)&&r.addComponents(t),n.chain(r.components).filter(function(t){return void 0===t.initInstance}).each(function(t){t.initInstance=o}),i(function(){r._initEngine(o)})},_initEngine:function(t){var o=this;o.waitingForInit&&o.waitingForInit.length&&e.log("Overlapping initEngine!","warn");var a=null!=t?n.where(o.components,{initInstance:t}):o.components;o.waitingForInit&&0!==o.waitingForInit.length||o.finishedInit||o.incrementRunningCalls(),e.log("          [Lifecycle >Start] Init["+t+"] (Running: "+o.getRunningCalls()+")","log","color: #ddd"),o.createAndCleanErrorDiv(),"function"==typeof o.preInit&&o.preInit(),o.trigger("cdf cdf:preInit",o),i(window).trigger("cdfAboutToLoad");var s,o=o,l=[];for(s=0;s<a.length;s++)a[s].executeAtStart&&l.push(a[s]);if(!l.length)return void o._handlePostInit();if(!o.getComponent("PostInitMarker")){var u=new r({name:"PostInitMarker",type:"unmanaged",lifecycle:{silent:!0},executeAtStart:!0,priority:999999999});o.addComponent(u),l.push(u)}o.waitingForInit=l.slice();for(var c=function(e,r){2==arguments.length&&r||(o.waitingForInit=n(o.waitingForInit).without(e),e.off("cdf:postExecution",c),e.off("cdf:preExecution",c),e.off("cdf:error",c),o._handlePostInit(t))},s=0,h=l.length;s<h;s++){l[s].on("cdf:postExecution cdf:preExecution cdf:error",c,o)}o.updateAll(l),a.length>0&&o._handlePostInit(t)},_handlePostInit:function(t){var r=this;r.waitingForInit&&0!==r.waitingForInit.length||r.finishedInit||(r.trigger("cdf cdf:postInit",r),i(window).trigger("cdfLoaded"),"function"==typeof r.postInit&&r.postInit(),function(){var t=n.filter(r.components,function(t){return"duplicate"==t.type}),e={},o=r.getBookmarkState().params||{};n.map(n.filter(Object.keys(o),function(t){return/(_[0-9]+)+$/.test(t)}),function(t){var n=t.match(/(.*?)((_[0-9]+)+)$/),r=n[1],i=n[2];return e[i]||(e[i]={}),e[i][r]=o[t],t});for(var a in e)if(e.hasOwnProperty(a)){var o=e[a];i.each(t,function(t,e){var n;for(n=0;n<e.parameters.length;n++)if(!o.hasOwnProperty(e.parameters[n])&&r.isBookmarkable(e.parameters[n]))return;e.duplicate(o)})}}(),r.finishedInit=!0,r.decrementRunningCalls(),e.log("          [Lifecycle <End  ] Init["+t+"] (Running: "+r.getRunningCalls()+")","log","color: #ddd"))},updateLifecycle:function(t){var r=!!t.lifecycle&&!!t.lifecycle.silent;if(!t.disabled){r||this.incrementRunningCalls();var o=n.bind(function(){try{var n;if(void 0!==t.preExecution&&(n=t.preExecution.apply(t)),n=void 0===n||!!n,t.trigger("cdf cdf:preExecution",t,n),!n)return;void 0!=t.tooltip&&(t._tooltip="function"==typeof t.tooltip?t.tooltip():t.tooltip),void 0!=t.update&&"function"==typeof t.update&&(t.update(),this.refreshEngine.processComponent(t)),void 0!==t.postExecution&&t.postExecution.apply(t),void 0!=t._tooltip&&i("#"+t.htmlObject).attr("title",t._tooltip).tooltip({delay:0,track:!0,fade:250})}catch(n){var o=t.htmlObject?i("#"+t.htmlObject):void 0,a=this.getErrorObj("COMPONENT_ERROR").msg+" ("+t.name.replace("render_","")+")";this.errorNotification({msg:a},o),e.error("Error updating "+t.name+":"),e.exception(n)}finally{r||this.decrementRunningCalls()}t.trigger("cdf cdf:postExecution",t)},this);setTimeout(o,1)}},updateAll:function(t){if(this.updating||(this.updating={tiers:{},current:null,updatingInFlight:[]}),t&&n.isArray(t)&&!n.isArray(t[0])){var e={};n.each(t,function(t){if(t){var n=t.priority||0;e[n]||(e[n]=[]),e[n].push(t)}}),t=e}!function(t,e){if(e)for(var r in e)e.hasOwnProperty(r)&&(n.isArray(t[r])?t[r]=n.union(t[r],e[r]):t[r]=e[r])}(this.updating.tiers,t);var r=this.updating.current,i=!1;if(null===r||0==r.components.length||(i=this.othersAwaitExecution(n.clone(this.updating.tiers),this.updating.current))){var o=this.getFirstTier(this.updating.tiers);if(!o)return;if(i){var a=this.updating.tiers;a[r.priority]=n.difference(a[r.priority],r.components),o.components=n.union(a[r.priority],this.getFirstTier(a).components)}this.updating.current=o;for(var s=function(t,e){if(2!=arguments.length||"boolean"!=typeof e||!e){t.off("cdf:postExecution",s),t.off("cdf:preExecution",s),t.off("cdf:error",s);var r=this.updating.current;r.components=n.without(r.components,t);var i=this.updating.tiers;i[r.priority]=n.without(i[r.priority],t),this.updating.updatingInFlight=n.without(this.updating.updatingInFlight,t),this.updateAll()}},e=this.updating.current.components.slice(),l=0;l<e.length;l++){var u=e[l];u.startTimer(),u.on("cdf:postExecution cdf:preExecution cdf:error",s,this),this.updateComponent(u),-1==this.updating.updatingInFlight.indexOf(u)&&this.updating.updatingInFlight.push(u)}}},update:function(t){this.updateQueue||(this.updateQueue=[]),this.updateQueue.push(t),this.updateTimeout&&clearTimeout(this.updateTimeout);var e=n.bind(function(){this.updateAll(this.updateQueue),delete this.updateQueue},this);this.updateTimeout=setTimeout(e,5)},updateComponent:function(t){if((Date.now?Date.now():(new Date).getTime())-this.lastServerResponse>this.serverCheckResponseTimeout&&!this.checkServer())throw this.hideProgressIndicator(),this.loginAlert(),"not logged in";!1===t.isManaged&&t.update?(t.update(),this.refreshEngine.processComponent(t)):this.updateLifecycle(t)},getFirstTier:function(t){for(var e,r=n.keys(t).sort(function(t,e){return parseInt(t,10)-parseInt(e,10)}),i=0;i<r.length;i++)if(e=t[r[i]],e.length>0)return{priority:r[i],components:e.slice()};return null},resetAll:function(){this.createAndCleanErrorDiv();for(var t=(this.components.length,0),e=this.components.length;t<e;t++)this.components[t].clear();for(var t=(this.components.length,0),e=this.components.length;t<e;t++)this.components[t].executeAtStart&&this.update(this.components[t])},processChange:function(t){var e,n=this.getComponentByName(t),r=n.parameter;if("function"==typeof n.getValue&&(e=n.getValue()),null!=e){if(void 0!==n.preChange){var i=n.preChange(e);e=void 0!=i?i:e}r&&this.fireChange(r,e),void 0!==n.postChange&&n.postChange(e)}},fireChange:function(t,e){var r=this;r.createAndCleanErrorDiv(),r.setParameter(t,e,!0),r.trigger("cdf "+t+":fireChange",{parameter:t,value:e});for(var i=[],o=0,a=r.components.length;o<a;o++)if(n.isArray(r.components[o].listeners))for(var s=0;s<r.components[o].listeners.length;s++){var l=r.components[o];if(l.listeners[s]==t&&!l.disabled){i.push(l);break}}r.updateAll(i)},othersAwaitExecution:function(t,e){if(!t||!e||!e.components)return!1
;t[e.priority]=n.difference(t[e.priority],e.components);var r=this.getFirstTier(t);return!(!r||!r.components||0==r.components.length)&&!(parseInt(r.priority)>parseInt(e.priority))},isComponentUpdating:function(t){if(this.updateQueue&&-1!=this.updateQueue.indexOf(t))return!0;if(this.updating){if(this.updating.current&&this.updating.current.components){var e=n.some(this.updating.current.components,function(e){if(e===t)return!0});if(e)return e}if(this.updating.tiers){var r=n.some(this.updating.tiers,function(e){return n.some(e,function(e){return e===t})});if(r)return r}if(this.updating.updatingInFlight)return n.some(this.updating.updatingInFlight,function(e){return e===t})}return!1}})}),define("cdf/dashboard/Dashboard.notifications.ext",["./Dashboard.ext"],function(t){return{getPing:function(){return t.getCdfBase()+"/ping"}}}),define("cdf/dashboard/Popups",["../lib/mustache","amd!../lib/underscore","../lib/jquery","amd!../lib/jquery.blockUI","css!./theme/Popups.css"],function(t,e,n){return{okPopup:{_firstRender:!0,template:"<div class='cdfPopup'>  <div class='cdfPopupHeader'>{{{header}}}</div>  <div class='cdfPopupBody'>    <div class='cdfPopupDesc'>{{{desc}}}</div>    <div class='cdfPopupButton'>{{{button}}}</div>  </div></div>",defaults:{header:"Title",desc:"Description Text",button:"Button Text",callback:function(){return!0}},$el:void 0,show:function(t){(t||this._firstRender)&&this.render(t),this.$el.show()},hide:function(){this.$el.hide()},render:function(r){var i=e.extend({},this.defaults,r),o=this;this._firstRender&&(this.$el=n("<div/>").addClass("cdfPopupContainer").hide().appendTo("body"),this._firstRender=!1),this.$el.empty().html(t.render(this.template,i)),this.$el.find(".cdfPopupButton").click(function(){i.callback(),o.hide()})}},notificationsComponent:{template:"<div class='cdfNotification component {{#isSmallComponent}}small{{/isSmallComponent}}'>  <div class='cdfNotificationBody'>    <div class='cdfNotificationImg'>&nbsp;</div>    <div class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</div>    <div class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</div>  </div></div>",defaults:{title:"Component Error",desc:"Error processing component."},render:function(r,i){var o=e.extend({},this.defaults,i);o.isSmallComponent=n(r).width()<300,n(r).empty().html(t.render(this.template,o));var a=n(r).find(".cdfNotification");a.css({"line-height":a.height()+"px"})}},notificationsGrowl:{_firstRender:!0,template:"<div class='cdfNotification growl'>  <div class='cdfNotificationBody'>    <h1 class='cdfNotificationTitle' title='{{title}}'>{{{title}}}</h1>    <h2 class='cdfNotificationDesc' title='{{desc}}'>{{{desc}}}</h2>  </div></div>",defaults:{title:"Title",desc:"Default CDF notification.",timeout:4e3,onUnblock:function(){return!0},css:n.extend({},n.blockUI.defaults.growlCSS,{position:"absolute",width:"100%",top:"10px"}),showOverlay:!1,fadeIn:700,fadeOut:1e3,centerY:!1},render:function(r){var i=e.extend({},this.defaults,r),o=n(t.render(this.template,i)),a=this;i.message=o;var s=i.onUnblock;i.onUnblock=function(){a.$el.hide(),s.call(this)},this._firstRender&&(this.$el=n("<div/>").addClass("cdfNotificationContainer").hide().appendTo("body"),this._firstRender=!1),this.$el.show().block(i)}}}}),define("cdf/dashboard/Dashboard.notifications",["./Dashboard","./Dashboard.notifications.ext","./Popups","../Logger","amd!../lib/underscore","../lib/jquery","amd!../lib/jquery.blockUI","css!./theme/Dashboard.notifications.css"],function(t,e,n,r,i,o){t.implement({ERROR_CODES:{QUERY_TIMEOUT:{msg:"Query timeout reached"},COMPONENT_ERROR:{msg:"Error processing component"}},_initNotifications:function(){},blockUiOptions:void 0,_setBlockUiOptions:function(t){if("function"==typeof o.blockUI){this.blockUiOptions=o.extend({},o.blockUI.defaults);for(var e in t)this.blockUiOptions[e]=t[e]}},blockUIwithDrag:function(){if(!this.isSilent){void 0!==this.i18nSupport&&null!=this.i18nSupport&&(o.blockUI.defaults.message='<div class="img blockUIDefaultImg" style="padding: 0px;"></div>'),o.blockUI(this.blockUiOptions);var t=o('<div id="blockUIDragHandle"></div>');o("div.blockUI.blockMsg").prepend(t),o("div.blockUI.blockMsg").draggable({handle:"#blockUIDragHandle"})}},showProgressIndicator:function(){this.isSilent||o.blockUI&&this.blockUIwithDrag()},hideProgressIndicator:function(t){this.isSilent||(t&&this.resetRunningCalls(),o.unblockUI&&o.unblockUI(),this.showErrorTooltip())},getErrorObj:function(t){return this.ERROR_CODES[t]||{}},parseServerError:function(t,e,n){var r=[{match:/Query timeout/,msg:this.getErrorObj("QUERY_TIMEOUT").msg}],a={msg:this.getErrorObj("COMPONENT_ERROR").msg,error:n,errorStatus:e},s=o("<div/>").html(t.responseText).find("h1").text();return i.find(r,function(t){return!!s.match(t.match)&&(a.msg=t.msg,!0)}),a},handleServerError:function(){this.errorNotification(this.parseServerError.apply(this,arguments)),this.trigger("cdf cdf:serverError",this),this.resetRunningCalls()},errorNotification:function(t,e){this.isSilent||(e?n.notificationsComponent.render(o(e),{title:t.msg,desc:""}):n.notificationsGrowl.render({title:t.msg,desc:""}))},loginAlert:function(t){if(!this.isSilent){var e={header:"Warning",desc:"You are no longer logged in or the connection to the server timed out",button:"Click to reload this page",callback:function(){window.location.reload(!0)}};e=i.extend({},e,t),n.okPopup.show(e),this.trigger("cdf cdf:loginError",this)}},checkServer:function(){o.ajax({type:"POST",async:!1,dataType:"json",url:e.getPing(),success:function(t){return t&&"ok"==t.ping},error:function(){return!1}})}})}),define("cdf/dashboard/Dashboard.parameters",["./Dashboard","../Logger","amd!../lib/backbone","./Utf8Encoder"],function(t,e,n,r){t.implement({parameters:void 0,parameterModel:void 0,chains:void 0,syncedParameters:void 0,escapeParameterValues:!1,flatParameters:!1,LEGACY_STORAGE:"Dashboards.storage.",STORAGE:"storage.",_initParameters:function(){this.parameters=[],this.parameterModel=new n.Model,this.chains=[],this.syncedParameters={},this.escapeParameterValues=!1},_isParameterInModel:function(t,e){return void 0!==this._getValueFromContext(t,e)},_getValueFromContext:function(t,e){if(t){if(this.flatParameters)return t[e];if(null!=e){var n,r;if(e instanceof Array)n=e;else{if(e.indexOf(".")<0)return t[e];n=e.split(".")}r=n.length;for(var i=0;i<r;i++){if(!t)return;var o=n[i],a=t[o];if(void 0===a)return;t=a}}return t}},_setValueInContext:function(t,e,n){if(t&&null!=e&&void 0!==n){if(this.flatParameters)t[e]=n;else{var r,i;if(e instanceof Array)r=e,i=r.pop();else{if(e.indexOf(".")<0)return t[e]=n,t;r=e.split("."),i=r.pop()}t=this._getValueFromContext(t,r),t&&(t[i]=n)}return t}},_getParameterStore:function(t){var n;return 0==t.indexOf(this.LEGACY_STORAGE)?(e.warn("Legacy storage access for "+t+". Please use storage instead"),t=t.substr(this.LEGACY_STORAGE.length),n=this.storage):0==t.indexOf(this.STORAGE)?(t=t.substr(this.STORAGE.length),n=this.storage):n=this.parameters,{store:n,name:t}},_disposeParameters:function(){this.parameters=[],this.parameterModel=void 0,this.chains=[],this.syncedParameters={}},addParameter:function(t,n){if(void 0==t||"undefined"==t)return void e.warn("Dashboard addParameter: trying to add undefined!!");var r=this._getParameterStore(t);return this._isParameterInModel(r.store,r.name)&&(n=this.getParameterValue(r.name)),this.setParameter(t,n),n},getParameterValue:function(t){if(void 0==t||"undefined"==t)return void e.warn("Dashboard.getParameterValue: trying to get undefined!!");var n=this._getParameterStore(t);return this._getValueFromContext(n.store,n.name)},getParam:function(t){return this.getParameterValue(t)},setParameter:function(t,n,i){if(void 0==t||"undefined"==t)return void e.warn("Dashboard.setParameter: trying to set undefined!!");var o=this._getParameterStore(t);this.escapeParameterValues?this._setValueInContext(o.store,o.name,r.encode_prepare_arr(n)):this._setValueInContext(o.store,o.name,n),void 0!==this._setValueInContext(o.store,o.name,n)&&(this.parameterModel.set(o.name,n,{notify:i}),this.persistBookmarkables(o.name))},setParam:function(t,e,n){this.setParameter(t,e,n)},syncParameters:function(t,e){this.setParameter(e,this.getParameterValue(t)),this.parameterModel.on("change:"+t,function(t,n,r){this[r.notify?"fireChange":"setParameter"](e,n)},this),this.parameterModel.on("change:"+e,function(e,n,r){this[r.notify?"fireChange":"setParameter"](t,n)},this)},syncParametersOnInit:function(t,e){var n,r,i,o,a=this.syncedParameters;a[t]||(a[t]=[]),a[t].push(e);for(var s=0;s<this.chains.length;s++)n=this.chains[s],n.indexOf(t)>-1&&(r=n),n.indexOf(e)>-1&&(i=n,o=s);if(i&&r){if(r!=i){var l=i.slice();l.unshift(0),l.unshift(r.length),[].splice.apply(r,l),this.chains.splice(o,1)}}else i?i.unshift(t):r?r.push(e):this.chains.push([t,e])},syncParametersInit:function(){var t,e,n,r,i,o=this.syncedParameters;for(n=0;n<this.chains.length;n++)for(r=0;r<this.chains[n].length;r++)if(t=this.chains[n][r],o[t])for(i=0;i<o[t].length;i++)e=o[t][i],this.syncParameters(t,e)}})}),define("cdf/dashboard/Dashboard.storage.ext",["./Dashboard.ext"],function(t){return{getStorage:function(e){return t.getCdfBase()+"/storage/"+e}}}),define("cdf/dashboard/Dashboard.storage",["./Dashboard","../Logger","../lib/jquery","./Dashboard.storage.ext"],function(t,e,n,r){t.implement({storage:void 0,initialStorage:void 0,_initStorage:function(){this.storage||(this.storage={},n.extend(this.storage,this.storageObj)),this.initialStorage=this.storage},_disposeStorage:function(){this.storage={},this.initialStorage={}},loadStorage:function(){var t=this;if(!this.context||"anonymousUser"!==this.context.user){var e={user:this.context.user,action:"read",ts:Date.now?Date.now():(new Date).getTime()};n.ajax({type:"GET",dataType:"json",url:r.getStorage(e.action),data:e,async:!0,xhrFields:{withCredentials:!0},success:function(e){n.extend(t.storage,e)}})}},saveStorage:function(){if(!this.context||"anonymousUser"!==this.context.user){var t={user:this.context.user,action:"store",storageValue:JSON.stringify(this.storage),ts:Date.now?Date.now():(new Date).getTime()};n.ajax({type:"GET",dataType:"json",url:r.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0}}).done(function(t){1!=t.result&&e.log("Error saving storage","error")})}},cleanStorage:function(){if(this.storage={},!this.context||"anonymousUser"!==this.context.user){var t={user:this.context.user,action:"delete"};n.ajax({type:"GET",dataType:"json",url:r.getStorage(t.action),data:t,async:!0,xhrFields:{withCredentials:!0}}).done(function(t){1!=t.result&&e.log("Error deleting storage","error")})}}})}),define("cdf/dashboard/Dashboard.dataSources",["./Dashboard","../Logger","amd!../lib/underscore"],function(t,e,n){t.implement({dataSources:void 0,_initDataSources:function(){this.dataSources={}},_getDataSourceName:function(t){var r;if(r=n.isObject(t)?t.dataSource:t,n.isString(r)&&!n.isEmpty(r))return r;e.warn("Invalid data source name")},addDataSource:function(t,r,i){if(n.isObject(t)&&(i=r,r=t,t=r.name),!n.isObject(r))return void e.error("Invalid data source object");if(!n.isString(t)||n.isEmpty(t))return void e.error("Invalid data source name");if(this.dataSources[t]){if(!this.dataSources.hasOwnProperty(t))return void e.error("Data source name '"+t+"' is invalid, overwrites an inherited property");if(!i)return void e.warn("Data source name '"+t+"' is already defined, set force flag to true to overwrite it")}var o=n.extend({},r);o.name&&delete o.name,this.dataSources[t]=o},getDataSource:function(t){var e=this._getDataSourceName(t);if(e&&this.dataSources.hasOwnProperty(e))return this.dataSources[e]},getDataSourceQuery:function(t){var r=this.getDataSource(t);if(!n.isEmpty(r))return this.getQuery(r);e.error("Invalid data source")},setDataSource:function(t,e){n.isObject(t)?this.addDataSource(t,!0):this.addDataSource(t,e,!0)},removeDataSource:function(t){var n;if(!(n=this._getDataSourceName(t)))return void e.warn("Invalid data source name");n in this.dataSources&&this.dataSources.hasOwnProperty(n)?delete this.dataSources[n]:e.warn("Data source name '"+n+"' not found")}})}),define("cdf/dashboard/Dashboard.query",["../Logger","../lib/Base","./Dashboard","./Container","amd!../lib/underscore","./Utils"],function(t,e,n,r,i,o){var a=e,s=new r;return n.implement({queryFactories:void 0,_initQuery:function(){this.queryFactories=o.clone(s)},getBaseQuery:function(){return a},registerQuery:function(t,e){var n=this.getBaseQuery();if(!i.isFunction(e)&&i.isObject(e)){var r={};i.each(n.prototype.deepProperties,function(t){r[t]=i.extend({},n.prototype[t],e[t])})}var o=i.isFunction(e)&&e||i.isObject(e)&&n.extend(i.extend({},e,r));this.queryFactories.register("Query",t,function(t,e){return new o(e)})},hasQuery:function(t){return Boolean(this.queryFactories&&this.queryFactories.has("Query",t))},detectQueryType:function(e){if(e){if(i.isString(e.dataSource)&&!i.isEmpty(e.dataSource)){var n=this.getDataSource(e.dataSource);if(i.isUndefined(n))return void t.error("Invalid data source name '"+e.dataSource+"'");e=n}var r=e.queryType?e.queryType:e.query?"legacy":e.path&&e.dataAccessId?"cda":void 0;return e.queryType=r,this.hasQuery(r)?r:void 0}},getQuery:function(e,n){if(i.isUndefined(e)?e="cda":i.isObject(e)&&(n=e,e=void 0),i.isString(n.dataSource)&&!i.isEmpty(n.dataSource)){var r=this.getDataSource(n.dataSource);if(i.isUndefined(r))return void t.error("Invalid data source name '"+n.dataSource+"'");n=i.extend({},r,n),delete n.dataSource}e=e||n.queryType||"cda";var o=this.queryFactories.getNew("Query",e,n);return o.dashboard=this,o},isValidQueryDefinition:function(t){return void 0!==this.detectQueryType(t)},listQueries:function(){return i.keys(this.queryFactories.listType("Query"))}}),{setBaseQuery:function(t){i.isFunction(t)&&t.extend&&(a=t)},registerGlobalQuery:function(t,e){var n=a;if(!i.isFunction(e)&&i.isObject(e)){var r={};i.each(n.prototype.deepProperties,function(t){r[t]=i.extend({},n.prototype[t],e[t])})}var o=i.isFunction(e)&&e||i.isObject(e)&&n.extend(i.extend({},e,r));s.register("Query",t,function(t,e){return new o(e)})}}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,r,i,o,a,s,l="",u=0;for(t=Base64._utf8_encode(t);u<t.length;)e=t.charCodeAt(u++),n=t.charCodeAt(u++),r=t.charCodeAt(u++),i=e>>2,o=(3&e)<<4|n>>4,a=(15&n)<<2|r>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),l=l+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return l},decode:function(t){var e,n,r,i,o,a,s,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)i=this._keyStr.indexOf(t.charAt(u++)),o=this._keyStr.indexOf(t.charAt(u++)),a=this._keyStr.indexOf(t.charAt(u++)),s=this._keyStr.indexOf(t.charAt(u++)),e=i<<2|o>>4,n=(15&o)<<4|a>>2,r=(3&a)<<6|s,l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(n)),64!=s&&(l+=String.fromCharCode(r));return l=Base64._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},_utf8_decode:function(t){for(var e="",n=0,r=c1=c2=0;n<t.length;)r=t.charCodeAt(n),r<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return e}};define("cdf/lib/base64",function(t){return function(){return t.Base64}}(this)),define("cdf/dashboard/Dashboard.views.ext",["./Dashboard.ext"],function(t){return{getView:function(e){return t.getCdfBase()+"/views/"+e},getViewFromUrl:function(){var t=window.location.search;if(-1==t.indexOf("view"))return"";var e=t.match("[?|&]view=([^&]+)");return e[1]?e[1]:void 0}}}),define("cdf/dashboard/Dashboard.views",["./Dashboard","../lib/base64","./Dashboard.views.ext","../lib/jquery"],function(t,e,n,r){t.implement({viewParameters:void 0,view:void 0,viewFlags:{UNUSED:"unused",UNBOUND:"unbound",VIEW:"view"},_initViews:function(){this.viewParameters={},!this.view&&this.viewObj&&(this.view={},r.extend(this.view,this.viewObj))},_disposeViews:function(){this.viewParameters={},this.view={}},restoreView:function(){var t,n;if(this.view&&this.view.params&&(n=JSON.parse(e.decode(this.view.params))))if(r.isEmptyObject(n))this.view.params=n;else for(t in n)n.hasOwnProperty(t)&&this.setParameter(t,n[t])},setParameterViewMode:function(t,e){1===arguments.length?this.viewParameters[t]=this.viewFlags.VIEW:this.viewParameters[t]=e},isViewParameter:function(t){return this.viewParameters[t]},getViewParameters:function(){var t=this.viewParameters,e={};for(var n in t)t.hasOwnProperty(n)&&(t[n]!=this.viewFlags.VIEW&&t[n]!=this.viewFlags.UNBOUND||(e[n]=this.getParameterValue(n)));return e},getUnboundParameters:function(){var t=this.viewParameters,e=[];for(var n in t)if(t.hasOwnProperty(n))return t[n]==this.viewFlags.UNBOUND&&e.push(n),e}})}),define("cdf/dashboard/OptionsManager",["./Utils","amd!../lib/underscore","../lib/jquery"],function(t,e,n){function r(t,e,n,r){return t&&t[e]&&t[e].hasOwnProperty(n)?t[e][n]:r||void 0}function i(t,e,n,r){t&&e&&n&&(t[e]=t[e]||{},t[e][n]=r)}return function(o){function a(t,e){e=e||{},h(t,e.reader),d(t,e.writer),f(t,e.validator)}function s(t){return r(m._interfaces,t,"reader",m._libraries.mappers.identity)}function l(t){return r(m._interfaces,t,"writer",m._libraries.mappers.identity)}function u(t){return r(m._interfaces,t,"validator",m._libraries.predicates.tautology)}function c(t){return r(m._options,t,"value")}function h(t,n){var r=m._libraries.mappers;return n=e.isFunction(n)&&n||e.isString(n)&&r[n]||s(t)||r.identity,i(m._interfaces,t,"reader",n)}function d(t,n){var r=m._libraries.mappers;return n=e.isFunction(n)&&n||e.isString(n)&&r[n]||l(t)||r.identity,i(m._interfaces,t,"writer",n)}function f(t,n){var r=m._libraries.predicates;return n=e.isFunction(n)&&n||e.isString(n)&&r[n]||u(t)||r.tautology,i(m._interfaces,t,"validator",n)}function p(t,e){return i(m._options,t,"value",e)}var m=this;this._options={},this._interfaces={},this._libraries={predicates:{tautology:function(t){return!0},isFunction:e.isFunction,isPositive:function(t){return e.isNumber(t)&&t>0},isObjectOrPropertiesArray:function(t){return e.isArray(t)||e.isObject(t)},isObject:e.isObject,isArray:e.isArray},mappers:{identity:e.identity,propertiesObject:function(n){return e.isArray(n)?t.propertiesArrayToObject(n):n}}},this.mixin=function(t){t.getOption=this.getOption,t.setOption=this.setOption},this.init=function(t,r,i){t=n.extend(!0,{},t),r=n.extend(!0,{},r),this._libraries=n.extend(!0,{},this._libraries,i),e.each(r,function(t,e){a(e,t)}),e.each(t,function(t,e){a(e,r&&r[e]||{}),p(e,t)})},this.setOption=function(t,e,n){a(t,n);var r=s(t);if(u(t)(e))return e=r(e),p(t,e),!0;throw new Error("Invalid Option "+t.charAt(0).toUpperCase()+t.slice(1))},this.getOption=function(t){return l(t)(c(t))},this.init(o.defaults,o.interfaces,o.libraries)}}),define("cdf/queries/BaseQuery",["../lib/jquery","../lib/Base","amd!../lib/underscore","../Logger","../dashboard/Utils","../dashboard/OptionsManager","../dashboard/Dashboard.query"],function(t,e,n,r,i,o,a){var s=e.extend({_name:"baseQuery",get name(){return this._name},_label:"Base Query",get label(){return this._label},deepProperties:["defaults","interfaces"],dashboard:void 0,defaults:{successCallback:function(){r.log("Query success callback not defined. Override.")},errorCallback:function(t,e,n){if(this.dashboard&&i.isFunction(this.dashboard.handleServerError))return void this.dashboard.handleServerError(t,e,n);r.log("Query error callback not defined. Override.")},lastResultSet:null,lastProcessedResultSet:null,page:0,pageSize:0,params:{},pushEnabled:!1,ajaxOptions:{async:!1,type:"POST"},url:""},interfaces:{params:{reader:"propertiesObject",validator:"isObjectOrPropertiesArray"},successCallback:{validator:"isFunction"},errorCallback:{validator:"isFunction"},pageSize:{validator:"isPositive"}},constructor:function(t){this._optionsManager=new o(this),this._optionsManager.mixin(this),this.init(t)},getOption:function(t){return this.defaults[t]},setOption:function(t,e){this.defaults[t]=e},init:function(t){},buildQueryDefinition:function(t){},getSuccessHandler:function(e){var n=this;return function(r){n.setOption("lastResultSet",r);var i=t.extend(!0,{},n.getOption("lastResultSet"));n.setOption("lastProcessedResultSet",i),void 0!==(r=e(i))&&r!==i&&n.setOption("lastProcessedResultSet",r)}},getErrorHandler:function(t){return function(e,n,r){t&&t(e,n,r)}},doQuery:function(e,r){if(!i.isFunction(this.getOption("successCallback")))throw"QueryNotInitialized";var o=n.extend({},this.getAjaxOptions(),{data:this.buildQueryDefinition(),url:this.getOption("url"),success:this.getSuccessHandler(e||this.getOption("successCallback")),error:this.getErrorHandler(r||n.bind(this.getOption("errorCallback"),this))});t.ajax(o)},exportData:function(){},setAjaxOptions:function(t){this.setOption("ajaxOptions",n.extend({},this.getOption("ajaxOptions"),t))},getAjaxOptions:function(){var e=this.getOption("ajaxOptions");return!(null==e.async?t.ajaxSettings.async:e.async)&&e.xhrFields&&e.xhrFields.withCredentials&&(r.log("Cross-domain requests are deprecated for synchronous operations."),delete e.xhrFields.withCredentials),e},setSortBy:function(t){},sortBy:function(t,e){},fetchData:function(t,e,r){var o=arguments[0],a=arguments[1],s=arguments[2];switch(arguments.length){case 0:if(this.getOption("params")&&this.getOption("successCallback"))return this.doQuery();break;case 1:if(i.isFunction(o))return this.doQuery(o);if(!n.isEmpty(o)&&(n.isObject(o)||Array.isArray(o)))return this.setParameters(o||{}),this.doQuery();break;case 2:return i.isFunction(o)?(this.setCallback(o),i.isFunction(a)&&this.setErrorCallback(a)):(this.setParameters(o||{}),this.setCallback(a)),this.doQuery();default:return t&&this.setParameters(t),i.isFunction(a)&&this.setCallback(e),i.isFunction(s)&&this.setErrorCallback(r),this.doQuery()}throw"InvalidInput"},lastResults:function(){if(null!==this.getOption("lastResultSet"))return t.extend(!0,{},this.getOption("lastResultSet"));throw"NoCachedResults"},lastProcessedResults:function(){if(null!==this.getOption("lastProcessedResultSet"))return t.extend(!0,{},this.getOption("lastProcessedResultSet"));throw"NoCachedResults"},reprocessLastResults:function(e){if(null!==this.getOption("lastResultSet")){var n=t.extend(!0,{},this.getOption("lastResultSet")),r=e||this.getOption("successCallback");this.setOption("lastProcessedResultSet",n);var i=r(n);return void 0!==i&&i!==n&&this.setOption("lastProcessedResultSet",i),i}throw"NoCachedResults"},reprocessResults:function(t){return this.reprocessLastResults(t)},setParameters:function(t){this.setOption("params",t)},setCallback:function(t){this.setOption("successCallback",t)},setErrorCallback:function(t){this.setOption("errorCallback",t)},setSearchPattern:function(t){this.setOption("searchPattern",t)},nextPage:function(t){var e=this.getOption("page"),n=this.getOption("pageSize");if(n>0)return e+=n,this.setOption("page",e),this.doQuery(t);throw"InvalidPageSize"},previousPage:function(t){var e=this.getOption("page"),n=this.getOption("pageSize");if(e>n)return e-=n,this.setOption("page",e),this.doQuery(t);if(n>0)return this.setOption("page",0),this.doQuery(t);throw"AtBeginning"},getPage:function(t,e){var n=this.getOption("page"),r=this.getOption("pageSize");if(t*r==n)return!1;if(i.isNumber(t)&&t>=0)return this.setOption("page",t*r),this.doQuery(e);throw"InvalidPage"},setPageStartingAt:function(t){if(t==this.getOption("page"))return!1;if(!(i.isNumber(t)&&t>=0))throw"InvalidPage";this.setOption("page",t)},pageStartingAt:function(t,e){return!1!==this.setPageStartingAt(t)&&this.doQuery(e)},setPageSize:function(t){this.setOption("pageSize",t)},initPage:function(t,e){if(t==this.getOption("pageSize")&&0==this.getOption("page"))return!1;if(i.isNumber(t)&&t>0)return this.setOption("page",0),this.setOption("pageSize",t),this.doQuery(e);throw"InvalidPageSize"},dispose:function(){},__getDashboardParameterValue:function(t,e){var o;try{o=this.dashboard.getParameterValue(e)}catch(o){var a=!n.isObject(e)||i.isFunction(e)?e:JSON.stringify(e);r.log("BuildQueryDefinition detected static parameter "+t+"="+a+". The parameter will be used instead the parameter value")}return void 0!==o?o:e}});return a.setBaseQuery(s),s}),define("cdf/queries/CpkQuery",["../dashboard/Dashboard.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../dashboard/Utils","../Logger","../lib/jquery"],function(t,e,n,r,i,o,a){"use strict";var s={_name:"cpk",get name(){return this._name},_label:"CPK Query",get label(){return this._label},defaults:{url:"",pluginId:"",endpoint:"",systemParams:{},ajaxOptions:{dataType:"json",type:"POST",async:!0,xhrFields:{withCredentials:!0}}},init:function(e){r.isString(e.pluginId)&&r.isString(e.endpoint)&&(this.setOption("pluginId",e.pluginId),this.setOption("endpoint",e.endpoint),this.setOption("url",t.getPluginEndpoint(e.pluginId,e.endpoint))),this.setOption("kettleOutput",e.kettleOutput),this.setOption("stepName",e.stepName),this.setOption("systemParams",e.systemParams||{}),this.setAjaxOptions(e.ajaxOptions);var n=this.getOption("ajaxOptions");"json"===n.dataType&&(n.mimeType="application/json; charset utf-8",this.setAjaxOptions(n))},buildQueryDefinition:function(t){var e={kettleOutput:this.getOption("kettleOutput"),stepName:this.getOption("stepName")};e=a.extend(!0,{},e,this.getOption("systemParams")),t=Array.isArray(t)?i.propertiesArrayToObject(t):t||{};var n=this.getOption("params"),o=a.extend({},n,t);return r.each(o,function(t,n){var o=this.__getDashboardParameterValue(n,t);i.isFunction(o)?o=o():r.isObject(o)&&(o=JSON.stringify(o)),e["param"+n]=o},this),e},getSuccessHandler:function(t){var e=this;return function(n){if(e.setOption("lastResultSet",n),n&&0==n.result){e.getErrorHandler(e.getOption("errorCallback"))(r)}else{var r=a.extend(!0,{},e.getOption("lastResultSet"));e.setOption("lastProcessedResultSet",r),n=t(r),void 0!==n&&n!==r&&e.setOption("lastProcessedResultSet",n)}}}};n.registerGlobalQuery("cpk",s)}),define("cdf/queries/CdaQuery",["./CdaQuery.ext","./BaseQuery","../dashboard/Dashboard.query","amd!../lib/underscore","../dashboard/Utils","../Logger","../lib/jquery"],function(t,e,n,r,i,o,a){"use strict";var s={_name:"cda",get name(){return this._name},_label:"CDA Query",get label(){return this._label},defaults:{url:t.getDoQuery(),websocketUrl:t.getWebsocketQuery(),file:"",id:"",outputIdx:"1",sortBy:"",pushEnabled:!1,ajaxOptions:{async:!0,xhrFields:{withCredentials:!0}},searchPattern:""},init:function(t){if(void 0===t.path||void 0===t.dataAccessId)throw"InvalidQuery";this.setOption("file",t.path),this.setOption("id",t.dataAccessId),i.isString(t.sortBy)&&t.sortBy.match("^(?:[0-9]+[adAD]?,?)*$")&&this.setSortBy(t.sortBy),null!=t.pageSize&&this.setPageSize(t.pageSize),null!=t.outputIndexId&&this.setOption("outputIdx",t.outputIndexId),null!=t.pushEnabled&&this.setOption("pushEnabled",t.pushEnabled)},buildQueryDefinition:function(t){var e={};t=Array.isArray(t)?i.propertiesArrayToObject(t):t||{};var n=this.getOption("params"),o=a.extend({},n,t);return r.each(o,function(t,n){var r=this.__getDashboardParameterValue(n,t);Array.isArray(r)&&1===r.length&&String(r[0]).indexOf(";")>=0&&(r=i.doCsvQuoting(r[0],";")),i.isFunction(r)&&(r=r()),e["param"+n]=r},this),e.path=this.getOption("file"),e.dataAccessId=this.getOption("id"),e.outputIndexId=this.getOption("outputIdx"),e.pageSize=this.getOption("pageSize"),e.pageStart=this.getOption("page"),e.sortBy=this.getOption("sortBy"),e.paramsearchBox=this.getOption("searchPattern"),e},exportData:function(e,n,r){r=null!=r?r:{};var i=this.buildQueryDefinition(n);i.outputType=e,"csv"===e&&r.separator&&(i.settingcsvSeparator=r.separator),r.filename&&(i.settingattachmentName=r.filename),"xls"===e&&r.template&&(i.settingtemplateName=r.template),r.columnHeaders&&(i.settingcolumnHeaders=r.columnHeaders),!1===r.exportPage&&(i.pageSize=0,i.pageStart=0),null!=r.dtFilter&&(i.settingdtFilter=r.dtFilter,null!=r.dtSearchableColumns&&(i.settingdtSearchableColumns=r.dtSearchableColumns)),i.wrapItUp="true",a.ajax({type:"POST",dataType:"text",async:!0,data:i,url:this.getOption("url"),xhrFields:{withCredentials:!0}}).done(function(e){var n=a('<iframe style="display:none">');n.detach(),n[0].src=t.getUnwrapQuery({path:i.path,uuid:e}),n.appendTo(a("body"))}).fail(function(t,e,n){o.log("Request failed: "+t.responseText+" :: "+e+" ::: "+n)})},setSortBy:function(t){var e,n=this;if(null===t||void 0===t||""===t)e="";else if(i.isString(t)){if(!t.match("^(?:[0-9]+[adAD]?,?)*$"))throw"InvalidSortExpression";e=t.toUpperCase().split(",").filter(function(t){return""!==t})}else if(Array.isArray(t)){e=t.map(function(t){return t.toUpperCase()});var r=e.filter(function(t){return!t.match("^[0-9]+[adAD]?,?$")});if(r.length>0)throw"InvalidSortExpression"}var o;return Array.isArray(e)?(o=e.length!=n.getOption("sortBy").length,a.each(e,function(t,e){if(!(o=o&&e==n.getOption("sortBy")[t]))return!1})):o=e===this.getOption("sortBy"),this.setOption("sortBy",e),!o},sortBy:function(t,e){return!!this.setSortBy(t)&&(null!==this.getOption("successCallback")?this.doQuery(e):void 0)},doQuery:function(t,e){if(!i.isFunction(this.getOption("successCallback")))throw"QueryNotInitialized";var n=t||this.getOption("successCallback"),o=e||r.bind(this.getOption("errorCallback"),this),s=this.buildQueryDefinition(),l=!0;if(this.getOption("pushEnabled")){var u=this;this.websocket=new WebSocket(this.getOption("websocketUrl"),"JSON-CDA-query"),this.websocket.onopen=function(t){u.websocket.send(JSON.stringify(s))},this.websocket.onmessage=function(t){var e=!l;if(l=!1,JSON)u.getSuccessHandler(function(t){return n(t,e)})(JSON.parse(t.data));else try{u.websocket.close(1001)}catch(t){}},this.websocket.onerror=function(t){var e=!l;l=!1,u.getErrorHandler(function(t,n,r){o(t,n,r,e)})(t.data)},this.websocket.onclose=function(t){if(1011===t.code){var e=!l;l=!1,u.getErrorHandler(function(t,n,r){o(t,n,r,e)})(t.reason)}}}else{var c=r.extend({},this.getAjaxOptions(),{data:s,url:this.getOption("url"),success:this.getSuccessHandler(n),error:this.getErrorHandler(o)});a.ajax(c)}},dispose:function(){this.websocket&&(this.websocket.close(1e3),this.websocket=null)}};n.registerGlobalQuery("cda",s)}),define("cdf/queries/XmlaQuery.ext",["pentaho/environment"],function(t){return{getXmla:function(){return t.server.root+"Xmla"}}}),define("cdf/queries/XmlaQuery",["amd!../lib/xmla","./XmlaQuery.ext","../lib/Base","./BaseQuery","../dashboard/Dashboard.query","../Logger","../lib/jquery"],function(t,e,n,r,i,o,a){var s=n.extend({xmla:null,datasource:null,catalogs:null,getDataSources:function(){var e=[],n=this.xmla.discoverDataSources();if(!n)return void o.warn("XML/A DISCOVER_DATASOURCES request failed");if(n.hasMoreRows()){e=n.fetchAllAsObject(),this.datasource=e[0];var r=this.datasource[t.PROP_DATASOURCENAME];r&&r.length>0&&(this.datasource[t.PROP_DATASOURCEINFO]=r),n.close()}},getCatalogs:function(){var e={},n={};if(!this.datasource||!this.datasource[t.PROP_DATASOURCEINFO])return void o.warn("XML/A DBSCHEMA_CATALOGS request failed, missing "+t.PROP_DATASOURCEINFO);e[t.PROP_DATASOURCEINFO]=this.datasource[t.PROP_DATASOURCEINFO];var r=this.xmla.discoverDBCatalogs({properties:e});if(!r)return void o.warn("XML/A DISCOVER_DATASOURCES request failed");if(r.hasMoreRows()){for(this.catalogs=[];n=r.fetchAsObject();)this.catalogs[this.catalogs.length]=n;r.close()}},discover:function(e){var n={},r=e.query();return n[t.PROP_DATASOURCEINFO]=this.datasource[t.PROP_DATASOURCEINFO],e.catalog&&(n[t.PROP_CATALOG]=e.catalog),this.xmla.discover({properties:n,requestType:r})},execute:function(e){for(var n=0,r=l.catalogs.length;n<r;n++)if(l.catalogs[n].CATALOG_NAME==e.catalog){var i={}
;i[t.PROP_DATASOURCEINFO]=l.datasource[t.PROP_DATASOURCEINFO],i[t.PROP_CATALOG]=e.catalog,i[t.PROP_FORMAT]=l.PROP_FORMAT||t.PROP_FORMAT_TABULAR;var o=this.xmla.execute({statement:e.query(),properties:i});return o}throw new Error("Catalog: "+e.catalog+" was not found on Pentaho server.")}}),l=new s,u={name:"xmla",label:"XML/A Query",queryDefinition:{},defaults:{url:e.getXmla()},init:function(e){this.queryDefinition=a.extend({},this.getOption("params"),e),null==l.xmla&&(l.xmla=new t({async:!1,url:this.getOption("url")})),null==l.datasource&&l.getDataSources(),null==l.catalogs&&l.getCatalogs()},transformXMLAResults:function(e){var n,r,i,o={resultset:[],metadata:[]};e instanceof t.Rowset?(n=e.fetchAllAsArray(),r=e.getFields()):t.Dataset;for(var a=0,s=r.length;a<s;a++)switch(i=r[a],o.metadata[a]={colIndex:i.index,colName:i.label},i.jsType){case"string":o.metadata[a].colType="string";break;case"number":o.metadata[a].colType="numeric";break;default:o.metadata[a].colType="string"}return o.resultset=n,e.close(),o},doQuery:function(t){var e=(this.getOption("url"),t||this.getOption("successCallback"));this.getOption("errorCallback");try{var n=this.transformXMLAResults(this._executeQuery());this.setOption("lastResultSet",n);var r=a.extend(!0,{},this.getOption("lastResultSet"));this.setOption("lastProcessedResultSet",r),n=e(r),void 0!==n&&n!==r&&this.setOption("lastProcessedResultSet",n)}catch(t){o.error("unable to execute the XML/A query: "+t+" :")}},_executeQuery:function(){return l.execute(this.queryDefinition)}};i.registerGlobalQuery("xmla",u);var c={name:"xmlaDiscover",label:"XML/A Discover Query",queryDefinition:{},defaults:{url:e.getXmla()},init:function(e){this.queryDefinition=a.extend({},this.getOption("params"),e),null==l.xmla&&(l.xmla=new t({async:!1,url:this.getOption("url")})),null==l.datasource&&l.getDataSources()},transformXMLADiscoverResults:function(t){for(var e,n=t.getFields(),r={resultset:[],metadata:[]},i=0,o=n.length;i<o;i++)switch(e=n[i],r.metadata[i]={colIndex:e.index,colName:e.label},e.jsType){case"string":r.metadata[i].colType="string";break;case"number":r.metadata[i].colType="numeric";break;default:r.metadata[i].colType="string"}return r.resultset=t.fetchAllAsArray(),t.close(),r},doQuery:function(t){var e=(this.getOption("url"),t||this.getOption("successCallback"));this.getOption("errorCallback");try{var n=this.transformXMLADiscoverResults(this._executeDiscoverQuery());this.setOption("lastResultSet",n);var r=a.extend(!0,{},this.getOption("lastResultSet"));this.setOption("lastProcessedResultSet",r),n=e(r),void 0!==n&&n!==r&&this.setOption("lastProcessedResultSet",n)}catch(t){o.error("unable to execute the XML/A query: "+t+" :")}},_executeDiscoverQuery:function(){return l.discover(this.queryDefinition)}};i.registerGlobalQuery("xmlaDiscover",c)}),define("cdf/queries/SolrQuery",["./BaseQuery","../dashboard/Dashboard.query","../dashboard/Utils","../Logger","../lib/jquery"],function(t,e,n,r,i){"use strict";var o={endpoint:"",collection:"",requestHandler:"select",q:"*:*",fq:null,fl:null,df:null,start:0,rows:10,wt:"json",rawQueryParameters:"",schemaColumnNames:[],schemaColumnTypes:[],schemaColumnPaths:[],ajaxOptions:{async:!0,type:"GET",xhrFields:{withCredentials:!0}}},a=["q","fq","fl","df","wt","start","rows"],s={_name:"solr",get name(){return this._name},_label:"Apache Solr Query",get label(){return this._label},_defaults:o,get defaults(){return this._defaults},getParameterMacros:function(t){var e={},r=this.getOption("params"),o=i.extend({},r,t);for(var a in o)if(o.hasOwnProperty(a)){var s=this.__getDashboardParameterValue(a,o[a]);null!==n.normalizeValue(s)&&(n.isString(s)&&(s=s.split(/\s*,\s*/)),e[a]=s)}return e},getSolrQueryParameters:function(){var t={},e=this.getOption("rawQueryParameters");return null!==n.normalizeValue(e)&&e.split("&").forEach(function(e){var n=e.split("="),r=n[0],i=n[1];null!=r&&null!=i&&(t[r]=i)}),a.forEach(function(e){var r=this.getOption(e);if(null!==n.normalizeValue(r)){"q"===e&&(r=this.__expandQueryMacros(r)),t[e]=r}},this),t},init:function(t){if(null==t.endpoint||null==t.collection)throw"InvalidQuery";for(var e in t)t.hasOwnProperty(e)&&this.setOption(e,t[e]);this.setOption("url",this.__buildSolrUrl())},exportData:function(t,e,r){r.exportType=t,null!==n.normalizeValue(t)&&this.setOption("wt",t);var o=this.getAjaxOptions();o.url=this.getOption("url"),o.data=this.buildQueryDefinition(e),o.success=this.__exportDataSuccess.bind(this,r),o.error=this.getErrorHandler(this.getOption("errorCallback").bind(this)),i.ajax(o)},buildQueryDefinition:function(t){var e=i.extend({},this.getSolrQueryParameters());t=Array.isArray(t)?n.propertiesArrayToObject(t):t||{};var r=this.getParameterMacros(t);for(var o in r)if(r.hasOwnProperty(o)){var a=r[o],s=Array.isArray(a);if(s)for(var l=a.length,u=l>1,c=0;c<l;c++){var h=u?"_"+c:"";e[o+h]=a[c]}e[o]=s?a.join(","):a}return e},getSuccessHandler:function(t){var e=this.base(t),n=this;return function(t){var i=null;try{i=JSON.parse(t)}catch(e){r.error("Could not parse json result "+t,e)}var o=[],a=[],s={};if(i){var l=i.response,u=l?l.docs:[],c=n.__buildSchema();s.totalRows=String(u.length),o=c.columnNames.map(function(t,e){return{colName:t,colType:c.columnTypes[e],colIndex:e}}),a=u.map(function(t){return c.columnPaths.map(function(e){return n.__search(t,e)})})}e({metadata:o,resultset:a,queryInfo:s})}},__exportDataSuccess:function(t,e){var n="undefined"!=typeof Blob;"json"===t.exportType&&(e=JSON.stringify(e,null,2));var r;if(n){var i=new Blob([e],{type:"octet/stream"});r=window.URL.createObjectURL(i)}else r=this.getOption("url");this.__exportDataDownload(r,t),n&&window.URL.revokeObjectURL(r)},__exportDataDownload:function(t,e){var n=document.createElement("a");null!=n.download?(n.setAttribute("href",t),n.setAttribute("download",this.__getExportDataName(e)),n.setAttribute("type",this.__getExportMineType(e)),n.setAttribute("style","visibility: hidden;"),document.body.appendChild(n),n.click(),document.body.removeChild(n)):r.warn("Can not export the query data on this browser!")},__replaceSchemaMacros:function(t){var e=this.getOption(t);if(!n.normalizeValue(e))return e;var r=this.getParameterMacros();return e.map(function(t){return t.replace(/\${(\w+)}/g,function(t,e){return r[e]})})},__expandQueryMacros:function(t){var e=new RegExp("(\\w+):\\${(\\w+)(?::[^}]+)?}","g"),n=this.getParameterMacros();return t.replace(e,function(t,e,r){var i=n[r];if(!Array.isArray(i))return t;for(var o=i.length,a=o>1,s="",l=0;l<o;l++){""!==s&&(s+=" OR ");s+=e+":${"+r+(a?"_"+l:"")+"}"}return a&&(s="("+s+")"),s})},__search:function(t,e){var n=t[e];return Array.isArray(n)&&(n=n[0]),void 0!==n?n:null},__buildSchema:function(){var t=this.__replaceSchemaMacros("schemaColumnNames"),e=this.__replaceSchemaMacros("schemaColumnTypes"),n=this.__replaceSchemaMacros("schemaColumnPaths");return{columnNames:t,columnTypes:e,columnPaths:n.length?n:t}},__buildSolrUrl:function(){var t=this.getOption("endpoint");return t.endsWith("/")&&(t=t.slice(0,-1)),t+"/"+this.getOption("collection")+"/"+this.getOption("requestHandler")},__getExportMineType:function(t){switch(t.exportType){case"csv":return"text/csv";case"json":return"application/json";case"xml":return"application/xml";default:return"text/plain"}},__getExportDataName:function(t){var e=t.filename;return null===n.normalizeValue(e)&&(e="solr-export."+t.exportType),e}};e.registerGlobalQuery("solr",s)}),define("cdf/Dashboard",["./dashboard/Dashboard","./dashboard/Dashboard.context","./dashboard/Dashboard.addIns","./dashboard/Dashboard.bookmarkable","./dashboard/Dashboard.components","./dashboard/Dashboard.i18n","./dashboard/Dashboard.legacy","./dashboard/Dashboard.lifecycle","./dashboard/Dashboard.notifications","./dashboard/Dashboard.parameters","./dashboard/Dashboard.storage","./dashboard/Dashboard.dataSources","./dashboard/Dashboard.query","./dashboard/Dashboard.views","./queries/BaseQuery","./queries/CpkQuery","./queries/CdaQuery","./queries/XmlaQuery","./queries/SolrQuery","./components/BaseComponent","./components/UnmanagedComponent","css!./theme/Dashboard"],function(t){return t}),define("cdf/Dashboard.Clean",["./Dashboard"],function(t){return t}),define("cdf/components/InputBaseComponent",["./UnmanagedComponent","amd!../lib/underscore","../dashboard/Utils"],function(t,e,n){return t.extend({update:function(){var t=this.queryDefinition;if(this.valuesArray&&this.valuesArray.length>0){var n=e.bind(function(){this.draw(this.valuesArray)},this);this.synchronous(n)}else if(t){var n=e.bind(function(t){var e;e=this.valueAsId?t.resultset.map(function(t){return[t[0],t[0]]}):t.resultset,this.draw(e)},this);this.triggerQuery(t,n)}else{var n=e.bind(function(){var t=this.getValuesArray();this.draw(t)},this);this.synchronous(n)}},_getParameterValue:function(){return n.normalizeValue(n.ev(this.dashboard.getParameterValue(this.parameter)))}})}),define("cdf/components/SelectBaseComponent",["./InputBaseComponent","../Logger","../lib/jquery","amd!../lib/underscore","../dashboard/Utils","amd!../lib/jquery.chosen","amd!../lib/jquery.multiselect","amd!../lib/jquery.select2"],function(t,e,n,r,i){return t.extend({visible:!1,draw:function(t){var o=this.placeholder();if(0===o.length)return e.warn("Placeholder not in DOM - Will not draw"),!1;var a=this.name,s="<select",l=this._allowMultipleValues();l&&(s+=" multiple");var u=this._getPlaceholderText();u&&(s+=" data-placeholder='"+u+"'");var c=this._getListSize(t);null!=c&&(s+=" size='"+c+"'",t.length>c&&(s+=" style='overflow-y: scroll;' "));var h=this.externalPlugin;switch(h){case"chosen":s+=" class='chzn-select'";break;case"hynds":s+=" class='hynds-select'";break;case"select2":s+=" class='select2-container'"}s+=">";var d,f=this._getParameterValue(),p=i.parseMultipleValues(!r.isNaN(f)&&r.isNumber(f)?f+"":f),m={};i.eachValuesArray(t,{valueAsId:this.valueAsId},function(t,e,n,r){s+="<option value = '"+i.escapeHtml(t)+"' >"+i.escapeHtml(e)+"</option>",r||(d=t),m[t]=!0},this),s+="</select>",o.html(s);var g=!0;if(null!=p){for(var y=p.length;y--;)!0!==m[p[y]]&&(g=!1,p.splice(y,1));p.length||(p=null)}var v=null==p,b=!g;switch(v&&this.useFirstValue&&null!=d&&(p=[d],b=!0),n("select",o).val(null==p?[]:p),l&&(null!=this.autoTopValue?(this.topValue(this.autoTopValue),delete this.autoTopValue):null!=this.autoTopIndex&&(this.topIndex(this.autoTopIndex),delete this.autoTopIndex)),this._doAutoFocus(),b&&(this.dashboard.setParameter(this.parameter,p),this.dashboard.processChange(a)),h){case"chosen":var _=n.browser;n.browser="",o.find("select.chzn-select").chosen(this._readExtraOptions()),n.browser=_;break;case"hynds":o.find("select.hynds-select").multiselect({multiple:l});break;case"select2":var w=this._readExtraOptions()||{};void 0===w.dropdownAutoWidth&&(w.dropdownAutoWidth=!0),w.width||(w.width="off");var x=i.clone(w);x.dropdownParentId&&(x.dropdownParent=n("#"+x.dropdownParentId)),o.find("select.select2-container").select2(x)}this._listenElement(o)},_allowMultipleValues:function(){return!1},_getPlaceholderText:function(){var t=this.placeholderText;return r.isString(t)&&!r.isEmpty(t)&&t||!1},_getListSize:function(t){return this.size},_readExtraOptions:function(){if(this.externalPlugin&&this.extraOptions)return i.propertiesArrayToObject(this.extraOptions)},_listenElement:function(t){var e,r=this,o=r.getValue(),a=function(){e&&e();var t=r.dashboard;if(t){var n=r.getValue();i.equalValues(o,n)||(o=n,t.processChange(r.name))}},s=n("select",t);if(s.keypress(function(t){13===t.which&&a()}),"timeout-focus"!==this._getChangeMode())s.on(r._changeTrigger(),a);else{var l=r.changeTimeoutScrollFraction;l=Math.max(0,null!=l?l:1);var u=r.changeTimeoutChangeFraction;u=Math.max(0,null!=u?u:5/8);var c,h=Math.max(100,r.changeTimeout||2e3),d=l*h,f=u*h;e=function(){null!=c&&(clearTimeout(c),c=null)};var p=function(t){e(),r.dashboard&&(c=setTimeout(a,t||h))};s.change(function(){p(f)}).scroll(function(){p(d)}).focusout(a)}},_getChangeMode:function(){var t=this.changeMode;if(t)switch(t=t.toLowerCase()){case"immediate":case"focus":return t;case"timeout-focus":return/android|ipad|iphone/i.test(navigator.userAgent)?"focus":t;default:e.log("Invalid 'changeMode' value: '"+t+"'.","warn")}return"immediate"},_changeTrigger:function(){return"immediate"===this._getChangeMode()?"change":/android/i.test(navigator.userAgent)?"change":"focusout"}})}),define("cdf/components/SelectComponent",["./SelectBaseComponent"],function(t){return t.extend({useFirstValue:!0,getValue:function(){return this.placeholder("select").val()}})}),define("cdf/components/SelectMultiComponent",["./SelectBaseComponent","../lib/jquery"],function(t,e){return t.extend({getValue:function(){var t=this.placeholder("select"),e=t.val();return null==e?[]:e},_allowMultipleValues:function(){return null==this.isMultiple||!!this.isMultiple},_getListSize:function(t){var e=this.base(t);return null==e&&(this._allowMultipleValues()||(e=t.length)),e},topIndex:function(t){var e=this.placeholder("select"),n=e[0],r=n.length;if(!r)return arguments.length?this:0;var i=Math.max(1,n.scrollHeight),o=Math.max(1,i/r);if(arguments.length){var a=+t;return a=isNaN(a)?0:Math.max(0,Math.min(a,r-1)),e.scrollTop(Math.ceil(a*o)),this}return Math.round(e.scrollTop()/o)},indexOf:function(t){if(null!=t){var e=this.placeholder("select option"),n=e.length;if(n){t=String(t);for(var r=0;r<n;r++)if(e[r].value===t)return r}}return-1},valueAt:function(t){if(t>=0)return this.placeholder("select :nth-child("+(t+1)+")").val()},topValue:function(t){if(arguments.length){var e=this.indexOf(t);return e>=0&&this.topIndex(e),this}return this.valueAt(this.topIndex())}})}),define("cdf/components/ToggleButtonBaseComponent",["../lib/jquery","./InputBaseComponent","../dashboard/Utils"],function(t,e,n){return e.extend({draw:function(e){var r=this,i=r.dashboard.getParameterValue(r.parameter);i="function"==typeof i?i():i;var o=!1,a=[];null==i||void 0==i?a=[]:i instanceof Array||"object"==typeof i&&i.join?a=i:"string"==typeof i&&(a=i.split("|"));var s=0==r.valueAsId?0:1,l=!1;t:for(var u=0;u<a.length;u++)for(var c=0;c<e.length;c++)if(a[u]==e[c][s]){l=!0;break t}!l&&r.useFirstValue&&(a=[e[0][s]],r.currentVal=a,r.dashboard.setParameter(r.parameter,a),r.dashboard.processChange(r.name));for(var h=r.verticalOrientation?"toggleGroup vertical":"toggleGroup horizontal",d=t("<ul/>").attr({class:h}),u=0,f=e.length;u<f;u++){var p=t("<li/>").attr({class:h}),m=t("<input/>").click(function(){r.callAjaxAfterRender(r,r.name)});o=!1;for(var g=0,y=a.length;g<y&&!(o=a[g]==e[u][s]);g++);"radio"==r.type||"radiocomponent"==r.type.toLowerCase()?((0==u&&!l||l&&e[u][s]==i)&&m.prop("checked",!0),m.attr({type:"radio"})):((0==u&&!l&&r.useFirstValue||l&&o)&&m.prop("checked",!0),m.attr({type:"checkbox"})),m.attr({class:r.name,name:r.name,id:r.name+u,value:e[u][s]}),m.appendTo(p);var v=n.sanitizeHtml(e[u][1]);p.append(t("<label/>").attr({for:r.name+u}).html(v)),d.append(p).append(void 0==r.separator||null==r.separator||"null"==r.separator?"":r.separator)}r.placeholder().html(d),r.currentVal=null,r._doAutoFocus()},callAjaxAfterRender:function(t,e){var n=t;setTimeout(function(){n.dashboard.processChange(e)},1)}})}),define("cdf/components/RadioComponent",["./ToggleButtonBaseComponent","../lib/jquery"],function(t,e){return t.extend({getValue:function(){return"undefined"!=this.currentVal&&null!=this.currentVal?this.currentVal:this.placeholder("."+this.name+":checked").val()}})}),define("cdf/components/CheckComponent",["../lib/jquery","./ToggleButtonBaseComponent"],function(t,e){return e.extend({getValue:function(){if("undefined"!=this.currentVal&&null!=this.currentVal)return this.currentVal;var e=new Array;return this.placeholder("."+this.name+":checked").each(function(n,r){e.push(t(this).val())}),e}})}),define("cdf/components/MultiButtonComponent",["../lib/jquery","./ToggleButtonBaseComponent","../dashboard/Utils","css!./theme/MultiButtonComponent.css"],function(t,e,n){function r(t){return"pentaho-toggle-button pentaho-toggle-button-up "+(t?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")}function i(t){return"pentaho-toggle-button pentaho-toggle-button-down "+(t?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")}function o(t){return"pentaho-toggle-button pentaho-toggle-button-up "+(t?"pentaho-toggle-button-vertical":"pentaho-toggle-button-horizontal")}function a(t,e,n){return 0==t&&1==e?" pentaho-toggle-button-single":0==t?n?" pentaho-toggle-button-vertical-first":" pentaho-toggle-button-horizontal-first":t==e-1?n?" pentaho-toggle-button-vertical-last":" pentaho-toggle-button-horizontal-last":""}return e.extend({indexes:[],draw:function(e){this.cachedArray=e;var i,o=this,s=r(o.verticalOrientation),l="",u=o.valueAsId?1:0;void 0==o.isMultiple&&(o.isMultiple=!1);var c=t("<div>");c.appendTo(o.placeholder().empty());for(var h=0,d=e.length;h<d;h++){var f,p=e[h][u],m=e[h][1],g=s+a(h,d,o.verticalOrientation);p=null==p?null:p.replace('"',"&quot;"),m=null==m?null:m.replace('"',"&quot;"),0==h&&(i=p),l="<div class='"+g+"'><button type='button' name='"+o.name+"'>"+m+"</button  ></div>",f=t(l),function(t){f.click(function(){o.clickButton(o.htmlObject,o.name,t,o.isMultiple,o.verticalOrientation)})}(h),c.append(f);var y=o.separator;void 0!=y&&null!=y&&"null"!=y&&h!=e.length-1&&c.append(y)}var v,b=n.ev(o.dashboard.getParameterValue(o.parameter)),_=!1;v=null==b||void 0==b?[]:b instanceof Array||"object"==typeof b&&b.join?b:b.toString().split("|");var w=!1;o.clearSelections(o.htmlObject,o.name,o.verticalOrientation);for(var h=0;h<e.length;h++){_=!1;for(var x=0,C=v.length;x<C&&!(_=v[x]==e[h][u]);x++);if((t.isArray(b)&&_||_||e[h][u]==b||e[h][1]==b)&&(o.clickButton(o.htmlObject,o.name,h,o.isMultiple,o.verticalOrientation,!0),w=!0,!o.isMultiple))break}(!w&&!o.isMultiple||!w&&o.isMultiple&&o.useFirstValue)&&e.length>0&&((null==b||""==b||b!==i&&1==e.length||"object"==typeof b&&0==b.length)&&o.parameter&&o.dashboard.fireChange(o.parameter,o.isMultiple?[i]:i),o.clickButton(o.htmlObject,o.name,0,o.isMultiple,o.verticalOrientation,!0)),t(".pentaho-toggle-button").hover(function(){t(o).addClass("pentaho-toggle-button-up-hovering")},function(){t(o).removeClass("pentaho-toggle-button-up-hovering")}),t(".pentaho-toggle-button button").hover(function(){t(o).parent().addClass("pentaho-toggle-button-up-hovering")},function(){}),o._doAutoFocus()},getValue:function(){var t=this;if(t.isMultiple){var e=t.getSelectedIndex(t.name),n=new Array;if(void 0==e.length)n.push(t.getValueByIdx(e));else for(var r=0;r<e.length;r++)n.push(t.getValueByIdx(e[r]));return n}return t.getValueByIdx(t.getSelectedIndex(t.name))},getValueByIdx:function(t){return this.cachedArray[t][this.valueAsId?1:0]},clickButton:function(e,n,r,s,l,u){var c=o(l),h=i(l),d=t("#"+e+" button");if(s){void 0==this.indexes[n]?this.indexes[n]=[]:t.isArray(this.indexes[n])||(this.indexes[n]=[this.indexes[n]]);for(var f=!1,p=0;p<this.indexes[n].length;++p)if(this.indexes[n][p]==r){f=!0,this.indexes[n].splice(p,1);break}f?d[r].parentNode.className=c+a(r,d.length,l):(d[r].parentNode.className=h+a(r,d.length,l),this.indexes[n].push(r))}else{if(this.indexes[n]===r)return!1;this.clearSelections(e,n,l),this.indexes[n]=r,d[r].parentNode.className=h+a(r,d.length,l)}u||this.callAjaxAfterRender(this,n)},clearSelections:function(e,n,r){for(var i=t("#"+e+" button"),s=o(r),l=0;l<i.length;l++)i[l].parentNode.className=s+a(l,i.length,r);this.indexes[n]=[]},getSelectedIndex:function(t){return this.indexes[t]}})}),define("cdf/components/TextInputComponent",["../lib/jquery","./BaseComponent","../Logger"],function(t,e,n){return e.extend({update:function(){var e=this;e._addHtmlToPlaceholder();var n=t("#"+e.name),r=e.dashboard.getParameterValue(e.parameter),i=e._formatValue(r);n.val(i),n.change(function(){var t=e.getValue();if(e.dashboard.getParameterValue(e.parameter)!==t){var r=e._formatValue(t);n.val(r),e.dashboard.processChange(e.name)}}).keyup(function(t){var r=e.getValue();if(13==t.keyCode&&e.dashboard.getParameterValue(e.parameter)!==r){var i=e._formatValue(r);n.val(i),e.dashboard.processChange(e.name)}}),e._doAutoFocus()},getValue:function(){var e=t("#"+this.name).val();return this._parseValue(e)},_formatValue:function(t){return t},_parseValue:function(t){return t},_addHtmlToPlaceholder:function(){var t={type:"text",id:this.name,name:this.name,size:this.size||this.charWidth||void 0,maxlength:this.maxLength||this.maxChars||void 0},e="<input "+function(t){var e=[];for(prop in t)t.hasOwnProperty(prop)&&null!=t[prop]&&e.push(prop+'="'+t[prop]+'"');return e.join(" ")}(t)+">";this.size&&n.warn("Attribute 'size' is deprecated"),this.maxLength&&n.warn("Attribute 'maxLength' is deprecated"),this.placeholder().html(e)}})}),define("dojo/has",["require","module"],function(t,e){var n=t.has||function(){};if(!n("dojo-has-api")){var r="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,i=this,o=r&&document,a=o&&o.createElement("DiV"),s=e.config&&e.config()||{};n=function(t){return"function"==typeof s[t]?s[t]=s[t](i,o,a):s[t]},n.cache=s,n.add=function(t,e,r,i){return(void 0===s[t]||i)&&(s[t]=e),r&&n(t)},n.add("host-browser",r),n.add("dom",r),n.add("dojo-dom-ready-api",1),n.add("dojo-sniff",1)}if(n("host-browser")){n.add("dom-addeventlistener",!!document.addEventListener),n.add("touch","ontouchstart"in document||window.navigator.msMaxTouchPoints>0),n.add("device-width",screen.availWidth||innerWidth);var l=document.createElement("form");n.add("dom-attributes-explicit",0==l.attributes.length),n.add("dom-attributes-specified-flag",l.attributes.length>0&&l.attributes.length<40)}return n.clearElement=function(t){return t.innerHTML="",t},n.normalize=function(t,e){var r=t.match(/[\?:]|[^:\?]*/g),i=0,o=function(t){var e=r[i++];return":"==e?0:"?"==r[i++]?!t&&n(e)?o():(o(!0),o(t)):e||0};return(t=o())&&e(t)},n.load=function(t,e,n){t?e([t],n):n()},n}),define("dojo/_base/config",["../has","require"],function(t,e){var n={};if(t("dojo-config-api")){var r,i=e.rawConfig;for(r in i)n[r]=i[r]}else{var o=function(e,n,i){for(r in e)"has"!=r&&t.add(n+r,e[r],0,i)},a=function(){return this}();n=t("dojo-loader")?e.rawConfig:a.dojoConfig||a.djConfig||{},o(n,"config",1),o(n.has,"",1)}return!n.locale&&"undefined"!=typeof window&&window.SESSION_LOCALE&&(n.locale=window.SESSION_LOCALE.toLowerCase().replace("_","-")),n.locale||"undefined"==typeof navigator||(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n}),define("dojo/_base/kernel",["../has","./config","require","module"],function(t,e,n,r){var i,o,a,s=function(){return this}(),l={},u={},c={config:e,global:s,dijit:l,dojox:u},h={dojo:["dojo",c],dijit:["dijit",l],dojox:["dojox",u]},d=n.map&&n.map[r.id.match(/[^\/]+/)[0]];for(o in d)h[o]?h[o][0]=d[o]:h[o]=[d[o],{}];for(o in h)a=h[o],a[1]._scopeName=a[0],e.noGlobals||(s[a[0]]=a[1]);c.scopeMap=h,c.baseUrl=c.config.baseUrl=n.baseUrl,c.isAsync=!t("dojo-loader")||n.async,c.locale=e.locale;var f="$Rev: f774568 $".match(/[0-9a-f]{7,}/);if(c.version={major:1,minor:9,patch:2,flag:"",revision:f?f[0]:NaN,toString:function(){var t=c.version;return t.major+"."+t.minor+"."+t.patch+t.flag+" ("+t.revision+")"}},t.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c),t("host-rhino")?c.exit=function(t){quit(t)}:c.exit=function(){},t.add("dojo-guarantee-console",1),t("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var p,m=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(i=0;p=m[i++];)console[p]||function(){var t=p+"";console[t]="log"in console?function(){var e=Array.apply({},arguments);e.unshift(t+":"),console.log(e.join(" "))}:function(){},console[t]._fake=!0}()}if(t.add("dojo-debug-messages",!!e.isDebug),c.deprecated=c.experimental=function(){},t("dojo-debug-messages")&&(c.deprecated=function(t,e,n){var r="DEPRECATED: "+t;e&&(r+=" "+e),n&&(r+=" -- will be removed in version: "+n),console.warn(r)},c.experimental=function(t,e){var n="EXPERIMENTAL: "+t+" -- APIs subject to change without notice.";e&&(n+=" "+e),console.warn(n)}),t.add("dojo-modulePaths",1),t("dojo-modulePaths")&&e.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration");var g={};for(o in e.modulePaths)g[o.replace(/\./g,"/")]=e.modulePaths[o];n({paths:g})}return t.add("dojo-moduleUrl",1),t("dojo-moduleUrl")&&(c.moduleUrl=function(t,e){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var r=null;return t&&(r=n.toUrl(t.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/")),r}),c._hasResource={},c}),define("dojo/sniff",["./has"],function(t){if(t("host-browser")){var e=navigator,n=e.userAgent,r=e.appVersion,i=parseFloat(r);if(t.add("air",n.indexOf("AdobeAIR")>=0),t.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),t.add("khtml",r.indexOf("Konqueror")>=0?i:void 0),t.add("webkit",parseFloat(n.split("WebKit/")[1])||void 0),t.add("chrome",parseFloat(n.split("Chrome/")[1])||void 0),t.add("safari",r.indexOf("Safari")>=0&&!t("chrome")?parseFloat(r.split("Version/")[1]):void 0),t.add("mac",r.indexOf("Macintosh")>=0),t.add("quirks","BackCompat"==document.compatMode),n.match(/(iPhone|iPod|iPad)/)){var o=RegExp.$1.replace(/P/,"p"),a=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",s=parseFloat(a.replace(/_/,".").replace(/_/g,""));t.add(o,s),t.add("ios",s)}if(t.add("android",parseFloat(n.split("Android ")[1])||void 0),t.add("bb",(n.indexOf("BlackBerry")>=0||n.indexOf("BB10")>=0)&&parseFloat(n.split("Version/")[1])||void 0),t.add("trident",parseFloat(r.split("Trident/")[1])||void 0),t.add("svg","undefined"!=typeof SVGAngle),!t("webkit")){if(n.indexOf("Opera")>=0&&t.add("opera",i>=9.8?parseFloat(n.split("Version/")[1])||i:i),n.indexOf("Gecko")>=0&&!t("khtml")&&!t("webkit")&&!t("trident")&&t.add("mozilla",i),t("mozilla")&&t.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!t("opera")){var l=parseFloat(r.split("MSIE ")[1])||void 0,u=document.documentMode;u&&5!=u&&Math.floor(l)!=u&&(l=u),t.add("ie",l)}t.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return t}),define("dojo/_base/lang",["./kernel","../has","../sniff"],function(t,e){e.add("bug-for-in-skips-shadowed",function(){for(var t in{toString:1})return 0;return 1});var n=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],r=n.length,i=function(e,n,r){var i,o=0,a=t.global;if(!r){if(!e.length)return a;i=e[o++];try{r=t.scopeMap[i]&&t.scopeMap[i][1]}catch(t){}r=r||(i in a?a[i]:n?a[i]={}:void 0)}for(;r&&(i=e[o++]);)r=i in r?r[i]:n?r[i]={}:void 0;return r},o=Object.prototype.toString,a=function(t,e,n){return(n||[]).concat(Array.prototype.slice.call(t,e||0))},s=/\{([^\}]+)\}/g,l={_extraNames:n,_mixin:function(t,i,o){var a,s,l,u={};for(a in i)s=i[a],a in t&&(t[a]===s||a in u&&u[a]===s)||(t[a]=o?o(s):s);if(e("bug-for-in-skips-shadowed")&&i)for(l=0;l<r;++l)a=n[l],s=i[a],a in t&&(t[a]===s||a in u&&u[a]===s)||(t[a]=o?o(s):s);return t},mixin:function(t,e){t||(t={});for(var n=1,r=arguments.length;n<r;n++)l._mixin(t,arguments[n]);return t},setObject:function(t,e,n){var r=t.split("."),o=r.pop(),a=i(r,!0,n);return a&&o?a[o]=e:void 0},getObject:function(t,e,n){return i(t.split("."),e,n)},exists:function(t,e){return void 0!==l.getObject(t,!1,e)},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return t&&(t instanceof Array||"array"==typeof t)},isFunction:function(t){return"[object Function]"===o.call(t)},isObject:function(t){return void 0!==t&&(null===t||"object"==typeof t||l.isArray(t)||l.isFunction(t))},isArrayLike:function(t){return t&&void 0!==t&&!l.isString(t)&&!l.isFunction(t)&&!(t.tagName&&"form"==t.tagName.toLowerCase())&&(l.isArray(t)||isFinite(t.length))},isAlien:function(t){return t&&!l.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},extend:function(t,e){for(var n=1,r=arguments.length;n<r;n++)l._mixin(t.prototype,arguments[n]);return t},_hitchArgs:function(e,n){var r=l._toArray(arguments,2),i=l.isString(n);return function(){var o=l._toArray(arguments),a=i?(e||t.global)[n]:n;return a&&a.apply(e||this,r.concat(o))}},hitch:function(e,n){if(arguments.length>2)return l._hitchArgs.apply(t,arguments);if(n||(n=e,e=null),l.isString(n)){if(e=e||t.global,!e[n])throw['lang.hitch: scope["',n,'"] is null (scope="',e,'")'].join("");return function(){return e[n].apply(e,arguments||[])}}return e?function(){return n.apply(e,arguments||[])}:n},delegate:function(){function t(){}return function(e,n){t.prototype=e;var r=new t;return t.prototype=null,n&&l._mixin(r,n),r}}(),_toArray:e("ie")?function(){function t(t,e,n){for(var r=n||[],i=e||0;i<t.length;i++)r.push(t[i]);return r}return function(e){return(e.item?t:a).apply(this,arguments)}}():a,partial:function(e){var n=[null];return l.hitch.apply(t,n.concat(l._toArray(arguments)))},clone:function(t){if(!t||"object"!=typeof t||l.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,n,r;if(l.isArray(t))for(e=[],n=0,r=t.length;n<r;++n)n in t&&e.push(l.clone(t[n]));else e=t.constructor?new t.constructor:{};return l._mixin(e,t,l.clone)},trim:String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(t,e,n){return t.replace(n||s,l.isFunction(e)?e:function(t,n){return l.getObject(n,!1,e)})}};return e("extend-dojo")&&l.mixin(t,l),l}),define("dojo/_base/array",["./kernel","../has","./lang"],function(t,e,n){function r(t){return s[t]=new Function("item","index","array",t)}function i(t){var e=!t;return function(n,i,o){var a,l=0,u=n&&n.length||0;if(u&&"string"==typeof n&&(n=n.split("")),"string"==typeof i&&(i=s[i]||r(i)),o){for(;l<u;++l)if(a=!i.call(o,n[l],l,n),t^a)return!a}else for(;l<u;++l)if(a=!i(n[l],l,n),t^a)return!a;return e}}function o(t){var e=1,n=0,r=0;return t||(e=n=r=-1),function(i,o,s,u){if(u&&e>0)return l.lastIndexOf(i,o,s);var c,h=i&&i.length||0,d=t?h+r:n;for(s===a?c=t?n:h+r:s<0?(c=h+s)<0&&(c=n):c=s>=h?h+r:s,h&&"string"==typeof i&&(i=i.split(""));c!=d;c+=e)if(i[c]==o)return c;return-1}}var a,s={},l={every:i(!1),some:i(!0),indexOf:o(!0),lastIndexOf:o(!1),forEach:function(t,e,n){var i=0,o=t&&t.length||0;if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||r(e)),n)for(;i<o;++i)e.call(n,t[i],i,t);else for(;i<o;++i)e(t[i],i,t)},map:function(t,e,n,i){var o=0,a=t&&t.length||0,l=new(i||Array)(a);if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||r(e)),n)for(;o<a;++o)l[o]=e.call(n,t[o],o,t);else for(;o<a;++o)l[o]=e(t[o],o,t);return l},filter:function(t,e,n){var i,o=0,a=t&&t.length||0,l=[];if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||r(e)),n)for(;o<a;++o)i=t[o],e.call(n,i,o,t)&&l.push(i);else for(;o<a;++o)i=t[o],e(i,o,t)&&l.push(i);return l},clearCache:function(){s={}}};return e("extend-dojo")&&n.mixin(t,l),l}),define("dojo/date",["./has","./_base/lang"],function(t,e){var n={};return n.getDaysInMonth=function(t){var e=t.getMonth(),r=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==e&&n.isLeapYear(t)?29:r[e]},n.isLeapYear=function(t){var e=t.getFullYear();return!(e%400&&(e%4||!(e%100)))},n.getTimezoneName=function(t){var e,n=t.toString(),r="",i=n.indexOf("(");if(i>-1)r=n.substring(++i,n.indexOf(")"));else{var o=/([A-Z\/]+) \d{4}$/;(e=n.match(o))?r=e[1]:(n=t.toLocaleString(),o=/ ([A-Z\/]+)$/,(e=n.match(o))&&(r=e[1]))}return"AM"==r||"PM"==r?"":r},n.compare=function(t,e,n){return t=new Date(+t),e=new Date(+(e||new Date)),"date"==n?(t.setHours(0,0,0,0),e.setHours(0,0,0,0)):"time"==n&&(t.setFullYear(0,0,0),e.setFullYear(0,0,0)),t>e?1:t<e?-1:0},n.add=function(t,e,n){var r=new Date(+t),i=!1,o="Date";switch(e){case"day":break;case"weekday":var a,s,l=n%5;l?(a=l,s=parseInt(n/5)):(a=n>0?5:-5,s=n>0?(n-5)/5:(n+5)/5)
;var u=t.getDay(),c=0;6==u&&n>0?c=1:0==u&&n<0&&(c=-1);var h=u+a;0!=h&&6!=h||(c=n>0?2:-2),n=7*s+a+c;break;case"year":o="FullYear",i=!0;break;case"week":n*=7;break;case"quarter":n*=3;case"month":i=!0,o="Month";break;default:o="UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s"}return o&&r["set"+o](r["get"+o]()+n),i&&r.getDate()<t.getDate()&&r.setDate(0),r},n.difference=function(t,e,r){e=e||new Date,r=r||"day";var i=e.getFullYear()-t.getFullYear(),o=1;switch(r){case"quarter":var a=t.getMonth(),s=e.getMonth(),l=Math.floor(a/3)+1,u=Math.floor(s/3)+1;u+=4*i,o=u-l;break;case"weekday":var c=Math.round(n.difference(t,e,"day")),h=parseInt(n.difference(t,e,"week")),d=c%7;if(0==d)c=5*h;else{var f=0,p=t.getDay(),m=e.getDay();h=parseInt(c/7),d=c%7;var g=new Date(t);g.setDate(g.getDate()+7*h);var y=g.getDay();if(c>0)switch(!0){case 6==p:f=-1;break;case 0==p:f=0;break;case 6==m:f=-1;break;case 0==m:f=-2;break;case y+d>5:f=-2}else if(c<0)switch(!0){case 6==p:f=0;break;case 0==p:f=1;break;case 6==m:f=2;break;case 0==m:f=1;break;case y+d<0:f=2}c+=f,c-=2*h}o=c;break;case"year":o=i;break;case"month":o=e.getMonth()-t.getMonth()+12*i;break;case"week":o=parseInt(n.difference(t,e,"day")/7);break;case"day":o/=24;case"hour":o/=60;case"minute":o/=60;case"second":o/=1e3;case"millisecond":o*=e.getTime()-t.getTime()}return Math.round(o)},t("extend-dojo")&&e.mixin(e.getObject("dojo.date",!0),n),n}),define("dojo/json",["./has"],function(has){"use strict";var hasJSON="undefined"!=typeof JSON;if(has.add("json-parse",hasJSON),has.add("json-stringify",hasJSON&&'{"a":1}'==JSON.stringify({a:0},function(t,e){return e||1})),has("json-stringify"))return JSON;var escapeString=function(t){return('"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(t,e,n){function r(t,o,a){e&&(t=e(a,t));var s,l=typeof t;if("number"==l)return isFinite(t)?t+"":"null";if("boolean"==l)return t+"";if(null===t)return"null";if("string"==typeof t)return escapeString(t);if("function"==l||"undefined"==l)return i;if("function"==typeof t.toJSON)return r(t.toJSON(a),o,a);if(t instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(e,n,r){var i=t["getUTC"+n]()+(r?1:0);return i<10?"0"+i:i});if(t.valueOf()!==t)return r(t.valueOf(),o,a);var u=n?o+n:"",c=n?" ":"",h=n?"\n":"";if(t instanceof Array){var d=t.length,f=[];for(a=0;a<d;a++){s=r(t[a],u,a),"string"!=typeof s&&(s="null"),f.push(h+u+s)}return"["+f.join(",")+h+o+"]"}var p=[];for(a in t){var m;if(t.hasOwnProperty(a)){if("number"==typeof a)m='"'+a+'"';else{if("string"!=typeof a)continue;m=escapeString(a)}if("string"!=typeof(s=r(t[a],u,a)))continue;p.push(h+u+m+":"+c+s)}}return"{"+p.join(",")+h+o+"}"}var i;return"string"==typeof e&&(n=e,e=null),r(t,"","")}}}),define("dojo/i18n",["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./has!host-browser?./_base/xhr","./json","module"],function(t,e,n,r,i,o,a,s,l){n.add("dojo-preload-i18n-Api",1),n.add("dojo-v1x-i18n-Api",1);var u=t.i18n={},c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,h=function(t,e,n,r){for(var i=[n+r],o=e.split("-"),a="",s=0;s<o.length;s++)a+=(a?"-":"")+o[s],t&&!t[a]||(i.push(n+a+"/"+r),i.specificity=a);return i},d={},f=function(e,n,r){return r=r?r.toLowerCase():t.locale,e=e.replace(/\./g,"/"),n=n.replace(/\./g,"/"),/root/i.test(r)?e+"/nls/"+n:e+"/nls/"+r+"/"+n},p=t.getL10nName=function(t,e,n){return t=l.id+"!"+f(t,e,n)},m=function(t,e,n,r,i,a){t([e],function(s){var l=o.clone(s.root||s.ROOT),u=h(!s._v1x&&s,i,n,r);t(u,function(){for(var t=1;t<u.length;t++)l=o.mixin(o.clone(l),arguments[t]);d[e+"/"+i]=l,l.$locale=u.specificity,a()})})},g=function(t,e){return/^\./.test(t)?e(t):t},y=function(t){var e=i.extraLocale||[];return e=o.isArray(e)?e:[e],e.push(t),e},v=function(e,i,a,l){if(l&&l.isBuild)return a();if(n("dojo-preload-i18n-Api")){var u=e.split("*"),h="preload"==u[1];if(h&&(d[e]||(d[e]=1,S(u[2],s.parse(u[3]),1,i)),a(1)),h||k(e,i,a))return}var f=c.exec(e),p=f[1]+"/",g=f[5]||f[4],v=p+g,b=f[5]&&f[4],_=b||t.locale||"",w=v+"/"+_,x=b?[_]:y(_),C=x.length,M=function(){--C||a(o.delegate(d[w]))};r.forEach(x,function(t){var e=v+"/"+t;n("dojo-preload-i18n-Api")&&D(e),d[e]?M():m(i,v,p,g,t,M)})};if(n("dojo-unit-tests"))var b=u.unitTests=[];if(n("dojo-preload-i18n-Api")||n("dojo-v1x-i18n-Api"))var _=u.normalizeLocale=function(e){var n=e?e.toLowerCase():t.locale;return"root"==n?"ROOT":n},w=function(t,r){return!n("dojo-sync-loader")||!n("dojo-v1x-i18n-Api")||r.isXdUrl(e.toUrl(t+".js"))},x=0,C=[],S=u._preloadLocalizations=function(n,i,o,a){function s(t,e){w(t,a)||o?a([t],e):T([t],e,a)}function l(t,e){for(var n=t.split("-");n.length;){if(e(n.join("-")))return;n.pop()}e("ROOT")}function u(t){t=_(t),l(t,function(t){if(r.indexOf(i,t)>=0){var o=n.replace(/\./g,"/")+"_"+t;return x++,s(o,function(n){for(var r in n)d[e.toAbsMid(r)+"/"+t]=n[r];for(--x;!x&&C.length;)v.apply(null,C.shift())}),!0}return!1})}a=a||e,u(),r.forEach(t.config.extraLocale,u)},k=function(t,e,n){return x&&C.push([t,e,n]),x},D=function(){};if(n("dojo-v1x-i18n-Api")){var M={},N=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),T=function(t,e,n){var i=[];r.forEach(t,function(t){function e(e){var n=N(e,D,t,M);n===M?i.push(d[r]=M.result):(n instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+r,n),n={}),i.push(d[r]=/nls\/[^\/]+\/[^\/]+$/.test(r)?n:{root:n,_v1x:1}))}var r=n.toUrl(t+".js");if(d[r])i.push(d[r]);else{var o=n.syncLoadNls(t);if(o)i.push(o);else if(a)a.get({url:r,sync:!0,load:e,error:function(){i.push(d[r]={})}});else try{n.getText(r,!0,e)}catch(t){i.push(d[r]={})}}}),e&&e.apply(null,i)};D=function(e){for(var n,r=e.split("/"),i=t.global[r[0]],o=1;i&&o<r.length-1;i=i[r[o++]]);return i&&(n=i[r[o]],n||(n=i[r[o].replace(/-/g,"_")]),n&&(d[e]=n)),n},u.getLocalization=function(t,n,r){var i,o=f(t,n,r);return v(o,w(o,e)?e:function(t,n){T(t,n,e)},function(t){i=t}),i},n("dojo-unit-tests")&&b.push(function(t){t.register("tests.i18n.unit",function(t){var e;e=N("{prop:1}",D,"nonsense",M),t.is({prop:1},e),t.is(void 0,e[1]),e=N("({prop:1})",D,"nonsense",M),t.is({prop:1},e),t.is(void 0,e[1]),e=N("{'prop-x':1}",D,"nonsense",M),t.is({"prop-x":1},e),t.is(void 0,e[1]),e=N("({'prop-x':1})",D,"nonsense",M),t.is({"prop-x":1},e),t.is(void 0,e[1]),e=N("define({'prop-x':1})",D,"nonsense",M),t.is(M,e),t.is({"prop-x":1},M.result),e=N("define('some/module', {'prop-x':1})",D,"nonsense",M),t.is(M,e),t.is({"prop-x":1},M.result),e=N("this is total nonsense and should throw an error",D,"nonsense",M),t.is(e instanceof Error,!0)})})}return o.mixin(u,{dynamic:!0,normalize:g,load:v,cache:d,getL10nName:p})}),define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(t,e){var n={};return t.setObject("dojo.cldr.supplemental",n),n.getFirstDayOfWeek=function(t){var e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,do:0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,in:0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0},r=n._region(t),i=e[r];return void 0===i?1:i},n._region=function(t){t=e.normalizeLocale(t);var n=t.split("-"),r=n[1];return r?4==r.length&&(r=n[2]):r={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us",in:"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de",new:"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[n[0]],r},n.getWeekend=function(t){var e={in:0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},r={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},i=n._region(t),o=e[i],a=r[i];return void 0===o&&(o=6),void 0===a&&(a=0),{start:o,end:a}},n}),define("dojo/regexp",["./_base/kernel","./_base/lang"],function(t,e){var n={};return e.setObject("dojo.regexp",n),n.escapeString=function(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(t){return e&&-1!=e.indexOf(t)?t:"\\"+t})},n.buildGroupRE=function(t,e,r){if(!(t instanceof Array))return e(t);for(var i=[],o=0;o<t.length;o++)i.push(e(t[o]));return n.group(i.join("|"),r)},n.group=function(t,e){return"("+(e?"?:":"")+t+")"},n}),define("dojo/string",["./_base/kernel","./_base/lang"],function(t,e){var n={};return e.setObject("dojo.string",n),n.rep=function(t,e){if(e<=0||!t)return"";for(var n=[];1&e&&n.push(t),e>>=1;)t+=t;return n.join("")},n.pad=function(t,e,r,i){r||(r="0");var o=String(t),a=n.rep(r,Math.ceil((e-o.length)/r.length));return i?o+a:a+o},n.substitute=function(n,r,i,o){return o=o||t.global,i=i?e.hitch(o,i):function(t){return t},n.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,n,a){var s=e.getObject(n,!1,r);return a&&(s=e.getObject(a,!1,o).call(o,s,n)),i(s,n).toString()})},n.trim=String.prototype.trim?e.trim:function(t){t=t.replace(/^\s+/,"");for(var e=t.length-1;e>=0;e--)if(/\S/.test(t.charAt(e))){t=t.substring(0,e+1);break}return t},n}),define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(t,e,n,r,i,o,a,s,l){function u(t,e,n,i){return i.replace(/([a-z])\1*/gi,function(o){var s,l,u=o.charAt(0),c=o.length,h=["abbr","wide","narrow"];switch(u){case"G":s=e[c<4?"eraAbbr":"eraNames"][t.getFullYear()<0?0:1];break;case"y":switch(s=t.getFullYear(),c){case 1:break;case 2:if(!n.fullYear){s=String(s),s=s.substr(s.length-2);break}default:l=!0}break;case"Q":case"q":s=Math.ceil((t.getMonth()+1)/3),l=!0;break;case"M":case"L":var f=t.getMonth();if(c<3)s=f+1,l=!0;else{var p=["months","L"==u?"standAlone":"format",h[c-3]].join("-");s=e[p][f]}break;case"w":;s=d._getWeekOfYear(t,0),l=!0;break;case"d":s=t.getDate(),l=!0;break;case"D":s=d._getDayOfYear(t),l=!0;break;case"e":case"c":var m=t.getDay();if(c<2){s=(m-r.getFirstDayOfWeek(n.locale)+8)%7;break}case"E":if(m=t.getDay(),c<3)s=m+1,l=!0;else{var g=["days","c"==u?"standAlone":"format",h[c-3]].join("-");s=e[g][m]}break;case"a":var y=t.getHours()<12?"am":"pm";s=n[y]||e["dayPeriods-format-wide-"+y];break;case"h":case"H":case"K":case"k":var v=t.getHours();switch(u){case"h":s=v%12||12;break;case"H":s=v;break;case"K":s=v%12;break;case"k":s=v||24}l=!0;break;case"m":s=t.getMinutes(),l=!0;break;case"s":s=t.getSeconds(),l=!0;break;case"S":s=Math.round(t.getMilliseconds()*Math.pow(10,c-3)),l=!0;break;case"v":case"z":if(s=d._getZone(t,!0,n))break;c=4;case"Z":var b=d._getZone(t,!1,n),_=[b<=0?"+":"-",a.pad(Math.floor(Math.abs(b)/60),2),a.pad(Math.abs(b)%60,2)];4==c&&(_.splice(0,0,"GMT"),_.splice(3,0,":")),s=_.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+i)}return l&&(s=a.pad(s,c)),s})}function c(t,n,r,i){var o=function(t){return t};n=n||o,r=r||o,i=i||o;var a=t.match(/(''|[^'])+/g),s="'"==t.charAt(0);return e.forEach(a,function(t,e){t?(a[e]=(s?r:n)(t.replace(/''/g,"'")),s=!s):a[e]=""}),i(a.join(""))}function h(t,e,n,r){return r=o.escapeString(r),n.strict||(r=r.replace(" a"," ?a")),r.replace(/([a-z])\1*/gi,function(r){var i,o=r.charAt(0),a=r.length,s="",l="";switch(n.strict?(a>1&&(s="0{"+(a-1)+"}"),a>2&&(l="0{"+(a-2)+"}")):(s="0?",l="0{0,2}"),o){case"y":i="\\d{2,4}";break;case"M":case"L":i=a>2?"\\S+?":"1[0-2]|"+s+"[1-9]";break;case"D":i="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+s+"[1-9][0-9]|"+l+"[1-9]";break;case"d":i="3[01]|[12]\\d|"+s+"[1-9]";break;case"w":i="[1-4][0-9]|5[0-3]|"+s+"[1-9]";break;case"E":case"e":case"c":i=".+?";break;case"h":i="1[0-2]|"+s+"[1-9]";break;case"k":i="1[01]|"+s+"\\d";break;case"H":i="1\\d|2[0-3]|"+s+"\\d";break;case"K":i="1\\d|2[0-4]|"+s+"[1-9]";break;case"m":case"s":i="[0-5]\\d";break;case"S":i="\\d{"+a+"}";break;case"a":var u=n.am||e["dayPeriods-format-wide-am"],c=n.pm||e["dayPeriods-format-wide-pm"];i=u+"|"+c,n.strict||(u!=u.toLowerCase()&&(i+="|"+u.toLowerCase()),c!=c.toLowerCase()&&(i+="|"+c.toLowerCase()),-1!=i.indexOf(".")&&(i+="|"+i.replace(/\./g,""))),i=i.replace(/\./g,"\\.");break;default:i=".*"}return t&&t.push(r),"("+i+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var d={};t.setObject(l.id.replace(/\//g,"."),d),d._getZone=function(t,e,r){return e?n.getTimezoneName(t):t.getTimezoneOffset()},d.format=function(e,n){n=n||{};var r=i.normalizeLocale(n.locale),o=n.formatLength||"short",a=d._getGregorianBundle(r),s=[],l=t.hitch(this,u,e,a,n);if("year"==n.selector)return c(a["dateFormatItem-yyyy"]||"yyyy",l);var h;return"date"!=n.selector&&(h=n.timePattern||a["timeFormat-"+o])&&s.push(c(h,l)),"time"!=n.selector&&(h=n.datePattern||a["dateFormat-"+o])&&s.push(c(h,l)),1==s.length?s[0]:a["dateTimeFormat-"+o].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(t,e){return s[e]})},d.regexp=function(t){return d._parseInfo(t).regexp},d._parseInfo=function(e){e=e||{};var n,r=i.normalizeLocale(e.locale),o=d._getGregorianBundle(r),a=e.formatLength||"short",s=e.datePattern||o["dateFormat-"+a],l=e.timePattern||o["timeFormat-"+a];n="date"==e.selector?s:"time"==e.selector?l:o["dateTimeFormat-"+a].replace(/\{(\d+)\}/g,function(t,e){return[l,s][e]});var u=[];return{regexp:c(n,t.hitch(this,h,u,o,e)),tokens:u,bundle:o}},d.parse=function(t,r){var i=/[\u200E\u200F\u202A\u202E]/g,o=d._parseInfo(r),a=o.tokens,s=o.bundle,l=new RegExp("^"+o.regexp.replace(i,"")+"$",o.strict?"":"i"),u=l.exec(t&&t.replace(i,""));if(!u)return null;var c=["abbr","wide","narrow"],h=[1970,0,1,0,0,0,0],f="",p=e.every(u,function(t,n){if(!n)return!0;var i=a[n-1],o=i.length,l=i.charAt(0);switch(l){case"y":if(2!=o&&r.strict)h[0]=t;else if(t<100){t=Number(t);var u=""+(new Date).getFullYear(),d=100*u.substring(0,2),p=Math.min(Number(u.substring(2,4))+20,99);h[0]=t<p?d+t:d-100+t}else{if(r.strict)return!1;h[0]=t}break;case"M":case"L":if(o>2){var m=s["months-"+("L"==l?"standAlone":"format")+"-"+c[o-3]].concat();if(r.strict||(t=t.replace(".","").toLowerCase(),m=e.map(m,function(t){return t.replace(".","").toLowerCase()})),-1==(t=e.indexOf(m,t)))return!1}else t--;h[1]=t;break;case"E":case"e":case"c":var g=s["days-"+("c"==l?"standAlone":"format")+"-"+c[o-3]].concat();if(r.strict||(t=t.toLowerCase(),g=e.map(g,function(t){return t.toLowerCase()})),-1==(t=e.indexOf(g,t)))return!1;break;case"D":h[1]=0;case"d":h[2]=t;break;case"a":var y=r.am||s["dayPeriods-format-wide-am"],v=r.pm||s["dayPeriods-format-wide-pm"];if(!r.strict){var b=/\./g;t=t.replace(b,"").toLowerCase(),y=y.replace(b,"").toLowerCase(),v=v.replace(b,"").toLowerCase()}if(r.strict&&t!=y&&t!=v)return!1;f=t==v?"p":t==y?"a":"";break;case"K":24==t&&(t=0);case"h":case"H":case"k":if(t>23)return!1;h[3]=t;break;case"m":h[4]=t;break;case"s":h[5]=t;break;case"S":h[6]=t}return!0}),m=+h[3];"p"===f&&m<12?h[3]=m+12:"a"===f&&12==m&&(h[3]=0);var g=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);r.strict&&g.setFullYear(h[0]);var y=a.join(""),v=-1!=y.indexOf("d"),b=-1!=y.indexOf("M");return!p||b&&g.getMonth()>h[1]||v&&g.getDate()>h[2]?null:((b&&g.getMonth()<h[1]||v&&g.getDate()<h[2])&&(g=n.add(g,"hour",1)),g)};var f=[];return d.addCustomFormats=function(t,e){f.push({pkg:t,name:e})},d._getGregorianBundle=function(n){var r={};return e.forEach(f,function(e){var o=i.getLocalization(e.pkg,e.name,n);r=t.mixin(r,o)},this),r},d.addCustomFormats(l.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),d.getNames=function(t,e,n,r){var i,o=d._getGregorianBundle(r),a=[t,n,e];if("standAlone"==n){i=o[a.join("-")],1==i[0]&&(i=void 0)}return a[1]="format",(i||o[a.join("-")]).concat()},d.isWeekend=function(t,e){var n=r.getWeekend(e),i=(t||new Date).getDay();return n.end<n.start&&(n.end+=7,i<n.start&&(i+=7)),i>=n.start&&i<=n.end},d._getDayOfYear=function(t){return n.difference(new Date(t.getFullYear(),0,1,t.getHours()),t)+1},d._getWeekOfYear=function(t,e){1==arguments.length&&(e=0);var n=new Date(t.getFullYear(),0,1).getDay(),r=(n-e+7)%7,i=Math.floor((d._getDayOfYear(t)+r-1)/7);return n==e&&i++,i},d}),define("dojo/_base/declare",["./kernel","../has","./lang"],function(t,e,n){function r(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function i(t,e){for(var n,i,o,a,s,l,u,c,h=[],d=[{cls:0,refs:[]}],f={},p=1,m=t.length,g=0;g<m;++g){for(o=t[g],o?"[object Function]"!=x.call(o)&&r("mixin #"+g+" is not a callable constructor.",e):r("mixin #"+g+" is unknown. Did you use dojo.require to pull it in?",e),i=o._meta?o._meta.bases:[o],a=0,n=i.length-1;n>=0;--n)s=i[n].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+S++),u=s.declaredClass,f.hasOwnProperty(u)||(f[u]={count:0,refs:[],cls:i[n]},++p),l=f[u],a&&a!==l&&(l.refs.push(a),++a.count),a=l;++a.count,d[0].refs.push(a)}for(;d.length;){for(a=d.pop(),h.push(a.cls),--p;c=a.refs,1==c.length;){if(!(a=c[0])||--a.count){a=0;break}h.push(a.cls),--p}if(a)for(g=0,m=c.length;g<m;++g)a=c[g],--a.count||d.push(a)}return p&&r("can't build consistent linearization",e),o=t[0],h[0]=o?o._meta&&o===h[h.length-o._meta.bases.length]?o._meta.bases.length:1:0,h}function o(t,e,n){var i,o,a,s,l,u,c,h,d,f=this._inherited=this._inherited||{};if("string"==typeof t&&(i=t,t=e,e=n),n=0,s=t.callee,i=i||s.nom,i||r("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,a=l.bases,d=f.p,i!=k){if(f.c!==s&&(d=0,u=a[0],l=u._meta,l.hidden[i]!==s)){o=l.chains,o&&"string"==typeof o[i]&&r("calling chained method with inherited: "+i,this.declaredClass);do{if(l=u._meta,c=u.prototype,l&&(c[i]===s&&c.hasOwnProperty(i)||l.hidden[i]===s))break}while(u=a[++d]);d=u?d:-1}if(u=a[++d])if(c=u.prototype,u._meta&&c.hasOwnProperty(i))n=c[i];else{h=w[i];do{if(c=u.prototype,(n=c[i])&&(u._meta?c.hasOwnProperty(i):n!==h))break}while(u=a[++d])}n=u&&n||w[i]}else{if(f.c!==s&&(d=0,(l=a[0]._meta)&&l.ctor!==s)){for(o=l.chains,o&&"manual"===o.constructor||r("calling chained constructor with inherited",this.declaredClass);(u=a[++d])&&(!(l=u._meta)||l.ctor!==s););d=u?d:-1}for(;(u=a[++d])&&(l=u._meta,!(n=l?l.ctor:u)););n=u&&n}if(f.c=n,f.p=d,n)return!0===e?n:n.apply(this,e||t)}function a(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t,e,n){var r=this.getInherited(t,e);if(r)return r.apply(this,n||e||t)}function l(t){for(var e=this.constructor._meta.bases,n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return this instanceof t}function u(t,r){for(var i in r)i!=k&&r.hasOwnProperty(i)&&(t[i]=r[i]);if(e("bug-for-in-skips-shadowed"))for(var o=n._extraNames,a=o.length;a;)(i=o[--a])!=k&&r.hasOwnProperty(i)&&(t[i]=r[i])}function c(t,r){var i,o;for(i in r)(o=r[i])===w[i]&&i in w||i==k||("[object Function]"==x.call(o)&&(o.nom=i),t[i]=o);if(e("bug-for-in-skips-shadowed"))for(var a=n._extraNames,s=a.length;s;)i=a[--s],(o=r[i])===w[i]&&i in w||i==k||("[object Function]"==x.call(o)&&(o.nom=i),t[i]=o);return t}function h(t){return b.safeMixin(this.prototype,t),this}function d(t,e){return b([this].concat(t),e||{})}function f(t,e){return function(){var n,r,i,o,a=arguments,s=a,l=a[0],u=t.length;if(!(this instanceof a.callee))return v(a);if(e&&(l&&l.preamble||this.preamble))for(o=new Array(t.length),o[0]=a,r=0;l=a[0],l&&(n=l.preamble)&&(a=n.apply(this,a)||a),n=t[r].prototype,n=n.hasOwnProperty("preamble")&&n.preamble,n&&(a=n.apply(this,a)||a),++r!=u;)o[r]=a;for(r=u-1;r>=0;--r)n=t[r],i=n._meta,(n=i?i.ctor:n)&&n.apply(this,o?o[r]:a);(n=this.postscript)&&n.apply(this,s)}}function p(t,e){return function(){var n,r=arguments,i=r,o=r[0];if(!(this instanceof r.callee))return v(r);e&&(o&&(n=o.preamble)&&(i=n.apply(this,i)||i),(n=this.preamble)&&n.apply(this,i)),t&&t.apply(this,r),(n=this.postscript)&&n.apply(this,r)}}function m(t){return function(){var e,n,r=arguments,i=0;if(!(this instanceof r.callee))return v(r);for(;e=t[i];++i)if(n=e._meta,e=n?n.ctor:e){e.apply(this,r);break}(e=this.postscript)&&e.apply(this,r)}}function g(t,e,n){return function(){var r,i,o,a=0,s=1;for(n&&(a=e.length-1,s=-1);r=e[a];a+=s)i=r._meta,(o=(i?i.hidden:r.prototype)[t])&&o.apply(this,arguments)}}function y(t){C.prototype=t.prototype;var e=new C;return C.prototype=null,e}function v(t){var e=t.callee,n=y(e);return e.apply(n,t),n}function b(t,e,s){"string"!=typeof t&&(s=e,e=t,t=""),s=s||{};var c,v,C,S,M,N,T,A=1,P=e;if("[object Array]"==x.call(e)?(N=i(e,t),C=N[0],A=N.length-C,e=N[A]):(N=[0],e?"[object Function]"==x.call(e)?(C=e._meta,N=N.concat(C?C.bases:e)):r("base class is not a callable constructor.",t):null!==e&&r("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(v=A-1;c=y(e),v;--v)C=N[v],(C._meta?u:_)(c,C.prototype),S=new Function,S.superclass=e,S.prototype=c,e=c.constructor=S;else c={};for(b.safeMixin(c,s),C=s.constructor,C!==w.constructor&&(C.nom=k,c.constructor=C),v=A-1;v;--v)(C=N[v]._meta)&&C.chains&&(T=_(T||{},C.chains));if(c["-chains-"]&&(T=_(T||{},c["-chains-"])),C=!T||!T.hasOwnProperty(k),N[0]=S=T&&"manual"===T.constructor?m(N):1==N.length?p(s.constructor,C):f(N,C),S._meta={bases:N,hidden:s,chains:T,parents:P,ctor:s.constructor},S.superclass=e&&e.prototype,S.extend=h,S.createSubclass=d,S.prototype=c,c.constructor=S,c.getInherited=a,c.isInstanceOf=l,c.inherited=D,c.__inherited=o,t&&(c.declaredClass=t,n.setObject(t,S)),T)for(M in T)c[M]&&"string"==typeof T[M]&&M!=k&&(C=c[M]=g(M,N,"after"===T[M]),C.nom=M);return S}var _=n.mixin,w=Object.prototype,x=w.toString,C=new Function,S=0,k="constructor",D=t.config.isDebug?s:o;return t.safeMixin=b.safeMixin=c,t.declare=b,b}),define("dojo/_base/window",["./kernel","./lang","../sniff"],function(t,e,n){var r={global:t.global,doc:this.document||null,body:function(e){return e=e||t.doc,e.body||e.getElementsByTagName("body")[0]},setContext:function(e,n){t.global=r.global=e,t.doc=r.doc=n},withGlobal:function(e,n,i,o){var a=t.global;try{return t.global=r.global=e,r.withDoc.call(null,e.document,n,i,o)}finally{t.global=r.global=a}},withDoc:function(e,i,o,a){var s,l,u,c=r.doc,h=n("quirks"),d=n("ie");try{return t.doc=r.doc=e,t.isQuirks=n.add("quirks","BackCompat"==t.doc.compatMode,!0,!0),n("ie")&&(u=e.parentWindow)&&u.navigator&&(s=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,l=e.documentMode,l&&5!=l&&Math.floor(s)!=l&&(s=l),t.isIE=n.add("ie",s,!0,!0)),o&&"string"==typeof i&&(i=o[i]),i.apply(o,a||[])}finally{t.doc=r.doc=c,t.isQuirks=n.add("quirks",h,!0,!0),t.isIE=n.add("ie",d,!0,!0)}}};return n("extend-dojo")&&e.mixin(t,r),r}),define("dojo/dom",["./sniff","./_base/window"],function(t,e){if(t("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}var n={};t("ie")?n.byId=function(t,n){if("string"!=typeof t)return t;var r=n||e.doc,i=t&&r.getElementById(t);if(i&&(i.attributes.id.value==t||i.id==t))return i;var o=r.all[t];o&&!o.nodeName||(o=[o]);for(var a=0;i=o[a++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==t||i.id==t)return i}:n.byId=function(t,n){return("string"==typeof t?(n||e.doc).getElementById(t):t)||null},n.isDescendant=function(t,e){try{for(t=n.byId(t),e=n.byId(e);t;){if(t==e)return!0;t=t.parentNode}}catch(t){}return!1},t.add("css-user-select",function(t,e,n){if(!n)return!1;var r=n.style,i=["Khtml","O","ms","Moz","Webkit"],o=i.length,a="userSelect";do{if(void 0!==r[a])return a}while(o--&&(a=i[o]+"UserSelect"));return!1});var r=t("css-user-select");return n.setSelectable=r?function(t,e){n.byId(t).style[r]=e?"":"none"}:function(t,e){t=n.byId(t);var r=t.getElementsByTagName("*"),i=r.length;if(e)for(t.removeAttribute("unselectable");i--;)r[i].removeAttribute("unselectable");else for(t.setAttribute("unselectable","on");i--;)r[i].setAttribute("unselectable","on")},n}),define("dojo/dom-style",["./sniff","./dom"],function(t,e){function n(e,n,r){if(n=n.toLowerCase(),t("ie")){if("auto"==r){if("height"==n)return e.offsetHeight;if("width"==n)return e.offsetWidth}if("fontweight"==n)switch(r){case 700:return"bold";case 400:default:return"normal"}}return n in c||(c[n]=h.test(n)),c[n]?o(e,r):r}var r,i={};r=t("webkit")?function(t){var e;if(1==t.nodeType){var n=t.ownerDocument.defaultView;e=n.getComputedStyle(t,null),!e&&t.style&&(t.style.display="",e=n.getComputedStyle(t,null))}return e||{}}:t("ie")&&(t("ie")<9||t("quirks"))?function(t){return 1==t.nodeType&&t.currentStyle?t.currentStyle:{}}:function(t){return 1==t.nodeType?t.ownerDocument.defaultView.getComputedStyle(t,null):{}},i.getComputedStyle=r;var o;o=t("ie")?function(t,e){if(!e)return 0;if("medium"==e)return 4;if(e.slice&&"px"==e.slice(-2))return parseFloat(e);var n=t.style,r=t.runtimeStyle,i=t.currentStyle,o=n.left,a=r.left;r.left=i.left;try{n.left=e,e=n.pixelLeft}catch(t){e=0}return n.left=o,r.left=a,e}:function(t,e){return parseFloat(e)||0},i.toPixelValue=o;var a="DXImageTransform.Microsoft.Alpha",s=function(t,e){try{return t.filters.item(a)}catch(t){return e?{}:null}},l=t("ie")<9||t("ie")<10&&t("quirks")?function(t){try{return s(t).Opacity/100}catch(t){return 1}}:function(t){return r(t).opacity},u=t("ie")<9||t("ie")<10&&t("quirks")?function(t,e){""===e&&(e=1);var n=100*e;if(1===e?(t.style.zoom="",s(t)&&(t.style.filter=t.style.filter.replace(new RegExp("\\s*progid:"+a+"\\([^\\)]+?\\)","i"),""))):(t.style.zoom=1,s(t)?s(t,1).Opacity=n:t.style.filter+=" progid:"+a+"(Opacity="+n+")",s(t,1).Enabled=!0),"tr"==t.tagName.toLowerCase())for(var r=t.firstChild;r;r=r.nextSibling)"td"==r.tagName.toLowerCase()&&u(r,e);return e}:function(t,e){return t.style.opacity=e},c={left:!0,top:!0},h=/margin|padding|width|height|max|min|offset/,d={cssFloat:1,styleFloat:1,float:1};return i.get=function(t,r){var o=e.byId(t),a=arguments.length,s="opacity"==r;if(2==a&&s)return l(o);r=d[r]?"cssFloat"in o.style?"cssFloat":"styleFloat":r;var u=i.getComputedStyle(o);return 1==a?u:n(o,r,u[r]||o.style[r])},i.set=function(t,n,r){var o=e.byId(t),a=arguments.length,s="opacity"==n;if(n=d[n]?"cssFloat"in o.style?"cssFloat":"styleFloat":n,3==a)return s?u(o,r):o.style[n]=r;for(var l in n)i.set(t,l,n[l]);return i.getComputedStyle(o)},i}),define("dojo/dom-construct",["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr"],function(t,e,n,r,i,o){function a(t,e){var n=e.parentNode;n&&n.insertBefore(t,e)}function s(t,e){var n=e.parentNode;n&&(n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling))}function l(t){if(t.canHaveChildren)try{return void(t.innerHTML="")}catch(t){}for(var e;e=t.lastChild;)u(e,t)}function u(t,e){t.firstChild&&l(t),e&&(n("ie")&&e.canHaveChildren&&"removeNode"in t?t.removeNode(!1):e.removeChild(t))}var c={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},h=/<\s*([\w\:]+)/,d={},f=0,p="__"+e._scopeName+"ToDomId";for(var m in c)if(c.hasOwnProperty(m)){var g=c[m];g.pre="option"==m?'<select multiple="multiple">':"<"+g.join("><")+">",g.post="</"+g.reverse().join("></")+">"}var y;n("ie")<=8&&(y=function(t){t.__dojo_html5_tested="yes";var e=v("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},t.body);1!==e.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(e){t.createElement(e)}),b(e)}),t.toDom=function(t,e){e=e||r.doc;var i=e[p];i||(e[p]=i=++f+"",d[i]=e.createElement("div")),n("ie")<=8&&!e.__dojo_html5_tested&&e.body&&y(e),t+="";var o,a,s,l,u=t.match(h),m=u?u[1].toLowerCase():"",g=d[i];if(u&&c[m])for(o=c[m],g.innerHTML=o.pre+t+o.post,a=o.length;a;--a)g=g.firstChild;else g.innerHTML=t;if(1==g.childNodes.length)return g.removeChild(g.firstChild);for(l=e.createDocumentFragment();s=g.firstChild;)l.appendChild(s);return l},t.place=function(e,n,r){if(n=i.byId(n),"string"==typeof e&&(e=/^\s*</.test(e)?t.toDom(e,n.ownerDocument):i.byId(e)),"number"==typeof r){var o=n.childNodes;!o.length||o.length<=r?n.appendChild(e):a(e,o[r<0?0:r])}else switch(r){case"before":a(e,n);break;case"after":s(e,n);break;case"replace":n.parentNode.replaceChild(e,n);break
;case"only":t.empty(n),n.appendChild(e);break;case"first":if(n.firstChild){a(e,n.firstChild);break}default:n.appendChild(e)}return e};var v=t.create=function(e,n,a,s){var l=r.doc;return a&&(a=i.byId(a),l=a.ownerDocument),"string"==typeof e&&(e=l.createElement(e)),n&&o.set(e,n),a&&t.place(e,a,s),e};t.empty=function(t){l(i.byId(t))};var b=t.destroy=function(t){(t=i.byId(t))&&u(t,t.parentNode)}}),define("dojo/aspect",[],function(){"use strict";function t(t,e,n,i){var o,a=t[e],s="around"==e;if(s){var l=n(function(){return a.advice(this,arguments)});o={remove:function(){l&&(l=t=n=null)},advice:function(t,e){return l?l.apply(t,e):a.advice(t,e)}}}else o={remove:function(){if(o.advice){var r=o.previous,i=o.next;i||r?(r?r.next=i:t[e]=i,i&&(i.previous=r)):delete t[e],t=n=o.advice=null}},id:r++,advice:n,receiveArguments:i};if(a&&!s)if("after"==e){for(;a.next&&(a=a.next););a.next=o,o.previous=a}else"before"==e&&(t[e]=o,o.next=a,a.previous=o);else t[e]=o;return o}function e(e){return function(i,o,a,s){var l,u=i[o];u&&u.target==i||(i[o]=l=function(){for(var t=r,e=arguments,i=l.before;i;)e=i.advice.apply(this,e)||e,i=i.next;if(l.around)var o=l.around.advice(this,e);for(var a=l.after;a&&a.id<t;){if(a.receiveArguments){var s=a.advice.apply(this,e);o=s===n?o:s}else o=a.advice.call(this,o,e);a=a.next}return o},u&&(l.around={advice:function(t,e){return u.apply(t,e)}}),l.target=i);var c=t(l||u,e,a,s);return a=null,c}}var n,r=0,i=e("after");return{before:e("before"),around:e("around"),after:i}}),define("dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(t,e,n){"use strict";function r(t,e,r,i,o){var a=e.match(/(.*):(.*)/);if(a)return e=a[2],a=a[1],s.selector(a,e).call(o,t,r);if(n("touch")&&(l.test(e)&&(r=C(r)),n("event-orientationchange")||"orientationchange"!=e||(e="resize",t=window,r=C(r))),f&&(r=f(r)),t.addEventListener){var u=e in h,c=u?h[e]:e;return t.addEventListener(c,r,u),{remove:function(){t.removeEventListener(c,r,u)}}}if(e="on"+e,y&&t.attachEvent)return y(t,e,r);throw new Error("Target must be an event emitter")}function i(){this.cancelable=!1,this.defaultPrevented=!0}function o(){this.bubbles=!1}if(n("dom")){var a=window.ScriptEngineMajorVersion;n.add("jscript",a&&a()+ScriptEngineMinorVersion()/10),n.add("event-orientationchange",n("touch")&&!n("android")),n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),n.add("event-focusin",function(t,e,n){return"onfocusin"in n}),n("touch")&&n.add("touch-can-modify-event-delegate",function(){var t=function(){};t.prototype=document.createEvent("MouseEvents");try{return(new t).target=null,!0}catch(t){return!1}})}var s=function(t,e,n,i){return"function"!=typeof t.on||"function"==typeof e||t.nodeType?s.parse(t,e,n,r,i,this):t.on(e,n)};s.pausable=function(t,e,n,r){var i,o=s(t,e,function(){if(!i)return n.apply(this,arguments)},r);return o.pause=function(){i=!0},o.resume=function(){i=!1},o},s.once=function(t,e,n,r){var i=s(t,e,function(){return i.remove(),n.apply(this,arguments)});return i},s.parse=function(t,e,n,r,i,o){if(e.call)return e.call(o,t,n);if(e instanceof Array)a=e;else if(e.indexOf(",")>-1)var a=e.split(/\s*,\s*/);if(a){for(var l,u=[],c=0;l=a[c++];)u.push(s.parse(t,l,n,r,i,o));return u.remove=function(){for(var t=0;t<u.length;t++)u[t].remove()},u}return r(t,e,n,i,o)};var l=/^touch/;s.matches=function(t,n,r,i,o){for(o=o&&o.matches?o:e.query,i=!1!==i,1!=t.nodeType&&(t=t.parentNode);!o.matches(t,n,r);)if(t==r||!1===i||!(t=t.parentNode)||1!=t.nodeType)return!1;return t},s.selector=function(t,e,n){return function(r,i){function o(e){return s.matches(e,t,r,n,a)}var a="function"==typeof t?{matches:t}:this,l=e.bubble;return l?s(r,l(o),i):s(r,e,function(t){var e=o(t.target);return e&&i.call(e,t)})}};var u=[].slice,c=s.emit=function(t,e,n){var r=u.call(arguments,2),a="on"+e;if("parentNode"in t){var s=r[0]={};for(var l in n)s[l]=n[l];s.preventDefault=i,s.stopPropagation=o,s.target=t,s.type=e,n=s}do{t[a]&&t[a].apply(t,r)}while(n&&n.bubbles&&(t=t.parentNode));return n&&n.cancelable&&n},h=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var d=function(){this.immediatelyStopped=!0,this.modified=!0},f=function(t){return function(e){if(!e.immediatelyStopped)return e.stopImmediatePropagation=d,t.apply(this,arguments)}};if(n("dom-addeventlistener"))s.emit=function(t,e,n){if(t.dispatchEvent&&document.createEvent){var r=t.ownerDocument||document,i=r.createEvent("HTMLEvents");i.initEvent(e,!!n.bubbles,!!n.cancelable);for(var o in n)o in i||(i[o]=n[o]);return t.dispatchEvent(i)&&i}return c.apply(s,arguments)};else{s._fixEvent=function(t,e){if(!t){t=(e&&(e.ownerDocument||e.document||e).parentWindow||window).event}if(!t)return t;try{p&&t.type==p.type&&t.srcElement==p.target&&(t=p)}catch(t){}if(!t.target)switch(t.target=t.srcElement,t.currentTarget=e||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=b,t.preventDefault=_),t.type){case"keypress":var n="charCode"in t?t.charCode:t.keyCode;10==n?(n=0,t.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),t.charCode=n,v(t)}return t};var p,m=function(t){this.handle=t};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var g=function(t){return function(e){e=s._fixEvent(e,this);var n=t.call(this,e);return e.modified&&(p||setTimeout(function(){p=null}),p=e),n}},y=function(e,r,i){if(i=g(i),((e.ownerDocument?e.ownerDocument.parentWindow:e.parentWindow||e.window||window)!=top||n("jscript")<5.8)&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var o=e[r];if(!o||!o.listeners){var a=o;o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),o.listeners=[],e[r]=o,o.global=this,a&&o.listeners.push(_dojoIEListeners_.push(a)-1)}var s;return o.listeners.push(s=o.global._dojoIEListeners_.push(i)-1),new m(s)}return t.after(e,r,i,!0)},v=function(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode},b=function(){this.cancelBubble=!0},_=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(n("touch"))var w=function(){},x=window.orientation,C=function(t){return function(e){var r=e.corrected;if(!r){var i=e.type;try{delete e.type}catch(t){}if(e.type){if(n("touch-can-modify-event-delegate"))w.prototype=e,r=new w;else{r={};for(var o in e)r[o]=e[o]}r.preventDefault=function(){e.preventDefault()},r.stopPropagation=function(){e.stopPropagation()}}else r=e,r.type=i;if(e.corrected=r,"resize"==i)return x==window.orientation?null:(x=window.orientation,r.type="orientationchange",t.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var a=r.changedTouches[0];for(var s in a)delete r[s],r[s]=a[s]}return t.call(this,r)}};return s}),define("dojo/Evented",["./aspect","./on"],function(t,e){"use strict";function n(){}var r=t.after;return n.prototype={on:function(t,n){return e.parse(this,t,n,function(t,e){return r(t,"on"+e,n,!0)})},emit:function(t,n){var r=[this];return r.push.apply(r,arguments),e.emit.apply(e,r)}},n}),define("dojo/topic",["./Evented"],function(t){var e=new t;return{publish:function(t,n){return e.emit.apply(e,arguments)},subscribe:function(t,n){return e.on.apply(e,arguments)}}}),define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(t,e,n,r){function i(t,e,n,r,i,o){o=o||"px";var a=t.style;isNaN(e)||(a.left=e+o),isNaN(n)||(a.top=n+o),r>=0&&(a.width=r+o),i>=0&&(a.height=i+o)}function o(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function a(t){return"border-box"==s.boxModel||"table"==t.tagName.toLowerCase()||o(t)}var s={};s.boxModel="content-box",t("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(t,e){t=n.byId(t);var i=e||r.getComputedStyle(t),o=r.toPixelValue,a=o(t,i.paddingLeft),s=o(t,i.paddingTop),l=o(t,i.paddingRight),u=o(t,i.paddingBottom);return{l:a,t:s,r:l,b:u,w:a+l,h:s+u}};var l="none";s.getBorderExtents=function(t,e){t=n.byId(t);var i=r.toPixelValue,o=e||r.getComputedStyle(t),a=o.borderLeftStyle!=l?i(t,o.borderLeftWidth):0,s=o.borderTopStyle!=l?i(t,o.borderTopWidth):0,u=o.borderRightStyle!=l?i(t,o.borderRightWidth):0,c=o.borderBottomStyle!=l?i(t,o.borderBottomWidth):0;return{l:a,t:s,r:u,b:c,w:a+u,h:s+c}},s.getPadBorderExtents=function(t,e){t=n.byId(t);var i=e||r.getComputedStyle(t),o=s.getPadExtents(t,i),a=s.getBorderExtents(t,i);return{l:o.l+a.l,t:o.t+a.t,r:o.r+a.r,b:o.b+a.b,w:o.w+a.w,h:o.h+a.h}},s.getMarginExtents=function(t,e){t=n.byId(t);var i=e||r.getComputedStyle(t),o=r.toPixelValue,a=o(t,i.marginLeft),s=o(t,i.marginTop),l=o(t,i.marginRight),u=o(t,i.marginBottom);return{l:a,t:s,r:l,b:u,w:a+l,h:s+u}},s.getMarginBox=function(e,i){e=n.byId(e);var o,a=i||r.getComputedStyle(e),u=s.getMarginExtents(e,a),c=e.offsetLeft-u.l,h=e.offsetTop-u.t,d=e.parentNode,f=r.toPixelValue;if(t("mozilla")){var p=parseFloat(a.left),m=parseFloat(a.top);isNaN(p)||isNaN(m)?d&&d.style&&(o=r.getComputedStyle(d),"visible"!=o.overflow&&(c+=o.borderLeftStyle!=l?f(e,o.borderLeftWidth):0,h+=o.borderTopStyle!=l?f(e,o.borderTopWidth):0)):(c=p,h=m)}else(t("opera")||8==t("ie")&&!t("quirks"))&&d&&(o=r.getComputedStyle(d),c-=o.borderLeftStyle!=l?f(e,o.borderLeftWidth):0,h-=o.borderTopStyle!=l?f(e,o.borderTopWidth):0);return{l:c,t:h,w:e.offsetWidth+u.w,h:e.offsetHeight+u.h}},s.getContentBox=function(e,i){e=n.byId(e);var o,a=i||r.getComputedStyle(e),l=e.clientWidth,u=s.getPadExtents(e,a),c=s.getBorderExtents(e,a);return l?(o=e.clientHeight,c.w=c.h=0):(l=e.offsetWidth,o=e.offsetHeight),t("opera")&&(u.l+=c.l,u.t+=c.t),{l:u.l,t:u.t,w:l-u.w-c.w,h:o-u.h-c.h}},s.setContentSize=function(t,e,r){t=n.byId(t);var o=e.w,l=e.h;if(a(t)){var u=s.getPadBorderExtents(t,r);o>=0&&(o+=u.w),l>=0&&(l+=u.h)}i(t,NaN,NaN,o,l)};var u={l:0,t:0,w:0,h:0};return s.setMarginBox=function(e,l,c){e=n.byId(e);var h=c||r.getComputedStyle(e),d=l.w,f=l.h,p=a(e)?u:s.getPadBorderExtents(e,h),m=s.getMarginExtents(e,h);if(t("webkit")&&o(e)){var g=e.style;d>=0&&!g.width&&(g.width="4px"),f>=0&&!g.height&&(g.height="4px")}d>=0&&(d=Math.max(d-p.w-m.w,0)),f>=0&&(f=Math.max(f-p.h-m.h,0)),i(e,l.l,l.t,d,f)},s.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(n){n=n||e.doc;var r=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in r?{x:r.pageXOffset,y:r.pageYOffset}:(r=t("quirks")?e.body(n):n.documentElement)&&{x:s.fixIeBiDiScrollLeft(r.scrollLeft||0,n),y:r.scrollTop||0}},t("ie")&&(s.getIeDocumentElementOffset=function(n){n=n||e.doc;var r=n.documentElement;if(t("ie")<8){var i=r.getBoundingClientRect(),o=i.left,a=i.top;return t("ie")<7&&(o+=r.clientLeft,a+=r.clientTop),{x:o<0?0:o,y:a<0?0:a}}return{x:0,y:0}}),s.fixIeBiDiScrollLeft=function(n,r){r=r||e.doc;var i=t("ie");if(i&&!s.isBodyLtr(r)){var o=t("quirks"),a=o?e.body(r):r.documentElement,l=e.global;return 6==i&&!o&&l.frameElement&&a.scrollHeight>a.clientHeight&&(n+=a.clientLeft),i<8||o?n+a.clientWidth-a.scrollWidth:-n}return n},s.position=function(r,i){r=n.byId(r);var o,a=e.body(r.ownerDocument);try{o=r.getBoundingClientRect()}catch(t){return{x:0,y:0,w:0,h:0}}if(o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top},t("ie")<9){var l=s.getIeDocumentElementOffset(r.ownerDocument);o.x-=l.x+(t("quirks")?a.clientLeft+a.offsetLeft:0),o.y-=l.y+(t("quirks")?a.clientTop+a.offsetTop:0)}if(i){var u=s.docScroll(r.ownerDocument);o.x+=u.x,o.y+=u.y}return o},s.getMarginSize=function(t,e){t=n.byId(t);var i=s.getMarginExtents(t,e||r.getComputedStyle(t)),o=t.getBoundingClientRect();return{w:o.right-o.left+i.w,h:o.bottom-o.top+i.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var n=e.target,r=n&&n.ownerDocument||document,i=t("quirks")?r.body:r.documentElement,o=s.getIeDocumentElementOffset(r);e.pageX=e.clientX+s.fixIeBiDiScrollLeft(i.scrollLeft||0,r)-o.x,e.pageY=e.clientY+(i.scrollTop||0)-o.y}},s}),define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(t,e,n,r){if(e._fixEvent){var i=e._fixEvent;e._fixEvent=function(t,e){return t=i(t,e),t&&r.normalizeEvent(t),t}}var o={fix:function(t,n){return e._fixEvent?e._fixEvent(t,n):t},stop:function(t){n("dom-addeventlistener")||t&&t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t=t||window.event,t.cancelBubble=!0,e._preventDefault.call(t))}};return n("extend-dojo")&&(t.fixEvent=o.fix,t.stopEvent=o.stop),o}),define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(t,e,n,r,i){function o(t,n){var i=function(i,o){return e(i,t,function(t){return n?n(t,o):r.isDescendant(t.relatedTarget,i)?void 0:o.call(this,t)})};return i.bubble=function(e){return o(t,function(t,n){var r=e(t.target),i=t.relatedTarget;if(r&&r!=(i&&1==i.nodeType&&e(i)))return n.call(r,t)})},i}n.add("dom-quirks",i.doc&&"BackCompat"==i.doc.compatMode),n.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),n.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc);var a;a=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(t,e){return t.button&e},isLeft:function(t){return 1&t.button},isMiddle:function(t){return 4&t.button},isRight:function(t){return 2&t.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(t,e){return t.button==e},isLeft:function(t){return 0==t.button},isMiddle:function(t){return 1==t.button},isRight:function(t){return 2==t.button}},t.mouseButtons=a;var s;return s=n("events-mousewheel")?"mousewheel":function(t,n){return e(t,"DOMMouseScroll",function(t){t.wheelDelta=-t.detail,n.call(this,t)})},{_eventHandler:o,enter:o("mouseover"),leave:o("mouseout"),wheel:s,isLeft:a.isLeft,isMiddle:a.isMiddle,isRight:a.isRight}}),define("dojo/_base/sniff",["./kernel","./lang","../sniff"],function(t,e,n){return n("host-browser")?(t._name="browser",e.mixin(t,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")}),n):n}),define("dojo/keys",["./_base/kernel","./sniff"],function(t,e){return t.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}}),define("dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(t,e,n,r,i,o,a,s){function l(n,i,a,l,u){if(l=s.hitch(a,l),!n||!n.addEventListener&&!n.attachEvent)return r.after(n||t.global,i,l,!0);if("string"==typeof i&&"on"==i.substring(0,2)&&(i=i.substring(2)),n||(n=t.global),!u)switch(i){case"keypress":i=c;break;case"mouseenter":i=o.enter;break;case"mouseleave":i=o.leave}return e(n,i,l,u)}function u(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode}a.add("events-keypress-typed",function(){var t={charCode:0};try{t=document.createEvent("KeyboardEvent"),(t.initKeyboardEvent||t.initKeyEvent).call(t,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==t.charCode&&!a("opera")});var c,h={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},d=a("mac")?"metaKey":"ctrlKey",f=function(t,e){var n=s.mixin({},t,e);return u(n),n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()},n};if(a("events-keypress-typed")){var p=function(t,e){try{return t.keyCode=e}catch(t){return 0}};c=function(t,n){var r=e(t,"keydown",function(t){var e=t.keyCode,r=13!=e&&32!=e&&(27!=e||!a("ie"))&&(e<48||e>90)&&(e<96||e>111)&&(e<186||e>192)&&(e<219||e>222)&&229!=e;if(r||t.ctrlKey){var i=r?0:e;if(t.ctrlKey){if(3==e||13==e)return n.call(t.currentTarget,t);i>95&&i<106?i-=48:!t.shiftKey&&i>=65&&i<=90?i+=32:i=h[i]||i}var o=f(t,{type:"keypress",faux:!0,charCode:i});n.call(t.currentTarget,o),a("ie")&&p(t,o.keyCode)}}),i=e(t,"keypress",function(t){var e=t.charCode;return e=e>=32?e:0,t=f(t,{charCode:e,faux:!0}),n.call(this,t)});return{remove:function(){r.remove(),i.remove()}}}}else c=a("opera")?function(t,n){return e(t,"keypress",function(t){var e=t.which;return 3==e&&(e=99),e=e<32&&!t.shiftKey?0:e,t.ctrlKey&&!t.shiftKey&&e>=65&&e<=90&&(e+=32),n.call(this,f(t,{charCode:e}))})}:function(t,n){return e(t,"keypress",function(t){return u(t),n.call(this,t)})};var m={_keypress:c,connect:function(t,e,n,r,i){var o=arguments,a=[],s=0;a.push("string"==typeof o[0]?null:o[s++],o[s++]);var u=o[s+1];a.push("string"==typeof u||"function"==typeof u?o[s++]:null,o[s++]);for(var c=o.length;s<c;s++)a.push(o[s]);return l.apply(this,a)},disconnect:function(t){t&&t.remove()},subscribe:function(t,e,r){return n.subscribe(t,s.hitch(e,r))},publish:function(t,e){return n.publish.apply(n,[t].concat(e))},connectPublisher:function(t,e,n){var r=function(){m.publish(t,arguments)};return n?m.connect(e,n,r):m.connect(e,r)},isCopyKey:function(t){return t[d]}};return m.unsubscribe=m.disconnect,a("extend-dojo")&&s.mixin(t,m),m}),define("dojo/dom-prop",["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(t,e,n,r,i,o,a,s){var l={},u=0,c=e._scopeName+"attrid";t.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},t.get=function(e,n){e=i.byId(e);var r=n.toLowerCase();return e[t.names[r]||n]},t.set=function(e,h,d){if(void 0===e||null==e)return e;if(e=i.byId(e),2==arguments.length&&"string"!=typeof h){for(var f in h)t.set(e,f,h[f]);return e}var p=h.toLowerCase(),m=t.names[p]||h;if("style"==m&&"string"!=typeof d)return o.set(e,d),e;if("innerHTML"==m)return n("ie")&&e.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(a.empty(e),e.appendChild(a.toDom(d,e.ownerDocument))):e[m]=d,e;if(r.isFunction(d)){var g=e[c];g||(g=u++,e[c]=g),l[g]||(l[g]={});var y=l[g][m];if(y)s.disconnect(y);else try{delete e[m]}catch(t){}return d?l[g][m]=s.connect(e,m,d):e[m]=null,e}return e[m]=d,e}}),define("dojo/dom-attr",["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(t,e,n,r,i,o){function a(t,e){var n=t.getAttributeNode&&t.getAttributeNode(e);return n&&n.specified}var s={innerHTML:1,className:1,htmlFor:e("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};t.has=function(t,e){var n=e.toLowerCase();return s[o.names[n]||e]||a(r.byId(t),l[n]||e)},t.get=function(t,e){t=r.byId(t);var i=e.toLowerCase(),u=o.names[i]||e,c=s[u],h=t[u];if(c&&void 0!==h)return h;if("href"!=u&&("boolean"==typeof h||n.isFunction(h)))return h;var d=l[i]||e;return a(t,d)?t.getAttribute(d):null},t.set=function(e,a,u){if(e=r.byId(e),2==arguments.length){for(var c in a)t.set(e,c,a[c]);return e}var h=a.toLowerCase(),d=o.names[h]||a,f=s[d];return"style"==d&&"string"!=typeof u?(i.set(e,u),e):f||"boolean"==typeof u||n.isFunction(u)?o.set(e,a,u):(e.setAttribute(l[h]||a,u),e)},t.remove=function(t,e){r.byId(t).removeAttribute(l[e.toLowerCase()]||e)},t.getNodeProp=function(t,e){t=r.byId(t);var n=e.toLowerCase(),i=o.names[n]||e;if(i in t&&"href"!=i)return t[i];var s=l[n]||e;return a(t,s)?t.getAttribute(s):null}}),define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(t,e,n){function r(t){if("string"==typeof t||t instanceof String){if(t&&!a.test(t))return s[0]=t,s;var n=t.split(a);return n.length&&!n[0]&&n.shift(),n.length&&!n[n.length-1]&&n.pop(),n}return t?e.filter(t,function(t){return t}):[]}var i,o="className",a=/\s+/,s=[""],l={};return i={contains:function(t,e){return(" "+n.byId(t)[o]+" ").indexOf(" "+e+" ")>=0},add:function(t,e){t=n.byId(t),e=r(e);var i,a=t[o];a=a?" "+a+" ":" ",i=a.length;for(var s,l=0,u=e.length;l<u;++l)(s=e[l])&&a.indexOf(" "+s+" ")<0&&(a+=s+" ");i<a.length&&(t[o]=a.substr(1,a.length-2))},remove:function(e,i){e=n.byId(e);var a;if(void 0!==i){i=r(i),a=" "+e[o]+" ";for(var s=0,l=i.length;s<l;++s)a=a.replace(" "+i[s]+" "," ");a=t.trim(a)}else a="";e[o]!=a&&(e[o]=a)},replace:function(t,e,r){t=n.byId(t),l[o]=t[o],i.remove(l,r),i.add(l,e),t[o]!==l[o]&&(t[o]=l[o])},toggle:function(t,e,o){if(t=n.byId(t),void 0===o){e=r(e);for(var a,s=0,l=e.length;s<l;++s)a=e[s],i[i.contains(t,a)?"remove":"add"](t,a)}else i[o?"add":"remove"](t,e);return o}}}),define("dojo/date/stamp",["../_base/lang","../_base/array"],function(t,e){var n={};return t.setObject("dojo.date.stamp",n),n.fromISOString=function(t,r){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var i=n._isoRegExp.exec(t),o=null;if(i){i.shift(),i[1]&&i[1]--,i[6]&&(i[6]*=1e3),r&&(r=new Date(r),e.forEach(e.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(t){return r["get"+t]()}),function(t,e){i[e]=i[e]||t})),o=new Date(i[0]||1970,i[1]||0,i[2]||1,i[3]||0,i[4]||0,i[5]||0,i[6]||0),i[0]<100&&o.setFullYear(i[0]||1970);var a=0,s=i[7]&&i[7].charAt(0);"Z"!=s&&(a=60*(i[8]||0)+(Number(i[9])||0),"-"!=s&&(a*=-1)),s&&(a-=o.getTimezoneOffset()),a&&o.setTime(o.getTime()+6e4*a)}return o},n.toISOString=function(t,e){var n=function(t){return t<10?"0"+t:t};e=e||{};var r=[],i=e.zulu?"getUTC":"get",o="";if("time"!=e.selector){var a=t[i+"FullYear"]();o=["0000".substr((a+"").length)+a,n(t[i+"Month"]()+1),n(t[i+"Date"]())].join("-")}if(r.push(o),"date"!=e.selector){var s=[n(t[i+"Hours"]()),n(t[i+"Minutes"]()),n(t[i+"Seconds"]())].join(":"),l=t[i+"Milliseconds"]();if(e.milliseconds&&(s+="."+(l<100?"0":"")+n(l)),e.zulu)s+="Z";else if("time"!=e.selector){var u=t.getTimezoneOffset(),c=Math.abs(u);s+=(u>0?"-":"+")+n(Math.floor(c/60))+":"+n(c%60)}r.push(s)}return r.join("T")},n}),define("dojo/ready",["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(t,e,n,r,i){var o=0,a=[],s=0,l=function(){o=1,t._postLoad=t.config.afterOnLoad=!0,u()},u=function(){if(!s){for(s=1;o&&(!r||0==r._Q.length)&&(!n.idle||n.idle())&&a.length;){var t=a.shift();try{t()}catch(t){if(t.info=t.message,!n.signal)throw t;n.signal("error",t)}}s=0}};n.on&&n.on("idle",u),r&&(r._onQEmpty=u);var c=t.ready=t.addOnLoad=function(e,n,r){var o=i._toArray(arguments);"number"!=typeof e?(r=n,n=e,e=1e3):o.shift(),r=r?i.hitch.apply(t,o):function(){n()},r.priority=e;for(var s=0;s<a.length&&e>=a[s].priority;s++);a.splice(s,0,r),u()};if(e.add("dojo-config-addOnLoad",1),e("dojo-config-addOnLoad")){var h=t.config.addOnLoad;h&&c[i.isArray(h)?"apply":"call"](t,h)}return e("dojo-sync-loader")&&t.config.parseOnLoad&&!t.isAsync&&c(99,function(){t.parser||(t.deprecated("Add explicit require(['dojo/parser']);","","2.0"),n(["dojo/parser"]))}),r?r(l):l(),c}),define("dojo/errors/create",["../_base/lang"],function(t){return function(e,n,r,i){r=r||Error;var o=function(t){if(r===Error){Error.captureStackTrace&&Error.captureStackTrace(this,o);var e,i=Error.call(this,t);for(e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);this.message=t,this.stack=i.stack}else r.apply(this,arguments);n&&n.apply(this,arguments)};return o.prototype=t.delegate(r.prototype,i),o.prototype.name=e,o.prototype.constructor=o,o}}),define("dojo/errors/CancelError",["./create"],function(t){return t("CancelError",null,null,{dojoType:"cancel"})}),define("dojo/promise/Promise",["../_base/lang"],function(t){"use strict";function e(){throw new TypeError("abstract")}return t.extend(function(){},{then:function(t,n,r){e()},cancel:function(t,n){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(t){return this.then(t,t)},otherwise:function(t){return this.then(null,t)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})}),define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(t,e,n,r,i){"use strict";var o="This deferred has already been fulfilled.",a=Object.freeze||function(){},s=function(e,n,r,i,o){t("config-deferredInstrumentation")&&2===n&&h.instrumentRejected&&0===e.length&&h.instrumentRejected(r,!1,i,o);for(var a=0;a<e.length;a++)l(e[a],n,r,i)},l=function(e,n,r,i){var o=e[n],a=e.deferred;if(o)try{var s=o(r);if(0===n)void 0!==s&&c(a,n,s);else{if(s&&"function"==typeof s.then)return e.cancel=s.cancel,void s.then(u(a,1),u(a,2),u(a,0));c(a,1,s)}}catch(t){c(a,2,t)}else c(a,n,r);t("config-deferredInstrumentation")&&2===n&&h.instrumentRejected&&h.instrumentRejected(r,!!o,i,a.promise)},u=function(t,e){return function(n){c(t,e,n)}},c=function(t,e,n){if(!t.isCanceled())switch(e){case 0:t.progress(n);break;case 1:t.resolve(n);break;case 2:t.reject(n)}},h=function(e){var i,u,c,d=this.promise=new r,f=this,p=!1,m=[];t("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(f,h),Error.captureStackTrace(d,h)),this.isResolved=d.isResolved=function(){return 1===i},this.isRejected=d.isRejected=function(){return 2===i},this.isFulfilled=d.isFulfilled=function(){return!!i},this.isCanceled=d.isCanceled=function(){return p},this.progress=function(t,e){if(i){if(!0===e)throw new Error(o);return d}return s(m,0,t,null,f),d},this.resolve=function(t,e){if(i){if(!0===e)throw new Error(o);return d}return s(m,i=1,u=t,null,f),m=null,d};var g=this.reject=function(e,n){if(i){if(!0===n)throw new Error(o);return d}return t("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(c={},g),s(m,i=2,u=e,c,f),m=null,d};this.then=d.then=function(t,e,n){var r=[n,t,e];return r.cancel=d.cancel,r.deferred=new h(function(t){return r.cancel&&r.cancel(t)}),i&&!m?l(r,i,u,c):m.push(r),r.deferred.promise},this.cancel=d.cancel=function(t,r){if(i){if(!0===r)throw new Error(o)}else{if(e){var a=e(t);t=void 0===a?t:a}if(p=!0,!i)return void 0===t&&(t=new n),g(t),t;if(2===i&&u===t)return t}},a(d)};return h.prototype.toString=function(){return"[object Deferred]"},i&&i(h),h}),define("dojo/when",["./Deferred","./promise/Promise"],function(t,e){"use strict";return function(n,r,i,o){var a=n&&"function"==typeof n.then,s=a&&n instanceof e;if(!a)return arguments.length>1?r?r(n):n:(new t).resolve(n);if(!s){var l=new t(n.cancel);n.then(l.resolve,l.reject,l.progress),n=l.promise}return r||i||o?n.then(r,i,o):n}}),define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(t,e,n,r){return t("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;return e[t]?e[t]:e[t]={s:"_"+t+"Setter",g:"_"+t+"Getter"}},postscript:function(t){t&&this.set(t)},_get:function(t,e){return"function"==typeof this[e.g]?this[e.g]():this[t]},get:function(t){return this._get(t,this._getAttrNames(t))},set:function(t,e){if("object"==typeof t){for(var n in t)t.hasOwnProperty(n)&&"_watchCallbacks"!=n&&this.set(n,t[n]);return this}var i,o=this._getAttrNames(t),a=this._get(t,o),s=this[o.s];if("function"==typeof s?i=s.apply(this,Array.prototype.slice.call(arguments,1)):this[t]=e,this._watchCallbacks){var l=this;r(i,function(){l._watchCallbacks(t,a,e)})}return this},_changeAttrValue:function(t,e){var n=this.get(t);return this[t]=e,this._watchCallbacks&&this._watchCallbacks(t,n,e),this},watch:function(t,e){var r=this._watchCallbacks;if(!r){var i=this;r=this._watchCallbacks=function(t,e,n,o){var a=function(r){if(r){r=r.slice();for(var o=0,a=r.length;o<a;o++)r[o].call(i,t,e,n)}};a(r["_"+t]),o||a(r["*"])}}e||"function"!=typeof t?t="_"+t:(e=t,t="*");var o=r[t];"object"!=typeof o&&(o=r[t]=[]),o.push(e);var a={};return a.unwatch=a.remove=function(){var t=n.indexOf(o,e);t>-1&&o.splice(t,1)},a}})}),define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(t,e,n){return n("dijit.Destroyable",null,{destroy:function(t){this._destroyed=!0},own:function(){return t.forEach(arguments,function(t){var n="destroyRecursive"in t?"destroyRecursive":"destroy"in t?"destroy":"remove",r=e.before(this,"destroy",function(e){t[n](e)}),i=e.after(t,n,function(){r.remove(),i.remove()},!0)},this),arguments}})}),define("dijit/main",["dojo/_base/kernel"],function(t){return t.dijit}),define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(t,e,n,r){var i={},o={},a={length:0,add:function(t){if(o[t.id])throw new Error("Tried to register widget with id=="+t.id+" but that id is already registered");o[t.id]=t,this.length++},remove:function(t){o[t]&&(delete o[t],this.length--)},byId:function(t){return"string"==typeof t?o[t]:t},byNode:function(t){return o[t.getAttribute("widgetId")]},toArray:function(){var t=[];for(var e in o)t.push(o[e]);return t},getUniqueId:function(t){var e;do{e=t+"_"+(t in i?++i[t]:i[t]=0)}while(o[e]);return"dijit"==r._scopeName?e:r._scopeName+"_"+e},findWidgets:function(t,e){function n(t){for(var i=t.firstChild;i;i=i.nextSibling)if(1==i.nodeType){var a=i.getAttribute("widgetId");if(a){var s=o[a];s&&r.push(s)}else i!==e&&n(i)}}var r=[];return n(t),r},_destroyAll:function(){r._curFocus=null,r._prevFocus=null,r._activeStack=[],t.forEach(a.findWidgets(n.body()),function(t){t._destroyed||(t.destroyRecursive?t.destroyRecursive():t.destroy&&t.destroy())})},getEnclosingWidget:function(t){for(;t;){var e=1==t.nodeType&&t.getAttribute("widgetId");if(e)return o[e];t=t.parentNode}return null},_hash:o};return r.registry=a,a}),define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","dojo/has!dojo-bidi?./_BidiMixin","./registry"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,m,g,y,v,b,_,w,x){function C(t){var e={};for(var n in t)e[n.toLowerCase()]=!0;return e}function S(t){return function(e){s[e?"set":"remove"](this.domNode,t,e),this._set(t,e)}}function k(t,e){return t===e||t!==t&&e!==e}d.add("dijit-legacy-requires",!f.isAsync),d.add("dojo-bidi",!1),d("dijit-legacy-requires")&&g(0,function(){t(["dijit/_base/manager"])});var D={},M=o("dijit._WidgetBase",[y,_],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:S("lang"),dir:"",_setDirAttr:S("dir"),class:"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(t){this._set("ownerDocument",t)},attributeMap:{},_blankGif:r.blankGif||t.toUrl("dojo/resources/blank.gif"),_introspect:function(){var t=this.constructor;if(!t._setterAttrs){var e=t.prototype,n=t._setterAttrs=[],r=t._onMap={};for(var i in e.attributeMap)n.push(i);for(i in e)/^on/.test(i)&&(r[i.substring(2).toLowerCase()]=i),/^_set[A-Z](.*)Attr$/.test(i)&&(i=i.charAt(4).toLowerCase()+i.substr(5,i.length-9),
e.attributeMap&&i in e.attributeMap||n.push(i))}},postscript:function(t,e){this.create(t,e)},create:function(t,e){this._introspect(),this.srcNodeRef=a.byId(e),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),t&&(this.params=t,p.mixin(this,t)),this.postMixInProperties(),this.id||(this.id=x.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=b.body(this.ownerDocument),x.add(this),this.buildRendering();var n;if(this.domNode){this._applyAttributes();var r=this.srcNodeRef;r&&r.parentNode&&this.domNode!==r&&(r.parentNode.replaceChild(this.domNode,r),n=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),n&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var t={};for(var n in this.params||{})t[n]=this._get(n);e.forEach(this.constructor._setterAttrs,function(e){if(!(e in t)){var n=this._get(e);n&&this.set(e,n)}},this);for(n in t)this.set(n,t[n])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var t=this.baseClass.split(" ");this.isLeftToRight()||(t=t.concat(e.map(t,function(t){return t+"Rtl"}))),l.add(this.domNode,t)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,e.forEach(this.getChildren(),function(t){t._started||t._destroyed||!p.isFunction(t.startup)||(t.startup(),t._started=!0)}))},destroyRecursive:function(t){this._beingDestroyed=!0,this.destroyDescendants(t),this.destroy(t)},destroy:function(t){function n(e){e.destroyRecursive?e.destroyRecursive(t):e.destroy&&e.destroy(t)}this._beingDestroyed=!0,this.uninitialize(),e.forEach(this._connects,p.hitch(this,"disconnect")),e.forEach(this._supportingWidgets,n),this.domNode&&e.forEach(x.findWidgets(this.domNode,this.containerNode),n),this.destroyRendering(t),x.remove(this.id),this._destroyed=!0},destroyRendering:function(t){this.bgIframe&&(this.bgIframe.destroy(t),delete this.bgIframe),this.domNode&&(t?s.remove(this.domNode,"widgetId"):u.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(t||u.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(t){e.forEach(this.getChildren(),function(e){e.destroyRecursive&&e.destroyRecursive(t)})},uninitialize:function(){return!1},_setStyleAttr:function(t){var e=this.domNode;p.isObject(t)?h.set(e,t):e.style.cssText?e.style.cssText+="; "+t:e.style.cssText=t,this._set("style",t)},_attrToDom:function(t,n,r){r=arguments.length>=3?r:this.attributeMap[t],e.forEach(p.isArray(r)?r:[r],function(e){var r=this[e.node||e||"domNode"];switch(e.type||"attribute"){case"attribute":p.isFunction(n)&&(n=p.hitch(this,n));var i=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(t)?t.toLowerCase():t;r.tagName?s.set(r,i,n):r.set(i,n);break;case"innerText":r.innerHTML="",r.appendChild(this.ownerDocument.createTextNode(n));break;case"innerHTML":r.innerHTML=n;break;case"class":l.replace(r,n,this[t])}},this)},get:function(t){var e=this._getAttrNames(t);return this[e.g]?this[e.g]():this._get(t)},set:function(t,e){if("object"==typeof t){for(var n in t)this.set(n,t[n]);return this}var r=this._getAttrNames(t),i=this[r.s];if(p.isFunction(i))var o=i.apply(this,Array.prototype.slice.call(arguments,1));else{var a=this.focusNode&&!p.isFunction(this.focusNode)?"focusNode":"domNode",s=this[a]&&this[a].tagName,l=s&&(D[s]||(D[s]=C(this[a]))),u=t in this.attributeMap?this.attributeMap[t]:r.s in this?this[r.s]:l&&r.l in l&&"function"!=typeof e||/^aria-|^data-|^role$/.test(t)?a:null;null!=u&&this._attrToDom(t,e,u),this._set(t,e)}return o||this},_attrPairNames:{},_getAttrNames:function(t){var e=this._attrPairNames;if(e[t])return e[t];var n=t.replace(/^[a-z]|-[a-zA-Z]/g,function(t){return t.charAt(t.length-1).toUpperCase()});return e[t]={n:t+"Node",s:"_set"+n+"Attr",g:"_get"+n+"Attr",l:n.toLowerCase()}},_set:function(t,e){var n=this[t];this[t]=e,this._created&&!k(n,e)&&(this._watchCallbacks&&this._watchCallbacks(t,n,e),this.emit("attrmodified-"+t,{detail:{prevValue:n,newValue:e}}))},_get:function(t){return this[t]},emit:function(t,e,n){e=e||{},void 0===e.bubbles&&(e.bubbles=!0),void 0===e.cancelable&&(e.cancelable=!0),e.detail||(e.detail={}),e.detail.widget=this;var r,i=this["on"+t];return i&&(r=i.apply(this,n||[e])),this._started&&!this._beingDestroyed&&m.emit(this.domNode,t.toLowerCase(),e),r},on:function(t,e){var r=this._onMap(t);return r?n.after(this,r,e,!0):this.own(m(this.domNode,t,e))[0]},_onMap:function(t){var e=this.constructor,n=e._onMap;if(!n){n=e._onMap={};for(var r in e.prototype)/^on/.test(r)&&(n[r.replace(/^on/,"").toLowerCase()]=r)}return n["string"==typeof t&&t.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?x.findWidgets(this.containerNode):[]},getParent:function(){return x.getEnclosingWidget(this.domNode.parentNode)},connect:function(t,e,n){return this.own(i.connect(t,e,this,n))[0]},disconnect:function(t){t.remove()},subscribe:function(t,e){return this.own(v.subscribe(t,p.hitch(this,e)))[0]},unsubscribe:function(t){t.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:c.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=h.get(this.domNode,"display")},placeAt:function(t,e){var n=!t.tagName&&x.byId(t);if(!n||!n.addChild||e&&"number"!=typeof e){var r=n?n.containerNode&&!/after|before|replace/.test(e||"")?n.containerNode:n.domNode:a.byId(t,this.ownerDocument);u.place(this.domNode,r,e),!this._started&&(this.getParent()||{})._started&&this.startup()}else n.addChild(this,e);return this},defer:function(t,e){var n=setTimeout(p.hitch(this,function(){n&&(n=null,this._destroyed||p.hitch(this,t)())}),e||0);return{remove:function(){return n&&(clearTimeout(n),n=null),null}}}});return d("dojo-bidi")&&M.extend(w),M}),define("dojo/text",["module"],function(t){"use strict";var e,n,r,i,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),h=u&&location.hostname,d=u&&(location.port||void 0),f={},p=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(s,"");var e=t.match(l);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=a[e];try{t=new ActiveXObject(n)}catch(t){}if(t){a=[n];break}}return t},parseName:function(t){var e,n,r,i=!1,o=t.indexOf("."),a=0===t.indexOf("./")||0===t.indexOf("../");return-1!==o&&(!a||o>1)?(e=t.substring(0,o),n=t.substring(o+1,t.length)):e=t,r=n||e,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:e=r),{moduleName:e,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,r,i){var o,a,s,l=e.xdRegExp.exec(t);return!l||(o=l[2],a=l[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==r.toLowerCase()||(s||a)&&s!==i))},finishLoad:function(t,n,r,i){r=n?e.strip(r):r,p.isBuild&&(f[t]=r),i(r)},load:function(t,n,r,i){if(i.isBuild&&!i.inlineText)return void r();p.isBuild=i.isBuild;var o=e.parseName(t),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),l=p.useXhr||e.useXhr;if(0===s.indexOf("empty:"))return void r();!u||l(s,c,h,d)?e.get(s,function(n){e.finishLoad(t,o.strip,n,r)},function(t){r.error&&r.error(t)}):n([a],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,r)})},write:function(t,n,r,i){if(f.hasOwnProperty(n)){var o=e.jsEscape(f[n]);r.asModule(t+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,n,r,i,o){var a=e.parseName(n),s=a.ext?"."+a.ext:"",l=a.moduleName+s,u=r.toUrl(a.moduleName+s)+".js";e.load(l,r,function(n){var r=function(t){return i(u,t)};r.asModule=function(t,e){return i.asModule(t,u,e)},e.write(t,l,r,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),e.get=function(t,e,r){try{var i=n.readFileSync(t,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),e(i)}catch(t){r(t)}}):"xhr"===p.env||!p.env&&e.createXhr()?e.get=function(t,n,r,i){var o,a=e.createXhr();if(a.open("GET",t,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(a,t),a.onreadystatechange=function(e){var i,o;4===a.readyState&&(i=a.status,i>399&&i<600?(o=new Error(t+" HTTP status: "+i),o.xhr=a,r(o)):n(a.responseText),p.onXhrComplete&&p.onXhrComplete(a,t))},a.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,r,i=new java.io.File(t),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(o),n.append(r);s=String(n.toString())}finally{a.close()}e(s)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,e.get=function(t,e){var n,a,s,l={};o&&(t=t.replace(/\//g,"\\")),s=new FileUtils.File(t);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),a.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),e(l.value)}catch(t){throw new Error((s&&s.path||"")+": "+t)}}),e}),define("dojo/cache",["./_base/kernel","./text"],function(t){return t.cache}),define("dojo/domReady",["./has"],function(t){function e(t){u.push(t),l&&n()}function n(){if(!r){for(r=!0;u.length;)try{u.shift()(o)}catch(t){console.log("Error on domReady callback: "+t)}r=!1,e._onQEmpty()}}var r,i=this,o=document,a={loaded:1,complete:1},s="string"!=typeof o.readyState,l=!!a[o.readyState],u=[];if(e.load=function(t,n,r){e(r)},e._Q=u,e._onQEmpty=function(){},s&&(o.readyState="loading"),!l){var c=[],h=function(t){t=t||i.event,l||"readystatechange"==t.type&&!a[o.readyState]||(s&&(o.readyState="complete"),l=1,n())},d=function(t,e){t.addEventListener(e,h,!1),u.push(function(){t.removeEventListener(e,h,!1)})};if(!t("dom-addeventlistener")){d=function(t,e){e="on"+e,t.attachEvent(e,h),u.push(function(){t.detachEvent(e,h)})};var f=o.createElement("div");try{f.doScroll&&null===i.frameElement&&c.push(function(){try{return f.doScroll("left"),1}catch(t){}})}catch(t){}}if(d(o,"DOMContentLoaded"),d(i,"load"),"onreadystatechange"in o?d(o,"readystatechange"):s||c.push(function(){return a[o.readyState]}),c.length){var p=function(){if(!l){for(var t=c.length;t--;)if(c[t]())return void h("poller");setTimeout(p,30)}};p()}}return e}),define("dojo/touch",["./_base/kernel","./aspect","./dom","./dom-class","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(t,e,n,r,i,o,a,s,l,u){function c(t,e,n){return k&&n?function(t,e){return o(t,n,e)}:C?function(n,r){var i=o(n,e,r),a=o(n,t,function(t){(!w||(new Date).getTime()>w+1e3)&&r.call(this,t)});return{remove:function(){i.remove(),a.remove()}}}:function(e,n){return o(e,t,n)}}function h(t){do{if(void 0!==t.dojoClick)return t.dojoClick}while(t=t.parentNode)}function d(t,e,i){function a(t){u.doc.addEventListener(t,function(e){e._dojo_click||!((new Date).getTime()<=_+1e3)||"INPUT"==e.target.tagName&&r.contains(e.target,"dijitOffScreen")||(e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),"click"!=t||"INPUT"==e.target.tagName&&"radio"!=e.target.type&&"checkbox"!=e.target.type||"TEXTAREA"==e.target.tagName||"AUDIO"==e.target.tagName||"VIDEO"==e.target.tagName||e.preventDefault())},!0)}(p=!t.target.disabled&&h(t.target))&&(m=t.target,g=t.touches?t.touches[0].pageX:t.clientX,y=t.touches?t.touches[0].pageY:t.clientY,v=("object"==typeof p?p.x:"number"==typeof p?p:0)||4,b=("object"==typeof p?p.y:"number"==typeof p?p:0)||4,f||(f=!0,u.doc.addEventListener(e,function(t){p=p&&t.target==m&&Math.abs((t.touches?t.touches[0].pageX:t.clientX)-g)<=v&&Math.abs((t.touches?t.touches[0].pageY:t.clientY)-y)<=b},!0),u.doc.addEventListener(i,function(t){if(p){_=(new Date).getTime();var e=t.target;"LABEL"===e.tagName&&(e=n.byId(e.getAttribute("for"))||e),setTimeout(function(){o.emit(e,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),a("click"),a("mousedown"),a("mouseup")))}var f,p,m,g,y,v,b,_,w,x,C=a("touch"),S=a("ios")<5,k=navigator.pointerEnabled||navigator.msPointerEnabled,D=function(){var t={};for(var e in{down:1,move:1,up:1,cancel:1,over:1,out:1})t[e]=navigator.pointerEnabled?"pointer"+e:"MSPointer"+e.charAt(0).toUpperCase()+e.slice(1);return t}();C&&l(k?function(){u.doc.addEventListener(D.down,function(t){d(t,D.move,D.up)},!0)}:function(){function t(t){var e=i.delegate(t,{bubbles:!0});return a("ios")>=6&&(e.touches=t.touches,e.altKey=t.altKey,e.changedTouches=t.changedTouches,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.targetTouches=t.targetTouches),e}x=u.body(),u.doc.addEventListener("touchstart",function(t){w=(new Date).getTime();var e=x;x=t.target,o.emit(e,"dojotouchout",{relatedTarget:x,bubbles:!0}),o.emit(x,"dojotouchover",{relatedTarget:e,bubbles:!0}),d(t,"touchmove","touchend")},!0),o(u.doc,"touchmove",function(e){w=(new Date).getTime();var n=u.doc.elementFromPoint(e.pageX-(S?0:u.global.pageXOffset),e.pageY-(S?0:u.global.pageYOffset));n&&(x!==n&&(o.emit(x,"dojotouchout",{relatedTarget:n,bubbles:!0}),o.emit(n,"dojotouchover",{relatedTarget:x,bubbles:!0}),x=n),o.emit(n,"dojotouchmove",t(e))||e.preventDefault())}),o(u.doc,"touchend",function(e){w=(new Date).getTime();var n=u.doc.elementFromPoint(e.pageX-(S?0:u.global.pageXOffset),e.pageY-(S?0:u.global.pageYOffset))||u.body();o.emit(n,"dojotouchend",t(e))})});var M={press:c("mousedown","touchstart",D.down),move:c("mousemove","dojotouchmove",D.move),release:c("mouseup","dojotouchend",D.up),cancel:c(s.leave,"touchcancel",C?D.cancel:null),over:c("mouseover","dojotouchover",D.over),out:c("mouseout","dojotouchout",D.out),enter:s._eventHandler(c("mouseover","dojotouchover",D.over)),leave:s._eventHandler(c("mouseout","dojotouchout",D.out))};return a("extend-dojo")&&(t.touch=M),M}),define("dijit/_AttachMixin",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(t,e,n,r,i,o,a,s,l){var u,c=i.delegate(s,{mouseenter:o.enter,mouseleave:o.leave,keypress:n._keypress}),h=r("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){this.inherited(arguments),this._attachTemplateNodes(this.domNode),this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(t){for(var e=t;;)if(1==e.nodeType&&(this._processTemplateNode(e,function(t,e){return t.getAttribute(e)},this._attach)||this.searchContainerNode)&&e.firstChild)e=e.firstChild;else{if(e==t)return;for(;!e.nextSibling;)if((e=e.parentNode)==t)return;e=e.nextSibling}},_processTemplateNode:function(t,e,n){var r=!0,o=this.attachScope||this,a=e(t,"dojoAttachPoint")||e(t,"data-dojo-attach-point");if(a)for(var s,l=a.split(/\s*,\s*/);s=l.shift();)i.isArray(o[s])?o[s].push(t):o[s]=t,r="containerNode"!=s,this._attachPoints.push(s);var u=e(t,"dojoAttachEvent")||e(t,"data-dojo-attach-event");if(u)for(var c,h=u.split(/\s*,\s*/),d=i.trim;c=h.shift();)if(c){var f=null;if(-1!=c.indexOf(":")){var p=c.split(":");c=d(p[0]),f=d(p[1])}else c=d(c);f||(f=c),this._attachEvents.push(n(t,c,i.hitch(o,f)))}return r},_attach:function(e,n,r){return n=n.replace(/^on/,"").toLowerCase(),n="dijitclick"==n?u||(u=t("./a11yclick")):c[n]||n,a(e,n,r)},_detachTemplateNodes:function(){var t=this.attachScope||this;e.forEach(this._attachPoints,function(e){delete t[e]}),this._attachPoints=[],e.forEach(this._attachEvents,function(t){t.remove()}),this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes(),this.inherited(arguments)}});return i.extend(l,{dojoAttachEvent:"",dojoAttachPoint:""}),h}),define("dijit/_TemplatedMixin",["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(t,e,n,r,i,o,a,s){var l=e("dijit._TemplatedMixin",s,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(t){var e=this.declaredClass,n=this;return a.substitute(t,this,function(t,i){if("!"==i.charAt(0)&&(t=r.getObject(i.substr(1),!1,n)),void 0===t)throw new Error(e+" template:"+i);return null==t?"":"!"==i.charAt(0)?t:t.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=t(this.templatePath,{sanitize:!0}));var e,i=l.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(r.isString(i)){if(e=n.toDom(this._stringRepl(i),this.ownerDocument),1!=e.nodeType)throw new Error("Invalid template: "+i)}else e=i.cloneNode(!0);this.domNode=e}this.inherited(arguments),this._rendered||this._fillContent(this.srcNodeRef),this._rendered=!0},_fillContent:function(t){var e=this.containerNode;if(t&&e)for(;t.hasChildNodes();)e.appendChild(t.firstChild)}});return l._templateCache={},l.getCachedTemplate=function(t,e,r){var i=l._templateCache,o=t,s=i[o];if(s){try{if(!s.ownerDocument||s.ownerDocument==(r||document))return s}catch(t){}n.destroy(s)}if(t=a.trim(t),e||t.match(/\$\{([^\}]+)\}/g))return i[o]=t;var u=n.toDom(t,r);if(1!=u.nodeType)throw new Error("Invalid template: "+t);return i[o]=u},o("ie")&&i(window,"unload",function(){var t=l._templateCache;for(var e in t){var r=t[e];"object"==typeof r&&n.destroy(r),delete t[e]}}),l}),define("dojo/text!dijit/templates/Calendar.html",[],function(){return'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"></span>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="ondijitclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n'}),define("dijit/a11yclick",["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(t,e,n,r){function i(e){if((e.keyCode===t.ENTER||e.keyCode===t.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName))for(var n=e.target;n;n=n.parentNode)if(n.dojoClick)return!0}var o;n(document,"keydown",function(t){i(t)?(o=t.target,t.preventDefault()):o=null}),n(document,"keyup",function(t){i(t)&&t.target==o&&(o=null,n.emit(t.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,altKey:t.altKey,_origType:t.type}))});var a=function(t,e){return t.dojoClick=!0,n(t,"click",e)};return a.click=a,a.press=function(i,o){var a=n(i,r.press,function(t){("mousedown"!=t.type||e.isLeft(t))&&o(t)}),s=n(i,"keydown",function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||o(e)});return{remove:function(){a.remove(),s.remove()}}},a.release=function(i,o){var a=n(i,r.release,function(t){("mouseup"!=t.type||e.isLeft(t))&&o(t)}),s=n(i,"keyup",function(e){e.keyCode!==t.ENTER&&e.keyCode!==t.SPACE||o(e)});return{remove:function(){a.remove(),s.remove()}}},a.move=r.move,a}),define("dojo/hccss",["require","./_base/config","./dom-class","./dom-style","./has","./domReady","./_base/window"],function(t,e,n,r,i,o,a){return i.add("highcontrast",function(){var n=a.doc.createElement("div");n.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(e.blankGif||t.toUrl("./resources/blank.gif"))+");",a.body().appendChild(n);var o=r.getComputedStyle(n),s=o.backgroundImage,l=o.borderTopColor==o.borderRightColor||s&&("none"==s||"url(invalid-url:)"==s);return i("ie")<=8?n.outerHTML="":a.body().removeChild(n),l}),o(function(){i("highcontrast")&&n.add(a.body(),"dj_a11y")}),i}),define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(t,e,n,r){return n(function(){e("highcontrast")&&t.add(r.body(),"dijit_a11y")}),e}),define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p){var m=e("dijit.CalendarLite",[d,f],{templateString:p,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(t){return t&&!isNaN(t)&&"object"==typeof t&&t.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var t=this._get("value");if(t&&!isNaN(t)){var e=new this.dateClassObj(t);return e.setHours(0,0,0,0),e.getDate()<t.getDate()&&(e=this.dateModule.add(e,"hour",1)),e}return null},_setValueAttr:function(t,e){"string"==typeof t&&(t=o.fromISOString(t)),t=this._patchDate(t),this._isValidDate(t)&&!this.isDisabledDate(t,this.lang)?(this._set("value",t),this.set("currentFocus",t),this._markSelectedDates([t]),this._created&&(e||void 0===e)&&this.onChange(this.get("value"))):(this._set("value",null),this._markSelectedDates([]))},_patchDate:function(t){return t&&(t=new this.dateClassObj(t),t.setHours(1,0,0,0)),t},_setText:function(t,e){for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(t.ownerDocument.createTextNode(e))},_populateGrid:function(){var e=new this.dateClassObj(this.currentFocus);e.setDate(1);var r=e.getDay(),i=this.dateModule.getDaysInMonth(e),o=this.dateModule.getDaysInMonth(this.dateModule.add(e,"month",-1)),a=new this.dateClassObj,s=n.getFirstDayOfWeek(this.lang);if(s>r&&(s-=7),!this.summary){var l=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,e);this.gridNode.setAttribute("summary",l[e.getMonth()])}this._date2cell={},t.forEach(this.dateCells,function(t,n){var l,u=n+s,c=new this.dateClassObj(e),h="dijitCalendar",d=0;u<r?(l=o-r+u+1,d=-1,h+="Previous"):u>=r+i?(l=u-r-i+1,d=1,h+="Next"):(l=u-r+1,h+="Current"),d&&(c=this.dateModule.add(c,"month",d)),c.setDate(l),this.dateModule.compare(c,a,"date")||(h="dijitCalendarCurrentDate "+h),this.isDisabledDate(c,this.lang)?(h="dijitCalendarDisabledDate "+h,t.setAttribute("aria-disabled","true")):(h="dijitCalendarEnabledDate "+h,t.removeAttribute("aria-disabled"),t.setAttribute("aria-selected","false"));var f=this.getClassForDate(c,this.lang);f&&(h=f+" "+h),t.className=h+"Month dijitCalendarDateTemplate";var p=c.valueOf();this._date2cell[p]=t,t.dijitDateValue=p,this._setText(this.dateLabels[n],c.getDateLocalized?c.getDateLocalized(this.lang):c.getDate())},this)},_populateControls:function(){var e=new this.dateClassObj(this.currentFocus);e.setDate(1),this.monthWidget.set("month",e);var n=e.getFullYear()-1,r=new this.dateClassObj;t.forEach(["previous","current","next"],function(t){r.setFullYear(n++),this._setText(this[t+"YearLabelNode"],this.dateLocaleModule.format(r,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(t){this.dateModule=t.datePackage?l.getObject(t.datePackage,!1):r,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=t.datePackage?l.getObject(t.datePackage+".locale",!1):i},_createMonthWidget:function(){return m._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var t=this.dowTemplateString,e=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),r=n.getFirstDayOfWeek(this.lang);this.dayCellsHtml=h.substitute([t,t,t,t,t,t,t].join(""),{d:""},function(){return e[r++%7]});var i=h.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[i,i,i,i,i,i].join(""),this.dateCells=[],this.dateLabels=[],this.inherited(arguments),a.setSelectable(this.domNode,!1);var o=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget(),this.set("currentFocus",o,!1)},postCreate:function(){this.inherited(arguments),this._connectControls()},_connectControls:function(){var t=l.hitch(this,function(t,e,n){return u(this[t],"click",l.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,e,n))}))});this.own(t("incrementMonth","month",1),t("decrementMonth","month",-1),t("nextYearLabelNode","year",1),t("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(t,e){var n=this.currentFocus,r=this._getNodeByDate(n);t=this._patchDate(t),this._set("currentFocus",t),this._date2cell&&0==this.dateModule.difference(n,t,"month")||(this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]));var i=this._getNodeByDate(t);i.setAttribute("tabIndex",this.tabIndex),(this.focused||e)&&i.focus(),r&&r!=i&&(c("webkit")?r.setAttribute("tabIndex","-1"):r.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(t){t.stopPropagation(),t.preventDefault();for(var e=t.target;e&&!e.dijitDateValue;e=e.parentNode);e&&!s.contains(e,"dijitCalendarDisabledDate")&&this.set("value",e.dijitDateValue)},_getNodeByDate:function(t){return t=this._patchDate(t),t&&this._date2cell?this._date2cell[t.valueOf()]:null},_markSelectedDates:function(e){function n(t,e){s.toggle(e,"dijitCalendarSelectedDate",t),e.setAttribute("aria-selected",t?"true":"false")}t.forEach(this._selectedCells||[],l.partial(n,!1)),this._selectedCells=t.filter(t.map(e,this._getNodeByDate,this),function(t){return t}),t.forEach(this._selectedCells,l.partial(n,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});return m._MonthWidget=e("dijit.CalendarLite._MonthWidget",d,{_setMonthAttr:function(e){var n=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,e),r=6==c("ie")?"":"<div class='dijitSpacer'>"+t.map(n,function(t){return"<div>"+t+"</div>"}).join("")+"</div>";this.domNode.innerHTML=r+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+n[e.getMonth()]+"</div>"}}),m}),define("dojo/selector/_loader",["../has","require"],function(t,e){if("undefined"!=typeof document){var n=document.createElement("div");t.add("dom-qsa2.1",!!n.querySelectorAll),t.add("dom-qsa3",function(){try{return n.innerHTML="<p class='TEST'></p>",1==n.querySelectorAll(".TEST:empty").length}catch(t){}})}var r;return{load:function(n,i,o,a){if(a&&a.isBuild)return o();var s=e;if(n="default"==n?t("config-selectorEngine")||"css3":n,n="css2"==n||"lite"==n?"./lite":"css2.1"==n?t("dom-qsa2.1")?"./lite":"./acme":"css3"==n?t("dom-qsa3")?"./lite":"./acme":"acme"==n?"./acme":(s=i)&&n,"?"==n.charAt(n.length-1)){n=n.substring(0,n.length-1);var l=!0}if(l&&(t("dom-compliant-qsa")||r))return o(r);s([n],function(t){"./lite"!=n&&(r=t),o(t)})}}}),define("dojo/query",["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],function(t,e,n,r,i,o,a,s){"use strict";function l(t,e){var r=function(r,i){if("string"==typeof i&&!(i=n.byId(i)))return new e([]);var o="string"==typeof r?t(r,i):r?r.end&&r.on?r:[r]:[];return o.end&&o.on?o:new e(o)};if(r.matches=t.match||function(t,e,n){return r.filter([t],e,n).length>0},r.filter=t.filter||function(t,e,n){return r(e,n).filter(function(e){return i.indexOf(t,e)>-1})},"function"!=typeof t){var o=t.search;t=function(t,e){return o(e||document,t)}}return r}e.add("array-extensible",function(){return 1==o.delegate([],{length:1}).length&&!e("bug-for-in-skips-shadowed")});var u=Array.prototype,c=u.slice,h=u.concat,d=i.forEach,f=function(t,e,n){var r=new(n||this._NodeListCtor||_)(t);return e?r._stash(e):r},p=function(e,n,r){return n=[0].concat(c.call(n,0)),r=r||t.global,function(t){return n[0]=t,e.apply(r,n)}},m=function(t,e){return function(){return this.forEach(p(t,arguments,e)),this}},g=function(t,e){return function(){return this.map(p(t,arguments,e))}},y=function(t,e){return function(){return this.filter(p(t,arguments,e))}},v=function(e,n,r){return function(){var i=arguments,o=p(e,i,r);return n.call(r||t.global,i)?this.map(o):(this.forEach(o),this)}},b=function(t){var n=this instanceof _&&e("array-extensible");"number"==typeof t&&(t=Array(t));var r=t&&"length"in t?t:arguments;if(n||!r.sort){for(var i=n?this:[],a=i.length=r.length,s=0;s<a;s++)i[s]=r[s];if(n)return i;r=i}return o._mixin(r,w),r._NodeListCtor=function(t){return _(t)},r},_=b,w=_.prototype=e("array-extensible")?[]:{};_._wrap=w._wrap=f,_._adaptAsMap=g,_._adaptAsForEach=m,_._adaptAsFilter=y,_._adaptWithCondition=v,d(["slice","splice"],function(t){var e=u[t];w[t]=function(){return this._wrap(e.apply(this,arguments),"slice"==t?this:null)}}),d(["indexOf","lastIndexOf","every","some"],function(e){var n=i[e];w[e]=function(){return n.apply(t,[this].concat(c.call(arguments,0)))}}),o.extend(b,{constructor:_,_NodeListCtor:_,toString:function(){return this.join(",")},_stash:function(t){return this._parent=t,this},on:function(t,e){var n=this.map(function(n){return r(n,t,e)})
;return n.remove=function(){for(var t=0;t<n.length;t++)n[t].remove()},n},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(t){var e=c.call(this,0),n=i.map(arguments,function(t){return c.call(t,0)});return this._wrap(h.apply(e,n),this)},map:function(t,e){return this._wrap(i.map(this,t,e),this)},forEach:function(t,e){return d(this,t,e),this},filter:function(t){var e=arguments,n=this,r=0;if("string"==typeof t){if(n=x._filterResult(this,e[0]),1==e.length)return n._stash(this);r=1}return this._wrap(i.filter(n,e[r],e[r+1]),this)},instantiate:function(t,e){var n=o.isFunction(t)?t:o.getObject(t);return e=e||{},this.forEach(function(t){new n(e,t)})},at:function(){var t=new this._NodeListCtor(0);return d(arguments,function(e){e<0&&(e=this.length+e),this[e]&&t.push(this[e])},this),t._stash(this)}});var x=l(s,b);return t.query=l(s,function(t){return b(t)}),x.load=function(t,e,n){a.load(t,e,function(t){n(l(t,b))})},t._filterQueryResult=x._filterResult=function(t,e,n){return new b(x.filter(t,e,n))},t.NodeList=x.NodeList=b,x}),define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(t,e,n,r,i,o){var a=r("dijit._OnDijitClickMixin",null,{connect:function(t,e,n){return this.inherited(arguments,[t,"ondijitclick"==e?o:e,n])}});return a.a11yclick=o,a}),define("dojo/window",["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style","./dom-construct"],function(t,e,n,r,i,o,a){e.add("rtl-adjust-position-for-verticalScrollBar",function(t,e){var r=n.body(e),o=a.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},r,"last"),s=a.create("div",{style:{overflow:"hidden",direction:"ltr"}},o,"last"),l=0!=i.position(s).x;return o.removeChild(s),r.removeChild(o),l}),e.add("position-fixed-support",function(t,e){var r=n.body(e),o=a.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},r,"last"),s=a.create("span",{style:{position:"fixed",left:"0",top:"0"}},o,"last"),l=i.position(s).x!=i.position(o).x;return o.removeChild(s),r.removeChild(o),l});var s={getBox:function(t){t=t||n.doc;var r,o,a="BackCompat"==t.compatMode?n.body(t):t.documentElement,l=i.docScroll(t);if(e("touch")){var u=s.get(t);r=u.innerWidth||a.clientWidth,o=u.innerHeight||a.clientHeight}else r=a.clientWidth,o=a.clientHeight;return{l:l.x,t:l.y,w:r,h:o}},get:function(t){if(e("ie")&&s!==document.parentWindow){t.parentWindow.execScript("document._parentWindow = window;","Javascript");var n=t._parentWindow;return t._parentWindow=null,n}return t.parentWindow||t.defaultView},scrollIntoView:function(t,a){try{t=r.byId(t);var s=t.ownerDocument||n.doc,l=n.body(s),u=s.documentElement||l.parentNode,c=e("ie"),h=e("webkit");if(t==l||t==u)return;if(!(e("mozilla")||c||h||e("opera")||e("trident"))&&"scrollIntoView"in t)return void t.scrollIntoView(!1);var d="BackCompat"==s.compatMode,f=Math.min(l.clientWidth||u.clientWidth,u.clientWidth||l.clientWidth),p=Math.min(l.clientHeight||u.clientHeight,u.clientHeight||l.clientHeight),m=h||d?l:u,g=a||i.position(t),y=t.parentNode,v=function(t){return!(c<=6||7==c&&d)&&(e("position-fixed-support")&&"fixed"==o.get(t,"position").toLowerCase())};if(v(t))return;for(;y;){y==l&&(y=m);var b=i.position(y),_=v(y),w="rtl"==o.getComputedStyle(y).direction.toLowerCase();if(y==m)b.w=f,b.h=p,m==u&&c&&w&&(b.x+=m.offsetWidth-b.w),(b.x<0||!c||c>=9)&&(b.x=0),(b.y<0||!c||c>=9)&&(b.y=0);else{var x=i.getPadBorderExtents(y);b.w-=x.w,b.h-=x.h,b.x+=x.l,b.y+=x.t;var C=y.clientWidth,S=b.w-C;C>0&&S>0&&(w&&e("rtl-adjust-position-for-verticalScrollBar")&&(b.x+=S),b.w=C),C=y.clientHeight,S=b.h-C,C>0&&S>0&&(b.h=C)}_&&(b.y<0&&(b.h+=b.y,b.y=0),b.x<0&&(b.w+=b.x,b.x=0),b.y+b.h>p&&(b.h=p-b.y),b.x+b.w>f&&(b.w=f-b.x));var k,D,M=g.x-b.x,N=g.y-b.y,T=M+g.w-b.w,A=N+g.h-b.h;T*M>0&&(y.scrollLeft||y==m||y.scrollWidth>y.offsetHeight)&&(k=Math[M<0?"max":"min"](M,T),w&&(8==c&&!d||c>=9)&&(k=-k),D=y.scrollLeft,y.scrollLeft+=k,k=y.scrollLeft-D,g.x-=k),A*N>0&&(y.scrollTop||y==m||y.scrollHeight>y.offsetHeight)&&(k=Math.ceil(Math[N<0?"max":"min"](N,A)),D=y.scrollTop,y.scrollTop+=k,k=y.scrollTop-D,g.y-=k),y=y!=m&&!_&&y.parentNode}}catch(e){console.error("scrollIntoView: "+e),t.scrollIntoView(!1)}}};return e("extend-dojo")&&t.setObject("dojo.window",s),s}),define("dijit/a11y",["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(t,e,n,r,i,o,a){var s={_isElementShown:function(t){var e=r.get(t);return"hidden"!=e.visibility&&"collapsed"!=e.visibility&&"none"!=e.display&&"hidden"!=n.get(t,"type")},hasDefaultTabStop:function(t){switch(t.nodeName.toLowerCase()){case"a":return n.has(t,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var e;try{var r=t.contentDocument;if("designMode"in r&&"on"==r.designMode)return!0;e=r.body}catch(n){try{e=t.contentWindow.document.body}catch(t){return!1}}return e&&("true"==e.contentEditable||e.firstChild&&"true"==e.firstChild.contentEditable);default:return"true"==t.contentEditable}},effectiveTabIndex:function(t){return n.get(t,"disabled")?void 0:n.has(t,"tabIndex")?+n.get(t,"tabIndex"):s.hasDefaultTabStop(t)?0:void 0},isTabNavigable:function(t){return s.effectiveTabIndex(t)>=0},isFocusable:function(t){return s.effectiveTabIndex(t)>=-1},_getTabNavigable:function(t){function e(t){return t&&"input"==t.tagName.toLowerCase()&&t.type&&"radio"==t.type.toLowerCase()&&t.name&&t.name.toLowerCase()}function r(t){return d[e(t)]||t}var i,a,l,u,c,h,d={},f=s._isElementShown,p=s.effectiveTabIndex,m=function(t){for(var r=t.firstChild;r;r=r.nextSibling)if(!(1!=r.nodeType||o("ie")<=9&&"HTML"!==r.scopeName)&&f(r)){var s=p(r);if(s>=0){0==s?(i||(i=r),a=r):s>0&&((!l||s<u)&&(u=s,l=r),(!c||s>=h)&&(h=s,c=r));var g=e(r);n.get(r,"checked")&&g&&(d[g]=r)}"SELECT"!=r.nodeName.toUpperCase()&&m(r)}};return f(t)&&m(t),{first:r(i),last:r(a),lowest:r(l),highest:r(c)}},getFirstInTabbingOrder:function(t,n){var r=s._getTabNavigable(e.byId(t,n));return r.lowest?r.lowest:r.first},getLastInTabbingOrder:function(t,n){var r=s._getTabNavigable(e.byId(t,n));return r.last?r.last:r.highest}};return o("extend-dojo")&&i.mixin(a,s),s}),define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,m,g){var y,v=e([h,a],{curNode:null,activeStack:[],constructor:function(){var e=s.hitch(this,function(t){n.isDescendant(this.curNode,t)&&this.set("curNode",null),n.isDescendant(this.prevNode,t)&&this.set("prevNode",null)});t.before(o,"empty",e),t.before(o,"destroy",e)},registerIframe:function(t){return this.registerWin(t.contentWindow,t)},registerWin:function(t,e){var n=this,r=t.document&&t.document.body;if(r){var i=l(t.document,"mousedown, touchstart",function(t){n._justMouseDowned=!0,setTimeout(function(){n._justMouseDowned=!1},0),t&&t.target&&null==t.target.parentNode||n._onTouchNode(e||t.target,"mouse")}),o=l(r,"focusin",function(t){if(y=(new Date).getTime(),t.target.tagName){var r=t.target.tagName.toLowerCase();"#document"!=r&&"body"!=r&&(p.isFocusable(t.target)?n._onFocusNode(e||t.target):n._onTouchNode(e||t.target))}}),a=l(r,"focusout",function(t){(new Date).getTime()<y+100||n._onBlurNode(e||t.target)});return{remove:function(){i.remove(),o.remove(),a.remove(),i=o=a=null,r=null}}}},_onBlurNode:function(t){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(s.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0),this._justMouseDowned||(this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(s.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0))},_onTouchNode:function(t,e){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer),i.contains(t,"dijitPopup")&&(t=t.firstChild);var n=[];try{for(;t;){var o=r.get(t,"dijitPopupParent");if(o)t=m.byId(o).domNode;else if(t.tagName&&"body"==t.tagName.toLowerCase()){if(t===d.body())break;t=f.get(t.ownerDocument).frameElement}else{var a=t.getAttribute&&t.getAttribute("widgetId"),s=a&&m.byId(a);!s||"mouse"==e&&s.get("disabled")||n.unshift(a),t=t.parentNode}}}catch(t){}this._setStack(n,e)},_onFocusNode:function(t){t&&9!=t.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(t),t!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",t)))},_setStack:function(t,e){var n=this.activeStack,r=n.length-1,i=t.length-1;if(t[i]!=n[r]){this.set("activeStack",t);var o,a;for(a=r;a>=0&&n[a]!=t[a];a--)(o=m.byId(n[a]))&&(o._hasBeenBlurred=!0,o.set("focused",!1),o._focusManager==this&&o._onBlur(e),this.emit("widget-blur",o,e));for(a++;a<=i;a++)(o=m.byId(t[a]))&&(o.set("focused",!0),o._focusManager==this&&o._onFocus(e),this.emit("widget-focus",o,e))}},focus:function(t){if(t)try{t.focus()}catch(t){}}}),b=new v;u(function(){var t=b.registerWin(f.get(document));c("ie")&&l(window,"unload",function(){t&&(t.remove(),t=null)})}),g.focus=function(t){b.focus(t)};for(var _ in b)/^_/.test(_)||(g.focus[_]="function"==typeof b[_]?s.hitch(b,_):b[_]);return b.watch(function(t,e,n){g.focus[t]=n}),b}),define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(t,e,n,r){return r.extend(e,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),n("dijit._FocusMixin",null,{_focusManager:t})}),define("dojo/uacss",["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(t,e,n,r,i){var o=i.doc.documentElement,a=r("ie"),s=r("opera"),l=Math.floor,u=r("ff"),c=t.boxModel.replace(/-/,""),h={dj_quirks:r("quirks"),dj_opera:s,dj_khtml:r("khtml"),dj_webkit:r("webkit"),dj_safari:r("safari"),dj_chrome:r("chrome"),dj_gecko:r("mozilla"),dj_ios:r("ios"),dj_android:r("android")};a&&(h.dj_ie=!0,h["dj_ie"+l(a)]=!0,h.dj_iequirks=r("quirks")),u&&(h["dj_ff"+l(u)]=!0),h["dj_"+c]=!0;var d="";for(var f in h)h[f]&&(d+=f+" ");return o.className=e.trim(o.className+" "+d),n(function(){if(!t.isBodyLtr()){var n="dj_rtl dijitRtl "+d.replace(/ /g,"-rtl ");o.className=e.trim(o.className+" "+n+"dj_rtl dijitRtl "+d.replace(/ /g,"-rtl "))}}),r}),define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(t,e,n,r,i,o,a,s,l,u,c,h,d){function f(){}function p(t){return function(e,r,i,o){return e&&"string"==typeof r&&e[r]==f?e.on(r.substring(2).toLowerCase(),a.hitch(i,o)):t.apply(n,arguments)}}t.around(n,"connect",p),o.connect&&t.around(o,"connect",p);var m=r("dijit._Widget",[c,h,d],{onClick:f,onDblClick:f,onKeyDown:f,onKeyPress:f,onKeyUp:f,onMouseDown:f,onMouseMove:f,onMouseOut:f,onMouseOver:f,onMouseLeave:f,onMouseEnter:f,onMouseUp:f,constructor:function(t){this._toConnect={};for(var e in t)this[e]===f&&(this._toConnect[e.replace(/^on/,"").toLowerCase()]=t[e],delete t[e])},postCreate:function(){this.inherited(arguments);for(var t in this._toConnect)this.on(t,this._toConnect[t]);delete this._toConnect},on:function(t,e){return this[this._onMap(t)]===f?n.connect(this.domNode,t.toLowerCase(),this,e):this.inherited(arguments)},_setFocusedAttr:function(t){this._focused=t,this._set("focused",t)},setAttribute:function(t,e){o.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(t,e)},attr:function(t,e){return arguments.length>=2||"object"==typeof t?this.set.apply(this,arguments):this.get(t)},getDescendants:function(){return o.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?s("[widgetId]",this.containerNode).map(u.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});return i("dijit-legacy-requires")&&l(0,function(){var t=["dijit/_base"];require(t)}),m}),define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(t,e,n,r,i,o,a,s,l,u,c,h){var d=e("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments),t.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(t){this.watch(t,o.hitch(this,"_setStateClass"))},this);for(var e in this.cssStateNodes||{})this._trackMouseState(this[e],this.cssStateNodes[e]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(t){if(!this.disabled)switch(t.type){case"mouseover":case"MSPointerOver":case"pointerover":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":case"pointerout":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"MSPointerUp":case"pointerup":case"keyup":this._set("active",!1)}},_setStateClass:function(){function e(e){n=n.concat(t.map(n,function(t){return t+e}),"dijit"+e)}var n=this.baseClass.split(" ");this.isLeftToRight()||e("Rtl");var r="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&e(r),this.state&&e(this.state),this.selected&&e("Selected"),this._opened&&e("Opened"),this.disabled?e("Disabled"):this.readOnly?e("ReadOnly"):this.active?e("Active"):this.hovering&&e("Hover"),this.focused&&e("Focused");var i=this.stateNode||this.domNode,o={};if(void 0!==i&&null!=i){t.forEach(i.className.split(" "),function(t){o[t]=!0}),"_stateClasses"in this&&t.forEach(this._stateClasses,function(t){delete o[t]}),t.forEach(n,function(t){o[t]=!0});var a=[];for(var s in o)a.push(s);i.className=a.join(" "),this._stateClasses=n}},_subnodeCssMouseEvent:function(t,e,n){function i(n){r.toggle(t,e+"Hover",n)}function o(n){r.toggle(t,e+"Active",n)}function a(n){r.toggle(t,e+"Focused",n)}if(!this.disabled&&!this.readOnly)switch(n.type){case"mouseover":case"MSPointerOver":case"pointerover":i(!0);break;case"mouseout":case"MSPointerOut":case"pointerout":i(!1),o(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"pointerdown":case"keydown":o(!0);break;case"mouseup":case"MSPointerUp":case"pointerup":case"dojotouchend":case"keyup":o(!1);break;case"focus":case"focusin":a(!0);break;case"blur":case"focusout":a(!1)}},_trackMouseState:function(t,e){t._cssState=e}});return s(function(){function t(t,e,r){if(!r||!n.isDescendant(r,e))for(var i=e;i&&i!=r;i=i.parentNode)if(i._cssState){var o=h.getEnclosingWidget(i);o&&(i==o.domNode?o._cssMouseEvent(t):o._subnodeCssMouseEvent(i,i._cssState,t))}}var e,r=u.body();a(r,l.over,function(e){t(e,e.target,e.relatedTarget)}),a(r,l.out,function(e){t(e,e.target,e.relatedTarget)}),a(r,c.press,function(n){e=n.target,t(n,e)}),a(r,c.release,function(n){t(n,e),e=null}),a(r,"focusin, focusout",function(t){var e=t.target;if(e._cssState&&!e.getAttribute("widgetId")){var n=h.getEnclosingWidget(e);n&&n._subnodeCssMouseEvent(e,e._cssState,t)}})}),d}),define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(t,e,n,r,i){var o,a=new t;return n(function(){var t=i.getBox();if(a._rlh=e(window,"resize",function(){var e=i.getBox();t.h==e.h&&t.w==e.w||(t=e,a.emit("resize"))}),8==r("ie")){var n=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=n&&(n=screen.deviceXDPI,a.emit("resize"))},500)}r("ios")&&(e(document,"focusin",function(t){o=t.target}),e(document,"focusout",function(t){o=null}))}),a.getEffectiveBox=function(t){var e=i.getBox(t),n=o&&o.tagName&&o.tagName.toLowerCase();if(r("ios")&&o&&!o.readOnly&&("textarea"==n||"input"==n&&/^(color|email|number|password|search|tel|text|url)$/.test(o.type))){e.h*=0==orientation||180==orientation?.66:.4;var a=o.getBoundingClientRect();e.h=Math.max(e.h,a.top+a.height)}return e},a}),define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(t,e,n,r,i,o,a){function s(r,a,s,l){var u=o.getEffectiveBox(r.ownerDocument);r.parentNode&&"body"==String(r.parentNode.tagName).toLowerCase()||i.body(r.ownerDocument).appendChild(r);var c=null;t.some(a,function(t){var n=t.corner,i=t.pos,o=0,a={w:{L:u.l+u.w-i.x,R:i.x-u.l,M:u.w}[n.charAt(1)],h:{T:u.t+u.h-i.y,B:i.y-u.t,M:u.h}[n.charAt(0)]},h=r.style;if(h.left=h.right="auto",s){var d=s(r,t.aroundCorner,n,a,l);o=void 0===d?0:d}var f=r.style,p=f.display,m=f.visibility;"none"==f.display&&(f.visibility="hidden",f.display="");var g=e.position(r);f.display=p,f.visibility=m;var y={L:i.x,R:i.x-g.w,M:Math.max(u.l,Math.min(u.l+u.w,i.x+(g.w>>1))-g.w)}[n.charAt(1)],v={T:i.y,B:i.y-g.h,M:Math.max(u.t,Math.min(u.t+u.h,i.y+(g.h>>1))-g.h)}[n.charAt(0)],b=Math.max(u.l,y),_=Math.max(u.t,v),w=Math.min(u.l+u.w,y+g.w),x=Math.min(u.t+u.h,v+g.h),C=w-b,S=x-_;return o+=g.w-C+(g.h-S),(null==c||o<c.overflow)&&(c={corner:n,aroundCorner:t.aroundCorner,x:b,y:_,w:C,h:S,overflow:o,spaceAvailable:a}),!o}),c.overflow&&s&&s(r,c.aroundCorner,c.corner,c.spaceAvailable,l);var h=e.isBodyLtr(r.ownerDocument),d=c.y,f=h?c.x:u.w-c.x-c.w;/relative|absolute/.test(n.get(i.body(r.ownerDocument),"position"))&&(d-=n.get(i.body(r.ownerDocument),"marginTop"),f-=(h?1:-1)*n.get(i.body(r.ownerDocument),h?"marginLeft":"marginRight"));var p=r.style;return p.top=d+"px",p[h?"left":"right"]=f+"px",p[h?"right":"left"]="auto",c}var l={TL:"BR",TR:"BL",BL:"TR",BR:"TL"},u={at:function(e,n,r,i,o){return s(e,t.map(r,function(t){var e={corner:t,aroundCorner:l[t],pos:{x:n.x,y:n.y}};return i&&(e.pos.x+="L"==t.charAt(1)?i.x:-i.x,e.pos.y+="T"==t.charAt(0)?i.y:-i.y),e}),o)},around:function(i,o,a,l,u){function c(t,e){D.push({aroundCorner:t,corner:e,pos:{x:{L:x,R:x+S,M:x+(S>>1)}[t.charAt(1)],y:{T:C,B:C+k,M:C+(k>>1)}[t.charAt(0)]}})}var h;if("string"==typeof o||"offsetWidth"in o){if(h=e.position(o,!0),/^(above|below)/.test(a[0])){var d=e.getBorderExtents(o),f=o.firstChild?e.getBorderExtents(o.firstChild):{t:0,l:0,b:0,r:0},p=e.getBorderExtents(i),m=i.firstChild?e.getBorderExtents(i.firstChild):{t:0,l:0,b:0,r:0};h.y+=Math.min(d.t+f.t,p.t+m.t),h.h-=Math.min(d.t+f.t,p.t+m.t)+Math.min(d.b+f.b,p.b+m.b)}}else h=o;if(o.parentNode)for(var g="absolute"==n.getComputedStyle(o).position,y=o.parentNode;y&&1==y.nodeType&&"BODY"!=y.nodeName;){var v=e.position(y,!0),b=n.getComputedStyle(y);if(/relative|absolute/.test(b.position)&&(g=!1),!g&&/hidden|auto|scroll/.test(b.overflow)){var _=Math.min(h.y+h.h,v.y+v.h),w=Math.min(h.x+h.w,v.x+v.w);h.x=Math.max(h.x,v.x),h.y=Math.max(h.y,v.y),h.h=_-h.y,h.w=w-h.x}"absolute"==b.position&&(g=!0),y=y.parentNode}var x=h.x,C=h.y,S="w"in h?h.w:h.w=h.width,k="h"in h?h.h:(r.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+C+", height:"+h.height+", width:"+S+" } has been deprecated.  Please use { x:"+x+", y:"+C+", h:"+h.height+", w:"+S+" }","","2.0"),h.h=h.height),D=[];t.forEach(a,function(t){var e=l;switch(t){case"above-centered":c("TM","BM");break;case"below-centered":c("BM","TM");break;case"after-centered":e=!e;case"before-centered":c(e?"ML":"MR",e?"MR":"ML");break;case"after":e=!e;case"before":c(e?"TL":"TR",e?"TR":"TL"),c(e?"BL":"BR",e?"BR":"BL");break;case"below-alt":e=!e;case"below":c(e?"BL":"BR",e?"TL":"TR"),c(e?"BR":"BL",e?"TR":"TL");break;case"above-alt":e=!e;case"above":c(e?"TL":"TR",e?"BL":"BR"),c(e?"TR":"TL",e?"BR":"BL");break;default:c(t.aroundCorner,t.corner)}});var M=s(i,D,u,{w:S,h:k});return M.aroundNodePos=h,M}};return a.place=u}),define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(t,e,n,r,i,o,a,s){s.add("config-bgIframe",!s("touch"));var l=new function(){var e=[];this.pop=function(){var o;if(e.length)o=e.pop(),o.style.display="";else{if(s("ie")<9){var a=n.dojoBlankHtmlUrl||t.toUrl("dojo/resources/blank.html")||'javascript:""',l="<iframe src='"+a+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";o=document.createElement(l)}else o=r.create("iframe"),o.src='javascript:""',o.className="dijitBackgroundIframe",o.setAttribute("role","presentation"),i.set(o,"opacity",.1);o.tabIndex=-1}return o},this.push=function(t){t.style.display="none",e.push(t)}};return e.BackgroundIframe=function(t){if(!t.id)throw new Error("no id");if(s("config-bgIframe")){var e=this.iframe=l.pop();t.appendChild(e),s("ie")<7||s("quirks")?(this.resize(t),this._conn=a(t,"resize",o.hitch(this,"resize",t))):i.set(e,{width:"100%",height:"100%"})}},o.extend(e.BackgroundIframe,{resize:function(t){this.iframe&&i.set(this.iframe,{width:t.offsetWidth+"px",height:t.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(l.push(this.iframe),delete this.iframe)}}),e.BackgroundIframe}),define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,m){function g(){this._popupWrapper&&(o.destroy(this._popupWrapper),delete this._popupWrapper)}var y=n(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var t=this._firstAroundPosition,e=a.position(this._firstAroundNode,!0),n=e.x-t.x,r=e.y-t.y;if(n||r){this._firstAroundPosition=e;for(var i=0;i<this._stack.length;i++){var o=this._stack[i].wrapper.style;o.top=parseInt(o.top,10)+r+"px","auto"==o.right?o.left=parseInt(o.left,10)+n+"px":o.right=parseInt(o.right,10)-n+"px"}}this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),n||r?10:50)}},_createWrapper:function(t){var n=t._popupWrapper,r=t.domNode;if(!n){n=o.create("div",{class:"dijitPopup",style:{display:"none"},role:"region","aria-label":t["aria-label"]||t.label||t.name||t.id},t.ownerDocumentBody),n.appendChild(r);var i=r.style;i.display="",i.visibility="",i.position="",i.top="0px",t._popupWrapper=n,e.after(t,"destroy",g,!0)}return n},moveOffScreen:function(t){var e=this._createWrapper(t),n=a.isBodyLtr(t.ownerDocument),r={visibility:"hidden",top:"-9999px",display:""};return r[n?"left":"right"]="-9999px",r[n?"right":"left"]="auto",s.set(e,r),e},hide:function(t){var e=this._createWrapper(t);s.set(e,{display:"none",height:"auto",overflow:"visible",border:""});var n=t.domNode;"_originalStyle"in n&&(n.style.cssText=n._originalStyle)},getTopPopup:function(){for(var t=this._stack,e=t.length-1;e>0&&t[e].parent===t[e-1].widget;e--);return t[e]},open:function(t){for(var e=this._stack,n=t.popup,o=n.domNode,m=t.orient||["below","below-alt","above","above-alt"],g=t.parent?t.parent.isLeftToRight():a.isBodyLtr(n.ownerDocument),y=t.around,v=t.around&&t.around.id?t.around.id+"_dropdown":"popup_"+this._idGen++;e.length&&(!t.parent||!r.isDescendant(t.parent.domNode,e[e.length-1].widget.domNode));)this.close(e[e.length-1].widget);var b=this.moveOffScreen(n);n.startup&&!n._started&&n.startup();var _,w=a.position(o);if("maxHeight"in t&&-1!=t.maxHeight)_=t.maxHeight||1/0;else{var x=p.getEffectiveBox(this.ownerDocument),C=y?a.position(y,!1):{y:t.y-(t.padding||0),h:2*(t.padding||0)};_=Math.floor(Math.max(C.y,x.h-(C.y+C.h)))}if(w.h>_){var S=s.getComputedStyle(o),k=S.borderLeftWidth+" "+S.borderLeftStyle+" "+S.borderLeftColor;s.set(b,{overflowY:"scroll",height:_+"px",border:k}),o._originalStyle=o.style.cssText,o.style.border="none"}i.set(b,{id:v,style:{zIndex:this._beginZIndex+e.length},class:"dijitPopup "+(n.baseClass||n.class||"").split(" ")[0]+"Popup",dijitPopupParent:t.parent?t.parent.id:""}),0==e.length&&y&&(this._firstAroundNode=y,this._firstAroundPosition=a.position(y,!0),this._aroundMoveListener=setTimeout(c.hitch(this,"_repositionAll"),50)),l("config-bgIframe")&&!n.bgIframe&&(n.bgIframe=new f(b));var D=n.orient?c.hitch(n,"orient"):null,M=y?d.around(b,y,m,g,D):d.at(b,t,"R"==m?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],t.padding,D);b.style.visibility="visible",o.style.visibility="visible";var N=[];return N.push(h(b,"keydown",c.hitch(this,function(e){if(e.keyCode==u.ESCAPE&&t.onCancel)e.stopPropagation(),e.preventDefault(),t.onCancel();else if(e.keyCode==u.TAB){e.stopPropagation(),e.preventDefault();var n=this.getTopPopup();n&&n.onCancel&&n.onCancel()}}))),n.onCancel&&t.onCancel&&N.push(n.on("cancel",t.onCancel)),N.push(n.on(n.onExecute?"execute":"change",c.hitch(this,function(){var t=this.getTopPopup();t&&t.onExecute&&t.onExecute()}))),e.push({widget:n,wrapper:b,parent:t.parent,onExecute:t.onExecute,onCancel:t.onCancel,onClose:t.onClose,handlers:N}),n.onOpen&&n.onOpen(M),M},close:function(e){for(var n=this._stack;e&&t.some(n,function(t){return t.widget==e})||!e&&n.length;){var r=n.pop(),i=r.widget,o=r.onClose;i.onClose&&i.onClose();for(var a;a=r.handlers.pop();)a.remove();i&&i.domNode&&this.hide(i),o&&o()}0==n.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}});return m.popup=new y}),define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(t,e,n,r,i,o,a,s,l,u){return e("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(e){if(this._set("disabled",e),n.set(this.focusNode,"disabled",e),this.valueNode&&n.set(this.valueNode,"disabled",e),this.focusNode.setAttribute("aria-disabled",e?"true":"false"),e){this._set("hovering",!1),this._set("active",!1);var r="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";t.forEach(i.isArray(r)?r:[r],function(t){var e=this[t];s("webkit")||u.hasDefaultTabStop(e)?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex")},this)}else""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(t){if("mouse"==t&&this.isFocusable())var e=this.own(a(this.focusNode,"focus",function(){n.remove(),e.remove()}))[0],n=this.own(a(this.ownerDocumentBody,"mouseup, touchend",i.hitch(this,function(t){n.remove(),e.remove(),this.focused&&("touchend"==t.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){l.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=r.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(t){}},compare:function(t,e){return"number"==typeof t&&"number"==typeof e?isNaN(t)&&isNaN(e)?0:t-e:t>e?1:t<e?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(t,e){void 0!=this._lastValueReported||null!==e&&this._onChangeActive||(this._resetValue=this._lastValueReported=t),this._pendingOnChange=this._pendingOnChange||typeof t!=typeof this._lastValueReported||0!=this.compare(t,this._lastValueReported),(this.intermediateChanges||e||void 0===e)&&this._pendingOnChange&&(this._lastValueReported=t,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(t)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})}),define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(t,e,n,r,i,o,a,s){return e("dijit-legacy-requires")&&r(0,function(){var t=["dijit/form/_FormValueWidget"];require(t)}),t("dijit.form._FormWidget",[i,a,o,s],{setDisabled:function(t){n.deprecated("setDisabled("+t+") is deprecated. Use set('disabled',"+t+") instead.","","2.0"),this.set("disabled",t)},setValue:function(t){n.deprecated("dijit.form._FormWidget:setValue("+t+") is deprecated.  Use set('value',"+t+") instead.","","2.0"),this.set("value",t)},getValue:function(){return n.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!e("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)},_setTypeAttr:null})}),define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(t,e,n,r){var i=t("dijit.form._ButtonMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(t){return t.stopPropagation(),t.preventDefault(),this.disabled||this.valueNode.click(t),!1},_onClick:function(t){if(this.disabled)return t.stopPropagation(),t.preventDefault(),!1;!1===this.onClick(t)&&t.preventDefault();var e=t.defaultPrevented;if(!e&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var n=this.domNode;n.parentNode;n=n.parentNode){var i=r.byNode(n);if(i&&"function"==typeof i._onSubmit){i._onSubmit(t),t.preventDefault(),e=!0;break}}return!e},postCreate:function(){this.inherited(arguments),e.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(t){this._set("label",t),(this.containerNode||this.focusNode).innerHTML=t}});return n("dojo-bidi")&&(i=t("dijit.form._ButtonMixin",i,{_setLabelAttr:function(){this.inherited(arguments);var t=this.containerNode||this.focusNode;this.applyTextDir(t)}})),i}),define("dojo/text!dijit/form/templates/Button.html",[],function(){return'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode pentaho-button"\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n'}),define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(t,e,n,r,i,o,a,s,l,u){r("dijit-legacy-requires")&&a(0,function(){t(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});var c=e("dijit.form.Button"+(r("dojo-bidi")?"_NoBidi":""),[s,l],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:u,_setValueAttr:"valueNode",_setNameAttr:function(t){
this.valueNode&&this.valueNode.setAttribute("name",t)},_fillContent:function(t){if(t&&(!this.params||!("label"in this.params))){var e=o.trim(t.innerHTML);e&&(this.label=e)}},_setShowLabelAttr:function(t){this.containerNode&&n.toggle(this.containerNode,"dijitDisplayNone",!t),this._set("showLabel",t)},setLabel:function(t){i.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",t)},_setLabelAttr:function(t){this.inherited(arguments),this.showLabel||"title"in this.params||(this.titleNode.title=o.trim(this.containerNode.innerText||this.containerNode.textContent||""))}});return r("dojo-bidi")&&(c=e("dijit.form.Button",c,{_setLabelAttr:function(t){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(t){this._created&&this.textDir!=t&&(this._set("textDir",t),this._setLabelAttr(this.label))}})),c}),define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(t,e,n,r){return e("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(t,e){var r=this.containerNode;if(e>0){for(r=r.firstChild;e>0;)1==r.nodeType&&e--,r=r.nextSibling;r?e="before":(r=this.containerNode,e="last")}n.place(t.domNode,r,e),this._started&&!t._started&&t.startup()},removeChild:function(t){if("number"==typeof t&&(t=this.getChildren()[t]),t){var e=t.domNode;e&&e.parentNode&&e.parentNode.removeChild(e)}},hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(e,n){r.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var i=this.getChildren();return i[t.indexOf(i,e)+n]},getIndexOfChild:function(e){return t.indexOf(this.getChildren(),e)}})}),define("dojo/_base/Deferred",["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(t,e,n,r,i,o,a){var s=function(){},l=Object.freeze||function(){},u=t.Deferred=function(t){function a(t){if(d)throw new Error("This deferred has already been resolved");h=t,d=!0,c()}function c(){for(var t;!t&&y;){var n=y;y=y.next,(t=n.progress==s)&&(d=!1);var r=m?n.error:n.resolved;if(i("config-useDeferredInstrumentation")&&m&&e.instrumentRejected&&e.instrumentRejected(h,!!r),r)try{var a=r(h);if(a&&"function"==typeof a.then){a.then(o.hitch(n.deferred,"resolve"),o.hitch(n.deferred,"reject"),o.hitch(n.deferred,"progress"));continue}var l=t&&void 0===a;t&&!l&&(m=a instanceof Error),n.deferred[l&&m?"reject":"resolve"](l?h:a)}catch(t){n.deferred.reject(t)}else m?n.deferred.reject(h):n.deferred.resolve(h)}}var h,d,f,p,m,g,y,v=this.promise=new n;this.isResolved=v.isResolved=function(){return 0==p},this.isRejected=v.isRejected=function(){return 1==p},this.isFulfilled=v.isFulfilled=function(){return p>=0},this.isCanceled=v.isCanceled=function(){return f},this.resolve=this.callback=function(t){this.fired=p=0,this.results=[t,null],a(t)},this.reject=this.errback=function(t){m=!0,this.fired=p=1,i("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(t,!!y),a(t),this.results=[null,t]},this.progress=function(t){for(var e=y;e;){var n=e.progress;n&&n(t),e=e.next}},this.addCallbacks=function(t,e){return this.then(t,e,s),this},v.then=this.then=function(t,e,n){var r=n==s?this:new u(v.cancel),i={resolved:t,error:e,progress:n,deferred:r};return y?g=g.next=i:y=g=i,d&&c(),r.promise};var b=this;v.cancel=this.cancel=function(){if(!d){var e=t&&t(b);d||(e instanceof Error||(e=new r(e)),e.log=!1,b.reject(e))}f=!0},l(v)};return o.extend(u,{addCallback:function(e){return this.addCallbacks(o.hitch.apply(t,arguments))},addErrback:function(e){return this.addCallbacks(null,o.hitch.apply(t,arguments))},addBoth:function(e){var n=o.hitch.apply(t,arguments);return this.addCallbacks(n,n)},fired:-1}),u.when=t.when=a,u}),define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,m){return t("dijit._HasDropDown",m,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(t){this.disabled||this.readOnly||("MSPointerDown"!=t.type&&"pointerdown"!=t.type&&t.preventDefault(),this._docHandler=this.own(c(this.ownerDocument,h.release,u.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},_onDropDownMouseUp:function(t){t&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var e=this.dropDown,n=!1;if(t&&this._opened){var r=o.position(this._buttonNode,!0);if(!(t.pageX>=r.x&&t.pageX<=r.x+r.w&&t.pageY>=r.y&&t.pageY<=r.y+r.h)){for(var a=t.target;a&&!n;)i.contains(a,"dijitPopup")?n=!0:a=a.parentNode;if(n){if(a=t.target,e.onItemClick){for(var s;a&&!(s=d.byNode(a));)a=a.parentNode;s&&s.onClick&&s.getParent&&s.getParent().onItemClick(s,t)}return}}}this._opened?e.focus&&(!1!==e.autoFocus||"mouseup"==t.type&&!this.hovering)&&(this._focusDropDownTimer=this.defer(function(){e.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(t){this._stopClickEvents&&(t.stopPropagation(),t.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var t={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";i.add(this._arrowWrapperNode||this._buttonNode,"dijit"+t+"ArrowButton")},postCreate:function(){this.inherited(arguments);var t=this.focusNode||this.domNode;this.own(c(this._buttonNode,h.press,u.hitch(this,"_onDropDownMouseDown")),c(this._buttonNode,"click",u.hitch(this,"_onDropDownClick")),c(t,"keydown",u.hitch(this,"_onKey")),c(t,"keyup",u.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(t){if(!this.disabled&&!this.readOnly){var e=this.dropDown,n=t.target;if(e&&this._opened&&e.handleKey&&!1===e.handleKey(t))return t.stopPropagation(),void t.preventDefault();e&&this._opened&&t.keyCode==l.ESCAPE?(this.closeDropDown(),t.stopPropagation(),t.preventDefault()):!this._opened&&(t.keyCode==l.DOWN_ARROW||(t.keyCode==l.ENTER||t.keyCode==l.SPACE&&(!this._searchTimer||t.ctrlKey||t.altKey||t.metaKey))&&("input"!==(n.tagName||"").toLowerCase()||n.type&&"text"!==n.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,t.stopPropagation(),t.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var t=this.dropDown;t&&t.focus&&this.defer(u.hitch(t,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(t){t()},loadAndOpenDropDown:function(){var t=new e,n=u.hitch(this,function(){this.openDropDown(),t.resolve(this.dropDown)});return this.isLoaded()?n():this.loadDropDown(n),t},toggleDropDown:function(){this.disabled||this.readOnly||(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var t=this.dropDown,e=t.domNode,n=this._aroundNode||this.domNode,a=this,s=p.open({parent:this,popup:t,around:n,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){a.closeDropDown(!0)},onCancel:function(){a.closeDropDown(!0)},onClose:function(){void 0!==a._popupStateNode&&null!=a._popupStateNode&&(r.set(a._popupStateNode,"popupActive",!1),i.remove(a._popupStateNode,"dijitHasDropDownOpen")),a._set("_opened",!1)}});if(this.forceWidth||this.autoWidth&&n.offsetWidth>t._popupWrapper.offsetWidth){var l={w:n.offsetWidth-(t._popupWrapper.offsetWidth-t.domNode.offsetWidth)};u.isFunction(t.resize)?t.resize(l):o.setMarginBox(e,l)}return void 0!==a._popupStateNode&&null!=a._popupStateNode&&(r.set(this._popupStateNode,"popupActive","true"),i.add(this._popupStateNode,"dijitHasDropDownOpen")),this._set("_opened",!0),void 0!==a._popupStateNode&&null!=a._popupStateNode&&(this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",t.id)),"presentation"===e.getAttribute("role")||e.getAttribute("aria-labelledby")||e.setAttribute("aria-labelledby",this.id),s},closeDropDown:function(t){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),t&&this.focus(),p.close(this.dropDown),this._opened=!1,$("#queryOptions").removeClass("checked"))}})}),define("dojo/text!dijit/form/templates/DropDownButton.html",[],function(){return'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-event="onclick:_onClick"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n'}),define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(t,e,n,r,i,o,a,s,l){return t("dijit.form.DropDownButton",[o,a,s],{baseClass:"dijitDropDownButton",templateString:l,_fillContent:function(){if(this.srcNodeRef){var t=n("*",this.srcNodeRef);this.inherited(arguments,[t[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var t=n("[widgetId]",this.dropDownContainer)[0];t&&(this.dropDown=r.byNode(t)),delete this.dropDownContainer}this.dropDown&&i.hide(this.dropDown),this.inherited(arguments)}},isLoaded:function(){var t=this.dropDown;return!!t&&(!t.href||t.isLoaded)},loadDropDown:function(t){var n=this.dropDown,r=n.on("load",e.hitch(this,function(){r.remove(),t()}));n.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})}),define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,m){var g=r("dijit.Calendar",[h,d,f],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(t){a.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0"),this.set("value",t)},_createMonthWidget:function(){return new g._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:l.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments),this.own(u(this.domNode,"keydown",l.hitch(this,"_onKeyDown")),u(this.dateRowsNode,"mouseover",l.hitch(this,"_onDayMouseOver")),u(this.dateRowsNode,"mouseout",l.hitch(this,"_onDayMouseOut")),u(this.dateRowsNode,"mousedown",l.hitch(this,"_onDayMouseDown")),u(this.dateRowsNode,"mouseup",l.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(t){var e=new this.dateClassObj(this.currentFocus);e.setDate(1),e.setMonth(t);var n=this.dateModule.getDaysInMonth(e),r=this.currentFocus.getDate();e.setDate(Math.min(r,n)),this._setCurrentFocusAttr(e)},_onDayMouseOver:function(t){var e=o.contains(t.target,"dijitCalendarDateLabel")?t.target.parentNode:t.target;e&&(e.dijitDateValue&&!o.contains(e,"dijitCalendarDisabledDate")||e==this.previousYearLabelNode||e==this.nextYearLabelNode)&&(o.add(e,"dijitCalendarHoveredDate"),this._currentNode=e)},_onDayMouseOut:function(t){if(this._currentNode&&(!t.relatedTarget||t.relatedTarget.parentNode!=this._currentNode)){var e="dijitCalendarHoveredDate";o.contains(this._currentNode,"dijitCalendarActiveDate")&&(e+=" dijitCalendarActiveDate"),o.remove(this._currentNode,e),this._currentNode=null}},_onDayMouseDown:function(t){var e=t.target.parentNode;e&&e.dijitDateValue&&!o.contains(e,"dijitCalendarDisabledDate")&&(o.add(e,"dijitCalendarActiveDate"),this._currentNode=e)},_onDayMouseUp:function(t){var e=t.target.parentNode;e&&e.dijitDateValue&&o.remove(e,"dijitCalendarActiveDate")},handleKey:function(t){var e,n=-1,r=this.currentFocus;switch(t.keyCode){case s.RIGHT_ARROW:n=1;case s.LEFT_ARROW:e="day",this.isLeftToRight()||(n*=-1);break;case s.DOWN_ARROW:n=1;case s.UP_ARROW:e="week";break;case s.PAGE_DOWN:n=1;case s.PAGE_UP:e=t.ctrlKey||t.altKey?"year":"month";break;case s.END:r=this.dateModule.add(r,"month",1),e="day";case s.HOME:r=new this.dateClassObj(r),r.setDate(1);break;default:return!0}return e&&(r=this.dateModule.add(r,e,n)),this._setCurrentFocusAttr(r),!1},_onKeyDown:function(t){this.handleKey(t)||(t.stopPropagation(),t.preventDefault())},onValueSelected:function(){},onChange:function(t){this.onValueSelected(t)},getClassForDate:function(){}});return g._MonthDropDownButton=r("dijit.Calendar._MonthDropDownButton",m,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments),this.dropDown=new g._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(t){var e=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,t);this.dropDown.set("months",e),this.containerNode.innerHTML=(6==c("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+e[t.getMonth()]+"</div>"}}),g._MonthDropDown=r("dijit.Calendar._MonthDropDown",[d,p],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(e){this.domNode.innerHTML=t.map(e,function(t,e){return t?"<div class='dijitCalendarMonthLabel' month='"+e+"'>"+t+"</div>":""}).join("")},_onClick:function(t){this.onChange(i.get(t.target,"month"))},onChange:function(){},_onMenuHover:function(t){o.toggle(t.target,"dijitCalendarMonthLabelHover","mouseover"==t.type)}}),g}),define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormWidgetMixin"],function(t,e,n,r,i,o,a){return t("dijit.form._FormValueMixin",a,{readOnly:!1,_setReadOnlyAttr:function(t){e.set(this.focusNode,"readOnly",t),this._set("readOnly",t)},postCreate:function(){this.inherited(arguments),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(t,e){this._handleOnChange(t,e)},_handleOnChange:function(t,e){this._set("value",t),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})}),define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(t,e,n,r){return t("dijit.form._FormValueWidget",[n,r],{_layoutHackIE7:function(){if(7==e("ie"))for(var t=this.domNode,n=t.parentNode,r=t.firstChild||t,i=r.style.filter,o=this;n&&0==n.clientHeight;)!function(){var t=o.connect(n,"onscroll",function(){o.disconnect(t),r.style.filter=(new Date).getMilliseconds(),o.defer(function(){r.style.filter=i})})}(),n=n.parentNode}})}),define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(t,e,n,r,i,o,a,s){var l=e("dijit.form._TextBoxMixin"+(r("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(t,e,n){var r;void 0!==t&&(r=this.filter(t),"string"!=typeof n&&(n=null===r||"number"==typeof r&&isNaN(r)?"":this.filter(this.format(r,this.constraints)))),null==n||"number"==typeof n&&isNaN(n)||this.textbox.value==n||(this.textbox.value=n,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[r,e])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(t){null==t?t="":"string"!=typeof t&&(t=String(t)),this.textbox.value=t,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(t){return null==t?"":t.toString?t.toString():t},parse:function(t){return t},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(t){this._processInput(t),this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(t){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments);var t=function(t){var e;if("keydown"==t.type){switch(e=t.keyCode){case i.SHIFT:case i.ALT:case i.CTRL:case i.META:case i.CAPS_LOCK:case i.NUM_LOCK:case i.SCROLL_LOCK:return}if(!t.ctrlKey&&!t.metaKey&&!t.altKey){switch(e){case i.NUMPAD_0:case i.NUMPAD_1:case i.NUMPAD_2:case i.NUMPAD_3:case i.NUMPAD_4:case i.NUMPAD_5:case i.NUMPAD_6:case i.NUMPAD_7:case i.NUMPAD_8:case i.NUMPAD_9:case i.NUMPAD_MULTIPLY:case i.NUMPAD_PLUS:case i.NUMPAD_ENTER:case i.NUMPAD_MINUS:case i.NUMPAD_PERIOD:case i.NUMPAD_DIVIDE:return}if(e>=65&&e<=90||e>=48&&e<=57||e==i.SPACE)return;var n=!1;for(var r in i)if(i[r]===t.keyCode){n=!0;break}if(!n)return}}if(e=t.charCode>=32?String.fromCharCode(t.charCode):t.charCode,e||(e=t.keyCode>=65&&t.keyCode<=90||t.keyCode>=48&&t.keyCode<=57||t.keyCode==i.SPACE?String.fromCharCode(t.keyCode):t.keyCode),e||(e=229),"keypress"==t.type){if("string"!=typeof e)return;if((e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||" "===e)&&(t.ctrlKey||t.metaKey||t.altKey))return}if("input"==t.type){if(this.__skipInputEvent)return void(this.__skipInputEvent=!1)}else this.__skipInputEvent=!0;var a,s={faux:!0};for(a in t)if("layerX"!=a&&"layerY"!=a){var l=t[a];"function"!=typeof l&&void 0!==l&&(s[a]=l)}o.mixin(s,{charOrCode:e,_wasConsumed:!1,preventDefault:function(){s._wasConsumed=!0,t.preventDefault()},stopPropagation:function(){t.stopPropagation()}}),!1===this.onInput(s)&&(s.preventDefault(),s.stopPropagation()),s._wasConsumed||(this.defer(function(){this._onInput(s)}),"keypress"==t.type&&t.stopPropagation())};this.own(a(this.textbox,"keydown, keypress, paste, cut, input, compositionend",o.hitch(this,t)))},_blankValue:"",filter:function(t){return null===t?this._blankValue:"string"!=typeof t?t:(this.trim&&(t=o.trim(t)),this.uppercase&&(t=t.toUpperCase()),this.lowercase&&(t=t.toLowerCase()),this.propercase&&(t=t.replace(/[^\s]+/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})),t)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(t){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(t){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==t&&(this._selectOnClickHandle=a.once(this.domNode,"mouseup, touchend",o.hitch(this,function(t){this._isTextSelected()||l.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return r("dojo-bidi")&&(l=e("dijit.form._TextBoxMixin",l,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),l._setSelectionRange=s._setSelectionRange=function(t,e,n){t.setSelectionRange&&t.setSelectionRange(e,n)},l.selectInputText=s.selectInputText=function(t,e,r){t=n.byId(t),isNaN(e)&&(e=0),isNaN(r)&&(r=t.value?t.value.length:0);try{t.focus(),l._setSelectionRange(t,e,r)}catch(t){}},l}),define("dojo/text!dijit/form/templates/TextBox.html",[],function(){return'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'}),define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(t,e,n,r,i,o,a,s,l,u,c){var h=t("dijit.form.TextBox"+(a("dojo-bidi")?"_NoBidi":""),[s,l],{templateString:u,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:a("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var t=this.type.toLowerCase();(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==t||"file"==t)&&this.templateString==this.constructor.prototype.templateString)&&(this.templateString=this._singleNodeTemplate),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),a("ie")<9&&this.defer(function(){try{var t=n.getComputedStyle(this.domNode);if(t){var e=t.fontFamily;if(e){var r=this.domNode.getElementsByTagName("INPUT");if(r)for(var i=0;i<r.length;i++)r[i].style.fontFamily=e}}}catch(t){}})},_setPlaceHolderAttr:function(t){this._set("placeHolder",t),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=e.create("span",{onmousedown:function(t){t.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(o(this._phspan,"touchend, pointerup, MSPointerUp",i.hitch(this,function(){this.focus()})))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(t)),this._updatePlaceHolder()},_onInput:function(t){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(t,e,n){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return r.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(t){r.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",t)},_onBlur:function(t){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),a("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(t){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});return a("ie")<9&&(h.prototype._isTextSelected=function(){var t=this.ownerDocument.selection.createRange();return t.parentElement()==this.textbox&&t.text.length>0},c._setSelectionRange=l._setSelectionRange=function(t,e,n){if(t.createTextRange){var r=t.createTextRange();r.collapse(!0),r.moveStart("character",-99999),r.moveStart("character",e),r.moveEnd("character",n-e),r.select()}}),a("dojo-bidi")&&(h=t("dijit.form.TextBox",h,{_setPlaceHolderAttr:function(t){this.inherited(arguments),this.applyTextDir(this._phspan)}})),h}),define("dojo/_base/Color",["./kernel","./lang","./array","./config"],function(t,e,n,r){var i=t.Color=function(t){t&&this.setColor(t)};return i.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:r.transparentColor||[0,0,0,0]},e.extend(i,{r:255,g:255,b:255,a:1,_set:function(t,e,n,r){var i=this;i.r=t,i.g=e,i.b=n,i.a=r},setColor:function(t){return e.isString(t)?i.fromString(t,this):e.isArray(t)?i.fromArray(t,this):(this._set(t.r,t.g,t.b,t.a),t instanceof i||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){var t=this;return[t.r,t.g,t.b]},toRgba:function(){var t=this;return[t.r,t.g,t.b,t.a]},toHex:function(){return"#"+n.map(["r","g","b"],function(t){var e=this[t].toString(16);return e.length<2?"0"+e:e},this).join("")},toCss:function(t){var e=this,n=e.r+", "+e.g+", "+e.b;return(t?"rgba("+n+", "+e.a:"rgb("+n)+")"},toString:function(){return this.toCss(!0)}}),i.blendColors=t.blendColors=function(t,e,r,o){var a=o||new i;return n.forEach(["r","g","b","a"],function(n){a[n]=t[n]+(e[n]-t[n])*r,"a"!=n&&(a[n]=Math.round(a[n]))}),a.sanitize()},i.fromRgb=t.colorFromRgb=function(t,e){var n=t.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return n&&i.fromArray(n[1].split(/\s*,\s*/),e)},i.fromHex=t.colorFromHex=function(t,e){var r=e||new i,o=4==t.length?4:8,a=(1<<o)-1;return t=Number("0x"+t.substr(1)),isNaN(t)?null:(n.forEach(["b","g","r"],function(e){var n=t&a;t>>=o,r[e]=4==o?17*n:n}),r.a=1,r)},i.fromArray=t.colorFromArray=function(t,e){var n=e||new i;return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n.sanitize()},i.fromString=t.colorFromString=function(t,e){var n=i.named[t];return n&&i.fromArray(n,e)||i.fromRgb(t,e)||i.fromHex(t,e)},i}),define("dojo/_base/fx",["./kernel","./config","./lang","../Evented","./Color","../aspect","../sniff","../dom","../dom-style"],function(t,e,n,r,i,o,a,s,l){var u=n.mixin,c={},h=c._Line=function(t,e){this.start=t,this.end=e};h.prototype.getValue=function(t){return(this.end-this.start)*t+this.start};var d=c.Animation=function(t){u(this,t),n.isArray(this.curve)&&(this.curve=new h(this.curve[0],this.curve[1]))};d.prototype=new r,n.extend(d,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var t=this._percent,e=this.easing;return e?e(t):t},_fire:function(t,n){var r=n||[];if(this[t])if(e.debugAtAllCosts)this[t].apply(this,r);else try{this[t].apply(this,r)}catch(e){console.error("exception in animation handler for:",t),console.error(e)}return this},play:function(t,e){var r=this;if(r._delayTimer&&r._clearTimer(),e)r._stopTimer(),r._active=r._paused=!1,r._percent=0;else if(r._active&&!r._paused)return r;r._fire("beforeBegin",[r.node]);var i=t||r.delay,o=n.hitch(r,"_play",e);return i>0?(r._delayTimer=setTimeout(o,i),r):(o(),r)},_play:function(t){var e=this;e._delayTimer&&e._clearTimer(),e._startTime=(new Date).valueOf(),e._paused&&(e._startTime-=e.duration*e._percent),e._active=!0,e._paused=!1;var n=e.curve.getValue(e._getStep());return e._percent||(e._startRepeatCount||(e._startRepeatCount=e.repeat),e._fire("onBegin",[n])),e._fire("onPlay",[n]),e._cycle(),e},pause:function(){var t=this;return t._delayTimer&&t._clearTimer(),t._stopTimer(),t._active?(t._paused=!0,t._fire("onPause",[t.curve.getValue(t._getStep())]),t):t},gotoPercent:function(t,e){var n=this;return n._stopTimer(),n._active=n._paused=!0,n._percent=t,e&&n.play(),n},stop:function(t){var e=this;return e._delayTimer&&e._clearTimer(),e._timer?(e._stopTimer(),t&&(e._percent=1),e._fire("onStop",[e.curve.getValue(e._getStep())]),e._active=e._paused=!1,e):e},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){var t=this;if(t._active){var e=(new Date).valueOf(),n=0===t.duration?1:(e-t._startTime)/t.duration;n>=1&&(n=1),t._percent=n,t.easing&&(n=t.easing(n)),t._fire("onAnimate",[t.curve.getValue(n)]),t._percent<1?t._startTimer():(t._active=!1,t.repeat>0?(t.repeat--,t.play(null,!0)):-1==t.repeat?t.play(null,!0):t._startRepeatCount&&(t.repeat=t._startRepeatCount,t._startRepeatCount=0),t._percent=0,t._fire("onEnd",[t.node]),!t.repeat&&t._stopTimer())}return t},_clearTimer:function(){clearTimeout(this._delayTimer),delete this._delayTimer}});var f=0,p=null,m={run:function(){}};n.extend(d,{_startTimer:function(){this._timer||(this._timer=o.after(m,"run",n.hitch(this,"_cycle"),!0),f++),p||(p=setInterval(n.hitch(m,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,f--),f<=0&&(clearInterval(p),p=null,f=0)}});var g=a("ie")?function(t){var e=t.style;e.width.length||"auto"!=l.get(t,"width")||(e.width="auto")}:function(){};c._fade=function(t){t.node=s.byId(t.node);var e=u({properties:{}},t),r=e.properties.opacity={};r.start="start"in e?e.start:function(){return+l.get(e.node,"opacity")||0},r.end=e.end;var i=c.animateProperty(e);return o.after(i,"beforeBegin",n.partial(g,e.node),!0),i},c.fadeIn=function(t){return c._fade(u({end:1},t))},c.fadeOut=function(t){return c._fade(u({end:0},t))},c._defaultEasing=function(t){return.5+Math.sin((t+1.5)*Math.PI)/2};var y=function(t){this._properties=t;for(var e in t){var n=t[e];n.start instanceof i&&(n.tempColor=new i)}};return y.prototype.getValue=function(t){var e={};for(var r in this._properties){var o=this._properties[r],a=o.start;a instanceof i?e[r]=i.blendColors(a,o.end,t,o.tempColor).toCss():n.isArray(a)||(e[r]=(o.end-a)*t+a+("opacity"!=r?o.units||"px":0))}return e},c.animateProperty=function(e){var r=e.node=s.byId(e.node);e.easing||(e.easing=t._defaultEasing);var a=new d(e);return o.after(a,"beforeBegin",n.hitch(a,function(){function t(t,e){var n={height:t.offsetHeight,width:t.offsetWidth}[e];return void 0!==n?n:(n=l.get(t,e),"opacity"==e?+n:s?n:parseFloat(n))}var e={};for(var o in this.properties){"width"!=o&&"height"!=o||(this.node.display="block");var a=this.properties[o];n.isFunction(a)&&(a=a(r)),a=e[o]=u({},n.isObject(a)?a:{end:a}),n.isFunction(a.start)&&(a.start=a.start(r)),n.isFunction(a.end)&&(a.end=a.end(r));var s=o.toLowerCase().indexOf("color")>=0;"end"in a?"start"in a||(a.start=t(r,o)):a.end=t(r,o),s?(a.start=new i(a.start),a.end=new i(a.end)):a.start="opacity"==o?+a.start:parseFloat(a.start)}this.curve=new y(e)}),!0),o.after(a,"onAnimate",n.hitch(l,"set",a.node),!0),a},c.anim=function(t,e,n,r,i,o){return c.animateProperty({node:t,duration:n||d.prototype.duration,properties:e,easing:r,onEnd:i}).play(o||0)},a("extend-dojo")&&(u(t,c),t._Animation=d),c}),define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(t,e,n,r,i){var o={};return t.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(t){o[t]=r[t]}),n.mixin(o,{defaultDuration:e.defaultDuration||200}),
n.mixin(i,o),i}),define("dojo/text!dijit/templates/Tooltip.html",[],function(){return'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipConnector pentaho-tooltip-contents" data-dojo-attach-point="connectorNode"></div\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n'}),define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,m,g,y){var v=e("dijit._MasterTooltip",[f,p],{duration:h.defaultDuration,templateString:g,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.bgIframe=new m(this.domNode),this.fadeIn=n.fadeIn({node:this.domNode,duration:this.duration,onEnd:s.hitch(this,"_onShow")}),this.fadeOut=n.fadeOut({node:this.domNode,duration:this.duration,onEnd:s.hitch(this,"_onHide")})},show:function(t,e,n,r,i){if(!this.aroundNode||this.aroundNode!==e||this.containerNode.innerHTML!=t){if("playing"==this.fadeOut.status())return void(this._onDeck=arguments);this.containerNode.innerHTML=t,i&&this.set("textDir",i),this.containerNode.align=r?"right":"left";var o=d.around(this.domNode,e,n&&n.length?n:b.defaultPosition,!r,s.hitch(this,"orient")),l=o.aroundNodePos;"M"==o.corner.charAt(0)&&"M"==o.aroundCorner.charAt(0)?(this.connectorNode.style.top=l.y+(l.h-this.connectorNode.offsetHeight>>1)-o.y+"px",this.connectorNode.style.left=""):"M"==o.corner.charAt(1)&&"M"==o.aroundCorner.charAt(1)?this.connectorNode.style.left=l.x+(l.w-this.connectorNode.offsetWidth>>1)-o.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top=""),a.set(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=e}},orient:function(t,e,n,r,i){this.connectorNode.style.top="";var a=r.h,s=r.w;t.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[e+"-"+n],this.domNode.style.width="auto";var l=o.position(this.domNode);9==c("ie")&&(l.w+=2);var u=Math.min(Math.max(s,1),l.w);if(o.setMarginBox(this.domNode,{w:u}),"B"==n.charAt(0)&&"B"==e.charAt(0)){var h=o.position(t),d=this.connectorNode.offsetHeight;if(h.h>a){var f=a-(i.h+d>>1);this.connectorNode.style.top=f+"px",this.connectorNode.style.bottom=""}else this.connectorNode.style.bottom=Math.min(Math.max(i.h/2-d/2,0),h.h-d)+"px",this.connectorNode.style.top=""}else this.connectorNode.style.top="",this.connectorNode.style.bottom="";return Math.max(0,l.w-s)},_onShow:function(){c("ie")&&(this.domNode.style.filter="")},hide:function(t){this._onDeck&&this._onDeck[1]==t?this._onDeck=null:this.aroundNode===t&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play())},_onHide:function(){this.domNode.style.cssText="",this.containerNode.innerHTML="",this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});c("dojo-bidi")&&v.extend({_setAutoTextDir:function(e){this.applyTextDir(e),t.forEach(e.children,function(t){this._setAutoTextDir(t)},this)},_setTextDirAttr:function(t){this._set("textDir",t),"auto"==t?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}}),y.showTooltip=function(e,n,r,i,o){return r&&(r=t.map(r,function(t){return{after:"after-centered",before:"before-centered"}[t]||t})),b._masterTT||(y._masterTT=b._masterTT=new v),b._masterTT.show(e,n,r,i,o)},y.hideTooltip=function(t){return b._masterTT&&b._masterTT.hide(t)};var b=e("dijit.Tooltip",f,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(e){t.forEach(this._connections||[],function(e){t.forEach(e,function(t){t.remove()})},this),this._connectIds=t.filter(s.isArrayLike(e)?e:e?[e]:[],function(t){return r.byId(t,this.ownerDocument)},this),this._connections=t.map(this._connectIds,function(t){var e=r.byId(t,this.ownerDocument),n=this.selector,i=n?function(t){return u.selector(n,t)}:function(t){return t},o=this;return[u(e,i(l.enter),function(){o._onHover(this)}),u(e,i("focusin"),function(){o._onHover(this)}),u(e,i(l.leave),s.hitch(o,"_onUnHover")),u(e,i("focusout"),s.hitch(o,"_onUnHover"))]},this),this._set("connectId",e)},addTarget:function(e){var n=e.id||e;-1==t.indexOf(this._connectIds,n)&&this.set("connectId",this._connectIds.concat(n))},removeTarget:function(e){var n=e.id||e,r=t.indexOf(this._connectIds,n);r>=0&&(this._connectIds.splice(r,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments),i.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var e=this.connectId;t.forEach(s.isArrayLike(e)?e:[e],this.addTarget,this)},getContent:function(t){return this.label||this.domNode.innerHTML},_onHover:function(t){this._showTimer||(this._showTimer=this.defer(function(){this.open(t)},this.showDelay))},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer),this.close()},open:function(t){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var e=this.getContent(t);e&&(b.show(e,t,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=t,this.onShow(t,this.position))},close:function(){this._connectNode&&(b.hide(this._connectNode),delete this._connectNode,this.onHide()),this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close(),t.forEach(this._connections||[],function(e){t.forEach(e,function(t){t.remove()})},this),this.inherited(arguments)}});return b._MasterTooltip=v,b.show=y.showTooltip,b.hide=y.hideTooltip,b.defaultPosition=["after-centered","before-centered"],b}),define("dojo/text!dijit/form/templates/ValidationTextBox.html",[],function(){return'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n'}),define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(t,e,n,r,i,o){var a;return a=t("dijit.form.ValidationTextBox",r,{templateString:o,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(t,n){n!=a.prototype[t]&&(e.deprecated("ValidationTextBox id="+this.id+", set('"+t+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",n))},_setRegExpGenAttr:function(t){this._deprecateRegExp("regExpGen",t),this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(t){this._deprecateRegExp("regExp",t)},_setValueAttr:function(){this.inherited(arguments),this._refreshState()},validator:function(t,e){return new RegExp("^(?:"+this._computeRegexp(e)+")"+(this.required?"":"?")+"$").test(t)&&(!this.required||!this._isEmpty(t))&&(this._isEmpty(t)||void 0!==this.parse(t,e))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(t){return(this.trim?/^\s*$/:/^$/).test(t)},getErrorMessage:function(){var t="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,e="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:t;return this.required&&this._isEmpty(this.textbox.value)?e:t},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(t){var e="",n=this.disabled||this.isValid(t);n&&(this._maskValidSubsetError=!0);var r=this._isEmpty(this.textbox.value),i=!n&&t&&this._isValidSubset();return this._set("state",n?"":((!this._hasBeenBlurred||t)&&r||i)&&(this._maskValidSubsetError||i&&!this._hasBeenBlurred&&t)?"Incomplete":"Error"),this.focusNode.setAttribute("aria-invalid",n?"false":"true"),"Error"==this.state?(this._maskValidSubsetError=t&&i,e=this.getErrorMessage(t)):"Incomplete"==this.state?(e=this.getPromptMessage(t),this._maskValidSubsetError=!this._hasBeenBlurred||t):r&&(e=this.getPromptMessage(t)),this.set("message",e),n},displayMessage:function(t){t&&this.focused?i.show(t,this.domNode,this.tooltipPosition,!this.isLeftToRight()):i.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused),this.inherited(arguments)},constructor:function(t){this.constraints={},this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments),this._refreshState()},_setConstraintsAttr:function(t){!t.locale&&this.lang&&(t.locale=this.lang),this._set("constraints",t),this._refreshState()},_setPatternAttr:function(t){this._set("pattern",t),this._refreshState()},_computeRegexp:function(t){var e=this.pattern;if("function"==typeof e&&(e=e.call(this,t)),e!=this._lastRegExp){var n="";this._lastRegExp=e,".*"!=e&&e.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(t){switch(t.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":n+=t;break;case")":n+="|$)";break;default:n+="(?:"+t+"|$)"}});try{"".search(n)}catch(t){n=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+n+")$"}return e},postMixInProperties:function(){this.inherited(arguments),this.messages=n.getLocalization("dijit.form","validate",this.lang),this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(t){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(t){this._set("required",t),this.focusNode.setAttribute("aria-required",t),this._refreshState()},_setMessageAttr:function(t){this._set("message",t),this.displayMessage(t)},reset:function(){this._maskValidSubsetError=!0,this.inherited(arguments)},_onBlur:function(){this.displayMessage(""),this.inherited(arguments)}})}),define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(t,e,n,r){return t("dijit.form.MappedTextBox",r,{postMixInProperties:function(){this.inherited(arguments),this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(t){return t.toString?t.toString():""},toString:function(){var t=this.filter(this.get("value"));return null!=t?"string"==typeof t?t:this.serialize(t,this.constraints):""},validate:function(){return this.valueNode.value=this.toString(),this.inherited(arguments)},buildRendering:function(){this.inherited(arguments),this.valueNode=n.place("<input type='hidden'"+(this.name&&!e("msapp")?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="",this.inherited(arguments)}})}),define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(t,e,n){return t("dijit.form.RangeBoundTextBox",n,{rangeMessage:"",rangeCheck:function(t,e){return!("min"in e&&!(this.compare(t,e.min)>=0)||"max"in e&&!(this.compare(t,e.max)<=0))},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var t=this.get("value");if(null==t)return!1;var e=!1;if("min"in this.constraints){var n=this.constraints.min;e=this.compare(t,"number"==typeof n&&n>=0&&0!=t?0:n)<0}if(!e&&"max"in this.constraints){var r=this.constraints.max;e=this.compare(t,"number"!=typeof r||r>0?r:0)>0}return e},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(t){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(t))},getErrorMessage:function(t){var e=this.get("value");return null==e||""===e||"number"==typeof e&&isNaN(e)||this.isInRange(t)?this.inherited(arguments):this.rangeMessage},postMixInProperties:function(){this.inherited(arguments),this.rangeMessage||(this.messages=e.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage)}})}),define("dojo/text!dijit/form/templates/DropDownBox.html",[],function(){return'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n'}),define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(t,e,n,r,i,o,a,s){return new Date("X"),r("dijit.form._DateTimeTextBox",[o,a],{templateString:s,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:e.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments),this._set("type","text")},compare:function(e,n){var r=this._isInvalidDate(e),i=this._isInvalidDate(n);return r?i?0:-1:i?1:t.compare(e,n,this._selector)},autoWidth:!0,format:function(t,e){return t?this.dateLocaleModule.format(t,e):""},parse:function(t,e){return this.dateLocaleModule.parse(t,e)||(this._isEmpty(t)?null:void 0)},serialize:function(t,e){return t.toGregorian&&(t=t.toGregorian()),n.toISOString(t,e)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(n){this.dateModule=n.datePackage?i.getObject(n.datePackage,!1):t,this.dateClassObj=this.dateModule.Date||Date,this.dateLocaleModule=n.datePackage?i.getObject(n.datePackage+".locale",!1):e,this._set("pattern",this.dateLocaleModule.regexp),this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments),this.hasDownArrow||(this._buttonNode.style.display="none"),this.hasDownArrow||(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(t){t.selector=this._selector,t.fullYear=!0;var e=n.fromISOString;"string"==typeof t.min&&(t.min=e(t.min)),"string"==typeof t.max&&(t.max=e(t.max)),this.inherited(arguments)},_isInvalidDate:function(t){return!t||isNaN(t)||"object"!=typeof t||t.toString()==this._invalidDate},_setValueAttr:function(t,e,r){void 0!==t&&("string"==typeof t&&(t=n.fromISOString(t)),this._isInvalidDate(t)&&(t=null),t instanceof Date&&!(this.dateClassObj instanceof Date)&&(t=new this.dateClassObj(t))),this.inherited(arguments),this.value instanceof Date&&(this.filterString=""),this.dropDown&&this.dropDown.set("value",t,!1)},_set:function(t,e){var n=this._get("value");"value"==t&&n instanceof Date&&0==this.compare(e,n)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(t){this._isInvalidDate(t)&&(t=new this.dateClassObj),this._set("dropDownDefaultValue",t)},openDropDown:function(t){this.dropDown&&this.dropDown.destroy();var e=i.isString(this.popupClass)?i.getObject(this.popupClass,!1):this.popupClass,n=this,r=this.get("value");this.dropDown=new e({onChange:function(t){n.set("value",t,!0)},id:this.id+"_popup",dir:n.dir,lang:n.lang,value:r,textDir:n.textDir,currentFocus:this._isInvalidDate(r)?this.dropDownDefaultValue:r,constraints:n.constraints,filterString:n.filterString,datePackage:n.params.datePackage,isDisabledDate:function(t){return!n.rangeCheck(t,n.constraints)}}),this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(t,e){this._setValueAttr(this.parse(t,this.constraints),e,t)}})}),define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(t,e,n){return t("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:e,_selector:"date",maxHeight:1/0,value:new Date("")})}),define("common-ui/prompting/components/DojoDateTextBoxComponent",["cdf/components/BaseComponent","dojo/date/locale","dijit/form/DateTextBox","dijit/registry","amd!cdf/lib/jquery.ui","css!./theme/DojoDateTextBoxComponent.css"],function(t,e,n,r,i){return t.extend({localeFormatter:e,clear:function(){this.onChangeHandle&&this.onChangeHandle.remove();var t=r.byId(this.dijitId);t&&t.destroyRecursive()},_parseDate:function(t){return this.transportFormatter?this.transportFormatter.parse(t):this.localeFormatter.parse(t,{datePattern:this.dateFormat,selector:"date"})},update:function(){void 0==this.dijitId&&(this.dijitId=this.htmlObject+"_input"),this.clear();var t=this,e=this.dashboard.getParameterValue(this.parameter),r=void 0;this._isLegacyDateFormat()&&this._convertFormat(),e?(i.isArray(e)&&(e=0==e.length?void 0:1==e.length?e[0]:e),r=e?this._parseDate(e):null):r=null,i("#"+this.htmlObject).html(i("<input/>").attr("id",this.dijitId));var o={datePattern:this._getDateFormat(),selector:"date",formatLength:"medium"};"TODAY"==t.startDate?o.min=new Date:t.startDate&&(o.min=this._parseDate(t.startDate)),"TODAY"==t.endDate?o.max=new Date:t.endDate&&(o.max=this._parseDate(t.endDate));var a=new n({name:this.name,constraints:o,onChange:function(){t.dashboard.processChange(t.name)}},this.dijitId);this._getDateFormat().match(/(^|(?!y).)(y{2}(?!y))/)&&(a.constraints.fullYear=!1),a.set("value",r),this._doAutoFocus()},getValue:function(){var t=r.byId(this.dijitId).get("value");return this._getFormattedDate(t)},_getFormattedDate:function(t){return this.transportFormatter?this.transportFormatter.format(t):this.localeFormatter.format(t,{datePattern:this._getDateFormat(),selector:"date"})},_isLegacyDateFormat:function(){var t,e=this._getDateFormat();if(e.match(/o/))return!0;try{t=this.localeFormatter.format(new Date,{datePattern:e,selector:"date"})}catch(t){return!0}return!e.match(/(G|qQ|w|E|a|h|H|K|k|s|S|vz|Z)/)&&t==i.datepicker.formatDate(e,new Date)},_convertFormat:function(){var t=this;t.dateFormat=this._getDateFormat();var e=[[/(^|(?!y).)(y{1}(?!y))/,"$1yy"],[/(^|(?!y).)(y{2}(?!y))/,"$1yyyy"]],n=[[/(^|(?!M).)(M{1}(?!M))/,"$1MMM"],[/(^|(?!M).)(M{2}(?!M))/,"$1MMMM"]],r=[[/(^|(?!m).)(m{1}(?!m))/,"$1M"],[/(^|(?!m).)(m{2}(?!m))/,"$1MM"]],o=[[/(^|(?!D).)(D{1}(?!D))/,"$1EEE"],[/(^|(?!D).)(D{2}(?!D))/,"$1EEEE"]],a=[[/(^|(?!o).)(o{1}(?!o))/,"$1D"],[/(^|(?!o).)(o{2}(?!o))/,"$1DD"],[/(^|(?!o).)(o{3}(?!o))/,"$1DDD"]],s=function(e,n){if(n[0].test(t.dateFormat))return t.dateFormat=t.dateFormat.replace(n[0],n[1]),!1};i.each(e,s),i.each(n,s),i.each(r,s),i.each(o,s),i.each(a,s)},_getDateFormat:function(){return this.dateFormat?this.dateFormat:this.param&&this.param.attributes["data-format"]?this.param.attributes["data-format"]:"yyyy-MM-dd"}})});var jsonDebug=!1,trace=null;define("dashboards/pentaho-json",function(){}),define("dashboards/pentaho-dashboard-controller",["cdf/components/BaseComponent","cdf/Dashboard.Clean","amd!cdf/lib/backbone","cdf/components/SelectComponent","cdf/components/SelectMultiComponent","cdf/components/RadioComponent","cdf/components/CheckComponent","cdf/components/MultiButtonComponent","cdf/components/TextInputComponent","common-ui/prompting/components/DojoDateTextBoxComponent","amd!cdf/lib/jquery.blockUI","dashboards/oss-module","dashboards/pentaho-json"],function(BaseComponent,CdfDashboard,Backbone,SelectComponent,SelectMultiComponent,RadioComponent,CheckComponent,MultiButtonComponent,TextInputComponent,DojoDateTextBoxComponent,$){function isInMobile(){return"undefined"!=typeof inMobile&&!0===inMobile}function getScrollWidth(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var r=n.offsetWidth;return t.parentNode.removeChild(t),e-r}function getHead(t){return t.getElementsByTagName("head").item(0)}function getBase(t){return getHead(t).getElementsByTagName("base").item(0)}function getBaseUri(t){var e=t.document,n=getBase(e);return n?n.href:e.baseURI?e.baseURI:t.location.href}function getUriParts(t){var e=/^((\w+):\/\/([^\/:]+)(:[^\/]+)?)?(\/?([^\/\?#]+\/)+)?([^\/\?#]+)?(\?[^#]*)?(#.+)?$/,n=e.exec(t);if(n[5]){var r=n[5].split("/");n[5]=[];for(var i=0,o=r.length;i<o;i++)n[5][i]=decodeURIComponent(r[i])}if(n[8]){var a,s=n[8].substr(1).split("&");n[8]={};for(var i=0,o=s.length;i<o;i++)a=s[i].split("="),n[8][a[0]]=a.length>1?decodeURIComponent(a[1]):""}return{protocol:n[2],host:n[3],port:n[4]?parseInt(n[4].substr(1),10):null,path:n[5],resource:n[7],query:n[8],hash:n[9]}}function getStylesheetAsCssText(t){var e="";if(t.cssText)e=t.cssText;else{var n,r,i,o=t.cssRules||t.rules,a=o.length;for(n=0;n<a;n++)r=o.item(n),i=r.cssText,-1===i.indexOf("@import")?e+="\n"+i:e+=getStylesheetAsCssText(r.styleSheet,styles,usedStyles)}return e}function getStyles(t,e,n){var r,i,o,a,s,l,u=t.document,c=u.styleSheets,h=c.length,d=getBaseUri(t),f=getUriParts(d);for(rewriteBaseUri(f),i=0;i<h;i++)if(r=c.item(i),"text/css"===r.type&&!r.disabled){var l=r.href;if(l){var p=r.ownerNode||r.owningElement;if(p&&"stylesheet"!==p.rel)continue;if(l=makeAbsoluteUris(l,f),e[l])continue;e[l]=l}else{var a,o=getStylesheetAsCssText(r),s=n.length,m=!0;for(a=0;a<s;a++)if(n[a]===o){m=!1;break}m&&n.push(o)}}}function restoreStyles(t,e){var n,r,i="",o=e.length,a=0,s='<style type="text/css">';for(n=0;n<o;n++)i+="\n"+e[n];i=s+i+"</style>",i+=s;for(r in t)n=r.indexOf(CONTEXT_PATH),-1===n?console&&console.log&&console.log("unrewriteable uri: "+r):(r=r.substr(n+CONTEXT_PATH.length),r=FULL_QUALIFIED_URL+r),a++,30===a&&(i+="</style>"+s,a=0),i+="\n@import url("+r+");";return i+="</style>"}function stripLink(t){return stripTags(t,"link")}function stripStyle(t){return stripTags(t,"style")}function stripScript(t){return stripTags(t,"script")}function stripObject(t){return stripTags(t,"object")}function stripMeta(t){return stripTags(t,"meta")}function stripTitle(t){return stripTags(t,"title")}function stripAll(t){return t=stripScript(t),t=stripObject(t),t=stripLink(t),t=stripStyle(t),t=stripImages(t)}function stripTags(t,e){for(var n,r,i,o,a,s,l=t.toUpperCase(),u=e.toUpperCase(),c="</"+u+">",h=c.length;;){if(-1===(n=l.indexOf("<"+u)))break;i=t.substr(0,n),o=t.substr(n),a=l.substr(n),r=a.indexOf(c),-1===r?(s=a.indexOf(">"),t=i+o.substr(s+1),l=i+a.substr(s+1)):(t=i+o.substr(r+h),l=i+a.substr(r+h))}return t}function stripImages(t){for(var e,n,r=/src=("[^"]*"|'[^']*')/gim;n=r.exec(t);){e=n[1],e=e.substr(1,e.length-2);var i=/^\s*data:/;i.test(e)||(i=/\/getImage/,i.test(e)||(t=t.replace(e,"")))}return t}function rewriteBaseUri(t){var e,n,r,i=FULL_QUALIFIED_URL,o=t.path,a=o?o.length:0;for(e=getUriParts(i),n=e.path,""===n[n.length-1]&&(n=n.slice(0,n.length-1)),t.protocol=e.protocol,t.port=e.port,r=0;r<a;r++)if("content"===o[r]){t.path=e.path.concat(o.slice(r));break}}function makeAbsoluteUris(t,e){try{var n,r,i,o,a=/\s+(src|href)=(('[^']*')|("[^"]*"))/gi,s=e.path,l=s?s.length:0,u=[],c=e.protocol+"://"+e.host+(e.port?":"+e.port:"");for(i=0;i<l;i++)u.push(encodeURIComponent(s[i]));for(o=c+u.join("/");n=a.exec(t);)if(""!==(r=n[2].substr(1,n[2].length-2))&&"#"!==r&&0!==r.indexOf("data:")&&(uriParts=getUriParts(r),!uriParts.protocol)){r=(r.indexOf("/")?o:c)+r;var h=n[2].charAt(0);r=" "+n[1]+"="+h+r+h,t=t.substr(0,n.index)+r+t.substr(n.index+n[0].length),a.lastIndex=n.index+r.length}for(a=/\b:\s*url\((('[^']*')|("[^"]*"))\)/gi;n=a.exec(t);)if("''"!==n[2]&&'""'!==n[3]&&(r=n[1].substr(1,n[1].length-2),uriParts=getUriParts(r),!uriParts.protocol)){r=(r.indexOf("/")?o:c)+r;var h=n[1].charAt(0);r=":url("+h+r+h+")",t=t.substr(0,n.index)+r+t.substr(n.index+n[0].length),a.lastIndex=n.index+r.length}}catch(t){}return t}var cdfDashboard,DASHBOARD_DESIGNER_APP_ID="pentaho-dashboards";currentWidget=null,"undefined"==typeof printVisible&&(printVisible=!1),isRunningIFrameInSameOrigin=null;try{var ignoredCheckCanReachOutToTop=window.top.mantle_initialized;isRunningIFrameInSameOrigin=!0}catch(t){isRunningIFrameInSameOrigin=!1}mantle_enabled=!1;try{mantle_enabled=null!=window.parent&&1==window.parent.mantle_initialized}catch(t){}"undefined"==typeof pho&&(pho={}),void 0===pho.dashboards&&(pho.dashboards={}),pho.dashboards.waitCursorTimerId=null,pho.dashboards.enableWaitCursor=function(t){t?(document.body.style.cursor="wait",clearTimeout(pho.dashboards.waitCursorTimerId),pho.dashboards.waitCursorTimerId=setTimeout('document.body.style.cursor = "default"',3e4)):(document.body.style.cursor="default",clearTimeout(pho.dashboards.waitCursorTimerId))},window.refreshSolution=function(){mantle_enabled&&window.refreshRequired&&(window.parent.mantle_refreshRepository(),refreshRequired=!1,pho.dashboards.enableWaitCursor(!1))};var editContentToggledListeners=[];return pho.dashboards.addEditContentToggledListener=function(t){editContentToggledListeners.push(t)},pho.dashboards.removeEditContentToggledListener=function(t){for(var e=0;e<editContentToggledListeners.length;e++)if(editContentToggledListeners[e]==t)return void editContentToggledListeners.splice(e,1)},getRectangle=function(t,e){var n={x:0,y:0,width:0,height:0};for(n.width+=t.offsetWidth,n.height+=t.offsetHeight;t&&"BODY"!==t.tagName&&t!==e;)n.x+=parseInt(t.offsetLeft),n.y+=parseInt(t.offsetTop),n.y-=parseInt(t.scrollTop),n.x-=parseInt(t.scrollLeft),t=t.parentNode;return n},pentahoDashboardEditor=null,ResizeHandleCache={},PentahoDashboardController=function(){this.widgets=new Array,this.windowWidth=0,this.windowHeight=0,this.clientWidth=0,this.clientHeight=0,this.widgetAreaTop=0,this.widgetAreaLeft=0,this.widgetAreaWidth=0,this.widgetAreaHeight=0,this.dashboardSettings={},this.elementSettings={},this.cdfDashboard=new CdfDashboard,this.dashboard=null,this.templateXul=null,this.adjustForWidgetAreaScroll=!0,this.initialResizeDone=!1,this.objectProperties={},this.maximizedId=null,this.maximizedBoxes=null,this.initialExpand=!0,this.scrollWidth=0,this._glassPaneCallbackRegistration=null,this._parentGlassPaneCallbackRegistration=null,this._parentChartEditorGlassPaneCallbackRegistration=null,this._handlerRegistration=null,cdfDashboard=this.cdfDashboard,this.initRefreshEngine=function(){this.setGlobalRefresh(this.getGlobalRefresh()),this.cdfDashboard.refreshEngine.processComponents()},this.setGlobalParameter=function(t,e,n){var r;for(r=0;r<this.widgets.length;r++)if(this.widgets[r].isParam&&this.widgets[r].isParam(e)){var i=this.widgets[r].setParameter(t,e,n);i&&this.widgets[r].update()}},this.povPanelDisplay=function(t){xulDomJson.window.items;this.setXulDomProperty("FilterPanel","hidden",""+!t),this.initialExpand=!1,this.resizeDashboard(!0),highlightWidgetArea(t?"FilterPanel":null)},this.isPovPanelShown=function(){var t=this.findXulItemById("FilterPanel",xulDomJson.window.items);if(null==t)return!0;var e=t.properties.hidden;return""+e=="undefined"||"false"==e},this.resizeTimer=null,this.resizeDashboard=function(t){this.resizeTimer&&clearTimeout(this.resizeTimer);var e,n,r=document.getElementById("FilterPanel");this.isPovPanelShown()?(e="block",n="false"):(e="none",n="true"),r.style.display=e,this.setXulDomProperty("FilterPanel","hidden",n),this.resizeTimer=setTimeout("pentahoDashboardController.innerResizeFunction("+t+")",document.all?100:1)},this.innerResizeFunction=function(t){var e,n,r=this.windowHeight,i=this.windowWidth,o=this.dashboardSettings,a=o.dashboardMarginLeft,s=o.dashboardMarginRight,l=o.dashboardMarginTop,u=o.dashboardMarginBottom;if(isInMobile())try{for(var c=window.parent.document.getElementsByTagName("IFRAME"),h=0;h<c.length;h++)if(c[h].contentWindow==window){var d=c[h];n=parseInt(d.getAttribute("width")),n=n||d.clientWidth,e=parseInt(d.getAttribute("height")),e=e||d.clientHeight}}catch(t){}else{try{n=window.innerWidth,e=window.innerHeight}catch(t){}if("number"!=typeof n||isNaN(n))try{var f=document.documentElement;f=f.offsetHeight?f:document.body,n=f.offsetWidth,e=f.offsetHeight}catch(t){}}if(0==n&&0==e&&(n=i,e=r),this.windowWidth=n,this.windowHeight=e,this.clientWidth=n-a-s,this.clientHeight=e-l-u,xulDomJson){var p=xulDomJson.window,m=p.items;if(this.resizeList(p,m,!0,this.clientWidth,this.clientHeight,a,l,null),this.resizeTimer=null,pentahoDashboardEditor)try{pentahoDashboardEditor.resize(t)}catch(t){}window.highlightedWidget&&highlightWidgetArea(window.highlightedWidget),this.setEditLabelVisibility(editEnabled),this.resizeAllWidgets(),this.initialResizeDone=!0}},this.resizeList=function(t,e,n,r,i,o,a,s){var l,u,c,h,d=0,f=0,p=0,m=e.length,g=r;for(l=0;l<m;l++){u=e[l];for(c in u)break;h=u[c].properties,"true"!==h.hidden&&(h.flex&&(d+=h.flex),h.width&&(p+=h.width),h.height&&(f+=h.height))}var y,v,b,_,w,x,C,S,k,D,M,N,T=(n?i-f:r-p)/d,A=0,P=0,j=0,O=0,I=0,E=0,L=this.maximizedBoxes,R=null==L?0:L.length;for(l=0;l<m;l++){u=e[l];for(c in u)break;if(u=u[c],h=u.properties,v=h.hidden,y=h.id,b=h.type,this.scrollWidth||(this.scrollWidth=getScrollWidth()?getScrollWidth():15),r=g,"titlebar"!=y&&"widget-area"!=y&&(r=g-this.scrollWidth),_=0,w=0,x=0,C=0,S=0,k=30,"true"===v||s)this.setItemVisibility(y,!1);else{for(_=h.flex?T*h.flex:n?h.height:h.width,n?(S=_,C=r,w=0,x=A):(S=i,C=_,w=A,x=0),this.objectProperties[y]={left:w,top:x,width:C,height:S},P=0,j=0,O=0,I=0,E=0,(D=this.getElementSettings(c+(b&&""!==b?"-"+b:"")))&&(D.padding&&(P=D.padding),D["padding-top"]&&(j=D["padding-top"]+P),D["padding-bottom"]&&(O=D["padding-bottom"]+P),D["padding-left"]&&(E=D["padding-left"]+P),D["padding-right"]&&(I=D["padding-right"]+P)),!this.overlayMode||"widget-area"!==y&&"titlebar"!==y||(I+=this.overlaySizeRight,E+=this.overlaySizeLeft,O+=this.overlaySizeBottom,j+=this.overlaySizeTop),C=C-E-I,S=S-j-O,N=0;N<R;N++)M=L[N],M.id===y&&(w=M.maxleft,x=M.maxtop,C=M.maxwidth,S=M.maxheight,k=40,N>0?(E=0,j=0):(C=C-E-E,S=S-j-j));this.resizeItem(y,c,b,w,x,C,S,E,j,k);var F=l+1;if(pentahoDashboardEditor&&F<m&&("vbox"==c||"hbox"==c||"box"==c&&"FilterPanel"==y||0==y.indexOf("Panel"))){F=e[l+1];var B;for(B in F)break;var H=y+"|"+F[B].properties.id;ResizeHandleCache[H]?ResizeHandleCache[H].update():ResizeHandleCache[H]=new ResizeHandle(n,t,e[l],F,w+E,x+j,C,S,o,a)}"widget-area"===y&&(this.adjustForWidgetAreaScroll&&!this.overlayMode&&(C-=0),this.widgetAreaTop=x,this.widgetAreaLeft=w,this.widgetAreaWidth=C,this.widgetAreaHeight=S),"vbox"!==c&&"hbox"!==c||this.resizeList(u,u.items,"vbox"===c,C,S,w,x,!1),A+=_}}},this.overlaySizeTop=6,this.overlaySizeLeft=6,this.overlaySizeRight=6,this.overlaySizeBottom=32,this.setOverlayMode=function(t){this.overlayMode=t},this.clearResizeCache=function(){ResizeHandleCache={},$(".resizeHandle").remove()},
this.findXulItemById=function(t,e){e||(e=xulDomJson.window.items);var n,r,i,o=e.length;for(n=0;n<o;n++){r=e[n];for(i in r){if(i=r[i],i.properties&&i.properties.id===t)return i;if((i=i.items)&&(i=this.findXulItemById(t,i)))return i}}return null},this.getXulDomProperty=function(t,e){var n=this.findXulItemById(t);if(n)return n.properties[e]},this.setXulDomProperty=function(t,e,n){var r=this.findXulItemById(t);r&&(r.properties[e]=n)},this.getElementSettings=function(t){try{return this.elementSettings[t]}catch(t){return null}},this.setItemVisibility=function(t,e){var n;(n=document.getElementById(t))&&(n.style.display=1==e?"block":"none")},this.resizeItem=function(t,e,n,r,i,o,a,s,l,u){o=Math.abs(o),a=Math.abs(a);var c;c=n&&""!=n?e+"-"+n:e;var h=document.getElementById(t);if(h){var d=this.getElementSettings(c);h.style.left&&r+s>=0&&(h.style.left=r+s+"px"),h.style.top&&i+l>=0&&(h.style.top=i+l+"px"),h.style.width&&o>=0&&(h.style.width=o+"px"),h.style.height&&a>=0&&(h.style.height=a+"px"),h.style.zIndex&&u>=0&&(h.style.zIndex=""+u);var f="content-area-"+t,h=document.getElementById(f);if(h){var p=0,m=0,g=0;d&&(void 0!==d.offsetRight&&(p=d.offsetRight),void 0!==d.offsetLeft&&(m=d.offsetLeft),void 0!==d.offsetTop&&(g=d.offsetTop),void 0!==d.offsetBottom&&d.offsetBottom);var y=Math.abs(o-p-m),v=Math.abs(a),b=document.getElementById("wgtHead-"+t),_=document.getElementById("wgtFooter-"+t),w=b?b.offsetHeight:0;0==w&&(w=g);var x=_?_.offsetHeight:0,C=v-w-x,S=document.getElementById("dataContainer-"+t);"undefined"!=h.style.top&&(h.style.top=g+"px"),"undefined"!=h.style.left&&(h.style.left=m+"px"),"undefined"!=h.style.width&&y>=0&&(h.style.width=y+"px"),"undefined"!=h.style.height&&C>=0&&(h.style.height=C+"px",S&&(S.style.height=C+"px"))}}},this.selectedWidget=-1;var selectedWidgetListeners=[];this.addWidgetSelectionListener=function(t){selectedWidgetListeners.push(t)},this.removeWidgetSelectionListener=function(t){for(var e=0;e<selectedWidgetListeners.length;e++)if(selectedWidgetListeners[e]==t)return void selectedWidgetListeners.splice(e,1)},this.setSelectedWidget=function(t){if(void 0!=t&&!isNaN(t)){this.selectedWidget=t;for(var e=0;e<selectedWidgetListeners.length;e++)selectedWidgetListeners[e].onChange(this.selectedWidget)}},this.getSelectedWidget=function(){return this.selectedWidget},this.panelTitleClick=function(t){if(pentahoDashboardEditor&&pentahoDashboardEditor.isEditPanelVisible()){var e;"FilterPanel"===t?e="povpanelitem":(t=t.substring("Panel_".length),e="widgetitem"+t,t="widget"+t),selectObjectList(e),showProperties(t)}},this.panelTitleDoubleClick=function(t){"FilterPanel"===t||pentahoDashboardEditor&&pentahoDashboardEditor.isEditPanelVisible()||this.toggleMaximizeWidget(t)},this.toggleFilterPanel=function(){var t=($("#FilterPanel"),$("#dataContainer-FilterPanel"),!this.getXulDomProperty("FilterPanel","collapsed")||"false"==this.getXulDomProperty("FilterPanel","collapsed"));this.initialExpand?this.initialExpand=!1:t&&(this.previousFilterPanelHeight=this.getXulDomProperty("FilterPanel","height")),this.setFilterPanelCollapsed(t)},this.setFilterPanelCollapsed=function(t){var e=($("#FilterPanel"),document.getElementById("dataContainer-FilterPanel"));if(t){e.style.display="none";var n=$("#wgtHead-FilterPanel"),r=$("#wgtFooter-FilterPanel");this.setXulDomProperty("FilterPanel","height",n.height()+r.height()),this.filterPanelCollapsed=!0,$("#filterArrow").addClass("collapsed"),this.setXulDomProperty("FilterPanel","collapsed","true")}else this.setXulDomProperty("FilterPanel","height",this.previousFilterPanelHeight||100),this.filterPanelCollapsed=!1,$("#filterArrow").removeClass("collapsed"),this.setXulDomProperty("FilterPanel","collapsed","false"),e.style.display="";this.resizeDashboard(!0)},this.setEditContentEnabled=function(t){this.setEditContentEnabledById(this.getSelectedWidget()+1,t)},this.setEditContentEnabledById=function(t,e){document.getElementById("edit-btn-Panel_"+t).className=e?"edit-btn":"edit-btn-disabled"},this.ignoreClickCount=1,this.cancelDropDownByClick=function(){0===this.ignoreClickCount&&this.cancelContentDropDown(),this.ignoreClickCount--},this.cancelContentDropDown=function(){var t=document.getElementById("content-menu");t&&(t.style.display="none")},this.showContentDropDown=function(t,e){var n,r,i,o=getRectangle(document.getElementById("widget-area")),a=o.width,s=o.height,l=document.getElementById("content-menu"),u=l.style,c=getRectangle(e),h=c.x,d=c.y,f=c.height,p=h,m=d+f;u.display="",n=getRectangle(l),r=n.width,i=n.height,m+i>s&&(m=d-i),p+r>a&&(p=a-r-20),u.left=p+"px",u.top=m+"px",l.contentWindow.notifyDashboardOfSize(),this.ignoreClickCount=1},this.setInsertContentSize=function(t,e){var n=document.getElementById("content-menu").style;n.width=t+"px",n.height=e+"px"};var widgetsWithToolbarShowing={};this.toggleEditToolbar=function(t){this.panelTitleClick(t);var e=parseInt(t.substring(t.length-1)),n="Panel_"+e,r=document.getElementById("content-area-toolbar-"+n),i=document.getElementById("content-area-"+n);if(widgetsWithToolbarShowing[""+e])this.hideEditToolbar(t);else{document.getElementById("toolbar-edit-btn-"+t).className="undefined"==typeof currentWidget||"xaction"!==currentWidget.type&&"empty"!==currentWidget.type?"edit-btn":"edit-btn-disabled",r.style.top=parseInt(i.style.top)+"px",r.style.height="40px",i.style.top=parseInt(i.style.top)+42+"px",i.style.height=parseInt(i.style.height)-42+"px",widgetsWithToolbarShowing[""+e]=trueXCC}},this.hideEditToolbar=function(t){},this.toggleMaximizeWidget=function(t){this.objectProperties[t]&&(this.maximizedId===t?(t=null,this.maximizedBoxes=null):this.maximizeWidget(t,this.getXulDomProperty(t,"type")),this.maximizedId=t,this.resizeDashboard(!0))},this.maximizeWidget=function(t,e){if(this.objectProperties[t]){for(var n,r=this.widgetAreaLeft,i=this.widgetAreaWidth,o=this.widgetAreaHeight,a=this.maximizedBoxes=[],s=document.getElementById(t);null!=s&&"widget-area"!==s.id;)n=s.style,a.push({id:s.id,top:n.top,left:n.left,width:n.width,height:n.height,zindex:n.zIndex,maxwidth:i,maxheight:o,maxtop:0,maxleft:r}),s=s.parentNode;if("widget-area"===s.id){var l,u,c=a.length;for(l=1;l<c;l++)u=a[l],null!==(s=document.getElementById(u.id))&&(n=s.style,n.zIndex=40,n.top="0px",n.left=r+"px",n.width=i+"px",n.height=o+"px")}}},this.createComponent=function(t){switch(t.type){case"AnalyzerComponent":return new window.AnalyzerComponent(t);case"PentahoChartComponent":return new PentahoChartComponent(t);case"PentahoPrptComponent":return new PentahoPrptComponent(t);case"PentahoGridComponent":return new PentahoGridComponent(t);case"PentahoUrlComponent":return new PentahoUrlComponent(t);case"DashboardXactionComponent":return new DashboardXactionComponent(t);case"select":return new SelectComponent(t);case"selectMultiComponent":return new SelectMultiComponent(t);case"radioComponent":return new RadioComponent(t);case"checkComponent":return new CheckComponent(t);case"multiButtonComponent":return new MultiButtonComponent(t);case"textInputComponent":return new TextInputComponent(t);case"dateInputComponent":return new DojoDateTextBoxComponent(t)}},this.addWidget=function(t){this.addComponents([t])},this.addWidgetAt=function(t,e){var n=this.createComponent(e);n&&this.addComponent(n,{index:t})},this.addComponent=function(t,e){t&&(this.cdfDashboard.removeComponent(t.name?t.name:t),this.cdfDashboard.addComponent(t,e))},this.addComponents=function(t){if(!$.isArray(t))return void("undefined"!=typeof console&&console.log("addComponents: components in a structure other than an array will not be added"));t.forEach(function(t){this.addComponent(t)},this)},this.removeWidgetAt=function(t){var e=this.cdfDashboard.components[t];if(e.parameter&&this.cdfDashboard.parameters[e.parameter]&&delete this.cdfDashboard.parameters[e.parameter],OutputParametersHelper.hasOutputParameters(e))for(var n=e.getOutputParameters(),r=0;r<n.length;r++){var i=n[r][OutputParametersHelper.OUT_PARAMS_ID_IDX];this.cdfDashboard.parameters[i]&&delete this.cdfDashboard.parameters[i]}this.unlinkComponent(e.getGUID?e.getGUID():e.GUID),this.removeLocalWidget(t),this.cdfDashboard.components.splice(t,1)},this.removeLocalWidget=function(t){dashboardWidgets.splice(this.getLocalWidgetId(this.cdfDashboard.components[t]),1)},this.getLocalWidgetId=function(t){var e,n;for(e=0;e<dashboardWidgets.length;++e)if((n=dashboardWidgets[e])&&n.name===t.name)return e;return-1},this.unlinkComponent=function(t){for(var e=0;e<this.cdfDashboard.components.length;e++){if($.isArray(this.cdfDashboard.components[e].listeners))for(var n=0;n<this.cdfDashboard.components[e].listeners.length;n++)if(OutputParametersHelper.isParameterFromComponent(this.cdfDashboard.components[e].listeners[n],t)){this.cdfDashboard.components[e].listeners.splice(n,1);break}if($.isArray(this.cdfDashboard.components[e].parameters))for(var n=0;n<this.cdfDashboard.components[e].parameters.length;n++)if(OutputParametersHelper.isParameterFromComponent(this.cdfDashboard.components[e].parameters[n][1],t)){var r=new Array(3);r[0]=this.cdfDashboard.components[e].parameters[n][0],r[1]="",r[2]="",this.cdfDashboard.components[e].parameters[n]=r}}},this.renameParameter=function(t,e){if(null!=t&&null!=e){for(var n=0;n<this.cdfDashboard.components.length;n++){if($.isArray(this.cdfDashboard.components[n].listeners))for(var r=0;r<this.cdfDashboard.components[n].listeners.length;r++)if(this.cdfDashboard.components[n].listeners[r]==t){this.cdfDashboard.components[n].listeners.splice(r,1,e);break}if($.isArray(this.cdfDashboard.components[n].parameters))for(var r=0;r<this.cdfDashboard.components[n].parameters[r];r++)this.cdfDashboard.components[n].parameters[r][1]==t&&(this.cdfDashboard.components[n].parameters[r][1]=e)}void 0!==this.cdfDashboard.parameters[t]&&(this.cdfDashboard.parameters[e]=this.cdfDashboard.parameters[t],delete this.cdfDashboard.parameters[t])}},this.setWidgetWithId=function(t,e){var n;for(n=0;n<this.widgets.length;n++){this.widgets[n].id==t&&(this.widgets[n]=e)}},this.getWidgetFromId=function(t){return this.cdfDashboard.getComponent(t)},this.getWidgetCount=function(){return this.cdfDashboard.components.length},this.getWidget=function(t){return t>=0&&t<this.cdfDashboard.components.length?this.cdfDashboard.components[t]:null},this.updateDashboardHeading=function(t){var e,n=this.dashboardSettings.titleContainerId;e=this.getDashboardHeading(),e?(void 0===t&&(t=!pho.dashboards.editMode),t&&(e=this.replaceParametersInDashboardHeading(e))):e="",$("#"+n).text(e)},this.glassPaneCallback={glassPaneShown:function(){pentahoDashboardEditor&&pentahoDashboardEditor.displayWidgetContents(!1)},glassPaneHidden:function(){pentahoDashboardEditor&&pentahoDashboardEditor.displayWidgetContents(!0)}};var editEnabled=!1;this.setEditEnabled=function(t){editEnabled!==t&&pentahoDashboardEditor&&pentahoDashboardEditor.toggleEditorPanel(t),this.setEditLabelVisibility(t),editEnabled=t,this.updateDashboardHeading(!t),this.replaceParametersInWidgetTitles(!t)},this.setEditLabelVisibility=function(t){var e=t?"":"none";$("div[class=editLabel]").each(function(){this.style.display=e})},this.addOnLoadScript=function(t){this.onloadFunctions||(this.onloadFunctions=[]),this.onloadFunctions.push(t)},this.printDashboard=function(){pentahoDashboardController.doPrint()},this.printWidget=function(t){var e=t.substr("Panel_".length),n=this.getWidgetFromId("widget"+e);if(n){if("function"==typeof n.print)try{var r=document.getElementById("panel-title-Panel_"+e).innerHTML;return void n.print(r)}catch(t){console&&console.log&&console.log(t)}}else console&&console.log&&console.log("Couldn't find component "+e);pentahoDashboardController.doPrint(e)},this.doPrint=function(t){var e,n,r,i=pentahoDashboardController.getDashboardHTML(t),o=window.open(""),a=o.document,s=window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/print";if(void 0===t)e=pentahoDashboardController.getDashboardHeading(),void 0!==window.innerWidth?(n=window.innerWidth+20,r=window.innerHeight+20):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(n=document.documentElement.clientWidth+20,r=document.documentElement.clientHeight+40):(n=document.body.clientWidth+20,r=document.body.clientHeight+40);else{e=document.getElementById("panel-title-Panel_"+t).innerHTML;var l="Panel_"+t,u=document.getElementById(l).parentNode;n=u.clientWidth,r=u.clientHeight}a.open(),a.write('<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Preparing Print Preview</title><style media="all">html, body { font-family: Tahoma, Helvetica, Arial, sans-serif; font-size: 14px; margin: 0; padding: 0; background-color:#999999;}#wrapper{ margin-right: auto; margin-left: auto; margin-top: 10%; text-align: center; padding: 0px; position:relative; width:100%;}#progress_panel { padding: 0px; margin-top: 0px; width: 400px; display: inline-block; background-color: #333; border: 1px solid black; -webkit-border-radius: 5px; border-radius: 5px; -moz-box-shadow: 0px 2px 3px 0px #333, 0 0 1px 1px rgba(255, 255, 255, .2) inset; -webkit-box-shadow: 0px 2px 3px 0px #333, 0 0 1px 1px rgba(255, 255, 255, .2) inset; box-shadow: 0px 2px 3px 0px #33, 0 0 1px 1px rgba(255, 255, 255, .2) inset;}.message{ margin: 4px; padding: 50px; color: #fff;}</style></head><body>\x3c!-- created progress message styling --\x3e<div id="wrapper"><div id="progress_panel"><p class="message">'+window.pho_messages.getMessage("printpreview.waitmessage","Preparing print preview, please wait.")+'</p></div></div><form method="POST" id="printForm" action="'+s+'" name="printform"><input type="hidden" id="command" name="command" value="print"/><input type="hidden" id="dashboard" name="dashboard"/><input type="hidden" id="width" name="width"/><input type="hidden" id="height" name="height"/><input type="hidden" id="title" name="title"/><input type="hidden" id="CONTEXT_PATH" name="CONTEXT_PATH"/><input type="hidden" id="active_theme" name="active_theme"/><input type="hidden" id="module_theme_tree" name="module_theme_tree"/><input type="hidden" id="core_theme_tree" name="core_theme_tree"/></form></body></html>'),a.close(),a.getElementById("dashboard").value=i,a.getElementById("width").value=n,a.getElementById("height").value=r,a.getElementById("title").value=e,a.getElementById("CONTEXT_PATH").value=CONTEXT_PATH,a.getElementById("active_theme").value=active_theme,a.getElementById("module_theme_tree").value=JSON.stringify(module_theme_tree),a.getElementById("core_theme_tree").value=JSON.stringify(core_theme_tree),a.getElementById("printForm").submit()},this.getDashboardHTML=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,f,p,m,g,y=document,v=this.cdfDashboard.components,b=v.length,_=getHead(y),w=_.innerHTML,x=getBaseUri(window),C=getUriParts(x),S={},k=[];if(void 0===t)f=y.body,g=pentahoDashboardController.getDashboardHeading();else{var D="Panel_"+t;f=document.getElementById(D),g=document.getElementById("panel-title-"+D).innerHTML}for(p=f.innerHTML,w=stripAll(w),rewriteBaseUri(C),w=makeAbsoluteUris(w,C),p=stripAll(p),p=makeAbsoluteUris(p,C),getStyles(window,S,k),e=0;e<b;e++)if(n=v[e],(void 0===t||n.name==="widget"+t)&&("PentahoChartComponent"===n.type&&"function"==typeof n.maskFlashContentWithImage&&n.maskFlashContentWithImage(),r=y.getElementById(n.htmlObject),i=r.getElementsByTagName("IFRAME"),i.length)){i=i.item(0),o=i.contentWindow,a=o.document,getStyles(o,S,k),s=getBaseUri(o),l=getUriParts(s),c=a.body,d=c.innerHTML,d=stripAll(d),rewriteBaseUri(l),d=makeAbsoluteUris(d,l),u=getHead(a),h=u.innerHTML,h=stripAll(h),h=stripMeta(h),h=stripTitle(h),h=makeAbsoluteUris(h,l),w+=h;var M=p.indexOf('id="'+i.id+'"');if(-1!==M||-1!==(M=p.indexOf("id="+i.id))){var N=p.substr(0,M).lastIndexOf("<");if(-1!==N){var T=p.substr(M).indexOf(">");if(-1!==T){var A=M+T+1,P=p.substr(A);if(0===P.toUpperCase().indexOf("</IFRAME>")&&(P=P.substr("</iframe>".length)),"AnalyzerComponent"===n.type){if(-1!==(M=d.indexOf("reportContent"))){var j=d.substr(0,M).lastIndexOf("<"),O=(d.substr(j).indexOf(">"),j+d.substr(j).indexOf("style")),I=O+d.substr(O).indexOf('"'),E=d.substr(I+1).indexOf('"'),L=d.substr(I+1,E);E+=I+1,L=L.replace(/position\s*:\s*absolute/gi,""),L="position: relative; "+L,d=d.substr(0,I+1)+L+d.substr(E)}var R=o.cv.getActiveReport(),F=R.visualizationController;if(F){var B,H=F.currentViz,W=F.chart,U=W._vizOptions,V=JSON.stringify(F.dataTable.jsonTable),q=JSON.stringify([{args:H.args,visualizationId:H.id}]),z=H.id,$=U.width,G=U.height,Y=[{nodeValue:"CIRCLE",nodeName:"lineShape"},{nodeValue:"2",nodeName:"lineWidth"}],U=F.userDefinedOptions;for(B in U)Y.push({nodeName:B,nodeValue:U[B]});Y=JSON.stringify(Y);var Q='\n<div class="analyzer-chart-ccgPrint-params" style="display: none">\n <span class="json">'+V+'</span>\n <span class="jsonConfig">'+q+'</span>\n <span class="vizId">'+z+'</span>\n <span class="chartWidth">'+$+'</span>\n <span class="chartHeight">'+G+'</span>\n <span class="chartOptionsJSON">'+Y+"</span>\n</div>",X=d.indexOf("<",d.indexOf("visualPanelElement-0"));d=d.substr(0,X)+Q+d.substr(X)}}p=p.substr(0,N)+"<div"+p.substring(N+"<iframe".length,A)+'<div style="'+c.style.cssText+'" class="'+c.className+'">'+d+"</div></div>"+P}}}}for(e=0;e<b;e++)n=v[e],void 0!==t&&n.name!=="widget"+t||"PentahoChartComponent"===n.type&&"function"==typeof n.maskFlashContentWithImage&&n.removeMaskImage();return w+=restoreStyles(S,k),w+='<style type="text/css"> .widget-area {overflow:hidden;} .dijitTooltipData {display: none} .resizeHandle {display: none} #refreshSummary {display: none;} .hidden {display: none !important;} .databar-wrapper {text-align: left !important; height: 100% !important} .databar-wrapper div {left: 0px !important;} .pivotTable .pivotTableRowLabelContainer {overflow-x: visible !important} .povdiv {border-style: none !important; white-space: nowrap !important;} .pentaho-toggle-button-up BUTTON {color: white} </style>',w=w.replace(/<title>[^<]*<\/title>/g,"<title>"+g+"</title>"),m='<html><head><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />'+w+'</head><body style="'+f.style.cssText.replace(/(top|left)[^;]+;/gi,"")+'" class="'+f.className+' pentaho-page-background">'+p+"</body></html>",m=m.replace(/\son\w+\s*=/gi," _no="),m=m.replace(/<iframe[^<]*<\/iframe>/gi,"")},this.onTabCloseEvent=function(t){"tabClosing"==t.eventSubType&&t.stringParam==window.frameElement.id&&this.dispose()},this.init=function(){if(isRunningIFrameInSameOrigin&&window.top.mantle_addHandler&&(this._handlerRegistration=window.top.mantle_addHandler("GenericEvent",this.onTabCloseEvent.bind(this))),window.onbeforeunload=this.dispose.bind(this),window.beforeAnalyzerLoad||(window.beforeAnalyzerLoad=function(t,e){t.applicationId="pentaho-dashboards"}),"undefined"==typeof createBundle){window.messageBundleAttempts=0;var localThis=this,bundleCreationFunct=function(){"undefined"!=typeof createBundle?(window.pho_messages=createBundle("resources/gwt/dashboarddesigner/messages","dashboards",function(){localThis.init()}),window.dashboard_messages=createBundle("resources/messages","messages",function(){})):messageBundleAttempts<15?(window.messageBundleAttempts++,setTimeout(bundleCreationFunct,1e3)):(alert("Error loading dashboard messages.\n\nCommunication to server may have be lost due to inactivity."),window.pho_messages={},window.pho_messages.getMessage=function(t,e){return e||t},window.dashboard_messages={},window.dashboard_messages.getMessage=function(t,e){return e||t},window.createBundle=function(t,e,n){return n(),pho_messages},localThis.init())};return void bundleCreationFunct()}window.pho_messages=createBundle("resources/gwt/dashboarddesigner/messages","dashboards",function(){}),window.dashboard_messages=createBundle("resources/messages","messages",function(){});for(var funct;delayedFunctions.length>0;)delayedFunctions.pop()();for(;this.onloadFunctions&&this.onloadFunctions.length>0;)(funct=this.onloadFunctions.pop())();var idx;try{this.setDashboardSettings(dashboardSettings),this.elementSettings=elementSettings}catch(t){}try{xulDomJson&&dashboardJson&&"object"==getJsonObjectType(dashboardJson)&&(this.dashboard=createObject("Dashboard",dashboardJson.Dashboard))}catch(t){alert(t.message)}try{"undefined"!=typeof dashboardOnLoad&&dashboardOnLoad()}catch(t){alert(t.message)}"function"==typeof PentahoDashboardEditor?(pentahoDashboardEditor=new PentahoDashboardEditor,pentahoDashboardEditor.pageLoaded()):this.resizeDashboard(!1);var parent=window.parent;if(mantle_enabled&&parent&&parent.enableContentEdit){parent.mantle_setDashboardsFilter(PentahoDashboardController.getComponentFileTypes()),window.toggleBrowser=function(t){var e=pho.dashboards.editMode;void 0!==t&&null!=t&&(e=t),e?parent.mantle_isNavigatorShowing()||parent.executeCommand("ShowBrowserCommand"):parent.mantle_isNavigatorShowing()&&parent.executeCommand("CollapseBrowserCommand")},window.editContentToggled=function(t){toggleBrowser(t);for(var e=0;e<editContentToggledListeners.length;e++)try{editContentToggledListeners[e].call(null,t)}catch(t){"undefined"!=typeof console&&console.log(t.name+": "+t.message)}if(pho.dashboards.editMode)pentahoDashboardController.setEditEnabled(!editEnabled);else{var n=window.location.href;n=n.replace(/\/viewer\b/g,"/editor"),pentahoDashboardController.beforeTabsUnload(),window.location.href=n}},parent.enableContentEdit(!0);var editSelected=!1;pentahoDashboardEditor&&(editSelected=!0),toggleBrowser(editSelected),this._parentGlassPaneCallbackRegistration=parent.addGlassPaneListener(this.glassPaneCallback),this._parentChartEditorGlassPaneCallbackRegistration=parent.addChartEditorGlassPaneListener(this.glassPaneCallback)}"function"==typeof addGlassPaneListener&&(this._glassPaneCallbackRegistration=addGlassPaneListener(this.glassPaneCallback));var widgetArea=document.getElementById("widget-area"),collapsed=this.getXulDomProperty("FilterPanel","collapsed");collapsed=1==collapsed,collapsed||(this.previousFilterPanelHeight=this.getXulDomProperty("FilterPanel","height")),this.setFilterPanelCollapsed(collapsed),!isRunningIFrameInSameOrigin||window.parent&&window.parent.mantle_initialized||$("body").addClass("pentaho-page-background"),isRunningIFrameInSameOrigin&&window.parent&&window.parent.PentahoMobile&&(this.setXulDomProperty("titlebar","hidden","true"),$("#filterArrow").hide(),$("#titlebar").hide(),$(".povContainer .wgtHead").attr("onclick","pentahoDashboardController.toggleFilterPanel()")),this.initialResizeDone||this.resizeDashboard(!0),widgetArea.style.display="block",this.initializeCDF(),this.initRefreshEngine(),this.updateDashboardHeading(),this.displayWidgetPrintButtons(),pentahoDashboardEditor&&function(){var t=10,e=function(){if(t--,"Do_Not_Translate"!=window.pho_messages.getMessage("Bundle.Loaded",""))return 0==t?void window.alert("The Dashboard Module failed to load."):void setTimeout(e,1001);var n=/\b((\/editor)|(command=new))\b/g.test(document.location.href);if(1==n){document.getElementById("wrapper").className="wrapper drag_and_drop_label"}pentahoDashboardEditor.startupInEditMode(n),n&&pentahoDashboardEditor.showEditorPanel();var r,i,o=cdfDashboard.components,a=o.length;for(r=0;r<a;r++)i=o[r],i.refreshParameters&&i.refreshParameters();pho.dashboards.init(),pentahoDashboardEditor.initDND()};e()}();var _onresize=window.onresize,_onunload=window.onunload,_onkeyup=window.onkeyup,_onmouseup=window.onmouseup,_onmousemove=window.onmousemove,_onmousedown=window.onmousedown;window.onresize=function(t){_onresize&&_onresize(t),pentahoDashboardController.resizeDashboard(!1)},window.onunload=function(t){_onunload&&_onunload(t),pentahoDashboardController.unload(t)},document.onmouseup=function(t){pentahoDashboardController.mouseUp(t)},document.onmousemove=function(t){pentahoDashboardController.mouseMove(t)};var outerThis=this,onKeyUpFunct=function(t){document.all&&(t=window.event),pentahoDashboardController.keyUp(t),"27"===t.keyCode&&outerThis.cancelContentDropDown()};if(document.all&&(document.body.onkeyup=onKeyUpFunct),window.onkeyup=onKeyUpFunct,document.all){var tempForm=document.createElement("form");with(tempForm.name="tempForm",tempForm.style)height="0px",padding="0px",margin="0px",width="0px";document.getElementById("wrapper").appendChild(tempForm);var placeHolderField=document.createElement("input");with(placeHolderField.setAttribute("type","text"),placeHolderField.setAttribute("id","focusInput"),placeHolderField.style)height="0px",padding="0px",margin="0px",width="0px";tempForm.appendChild(placeHolderField),document.getElementById("focusInput").focus()}},this.updateAllWidgets=function(){this.cdfDashboard.updateAll(this.cdfDashboard.components)},this.resizeAllWidgets=function(){var t,e,n=this.cdfDashboard.components,r=n.length;for(t=0;t<r;t++)e=n[t],e.resize&&e.resize(),e.removeMaskImage&&e.removeMaskImage()},this.getWidgetId=function(t){var e;return"number"==typeof t?t:(t.name?e=t.name:"string"==typeof t&&(e=t),parseInt(e.substr("widget".length),10))},this.getWidgetXulId=function(t){return void 0!=t.htmlObject?t.htmlObject.substr("content-area-".length):""},this.beforeTabsUnload=function(t){for(var e=0;e<pentahoDashboardController.cdfDashboard.components.length;e++){var n=pentahoDashboardController.cdfDashboard.components[e];"PentahoPrptComponent"===n.type&&n.clear()}},this.getComponentParameterValue=function(t){var e,n=(t[0],t[1]),r=t[2];return"NIL"===r&&(r=""),e=""===n||"NIL"===n?r||"":this.cdfDashboard.getParameterValue(n),"NIL"===e&&(e=r),e||(e=""),e},this.replaceParametersInWidgetTitle=function(t,e){var n=this.getWidgetXulId(t),r=this.getXulDomProperty(n,"title");if(r){if(void 0===e&&(e=!(pentahoDashboardEditor&&pentahoDashboardEditor.isEditPanelVisible())),e){var i=t.parameters;if(!i)return;var o=i.length;if(!o)return;var a,s,l,u,c,h={};for(a=0;a<o;a++)s=i[a],l=s[0],(c=h[l])||(h[l]=c={regexp:new RegExp("\\$?\\{"+l+"\\}","g"),values:[]}),u=this.getComponentParameterValue(s),$.isArray(u)&&(u=u.join("|")),c.values.push(u);for(l in h)c=h[l],u=c.values.join("|"),""===u&&(u="<default>"),r=r.replace(c.regexp,u)}$("#panel-title-"+n).text(r).attr("title",r)}},this.replaceParametersInWidgetTitles=function(t){var e,n,r=dashboardWidgets,i=r.length;for(e=0;e<i;e++)n=r[e],0===n.name.indexOf("widget")&&this.replaceParametersInWidgetTitle(n,t)},this.replaceParametersInDashboardHeading=function(t){var e,n,r,i,o,a=dashboardWidgets,s=a.length;for(e=0;e<s;e++)n=a[e],(r=n.parameter)&&(i=new RegExp("\\$?\\{"+n.title+"\\}","g"),o=this.cdfDashboard.getParameterValue(r),$.isArray(o)&&(o=o.join("|")),""===o&&(o="&lt;none&gt;"),t=t.replace(i,o));return t},this.setWidgetHooks=function(t){var e=t.localizedName;if(null!=e&&(t.localizedName=e),0===t.name.indexOf("widget"))t.postExecution=function(){pentahoDashboardController.replaceParametersInWidgetTitle(this)};else if(t.postChange=function(){pentahoDashboardController.updateDashboardHeading()},0===t.type.toLowerCase().indexOf("select")&&!0===t.useFirstValue){var n=this.cdfDashboard;t.preExecution=function(){var t=this.parameter,e=n.getParameterValue(t);if(""===e){for(var r,i,o=this.getValuesArray(),a=!!this.valueAsId,s=0,l=o.length;s<l&&(null==o[s]||!o[s].length||(r=a||null==o[s][0],(i=o[s].length>1?o[s][r?1:0]:o[s][0])!==e));s++);i!==e&&n.setParameter(t,void 0)}this._defaultValueInitialized=!0,this.preExecution=void 0}}else if(0===t.type.toLowerCase().indexOf("multibutton")&&!0===t.useFirstValue){var n=this.cdfDashboard;t.preExecution=function(){var t=this.parameter;void 0===n.getParameterValue(t)&&n.setParameter(t,"")}}},this.parseMultivaluedParam=function(t){var e,n=/\s*(("([^"]*)")|[^|]*)\s*\|/g,r=0,i=[];for(t+="|";e=n.exec(t);){if(e.index!==r)throw"Unexpected token in parameter list";i.push(e[2]?e[3]:e[1].replace(/^\s+|\s+$/,"")),r+=e[0].length}return i},this.initializeCDF=function(){var t=this;if(this.cdfDashboard.flatParameters=!0,this.cdfDashboard.escapeParameterValues=!1,this.cdfDashboard.pentahoRoot="../",this.cdfDashboard.setI18nSupport(SESSION_LOCALE,jQuery.i18n),$.isArray(dashboardWidgets)){var e,n,r,i,o,a,s,l=dashboardWidgets.length,u={},c={};for(e=0;e<l;e++)if(n=dashboardWidgets[e])if(s=n.getGUID?n.getGUID():n.GUID,"select"!==n.type||n.title||(n.title=n.parameter),this.setWidgetHooks(n),r=n.name,i=null,0===r.indexOf("widget")){var h,d,f,p;if(i=pentahoDashboardController.getXulDomProperty(pentahoDashboardController.getWidgetXulId(n),"title"),(h=n.outputParameters)&&(d=h.length))for(p=0;p<d;p++)f=h[p],f[1]&&(u[i+" - "+f[0]]=s+"$"+f[2]);if((h=n.parameters)&&(d=h.length))for(p=0;p<d;p++)f=h[p],a=f[0],(o=c[a])||(c[a]=o={}),o[r]=n}else 0===r.indexOf("pov_widget")&&(u[n.title]=n.parameter)}var m,g,y,v,b,_,w,x=document.location.search,C=x.substr(1).split("&"),S={},k={},D={},M={debug:!0,ts:!0};for(l=""===x?0:C.length,e=0;e<l;e++)m=C[e].split("="),g=decodeURIComponent(m[0]),y=decodeURIComponent(m[1]),!M[g]&&y.length&&(v=null,(v=u[g])&&((b=S[v])?b.push(y):S[v]=[y]),o=null,(o=c[g])&&((_=k[g])?_.push(y):k[g]=[y]),v||o||((w=D[g])?w.push(y):D[g]=[y]));var N="";for(w in D)N.length&&(N+=", "),N+='"'+w+'"';if(N.length&&(N="The following parameters were passed in the url, but not recognized: "+N,"undefined"!=typeof console&&console.log(N)),dashboardParameters)for(l=dashboardParameters.length,e=0;e<l;e++)b=dashboardParameters[e],g=b[0],y=b[1],(b=S[g])&&(y=1===b.length?b[0]:'"'+b.join('"|"')+'"',delete S[g]),"string"==typeof y&&-1!==y.indexOf("|")&&(y=pentahoDashboardController.parseMultivaluedParam(y)),this.cdfDashboard.setParameter(g,y);N="";for(b in S){y=S[b];for(g in u)u[g]===b&&(N.length&&(N+=", "),N+='name: "'+g+'"; parameter: "'+b+'"; value: "'+y+'"')}N.length&&(N="The following dashboard parameters were passed in the url, but not recognized: "+N,"undefined"!=typeof console&&console.log(N));var T,A;for(g in k){_=k[g],y=1===_.length?_[0]:'"'+_.join('"|"')+'"',"string"==typeof y&&-1!==y.indexOf("|")&&(y=pentahoDashboardController.parseMultivaluedParam(y)),$.isArray(y)||(y=[y]),l=y.length,o=c[g];for(r in o){for(n=o[r],h=n.parameters,d=h.length,T=[],p=0;p<d;p++)f=h[p],a=f[0],a===g?A=f[1]:T.push(f);for(p=0;p<l;p++)T.push([g,A,y[p]]);n.parameters=T}}var P=[];dashboardWidgets.forEach(function(e){e&&P.push(t.createComponent(e))}),dashboardWidgets=P,dashboardWidgets.map(function(t){return t.localizedName}).forEach(function(t,e){null!=t&&(dashboardWidgets[e].localizedName=t)}),this.addComponents(dashboardWidgets),this.cdfDashboard.blockUIwithDrag=function(){$.blockUI.defaults.message="",$.blockUI.defaults.css.left="0%",$.blockUI.defaults.css.top="0%",$.blockUI.defaults.css.marginLeft="85px",$.blockUI.defaults.css.width="100%",$.blockUI.defaults.css.height="100%",$.blockUI.defaults.css.opacity="1",$.blockUI.defaults.css.backgroundColor="#ffffcc",$.blockUI.defaults.css["-webkit-border-radius"]="10px",$.blockUI.defaults.css["-moz-border-radius"]="10px",$.blockUI.defaults.overlayCSS.backgroundColor="transparent",$.blockUI.defaults.overlayCSS.opacity="0.6",$.blockUI.defaults.overlayCSS.cursor="wait",$.blockUI.defaults.showOverlay=!1,$.blockUI()},this.cdfDashboard._initEngine(),this.cdfDashboard.init(),Ext.BLANK_IMAGE_URL="../dashboards/resources/ext/images/default/s.gif"},this.unload=function(){try{dashboardOnUnload&&dashboardOnUnload()}catch(t){}},this.dispose=function(){if(this._glassPaneCallbackRegistration&&"function"==typeof removeGlassPaneListenerById&&removeGlassPaneListenerById(this._glassPaneCallbackRegistration),isRunningIFrameInSameOrigin){var t=window.parent;t&&(t.mantle_setDashboardsFilter&&t.mantle_setDashboardsFilter(null),this._parentGlassPaneCallbackRegistration&&t.removeGlassPaneListenerById&&t.removeGlassPaneListenerById(this._parentGlassPaneCallbackRegistration),this._parentChartEditorGlassPaneCallbackRegistration&&t.removeGlassPaneListenerById&&t.removeChartEditorGlassPaneListenerById(this._parentChartEditorGlassPaneCallbackRegistration),top.mantle_removeHandler&&this._handlerRegistration&&top.mantle_removeHandler(this._handlerRegistration))}},this.initValuesArray=function(t){
t.valuesArray=[]},this.addToValuesArray=function(t,e,n){t.valuesArray.push([n,e])},this.setDashboardSettings=function(t){this.dashboardSettings=t},this.setElementSettings=function(t,e){this.elementSettings[t]=e},this.getDashboardHeading=function(){return this.dashboard?this.dashboard.getHeading():null},this.setDashboardHeading=function(t){this.dashboard.setHeading(t)},this.getGlobalRefresh=function(){return this.dashboard.getGlobalRefresh()},this.setGlobalRefresh=function(t){this.dashboard.setGlobalRefresh(t),this.cdfDashboard.refreshEngine.setGlobalRefresh(t)},this.setEnableWidgetPrinting=function(t){this.dashboard.setEnableWidgetPrinting(t),this.displayWidgetPrintButtons(t)},this.displayWidgetPrintButtons=function(t){void 0===t&&(t=this.dashboard.getEnableWidgetPrinting()),t=t&&printVisible;for(var e,n=0;e=document.getElementById("print-btn-Panel_"+ ++n);)e.style.display=t?"":"none"},this.setParameterAndDefaultValue=function(t,e,n){null!=this.cdfDashboard.parameters[t]&&delete this.cdfDashboard.parameters[t],null==n&&(n=""),this.cdfDashboard.setParameter(e,n);var r=new DashboardParameter;r.setName(e),r.setDefaultValue(n);var i,o=this.dashboard.dashboardParameters.dashboardParameters;for(i=o.length-1;i>=0;i--)o[i].name==t&&o.splice(i,1);o.push(r)},this.getDashboardXml=function(){return this.dashboard.asXml(this.cdfDashboard)},this.getDashboard=function(){return this.dashboard},this.keyUp=function(t){"27"==t.keyCode&&this.cancelContentDropDown()},this.mousedown=function(t){},this.mouseUp=function(t){this.cancelContentDropDown()},this.mouseMove=function(t){},this.povChanged=function(t,e){this.setGlobalParameter(t,t,e)}},PentahoDashboardController.onload=function(){/\b((\/editor)|(command=new))\b/g.test(window.location.href)||pentahoDashboardController.init()},PentahoDashboardController.xmlDecode=function(t){return t?t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"'):t},PentahoDashboardController.xmlEncode=function(t){var e=PentahoDashboardController.xmlDecode(t);return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"):e},PentahoDashboardController.typeMap={},PentahoDashboardController.getComponentByFileType=function(t){return PentahoDashboardController.typeMap[t]},PentahoDashboardController.getComponentFileTypes=function(){var t=[];for(type in PentahoDashboardController.typeMap)t.push(type);return t},PentahoDashboardController.registerComponentForFileType=function(t,e){PentahoDashboardController.typeMap[t]=e},PentahoDashboardController.widgetTypeMap={},PentahoDashboardController.getWidgetType=function(t){return PentahoDashboardController.widgetTypeMap[t]},PentahoDashboardController.getWidgetTypeNames=function(){var t=[];for(type in PentahoDashboardController.widgetTypeMap)t.push(type);return t},PentahoDashboardController.getWidgetTypes=function(){var t=[];for(type in PentahoDashboardController.widgetTypeMap)t.push(PentahoDashboardController.getWidgetType(type));return t},PentahoDashboardController.registerWidgetType=function(t){PentahoDashboardController.widgetTypeMap[t.type]=t},pentahoDashboardController=new PentahoDashboardController,printWindow=window.print,window.print=pentahoDashboardController.printDashboard,PentahoEmptyWidget=BaseComponent.extend({constructor:function(t){this.base(),this.name=t,this.htmlObject="content-area-Panel_"+pentahoDashboardController.getWidgetId(t),this.localizedName=window.dashboard_messages.getMessage("empty_widget_label")},type:"PentahoEmptyWidget",iframe:!0,executeAtStart:!0,parameters:[],isDirty:!1,setDirty:function(t){this.isDirty=t},update:function(){this.htmlObject&&(document.getElementById(this.htmlObject).innerHTML="<div class='drag_and_drop_label_wrapper'><div class='drag_and_drop_label_content'><div class='drag_and_drop_label_text'>"+window.dashboard_messages.getMessage("drag_and_drop.label")+"</div></div></div>")}}),CreateParametersStream=function(t){for(var e=new Array,n=0,r=t.length;n<r;n++){var i,o=t[n][0],a=""==t[n][1]?t[n][2]:cdfDashboard.getParameterValue(t[n][1]);if("NIL"==a&&(i=[t[n][2]]),i=void 0===a||null==a||"NIL"==a?[]:"string"==typeof a?pentahoDashboardController.parseMultivaluedParam(a):"array"==typeof a||"object"==typeof a?a:[a],0==i.length&&2==t[n].length)e.push([o,new Array]);else if(null!=i)for(var s=0;s<i.length;s++)e.push([o,i[s]])}for(var l="",u=0;u<e.length;u++)u>0&&(l+="<||>"),l+=e[u][0]+"::>"+e[u][1];return l},window.originAdjustmentLeft=0,window.originAdjustmentTop=0,window.setOriginAdjustment=function(t,e){window.originAdjustmentLeft=t,window.originAdjustmentTop=e},pentahoDashboardController}),define("dashboards/pentaho-dashboard-controls",["cdf/dashboard/Utf8Encoder","dashboards/pentaho-dashboard-controller","dashboards/oss-module"],function(Utf8Encoder,dashboardController){var dashboard=dashboardController.cdfDashboard;XActionHelper={},WidgetHelper={},OutputParametersHelper={},window.changeButtonState=function(t,e){var n=document.getElementById(t+"-left"),r=document.getElementById(t+"-right"),i=document.getElementById(t+"-slice"),o=document.getElementById(t+"-label"),a=document.getElementById(t);"hover"==e?(n.className="roundedbutton-left-over",r.className="roundedbutton-right-over",i.className="roundedbutton-slice-over",a.className="roundedbutton-over",o.className="roundedbutton-label-over"):"normal"==e?(n.className="roundedbutton-left",r.className="roundedbutton-right",i.className="roundedbutton-slice",a.className="roundedbutton",o.className="roundedbutton-label"):"disabled"==e&&(leftImg.src="../adhoc/images/button_left_disabled.png",labelTd.style.backgroundImage="url('../adhoc/images/button_middle_disabled.png')",rightImg.src="../adhoc/images/button_right_disabled.png",labelDiv.className="disabledLargeButtonTxt")},window.isButtonEnabled=function(t){return"disabledLargeButtonTxt"!=document.getElementById(t+"-label-div").className},WidgetHelper.assignedGUIDs={},WidgetHelper.generateGUID=function(){for(var t=function(){return Math.round(1e5*Math.random())},e=t();WidgetHelper.assignedGUIDs[e];)e=t();return WidgetHelper.assignedGUIDs[e]=!0,""+e},WidgetHelper.paramNamesEqual=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n][0]!=e[n][0])return!1;return!0},WidgetHelper.getJsonMqlConditions=function(t){var e=t.conditions["org.pentaho.commons.metadata.mqleditor.beans.Condition"];return e||(e=t.conditions[0]["org.pentaho.commons.metadata.mqleditor.beans.Condition"]),e.condition&&(e=[e]),e},WidgetHelper.getJsonMqlColumns=function(t){var e=t.cols["org.pentaho.commons.metadata.mqleditor.beans.Column"];return e||(e=t.cols[0]["org.pentaho.commons.metadata.mqleditor.beans.Column"]),e.column&&(e=[e]),e},WidgetHelper.parseParameters=function(t){var e,n,r,i,o=[],a=t.length,s=/\{[^\{\}]+\}/;for(e=0;e<a;e++)n=t[e].condition,r=n["@value"],s.test(r)&&(r=r.substr(1,r.length-2),i=n["@defaultValue"],o.push([r,"",i]));return o},WidgetHelper.assignParametersIfChanged=function(t,e){WidgetHelper.paramNamesEqual(t.parameters,e)||(t.parameters=e)},WidgetHelper.mergeParameters=function(t,e){var n=t.parameters||[];t.parameters=[];for(var r={},i={},o=0;o<e.length;o++){for(var a=e[o][0],s=0;s<n.length;s++)n[s][0]!=a||r[""+s]||(t.parameters.push(n[s]),r[""+s]=!0,i[a]=!0);i[a]||t.parameters.push(e[o])}},WidgetHelper.resolveOutParams=function(outputParameters){if(!outputParameters)return[];if(outputParameters.length)return outputParameters;for(var params=[],ok=!0,i=0;ok;){var param=eval("outputParameters.parameter"+i);if(void 0!==param){ok=!0,i++;var id=param.name;void 0!==param.id&&(id=param.id),params.push([param.name,param.enabled,id])}else ok=!1}return params},WidgetHelper.mergeOutputParameters=function(t,e){var n=WidgetHelper.resolveOutParams(t.outputParameters),r=t.outputParameters||[];t.outputParameters=[],$("output-parameter",e).each(function(){var e=$(this).attr("id"),r=$(this).attr("displayName");if("solution"!=r&&"path"!=r&&"name"!=r&&0!=r.indexOf("::")){var i=$(this).attr("hidden");if(!i||"true"!=i){for(var o="false",a=0;a<n.length;a++)if(n[a][0]==r){o=n[a][1];break}0==new RegExp("^"+t.name).test(e)&&(e=t.GUID+"$"+e),void 0==dashboard.getParameterValue(e)&&dashboard.setParameter(e,"NIL"),t.outputParameters.push([r,o,e])}}}),WidgetHelper.overlayOutputParameters(t,r)},WidgetHelper.overlayOutputParameters=function(t,e){for(var n=0;n<t.outputParameters.length;n++)for(var r=t.outputParameters[n][0],i=0;i<e.length;i++)if(e[i][0]==r){t.outputParameters[n][1]=e[i][1],t.outputParameters[n][2]=e[i][2];break}},OutputParametersHelper.OUT_PARAMS_TITLE_IDX=0,OutputParametersHelper.OUT_PARAMS_ENABLED_IDX=1,OutputParametersHelper.OUT_PARAMS_ID_IDX=2,OutputParametersHelper.INNER_PARAM_SEPARATOR="$",OutputParametersHelper.hasOutputParameters=function(t){return t&&"function"==typeof t.getOutputParameters&&"function"==typeof t.setOutputParameters},OutputParametersHelper.getOutParameterUID=function(t,e){return t.getGUID()+OutputParametersHelper.INNER_PARAM_SEPARATOR+e},OutputParametersHelper.getParameterInnerIdFromUID=function(t,e){var n=e.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR);return n>0?e.substring(n+1,e.length):e},OutputParametersHelper.isParameterFromComponent=function(t,e){var n=t==e||t.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR)>0&&t.substring(0,t.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR))==e;if(!n&&t.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR)<0){var r;for(var i in dashboard.components)if(dashboard.components[i].getGUID&&dashboard.components[i].getGUID()==e&&(r=dashboard.components[i],r.outputParameters)){if(0==r.outputParameters.length)return!0;for(var o=0;o<r.outputParameters.length;o++){var a=r.outputParameters[o][2];if(n=a.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR)>0&&a.substring(0,a.indexOf(OutputParametersHelper.INNER_PARAM_SEPARATOR))==e)return n}}}return n},OutputParametersHelper.isParamEnabled=function(t){var e=t[OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];return"true"==e||1==e},OutputParametersHelper.newParam=function(t,e,n){e=!(!e||"false"==e);var r=[];return r[this.OUT_PARAMS_TITLE_IDX]=t,r[this.OUT_PARAMS_ENABLED_IDX]=e,r[this.OUT_PARAMS_ID_IDX]=n,r},dashboardController.fireOutputParam=function(t,e,n){var r;for(var i in dashboard.components){var o=dashboard.components[i];$(document.getElementById(o.htmlObject)).find("iframe").each(function(e){if(this.contentWindow==t)return r=o,!1})}null==r?dashboard.fireChange(e,Utf8Encoder.encode_prepare(n)):dashboard.fireChange(r.getGUID()+"$"+e,Utf8Encoder.encode_prepare(n))}}),define("dashboards/pentaho-dashboard-main",function(){}),define("dashboards/pentaho-dashboard-xul",function(){}),define("dashboards/widget-chart",["cdf/components/BaseComponent","dashboards/pentaho-dashboard-controller","dashboards/oss-module"],function(t){function e(t,e,r,i){if(null==e){var o={onFinish:function(t,e){pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showMqlEditorDialog(t,e,new n.QueryEditorCallback)}catch(t){alert("ERROR-0017 - cannot show Mql Editor Dialog in an IFrame in different domain")}},onCancel:function(){},onReady:function(){pho.dashboards.enableWaitCursor(!1)}};pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showDatasourceSelectionDialog("dashboard-content",o)}catch(t){alert("ERROR-0017 - cannot show Datasource Selection Dialog embedded in an IFrame in different domain")}}else{pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showChartEditor(t,e,r,i,new n.ChartEditorCallback)}catch(t){alert("ERROR-0017 - cannot show Chart Editor embedded in an IFrame in different domain")}}}PentahoChartComponent=t.extend({isDirty:!1,setDirty:function(t){this.isDirty=t},resize:function(){this.update()},getOutputParameters:function(){return this.outputParameters||this.refreshParameters(),this.outputParameters},setOutputParameters:function(t){if(0!=t.length){this.outputParameters&&this.outputParameters.length==t.length||this.refreshParameters();for(var e=0;e<this.outputParameters.length;e++)this.setColumnContentLinkStatus(e,OutputParametersHelper.isParamEnabled(t[e]))}},refreshParameters:function(){var t=this.outputParameters||[];this.outputParameters=[],this.parameter=this.getGUID()+"$"+this.name,this.domainParameter=this.getGUID()+"$"+this.name+"_domain";var e=this.chartDataModel.domainColumn,n=this.chartDataModel.categoryColumn,r=e,i=n,o=WidgetHelper.getJsonMqlColumns(this.mqlQuery);if(void 0!==o.length)for(var a=0;a<o.length;a++)o[a].id==e?r=o[a].name:o[a].id==n&&(i=o[a].name);return this.chartDataModel.domainColumn&&this.outputParameters.push(OutputParametersHelper.newParam(r,!1,this.parameter)),n&&"None"!=n&&this.outputParameters.push(OutputParametersHelper.newParam(i,!1,this.domainParameter)),WidgetHelper.overlayOutputParameters(this,t),this.outputParameters},setColumnContentLinkStatus:function(t,e){if(this.outputParameters&&this.outputParameters.length>t){var n=this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];if(e&&!n){var r=this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ID_IDX];pentahoDashboardController.setParameterAndDefaultValue(null,r,null)}this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]=e}},update:function(t){if(document&&this.htmlObject){var e=document.getElementById(this.htmlObject);if(e){document.getElementById("chartForm")||document.body.appendChild(window.chartForm.frm);var n=this.htmlObject+"_chart";e.innerHTML="<iframe style='width:100%;height:100%;border:0px' frameborder='0' border='0' id=\""+n+'" name="'+n+'" src=""/>';var r=document.getElementById(this.htmlObject),i=getRectangle(r);if(0==i.width){var o=this;t||(t=0),t<5&&setTimeout(function(){o.update(t++)},250)}window.chartForm.chartModel.value=JSON.stringify({chartModel:this.chartModel}),window.chartForm.mqlQuery.value=this.mqlQuery.query,window.chartForm.chartDataModel.value=JSON.stringify({chartDataModel:this.chartDataModel});var a=CreateParametersStream(this.parameters);try{void 0!==window.top.PentahoMobile&&(a.length>0&&(a+="<||>"),a+="renderEngine::>JFreeChart")}catch(t){}window.chartForm.parameters.value=a,window.chartForm.width.value=i.width>0?i.width-25:300,window.chartForm.height.value=i.height>0?i.height-20:225,this.outputParameters&&this.outputParameters.length>0&&(window.chartForm.paramName.value=!0===this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]?this.parameter:"",window.chartForm.domainParamName.value=!0===this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]?this.domainParameter:""),window.chartForm.frm.target=this.htmlObject+"_chart",document.getElementById("chartForm").submit();var s=this.htmlObject.substring(this.htmlObject.length-1);pentahoDashboardController.setEditContentEnabledById(s,!0)}}},createWidget:function(){e()},editWidget:function(){var t=JSON.stringify({chartModel:currentWidget.chartModel}),n=JSON.stringify({MQLQuery:currentWidget.mqlQuery}),r=JSON.stringify({chartDataModel:currentWidget.chartDataModel});if("PentahoChartComponent"!==currentWidget.type)return void(window.confirm("Current widget is not a chart. Replace it now?")&&e(t,n,r,null));if(currentWidget.parameter){e(t,n,r,this.dashboard.getParameterValue(currentWidget.parameter))}else e(t,n,r,null)},getGUID:function(){return null==this.GUID&&(this.GUID=WidgetHelper.generateGUID()),this.GUID},getFlashElement:function(){var t=document.getElementById(this.htmlObject);if(!t)return null;var e=t.getElementsByTagName("IFRAME");if(!e.length)return null;e=e.item(0);var n=e.contentDocument?e.contentDocument:e.document,r=n.getElementsByTagName("OBJECT");if(void 0!==r&&r.length&&(r=r.item(0)),"undefined"==typeof obj||"function"!=typeof obj.get_img_binary){var i=n.getElementsByTagName("EMBED");if(!i.length)return r;r=i.item(0)}return r},removeMaskImage:function(){this.maskFlashContentWithImage(!0)},getJFreeImageUrl:function(){var t=null,e=CreateParametersStream(this.parameters);e.length>0&&(e+="<||>"),e+="renderEngine::>JFreeChart";var n=document.getElementById(this.htmlObject),r=getRectangle(n),i={command:"doChart",chartModel:JSON.stringify({chartModel:this.chartModel}),mqlQuery:this.mqlQuery.query,chartDataModel:JSON.stringify({chartDataModel:this.chartDataModel}),parameters:e,width:r.width>0?r.width:300,height:r.height>0?r.height:225};this.outputParameters&&this.outputParameters.length>0&&(i.paramName=!0===this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]?this.parameter:"",i.domainParamName=!0===this.outputParameters[0][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]?this.domainParameter:"");var o=window.chartForm.frm;return $.ajax({async:!1,type:o.method,url:o.action,data:i,dataType:"html",success:function(e,n,r){var i;(i=/<img\s[^>]+>/gi.exec(e))&&(i=/src="([^"]+)"/.exec(i[0]))&&(t=i[1].replace(/\/\//g,"/"))},error:function(t,e,n){}}),t},maskFlashContentWithImage:function(t){var e,n,r,i,o,a=this.name+"_image";return!!(e=this.getFlashElement())&&(n=e.parentNode,!!(r=e.ownerDocument)&&(n&&"OBJECT"===n.tagName&&(n=n.parentNode),(i=r.getElementById(a))&&i.parentNode.removeChild(i),t?void 0:(i=r.createElement("img"),"function"==typeof e.get_img_binary?i.src="data:image/png;base64,"+e.get_img_binary():i.src=this.getJFreeImageUrl(),i.id=a,o=i.style,o.position="relative",o.left=e.clientLeft+"px",o.top=e.clientTop+"px",0!=e.clientHeight&&(o.height=e.clientHeight+"px"),0!=e.clientWidth&&(o.width=e.clientWidth+"px"),n.appendChild(i),!0)))},getImageData:function(){var t=this.getFlashElement();return!!t&&t.get_img_binary()},type:"PentahoChartComponent",iconClass:"chartIcon",iconImgSrc:"../../themes/"+active_theme+"/images/chartIcon.png",localizedName:"chart_component_lbl",defaultLabel:"Chart"}),window.chartForm=new function(){this.frm=document.createElement("form"),this.frm.method="POST",this.frm.id="chartForm",this.frm.action="service",this.frm.target=this.htmlObject+"_chart",this.frm.style.display="none";var t=document.createElement("input");t.type="text",t.name="command",t.value="doChart",this.frm.appendChild(t),this.mqlQuery=document.createElement("input"),this.mqlQuery.type="text",this.mqlQuery.name="mqlQuery",this.frm.appendChild(this.mqlQuery),this.chartModel=document.createElement("input"),this.chartModel.type="text",this.chartModel.name="chartModel",this.frm.appendChild(this.chartModel),this.parameters=document.createElement("input"),this.parameters.type="text",this.parameters.name="parameters",this.frm.appendChild(this.parameters),this.width=document.createElement("input"),this.width.type="text",this.width.name="width",this.frm.appendChild(this.width),this.height=document.createElement("input"),this.height.type="text",this.height.name="height",this.frm.appendChild(this.height),this.chartDataModel=document.createElement("input"),this.chartDataModel.type="text",this.chartDataModel.name="chartDataModel",this.frm.appendChild(this.chartDataModel),this.paramName=document.createElement("input"),this.paramName.type="text",this.paramName.name="paramName",this.frm.appendChild(this.paramName),this.domainParamName=document.createElement("input"),this.domainParamName.type="text",this.domainParamName.name="domainParamName",this.frm.appendChild(this.domainParamName),this.urlTemplate=document.createElement("input"),this.urlTemplate.type="text",this.urlTemplate.name="urlTemplate",this.frm.appendChild(this.urlTemplate),this.submit=function(){this.frm.submit()}};var n={};n.newChart=function(){e()},n.editWidgetXXX=function(){var t=JSON.stringify({chartModel:currentWidget.chartModel}),n=JSON.stringify({MQLQuery:currentWidget.mqlQuery}),r=JSON.stringify({chartDataModel:currentWidget.chartDataModel});if("PentahoChartComponent"!=currentWidget.type){return window.confirm("Current widget is not a chart. Replace it now?")?void e(t,n,r,null):void 0}if(currentWidget.parameter){e(t,n,r,currentWidget.dashboard.getParameterValue(currentWidget.parameter))}else e(t,n,r,null)},n.ChartEditorCallback=function(){this.onOK=function(t,e,n,r){var i=pentahoDashboardController.getSelectedWidget(),o="widget"+i;pentahoDashboardController.cdfDashboard.getComponentByName(o)&&pentahoDashboardController.cdfDashboard.removeComponent(o);var a=new PentahoChartComponent;a.name=o,a.GUID=WidgetHelper.generateGUID(),a.parameters=currentWidget.parameters,a.type="PentahoChartComponent",a.image="../getImage?image=chartbeans.png",a.executeAtStart=!0,pentahoDashboardController.addComponent(a),a.hasOwnProperty("localizedName")||(a.localizedName=window.dashboard_messages.getMessage(a.localizedName,a.defaultLabel));var s=JSON.parse(t);a.chartModel=s.chartModel;var s=JSON.parse(e);a.mqlQuery=s.MQLQuery;var s=JSON.parse(n);a.chartDataModel=s.chartDataModel;var l=[];if(a.mqlQuery.conditions){var u=WidgetHelper.getJsonMqlConditions(a.mqlQuery);l=WidgetHelper.parseParameters(u)}a.parameters||(a.parameters=[]),WidgetHelper.assignParametersIfChanged(a,l),a.htmlObject=currentWidget.htmlObject,a.name=currentWidget.name,a.refreshParameters(),currentWidget=a,PropertiesPanelHelper.initPropertiesPanel()},this.onCancel=function(){},this.onReady=function(){pho.dashboards.enableWaitCursor(!1)}},n.QueryEditorCallback=function(){this.onFinish=function(t){pho.dashboards.enableWaitCursor(!0);try{window.parent.pho.showChartEditor(null,t,null,null,new n.ChartEditorCallback)}catch(t){alert("ERROR-0017 - cannot perform action embedded in an IFrame in different domain")}},this.onCancel=function(){},this.onReady=function(){pho.dashboards.enableWaitCursor(!1)}},window.pho.fireChartEvents=function(t){for(var e in t)pentahoDashboardController.cdfDashboard.setParameter(e,t[e]);for(var e in t)pentahoDashboardController.cdfDashboard.fireChange(e,t[e])},PentahoDashboardController.registerWidgetType(new PentahoChartComponent)}),define("cdf/components/PrptComponent.ext",["../dashboard/Dashboard.ext","common-ui/util/URLEncoder","pentaho/environment"],function(t,e,n){return{getReport:function(r,i,o){var a="string"==typeof r||r instanceof String,s=n.server.root+"api/repos/{0}/"+i,l=e.encodeRepositoryPath(a?r:t.composePath(r));return e.encode(s,l,o)}}}),define("cdf/components/PrptComponent",["./PrptComponent.ext","../Logger","../lib/jquery","amd!../lib/underscore","./BaseComponent"],function(t,e,n,r,i){return i.extend({getIframeName:function(){return this.htmlObject+"_prptFrame"},getIframe:function(){return'<iframe name="'+this.getIframeName()+'" style="width:100%;height:100%;border:0px" frameborder="0"/>'},setIframeUrl:function(t,e){t[0]&&(t[0].contentWindow.location=e)},startLoading:function(){this.loading||(this.loading=!0,this.dashboard.incrementRunningCalls())},stopLoading:function(){this.loading&&(this.loading=!1,this.dashboard.decrementRunningCalls())},update:function(){this.clear();var r=this.getOptions(),i=this.getParams(),o=this.getReportOptions();n.each(o,function(t,e){void 0!=i[t]&&delete t});var a={solution:r.solution,path:r.path,action:r.action};delete r.solution,delete r.path,delete r.action,delete o.solution,delete o.path,delete o.action;var s=this.downloadMode,l=r.showParameters?"viewer":"report";if(null==s){var u=r["output-target"];s=!(-1!=u.indexOf("html")&&-1==u.indexOf("mime-message")||-1!=u.indexOf("text"))}if(r["dashboard-mode"]){r.showParameters&&e.log("showParameters not supported with IFrame = False");var c=this.usePost?"POST":"GET",h=t.getReport(a,"report",{ts:(new Date).getTime()});n.each(o,function(t,e){void 0==i[t]&&(i[t]=e)});var d=this;n.ajax({url:h,type:c,data:i,dataType:"html",success:function(t){n("#"+d.htmlObject).html(t)}})}else{var f=n(this.getIframe()),p=n("#"+this.htmlObject);if(p.empty(),f=f.appendTo(p),this.autoResize&&(null==this._sHeight?(this._sHeight=p.height(),this._sWidth=p.width()):(p.height(this._sHeight),p.width(this._sWidth))),this.usePost){n.each(r,function(t,e){void 0==i[t]&&(i[t]=e)});var h=t.getReport(a,l,{ts:(new Date).getTime()});this._postToUrl(p,f,h,i,this.getIframeName())}else{n.extend(r,{ts:(new Date).getTime()});var h=t.getReport(a,l,r);r.showParameters&&this.autoResize&&(e.log("PrptComponent: autoResize disabled because showParameters=true"),this.autoResize=!1),this.startLoading();var d=this;f.load(function(){if(r.showParameters){var t=n(this.contentWindow.document.body),e=t.find("#reportContent");e.load(function(){d.autoResize&&d._resizeToReportFrame(e[0],p,r)})}d.stopLoading()}),this.setIframeUrl(f,h)}s&&this.stopLoading()}},getOptions:function(){var t={paginate:this.paginate||!1,showParameters:this.showParameters||!1,autoSubmit:this.autoSubmit||this.executeAtStart||!1,"dashboard-mode":void 0!=this.iframe&&!this.iframe,solution:this.solution,path:this.path,action:this.action,renderMode:"REPORT",htmlProportionalWidth:!1};this.paginate?(t["output-target"]="table/html;page-mode=page",t["accept-page"]=0):(t["output-target"]="table/html;page-mode=stream",t["accept-page"]=-1);var e=this;return r.each(this.parameters,function(n,r){var i=e.extractParameter(n);t[i.name]=i.value}),t},getParams:function(){var t={};this.paginate?(t["output-target"]="table/html;page-mode=page",t["accept-page"]=0):(t["output-target"]="table/html;page-mode=stream",t["accept-page"]=-1);var e=this;return r.each(this.parameters,function(n,r){var i=e.extractParameter(n);t[i.name]=i.value}),t},extractParameter:function(t){var n,i=t[0],o=t[1];try{n=this.dashboard.getParameterValue(o)}catch(t){var a;a=!r.isObject(o)||r.isFunction(o)?o:JSON.stringify(o),e.log("extractParameter detected static parameter "+i+"="+a+". The parameter will be used as value instead its value obtained from getParameterValue"),n=o}return null==n&&3==t.length?n=t[2]:void 0===n&&(n=o),r.isFunction(n)&&(n=n()),{name:i,value:n}},getReportOptions:function(){var t={paginate:this.paginate||!1,showParameters:this.showParameters||!1,autoSubmit:this.autoSubmit||this.executeAtStart||!1,"dashboard-mode":void 0!=this.iframe&&!this.iframe,solution:this.solution,path:this.path,name:this.action,renderMode:"REPORT",htmlProportionalWidth:!1,"accepted-page":-1};return this.paginate?(t["output-target"]="table/html;page-mode=page",t["accept-page"]=0):(t["output-target"]="table/html;page-mode=stream",t["accept-page"]=-1),t},_postToUrl:function(t,e,n,r,i){this.startLoading();var o=this._getParamsAsForm(document,n,r,this.getIframeName());t[0].appendChild(o);var a=this;e.load(function(){a.autoResize&&a._resizeToReportFrame(e[0],t,r),a.stopLoading()}),o.submit()},_resizeToReportFrame:function(t,r,i){var o=i["output-target"],a=function(t){return-1!=t.indexOf("html")&&-1==t.indexOf("mime")};try{var s=t.contentWindow.document;if(t.contentWindow.document){var l=null;if(a(o)||function(t){return-1!=t.indexOf("text")}(o)?l=s.body:function(t){return-1!=t.indexOf("xml")}(o)&&(l=s.firstChild),null!=l){var u=0,c=0;if(a(o)){var h=n(l);u=h.outerHeight(!0)-h.outerHeight(!1),c=h.outerWidth(!0)-h.outerWidth(!1)}r.height(l.scrollHeight+u),r.width(l.scrollWidth+c)}}}catch(t){e.log(t)}},_getParamsAsForm:function(t,e,r,i){var o=t.createElement("form");o.setAttribute("method","post"),o.setAttribute("action",e),o.setAttribute("target",i);for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];if(n.isArray(s))for(var l=0;l<s.length;l++){var u=t.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",a),u.setAttribute("value",s[l]),o.appendChild(u)}else{var u=t.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",a),u.setAttribute("value",s),o.appendChild(u)}}return o}})}),define("dashboards/widget-prpt",["cdf/components/PrptComponent","common-ui/util/URLEncoder","dashboards/oss-module","dashboards/pentaho-dashboard-controller"],function(PrptComponent,Encoder){var prptiIcon="../../../../../repos/pentaho-interactive-reporting/resources/images/prptiFileType.png";PentahoPrptComponent=PrptComponent.extend({staticParameters:!0,type:"PentahoPrptComponent",iconImgSrc:"../../../../../repos/reporting/reportviewer/images/prptFileType.png",executeAtStart:!0,options:{showParameters:!1},isDirty:!1,_iframe:null,setDirty:function(t){this.isDirty=t},getOutputParameters:function(){return this.outputParameters},setOutputParameters:function(t){for(var e=0;e<t.length;e++)this.setColumnContentLinkStatus(e,OutputParametersHelper.isParamEnabled(t[e]))},setColumnContentLinkStatus:function(t,e){if(this.outputParameters&&this.outputParameters.length>t){this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]=e}},escapeCharacters:function(t){return-1!=t.toString().indexOf("~")&&(t=t.replace(new RegExp("~","g"),"%7E")),-1!=t.toString().indexOf("!")&&(t=t.replace(new RegExp("!","g"),"%21")),-1!=t.toString().indexOf("'")&&(t=t.replace(new RegExp("'","g"),"%27")),t},updateDashboardMode:function(t){var e=this.genXaction(),n=(e.replace(/\//g,":"),CONTEXT_PATH+"api/repos/reporting"),r=this;$.ajax({url:n,data:t,dataType:"html",success:function(t){$("#"+r.htmlObject).html(t)}})},updateReportMode:function(t){var e=this.genXaction(),n=":"+Encoder.encodeRepositoryPath(e),r=this,i=Encoder.encode(CONTEXT_PATH+"api/repos/{0}/prpt.viewer",[n]),o=function(t,e){for(var n=[],r=0;r<e.length;r++)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[r]));return n},a=[];$.each(t,function(t,e){if(null!=e&&"NIL"!=e){var n;if("object"==typeof e)n=o(t,e).join("&");else{if("::cl"===t)return;n=encodeURIComponent(t)+"="+r.escapeCharacters(encodeURIComponent(e))}a.push(n)}});var s,l,u,c,h=this.outputParameters,d=h?h.length:0;for(l=0;l<d;l++)s=h[l],s.length<3||!s[1]||(u="::cl=",c=s[2],c.indexOf("$")>0&&(c=c.substring(c.indexOf("$")+1)),c&&c.length&&a.push(u+encodeURIComponent(c)));var f=i+"?"+a.join("&");setTimeout(function(){if(r._iframe&&r._iframe.contentWindow){var t=$(r._iframe);t.empty(),t.attr("src",f)}else{r._iframe=document.createElement("iframe");var t=$(r._iframe);t.attr("style","width:100%;height:100%;border:0px"),t.attr("frameborder","0"),t.attr("border","0"),t.attr("src",f),$("#"+r.htmlObject).html(t)}})},update:function(){this.clear();var t=this.getOptions();t.showParameters=!1,t["dashboard-mode"]?this.updateDashboardMode(t):this.updateReportMode(t)},print:function(t){var e=document.getElementById(this.htmlObject),n=e.getElementsByTagName("IFRAME").item(0),r=n.contentDocument,t=r.title;n=r.getElementsByTagName("IFRAME").item(0);var i=n.src;i=i.replace(/output-target=table%2Fhtml%3Bpage-mode%3Dpage/g,"output-target=table%2Fhtml%3Bpage-mode%3Dstream"),$.ajax({url:i,dataType:"html",success:function(e){e=e.replace(/<title>.+<\/title>/gi,"<title>"+t+"</title>"),e=e.replace(/<\/body>/g,'<script type="text/javascript">setTimeout("print();",100);<\/script></body>');var n=window.open("","_blank");r=n.document,r.open(),r.write(e),r.close()}})},setSolutionPathAction:function(t,e,n,r){this.solution=t,this.path=e,this.action=n;var i=this.genXaction(),o=this,a=":"+Encoder.encodeRepositoryPath(i);o.paramServiceUrl=Encoder.encode(CONTEXT_PATH+"api/repos/{0}/parameter?frameless=true&showParameters=false&renderMode=PARAMETER",[a]),r&&r.onfinish()},getOptions:function(){var t={"dashboard-mode":void 0!=this.iframe&&!this.iframe,"output-target":"table/html;page-mode=stream",showParameters:!1};return $.map(this.parameters,function(e){if("dashboard-mode"==e[0]||"solution"==e[0]||"path"==e[0]||"action"==e[0]||"output-target"==e[0]||"showParameters"==e[0])t[e[0]]=""==e[1]?e[2]:pentahoDashboardController.cdfDashboard.getParameterValue(e[1]),"NIL"==t[e[0]]&&(t[e[0]]=e[2]);else if(t[e[0]])if($.isArray(t[e[0]])){var n=""==e[1]?e[2]:pentahoDashboardController.cdfDashboard.getParameterValue(e[1]);"NIL"==n&&(n=e[2]),t[e[0]].push(n)}else{var r=[t[e[0]]],n=""==e[1]?e[2]:pentahoDashboardController.cdfDashboard.getParameterValue(e[1]);"NIL"==n&&(n=e[2]),r.push(n),t[e[0]]=r}else{var n=""==e[1]?e[2]:pentahoDashboardController.cdfDashboard.getParameterValue(e[1]);"NIL"==n&&(n=e[2]),t[e[0]]=n}}),t},genXaction:function(){var t=null==this.solution?"":this.solution;return null!=this.path&&(t.length>0&&"/"!=t.substr(t.length-1,1)&&(t+="/"),t+=this.path),
null!=this.action&&(t.length>0&&"/"!=t.substr(t.length-1,1)&&(t+="/"),t+=this.action),t},resolveOutParams:function(outputParameters){if(!outputParameters)return[];if(outputParameters.length)return outputParameters;for(var params=[],ok=!0,i=0;ok;){var param=eval("outputParameters.parameter"+i);if(void 0!==param){ok=!0,i++;var id=param.name;void 0!==param.id&&(id=param.id),params.push([param.name,param.enabled,id])}else ok=!1}return params},refreshParameters:function(){this.staticParameters=!0;var t=this;this.xactionPath.match(/prpti$/)&&(this.iconImgSrc=prptiIcon),this.paramExtraInfo=[];var e=!1,n=[];$.ajax({url:t.paramServiceUrl,success:function(r){$("parameter",r).each(function(){var r=$(this).find("attribute[name=hidden]").eq(0).attr("value");if(r&&"true"==r){var i=$(this).find("attribute").length,o=$(this).find("attribute[name=role]").length,a=$(this).find("attribute[name=role]").eq(0).attr("value");if(i!=o+$(this).find("attribute[name=parameter-render-type]").length+1||"user"!=a)return}var s=$(this).attr("name");"output-target"==s&&(e=!0);var l=($(this).find("attribute[name=label]").eq(0).attr("value"),$(this).find("values").find("value[selected=true]")),u=$(this).attr("is-mandatory");if(l&&l.length>0)for(var c=0;c<l.length;c++){var h=$(this).find("values").find("value[selected=true]").eq(c).attr("value");void 0==h&&(h=""),"output-target"==s&&""==h&&(h="text/html"),n.push([s,"",h]),t.paramExtraInfo.push(new PrptHelper.ParameterExtraInfo(s,u))}else n.push([s,"",""]),t.paramExtraInfo.push(new PrptHelper.ParameterExtraInfo(s,u))}),e||n.push(["output-target","","table/html;page-mode=page"]),WidgetHelper.mergeParameters(t,n),WidgetHelper.mergeOutputParameters(t,r)},type:"GET",async:!1,mimeType:"text/xml",dataType:"xml"})},clear:function(){try{this._iframe&&this._iframe.contentWindow&&this._iframe.contentWindow.onbeforeunload&&(this._iframe.contentWindow.onbeforeunload(),this._iframe.contentWindow.onbeforeunload=null)}catch(t){}},getGUID:function(){return null==this.GUID&&(this.GUID=WidgetHelper.generateGUID()),this.GUID}}),PentahoPrptComponent.newInstance=function(t,e){try{var n=pentahoDashboardController.getSelectedWidget(),r="widget"+n,i=pentahoDashboardController.cdfDashboard.getComponentByName(r);i&&"PentahoPrptComponent"==i.type?(i.clear(),i.parameters=[]):(i&&pentahoDashboardController.cdfDashboard.removeComponent(i),i=new PentahoPrptComponent,i.GUID=WidgetHelper.generateGUID(),i.localizedName=e,i.type="PentahoPrptComponent",i.iframe=!0,i.autoSubmit=!0,i.parameters=[],i.name=r,i.htmlObject="content-area-Panel_"+n,pentahoDashboardController.addComponent(i));var o=XActionHelper.parseXaction(t);t.match(/prpti$/)&&(i.iconImgSrc=prptiIcon),i.xactionPath=t,i.setSolutionPathAction(o[0],o[1],o[2],new function(){this.onfinish=function(){i.refreshParameters(),currentWidget=i;var t=XActionHelper.genXaction(i.solution,i.path,i.action);PropertiesPanelHelper.initPropertiesPanel(t)}})}catch(t){alert(t)}},PrptHelper={},PrptHelper.ParameterExtraInfo=function(t,e){this.id=t,this.required=e},PentahoDashboardController.registerComponentForFileType("prpt",PentahoPrptComponent),PentahoDashboardController.registerComponentForFileType("prpti",PentahoPrptComponent)}),define("dashboards/widget-url",["cdf/components/BaseComponent","dashboards/oss-module","dashboards/pentaho-dashboard-controller"],function(t){PentahoUrlComponent=t.extend({outputParameters:[],update:function(){var t=document.getElementById(this.htmlObject);if(t){this.url||(this.url="about:blank");var e=this.url;this.parameters||(this.parameters="");for(var n=0;n<this.parameters.length;n++){var r=this.parameters[n][0],i=""==this.parameters[n][1]?this.parameters[n][2]:this.dashboard.getParameterValue(this.parameters[n][1]);"NIL"==i&&(i=this.parameters[n][2]);var o=new RegExp("\\$?\\{"+r+"\\}","g");e=e.replace(o,encodeURIComponent(i+"").replace(/'/g,"%27"))}pentahoGet("service","command=checkWhiteList&url="+e,function(n){"Bad"==n&&(alert(pho_messages.getMessage("DashboardWizard.URL_NOT_ALLOWED","URL not allowed. Please contact your administrator.")),e="about:blank"),t.innerHTML="<iframe style='width:100%;height:100%;border:0px' frameborder='0' border='0' src='"+e+"'/>"});var a=this.htmlObject.substring(this.htmlObject.length-1);pentahoDashboardController.setEditContentEnabledById(a,!0)}},createWidget:function(){var t=this;window.gwtPrompt(pho_messages.getMessage("website_address")+": ",{onOk:function(e){t.createUrlWidgetWithUrl(e)},onCancel:function(){},onError:function(e){t.createUrlWidgetWithUrl(url)}},{title:"User Input Required"})},editWidget:function(){var t=this;window.gwtPrompt(pho_messages.getMessage("website_address")+": ",{onOk:function(e){t.createUrlWidgetWithUrl(e)},onCancel:function(){},onError:function(e){t.createUrlWidgetWithUrl(url)}},{title:"Enter URL",defaultValue:currentWidget.url||""})},createUrlWidgetWithUrl:function(t){if(t){-1===t.indexOf(".")&&(t="http://www."+t+".com"),0!==t.indexOf("http")&&(t="http://"+t);var e=pentahoDashboardController.getSelectedWidget(),n="widget"+e;pentahoDashboardController.cdfDashboard.getComponentByName(n)&&pentahoDashboardController.cdfDashboard.removeComponent(n);var r=new PentahoUrlComponent;r.GUID=WidgetHelper.generateGUID(),r.htmlObject=currentWidget.htmlObject,r.parameters=currentWidget.parameters,r.name=n,r.type="PentahoUrlComponent",currentWidget=r,pentahoDashboardController.addComponent(r),currentWidget.localizedName=window.dashboard_messages.getMessage(currentWidget.localizedName,currentWidget.defaultLabel),r.parameters||(r.parameters=[]);var i=[],o=t.match(/\$?\{([^\}]*)\}/g);if(o){var a,s,l=o.length;for(a=0;a<l;a++)s=o[a],i.push([s.substring(s.indexOf("{")+1,s.indexOf("}")),"",""])}WidgetHelper.assignParametersIfChanged(r,i),r.url=t,PropertiesPanelHelper.initPropertiesPanel(),currentWidget.update()}},getGUID:function(){return null==this.GUID&&(this.GUID=WidgetHelper.generateGUID()),this.GUID},type:"PentahoUrlComponent",executeAtStart:!0,iconClass:"urlIcon",iconImgSrc:"../../themes/"+active_theme+"/images/urlIcon.png",localizedName:"url_component_lbl",defaultLabel:"URL"})}),define("cdf/components/XactionComponent",["./XactionComponent.ext","../lib/jquery","./BaseComponent"],function(t,e,n){return n.extend({update:function(){var n=this;try{if(void 0!==this.iframe&&this.iframe){for(var r='<iframe id="iframe_'+this.htmlObject+'" frameborder="0" height="100%" width="100%" />',i=e(r),o=t.getCdfXaction(this.path,this.action,this.solution)+"&wrapper=false",a=new Array(this.parameters.length),s=0,l=a.length;s<l;s++){var u="&"+encodeURIComponent(this.parameters[s][0])+"=",c="";""==this.parameters[s][1]?c=encodeURIComponent(this.parameters[s][2]):"NIL"==(c=encodeURIComponent(this.dashboard.getParameterValue(this.parameters[s][1])))&&(c=encodeURIComponent(this.parameters[s][2])),o+=u+c}this.loading||(this.loading=!0,this.dashboard.incrementRunningCalls()),i.load(function(){this.contentWindow.document.body.innerHTML&&(n.loading=!1,n.dashboard.decrementRunningCalls())}),e("#"+this.htmlObject).empty().append(i),i[0].contentWindow.location=o}else{for(var a=new Array(this.parameters?this.parameters.length:0),s=0,l=a.length;s<l;s++){var h=this.parameters[s][0],d=""==this.parameters[s][1]?this.parameters[s][2]:this.dashboard.getParameterValue(this.parameters[s][1]);"NIL"==this.value&&(this.value=this.parameters[s][2]),a[s]=[h,d]}if(void 0===this.serviceMethod||"ServiceAction"==this.serviceMethod){var f=this.dashboard.callPentahoAction(n,this.solution,this.path,this.action,a,null);null!=f&&e("#"+n.htmlObject).html(f.find("ExecuteActivityResponse:first-child").text())}else{var p=this.dashboard.pentahoServiceAction(this.serviceMethod,"html",this.solution,this.path,this.action,a,null);e("#"+n.htmlObject).html(p)}}}catch(t){}}})}),define("dashboards/widget-xaction",["cdf/components/XactionComponent","dashboards/pentaho-dashboard-controller","dashboards/oss-module"],function(t){DashboardXactionComponent=t.extend({iconImgSrc:"../../../../../repos/xaction/resources/images/xaction_file_image.png",contentLinkingCustomizationDisabled:!0,updateParameters:function(){},isDirty:!1,setDirty:function(t){this.isDirty=t},refreshParameters:function(){var t=null;try{document.body.style.cursor="wait";var e=pentahoGet("service","command=xactionparams&xactionref="+this.xactionPath,null,"text/text");t=JSON.parse("{"+e+"}")}catch(t){}document.body.style.cursor="default";var n=[],r=null,i=[],o=[];if(t){r=t.xaction.properties.contentLinkParameter,contentLinkParamDefault=t.xaction.properties.contentLinkParameterDefault;var a=t.xaction.properties.contentLinkParameters?t.xaction.properties.contentLinkParameters.items:null;if(a)for(var s=0;s<a.length;s++){var l=a[s].parameter.properties,u=OutputParametersHelper.getOutParameterUID(this,l.name),c=OutputParametersHelper.newParam(l.name,!0,u);i.push(c),o.push(l.value)}var h,d=t.xaction.properties.parameters.items;for(h=0;h<d.length;h++){for(var l=d[h].parameter.properties,f=l.name,p=l.value,m=!1,s=0;s<n.length;s++)n[s][0]==f&&(m=!0);m||n.push([f,"",p])}}if(WidgetHelper.mergeParameters(this,n),i){this.outputParameters=i;for(var s=0;s<i.length;s++)if(null!=o[s]){var g=o[s],y=i[s][OutputParametersHelper.OUT_PARAMS_ID_IDX];pentahoDashboardController.setParameterAndDefaultValue(y,y,g)}}else if(r){var v=this.parameter;this.parameter=r,contentLinkParamDefault&&pentahoDashboardController.setParameterAndDefaultValue(v,r,contentLinkParamDefault)}},getOutputParameters:function(){return this.outputParameters},setOutputParameters:function(t){t&&t.length==this.outputParameters.length&&(this.outputParameters=t)},setColumnContentLinkStatus:function(t,e){if(this.outputParameters&&this.outputParameters.length>t){var n=this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX];if(e&&!n){var r=this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ID_IDX],i=this.getValue(r);pentahoDashboardController.setParameterAndDefaultValue(null,r,i)}this.outputParameters[t][OutputParametersHelper.OUT_PARAMS_ENABLED_IDX]=e}},getGUID:function(){return null==this.GUID&&(this.GUID=WidgetHelper.generateGUID()),this.GUID}}),t.newInstance=function(t,e){if(t){var n=pentahoDashboardController.getSelectedWidget(),r="widget"+n,i=pentahoDashboardController.cdfDashboard.getComponentByName(r);i&&pentahoDashboardController.cdfDashboard.removeComponent(r),i=new DashboardXactionComponent,i.GUID=WidgetHelper.generateGUID(),0==t.indexOf("/pentaho-solutions/")&&(t=t.substring("/pentaho-solutions/".length)),i.xactionPath=t,i.localizedName=e,i.type="DashboardXactionComponent",i.iframe=!0,i.executeAtStart=!0;var o=XActionHelper.parseXaction(t);i.solution=o[0],i.path=t,i.action=o[2];var n=pentahoDashboardController.getSelectedWidget();i.name=r,i.htmlObject="content-area-Panel_"+n,i.refreshParameters(),pentahoDashboardController.addComponent(i),currentWidget=i;var a=XActionHelper.genXaction(i.solution,i.path,i.action);PropertiesPanelHelper.initPropertiesPanel(a),PropertiesPanelHelper.updateContentLinkingPanel(currentWidget.name),pentahoDashboardController.setEditContentEnabledById(n,!0)}},PentahoDashboardController.registerComponentForFileType("xaction",t),PentahoDashboardController.registerComponentForFileType("analysisview.xaction",t),PentahoDashboardController.registerComponentForFileType("waqr.xaction",t)}),define("dashboards/dashboard-module",["dashboards/oss-module","dashboards/pentaho-ajax","dashboards/pentaho-dashboard-controls","dashboards/pentaho-dashboard-main","dashboards/pentaho-dashboard-xul","dashboards/pentaho-json","dashboards/pentaho-ajax","dashboards/widget-chart","dashboards/widget-prpt","dashboards/widget-url","dashboards/widget-table","dashboards/widget-xaction"],function(){}),define("dashboard-module",function(){});